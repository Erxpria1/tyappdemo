(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function TE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kh={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function Gw(){if(g0)return Il;g0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return Il.Fragment=e,Il.jsx=t,Il.jsxs=t,Il}var y0;function Hw(){return y0||(y0=1,Kh.exports=Gw()),Kh.exports}var C=Hw(),$h={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function Yw(){if(v0)return Ne;v0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(z){return z===null||typeof z!="object"?null:(z=S&&z[S]||z["@@iterator"],typeof z=="function"?z:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,D={};function F(z,ne,Y){this.props=z,this.context=ne,this.refs=D,this.updater=Y||k}F.prototype.isReactComponent={},F.prototype.setState=function(z,ne){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ne,"setState")},F.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function j(){}j.prototype=F.prototype;function Q(z,ne,Y){this.props=z,this.context=ne,this.refs=D,this.updater=Y||k}var re=Q.prototype=new j;re.constructor=Q,O(re,F.prototype),re.isPureReactComponent=!0;var ce=Array.isArray;function le(){}var M={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function x(z,ne,Y){var ae=Y.ref;return{$$typeof:n,type:z,key:ne,ref:ae!==void 0?ae:null,props:Y}}function U(z,ne){return x(z.type,ne,z.props)}function P(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function q(z){var ne={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Y){return ne[Y]})}var N=/\/+/g;function ve(z,ne){return typeof z=="object"&&z!==null&&z.key!=null?q(""+z.key):ne.toString(36)}function De(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(le,le):(z.status="pending",z.then(function(ne){z.status==="pending"&&(z.status="fulfilled",z.value=ne)},function(ne){z.status==="pending"&&(z.status="rejected",z.reason=ne)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function W(z,ne,Y,ae,he){var Se=typeof z;(Se==="undefined"||Se==="boolean")&&(z=null);var we=!1;if(z===null)we=!0;else switch(Se){case"bigint":case"string":case"number":we=!0;break;case"object":switch(z.$$typeof){case n:case e:we=!0;break;case _:return we=z._init,W(we(z._payload),ne,Y,ae,he)}}if(we)return he=he(z),we=ae===""?"."+ve(z,0):ae,ce(he)?(Y="",we!=null&&(Y=we.replace(N,"$&/")+"/"),W(he,ne,Y,"",function(vo){return vo})):he!=null&&(P(he)&&(he=U(he,Y+(he.key==null||z&&z.key===he.key?"":(""+he.key).replace(N,"$&/")+"/")+we)),ne.push(he)),1;we=0;var Lt=ae===""?".":ae+":";if(ce(z))for(var dt=0;dt<z.length;dt++)ae=z[dt],Se=Lt+ve(ae,dt),we+=W(ae,ne,Y,Se,he);else if(dt=R(z),typeof dt=="function")for(z=dt.call(z),dt=0;!(ae=z.next()).done;)ae=ae.value,Se=Lt+ve(ae,dt++),we+=W(ae,ne,Y,Se,he);else if(Se==="object"){if(typeof z.then=="function")return W(De(z),ne,Y,ae,he);throw ne=String(z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return we}function ue(z,ne,Y){if(z==null)return z;var ae=[],he=0;return W(z,ae,"","",function(Se){return ne.call(Y,Se,he++)}),ae}function Ee(z){if(z._status===-1){var ne=z._result;ne=ne(),ne.then(function(Y){(z._status===0||z._status===-1)&&(z._status=1,z._result=Y)},function(Y){(z._status===0||z._status===-1)&&(z._status=2,z._result=Y)}),z._status===-1&&(z._status=0,z._result=ne)}if(z._status===1)return z._result.default;throw z._result}var Oe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},qe={map:ue,forEach:function(z,ne,Y){ue(z,function(){ne.apply(this,arguments)},Y)},count:function(z){var ne=0;return ue(z,function(){ne++}),ne},toArray:function(z){return ue(z,function(ne){return ne})||[]},only:function(z){if(!P(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Ne.Activity=T,Ne.Children=qe,Ne.Component=F,Ne.Fragment=t,Ne.Profiler=r,Ne.PureComponent=Q,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},Ne.cache=function(z){return function(){return z.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(z,ne,Y){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ae=O({},z.props),he=z.key;if(ne!=null)for(Se in ne.key!==void 0&&(he=""+ne.key),ne)!V.call(ne,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ne.ref===void 0||(ae[Se]=ne[Se]);var Se=arguments.length-2;if(Se===1)ae.children=Y;else if(1<Se){for(var we=Array(Se),Lt=0;Lt<Se;Lt++)we[Lt]=arguments[Lt+2];ae.children=we}return x(z.type,he,ae)},Ne.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Ne.createElement=function(z,ne,Y){var ae,he={},Se=null;if(ne!=null)for(ae in ne.key!==void 0&&(Se=""+ne.key),ne)V.call(ne,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(he[ae]=ne[ae]);var we=arguments.length-2;if(we===1)he.children=Y;else if(1<we){for(var Lt=Array(we),dt=0;dt<we;dt++)Lt[dt]=arguments[dt+2];he.children=Lt}if(z&&z.defaultProps)for(ae in we=z.defaultProps,we)he[ae]===void 0&&(he[ae]=we[ae]);return x(z,Se,he)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(z){return{$$typeof:d,render:z}},Ne.isValidElement=P,Ne.lazy=function(z){return{$$typeof:_,_payload:{_status:-1,_result:z},_init:Ee}},Ne.memo=function(z,ne){return{$$typeof:p,type:z,compare:ne===void 0?null:ne}},Ne.startTransition=function(z){var ne=M.T,Y={};M.T=Y;try{var ae=z(),he=M.S;he!==null&&he(Y,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(le,Oe)}catch(Se){Oe(Se)}finally{ne!==null&&Y.types!==null&&(ne.types=Y.types),M.T=ne}},Ne.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ne.use=function(z){return M.H.use(z)},Ne.useActionState=function(z,ne,Y){return M.H.useActionState(z,ne,Y)},Ne.useCallback=function(z,ne){return M.H.useCallback(z,ne)},Ne.useContext=function(z){return M.H.useContext(z)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(z,ne){return M.H.useDeferredValue(z,ne)},Ne.useEffect=function(z,ne){return M.H.useEffect(z,ne)},Ne.useEffectEvent=function(z){return M.H.useEffectEvent(z)},Ne.useId=function(){return M.H.useId()},Ne.useImperativeHandle=function(z,ne,Y){return M.H.useImperativeHandle(z,ne,Y)},Ne.useInsertionEffect=function(z,ne){return M.H.useInsertionEffect(z,ne)},Ne.useLayoutEffect=function(z,ne){return M.H.useLayoutEffect(z,ne)},Ne.useMemo=function(z,ne){return M.H.useMemo(z,ne)},Ne.useOptimistic=function(z,ne){return M.H.useOptimistic(z,ne)},Ne.useReducer=function(z,ne,Y){return M.H.useReducer(z,ne,Y)},Ne.useRef=function(z){return M.H.useRef(z)},Ne.useState=function(z){return M.H.useState(z)},Ne.useSyncExternalStore=function(z,ne,Y){return M.H.useSyncExternalStore(z,ne,Y)},Ne.useTransition=function(){return M.H.useTransition()},Ne.version="19.2.3",Ne}var _0;function $m(){return _0||(_0=1,$h.exports=Yw()),$h.exports}var de=$m();const Jw=TE(de);var Qh={exports:{}},xl={},Xh={exports:{}},Wh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Kw(){return T0||(T0=1,(function(n){function e(W,ue){var Ee=W.length;W.push(ue);e:for(;0<Ee;){var Oe=Ee-1>>>1,qe=W[Oe];if(0<r(qe,ue))W[Oe]=ue,W[Ee]=qe,Ee=Oe;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var ue=W[0],Ee=W.pop();if(Ee!==ue){W[0]=Ee;e:for(var Oe=0,qe=W.length,z=qe>>>1;Oe<z;){var ne=2*(Oe+1)-1,Y=W[ne],ae=ne+1,he=W[ae];if(0>r(Y,Ee))ae<qe&&0>r(he,Y)?(W[Oe]=he,W[ae]=Ee,Oe=ae):(W[Oe]=Y,W[ne]=Ee,Oe=ne);else if(ae<qe&&0>r(he,Ee))W[Oe]=he,W[ae]=Ee,Oe=ae;else break e}}return ue}function r(W,ue){var Ee=W.sortIndex-ue.sortIndex;return Ee!==0?Ee:W.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var g=[],p=[],_=1,T=null,S=3,R=!1,k=!1,O=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function re(W){for(var ue=t(p);ue!==null;){if(ue.callback===null)s(p);else if(ue.startTime<=W)s(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(p)}}function ce(W){if(O=!1,re(W),!k)if(t(g)!==null)k=!0,le||(le=!0,q());else{var ue=t(p);ue!==null&&De(ce,ue.startTime-W)}}var le=!1,M=-1,V=5,x=-1;function U(){return D?!0:!(n.unstable_now()-x<V)}function P(){if(D=!1,le){var W=n.unstable_now();x=W;var ue=!0;try{e:{k=!1,O&&(O=!1,j(M),M=-1),R=!0;var Ee=S;try{t:{for(re(W),T=t(g);T!==null&&!(T.expirationTime>W&&U());){var Oe=T.callback;if(typeof Oe=="function"){T.callback=null,S=T.priorityLevel;var qe=Oe(T.expirationTime<=W);if(W=n.unstable_now(),typeof qe=="function"){T.callback=qe,re(W),ue=!0;break t}T===t(g)&&s(g),re(W)}else s(g);T=t(g)}if(T!==null)ue=!0;else{var z=t(p);z!==null&&De(ce,z.startTime-W),ue=!1}}break e}finally{T=null,S=Ee,R=!1}ue=void 0}}finally{ue?q():le=!1}}}var q;if(typeof Q=="function")q=function(){Q(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ve=N.port2;N.port1.onmessage=P,q=function(){ve.postMessage(null)}}else q=function(){F(P,0)};function De(W,ue){M=F(function(){W(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var Ee=S;S=ue;try{return W()}finally{S=Ee}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ee=S;S=W;try{return ue()}finally{S=Ee}},n.unstable_scheduleCallback=function(W,ue,Ee){var Oe=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Oe+Ee:Oe):Ee=Oe,W){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=Ee+qe,W={id:_++,callback:ue,priorityLevel:W,startTime:Ee,expirationTime:qe,sortIndex:-1},Ee>Oe?(W.sortIndex=Ee,e(p,W),t(g)===null&&W===t(p)&&(O?(j(M),M=-1):O=!0,De(ce,Ee-Oe))):(W.sortIndex=qe,e(g,W),k||R||(k=!0,le||(le=!0,q()))),W},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(W){var ue=S;return function(){var Ee=S;S=ue;try{return W.apply(this,arguments)}finally{S=Ee}}}})(Wh)),Wh}var E0;function $w(){return E0||(E0=1,Xh.exports=Kw()),Xh.exports}var Zh={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Qw(){if(S0)return tn;S0=1;var n=$m();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},tn.flushSync=function(g){var p=c.T,_=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=_,s.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):_==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);s.d.L(g,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=d(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},tn.requestFormReset=function(g){s.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var A0;function Xw(){if(A0)return Zh.exports;A0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zh.exports=Qw(),Zh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function Ww(){if(C0)return xl;C0=1;var n=$w(),e=$m(),t=Xw();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,u=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(u=y.return,u!==null){a=u;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===u)return g(y),o;v=v.sibling}throw Error(s(188))}if(a.return!==u.return)a=y,u=v;else{for(var A=!1,I=y.child;I;){if(I===a){A=!0,a=y,u=v;break}if(I===u){A=!0,u=y,a=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===a){A=!0,a=v,u=y;break}if(I===u){A=!0,u=v,a=y;break}I=I.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function _(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=_(i),o!==null)return o;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=P&&i[P]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case O:return"Fragment";case F:return"Profiler";case D:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case Q:return i.displayName||"Context";case j:return(i._context.displayName||"Context")+".Consumer";case re:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return o=i.displayName||null,o!==null?o:ve(i.type)||"Memo";case V:o=i._payload,i=i._init;try{return ve(i(o))}catch{}}return null}var De=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Oe=[],qe=-1;function z(i){return{current:i}}function ne(i){0>qe||(i.current=Oe[qe],Oe[qe]=null,qe--)}function Y(i,o){qe++,Oe[qe]=i.current,i.current=o}var ae=z(null),he=z(null),Se=z(null),we=z(null);function Lt(i,o){switch(Y(Se,o),Y(he,i),Y(ae,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?qv(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=qv(o),i=Bv(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ne(ae),Y(ae,i)}function dt(){ne(ae),ne(he),ne(Se)}function vo(i){i.memoizedState!==null&&Y(we,i);var o=ae.current,a=Bv(o,i.type);o!==a&&(Y(he,i),Y(ae,a))}function ar(i){he.current===i&&(ne(ae),ne(he)),we.current===i&&(ne(we),Al._currentValue=Ee)}var lr,ur;function gi(i){if(lr===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);lr=o&&o[1]||"",ur=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lr+i+ur}var Aa=!1;function _o(i,o){if(!i||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var $=Z}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(Z){$=Z}i.call(ie.prototype)}}else{try{throw Error()}catch(Z){$=Z}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&$&&typeof Z.stack=="string")return[Z.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),A=v[0],I=v[1];if(A&&I){var L=A.split(`
`),K=I.split(`
`);for(y=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(u===L.length||y===K.length)for(u=L.length-1,y=K.length-1;1<=u&&0<=y&&L[u]!==K[y];)y--;for(;1<=u&&0<=y;u--,y--)if(L[u]!==K[y]){if(u!==1||y!==1)do if(u--,y--,0>y||L[u]!==K[y]){var ee=`
`+L[u].replace(" at new "," at ");return i.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",i.displayName)),ee}while(1<=u&&0<=y);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?gi(a):""}function Ca(i,o){switch(i.tag){case 26:case 27:case 5:return gi(i.type);case 16:return gi("Lazy");case 13:return i.child!==o&&o!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return _o(i.type,!1);case 11:return _o(i.type.render,!1);case 1:return _o(i.type,!0);case 31:return gi("Activity");default:return""}}function wa(i){try{var o="",a=null;do o+=Ca(i,a),a=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ct=Object.prototype.hasOwnProperty,Ot=n.unstable_scheduleCallback,Es=n.unstable_cancelCallback,Qf=n.unstable_shouldYield,ou=n.unstable_requestPaint,an=n.unstable_now,To=n.unstable_getCurrentPriorityLevel,Ra=n.unstable_ImmediatePriority,Ia=n.unstable_UserBlockingPriority,Ss=n.unstable_NormalPriority,Xf=n.unstable_LowPriority,ru=n.unstable_IdlePriority,au=n.log,lu=n.unstable_setDisableYieldValue,Wn=null,Jt=null;function Vn(i){if(typeof au=="function"&&lu(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Wn,i)}catch{}}var vt=Math.clz32?Math.clz32:cu,uu=Math.log,cr=Math.LN2;function cu(i){return i>>>=0,i===0?32:31-(uu(i)/cr|0)|0}var yi=256,Eo=262144,wt=4194304;function vi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _i(i,o,a){var u=i.pendingLanes;if(u===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~v,u!==0?y=vi(u):(A&=I,A!==0?y=vi(A):a||(a=I&~i,a!==0&&(y=vi(a))))):(I=u&~v,I!==0?y=vi(I):A!==0?y=vi(A):a||(a=u&~i,a!==0&&(y=vi(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function Zn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Wf(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(){var i=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),i}function Ti(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function So(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Zf(i,o,a,u,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,L=i.expirationTimes,K=i.hiddenUpdates;for(a=A&~a;0<a;){var ee=31-vt(a),ie=1<<ee;I[ee]=0,L[ee]=-1;var $=K[ee];if($!==null)for(K[ee]=null,ee=0;ee<$.length;ee++){var Z=$[ee];Z!==null&&(Z.lane&=-536870913)}a&=~ie}u!==0&&Ao(i,u,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~o))}function Ao(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-vt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function xa(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var u=31-vt(a),y=1<<u;y&o|i[u]&o&&(i[u]|=o),a&=~y}}function ba(i,o){var a=o&-o;return a=(a&42)!==0?1:Co(a),(a&(i.suspendedLanes|o))!==0?0:a}function Co(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function du(){var i=ue.p;return i!==0?i:(i=window.event,i===void 0?32:u0(i.type))}function jn(i,o){var a=ue.p;try{return ue.p=i,o()}finally{ue.p=a}}var ei=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ei,zt="__reactProps$"+ei,Ei="__reactContainer$"+ei,fr="__reactEvents$"+ei,jf="__reactListeners$"+ei,hu="__reactHandles$"+ei,mu="__reactResources$"+ei,Si="__reactMarker$"+ei;function dr(i){delete i[Rt],delete i[zt],delete i[fr],delete i[jf],delete i[hu]}function Ai(i){var o=i[Rt];if(o)return o;for(var a=i.parentNode;a;){if(o=a[Ei]||a[Rt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Kv(i);i!==null;){if(a=i[Rt])return a;i=Kv(i)}return o}i=a,a=i.parentNode}return null}function Pn(i){if(i=i[Rt]||i[Ei]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function An(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ci(i){var o=i[mu];return o||(o=i[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function It(i){i[Si]=!0}var Na=new Set,Ma={};function wi(i,o){Ri(i,o),Ri(i+"Capture",o)}function Ri(i,o){for(Ma[i]=o,i=0;i<o.length;i++)Na.add(o[i])}var Da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Va={},Pa={};function pu(i){return Ct.call(Pa,i)?!0:Ct.call(Va,i)?!1:Da.test(i)?Pa[i]=!0:(Va[i]=!0,!1)}function hr(i,o,a){if(pu(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function Cn(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function xt(i,o,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+u)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function As(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(i,o,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,v=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function je(i){if(!i._valueTracker){var o=As(i)?"checked":"value";i._valueTracker=Ua(i,o,""+i[o])}}function wo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),u="";return i&&(u=As(i)?i.checked?"true":"false":i.value),i=u,i!==a?(o.setValue(i),!0):!1}function Ii(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ro=/[\n"\\]/g;function hn(i){return i.replace(Ro,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function mr(i,o,a,u,y,v,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ft(o)):i.value!==""+Ft(o)&&(i.value=""+Ft(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?ka(i,A,Ft(o)):a!=null?ka(i,A,Ft(a)):u!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+Ft(I):i.removeAttribute("name")}function gu(i,o,a,u,y,v,A,I){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){je(i);return}a=a!=null?""+Ft(a):"",o=o!=null?""+Ft(o):a,I||o===i.value||(i.value=o),i.defaultValue=o}u=u??y,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),je(i)}function ka(i,o,a){o==="number"&&Ii(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Cs(i,o,a,u){if(i=i.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=o.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&u&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),o=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,u&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function yu(i,o,a){if(o!=null&&(o=""+Ft(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ft(a):""}function ws(i,o,a,u){if(o==null){if(u!=null){if(a!=null)throw Error(s(92));if(De(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),o=a}a=Ft(o),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),je(i)}function mn(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function La(i,o,a){var u=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,a):typeof a!="number"||a===0||vu.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Oa(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var y in o)u=o[y],o.hasOwnProperty(y)&&a[y]!==u&&La(i,y,u)}else for(var v in o)o.hasOwnProperty(v)&&La(i,v,o[v])}function pr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(i){return Rs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ti(){}var qa=null;function Un(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Is=null,xi=null;function Io(i){var o=Pn(i);if(o&&(i=o.stateNode)){var a=i[zt]||null;e:switch(i=o.stateNode,o.type){case"input":if(mr(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var u=a[o];if(u!==i&&u.form===i.form){var y=u[zt]||null;if(!y)throw Error(s(90));mr(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)u=a[o],u.form===i.form&&wo(u)}break e;case"textarea":yu(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Cs(i,!!a.multiple,o,!1)}}}var yr=!1;function xs(i,o,a){if(yr)return i(o,a);yr=!0;try{var u=i(o);return u}finally{if(yr=!1,(Is!==null||xi!==null)&&(dc(),Is&&(o=Is,i=xi,xi=Is=null,Io(o),i)))for(o=0;o<i.length;o++)Io(i[o])}}function ni(i,o){var a=i.stateNode;if(a===null)return null;var u=a[zt]||null;if(u===null)return null;a=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xo=!1;if(kn)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){xo=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{xo=!1}var bi=null,Ba=null,bo=null;function za(){if(bo)return bo;var i,o=Ba,a=o.length,u,y="value"in bi?bi.value:bi.textContent,v=y.length;for(i=0;i<a&&o[i]===y[i];i++);var A=a-i;for(u=1;u<=A&&o[a-u]===y[v-u];u++);return bo=y.slice(i,1<u?1-u:void 0)}function No(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function ii(){return!1}function Kt(i){function o(a,u,y,v,A){this._reactName=a,this._targetInst=y,this.type=u,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$i:ii,this.isPropagationStopped=ii,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),o}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=Kt(Qi),bs=T({},Qi,{view:0,detail:0}),Fa=Kt(bs),Ns,vr,Mi,_r=T({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Mi&&(Mi&&i.type==="mousemove"?(Ns=i.screenX-Mi.screenX,vr=i.screenY-Mi.screenY):vr=Ns=0,Mi=i),Ns)},movementY:function(i){return"movementY"in i?i.movementY:vr}}),Ga=Kt(_r),Mo=T({},_r,{dataTransfer:0}),Tu=Kt(Mo),Eu=T({},bs,{relatedTarget:0}),Do=Kt(Eu),Ha=T({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=Kt(Ha),Tr=T({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Au=Kt(Tr),Cu=T({},Qi,{data:0}),Di=Kt(Cu),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Iu[i])?!!o[i]:!1}function Ms(){return xu}var ln=T({},bs,{key:function(i){if(i.key){var o=wu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=No(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ru[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(i){return i.type==="keypress"?No(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?No(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bu=Kt(ln),Nu=T({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Kt(Nu),m=T({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),E=Kt(m),w=T({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Kt(w),H=T({},_r,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Kt(H),fe=T({},Qi,{newState:0,oldState:0}),Ve=Kt(fe),_t=[9,13,27,32],Xe=kn&&"CompositionEvent"in window,ht=null;kn&&"documentMode"in document&&(ht=document.documentMode);var Ln=kn&&"TextEvent"in window&&!ht,Vi=kn&&(!Xe||ht&&8<ht&&11>=ht),si=" ",oi=!1;function Vo(i,o){switch(i){case"keyup":return _t.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Er(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sr=!1;function hC(i,o){switch(i){case"compositionend":return Er(o);case"keypress":return o.which!==32?null:(oi=!0,si);case"textInput":return i=o.data,i===si&&oi?null:i;default:return null}}function mC(i,o){if(Sr)return i==="compositionend"||!Xe&&Vo(i,o)?(i=za(),bo=Ba=bi=null,Sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vi&&o.locale!=="ko"?null:o.data;default:return null}}var pC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!pC[i.type]:o==="textarea"}function Wp(i,o,a,u){Is?xi?xi.push(u):xi=[u]:Is=u,o=_c(o,"onChange"),0<o.length&&(a=new Ni("onChange","change",null,a,u),i.push({event:a,listeners:o}))}var Ya=null,Ja=null;function gC(i){Vv(i,0)}function Mu(i){var o=An(i);if(wo(o))return i}function Zp(i,o){if(i==="change")return o}var jp=!1;if(kn){var ed;if(kn){var td="oninput"in document;if(!td){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),td=typeof eg.oninput=="function"}ed=td}else ed=!1;jp=ed&&(!document.documentMode||9<document.documentMode)}function tg(){Ya&&(Ya.detachEvent("onpropertychange",ng),Ja=Ya=null)}function ng(i){if(i.propertyName==="value"&&Mu(Ja)){var o=[];Wp(o,Ja,i,Un(i)),xs(gC,o)}}function yC(i,o,a){i==="focusin"?(tg(),Ya=o,Ja=a,Ya.attachEvent("onpropertychange",ng)):i==="focusout"&&tg()}function vC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mu(Ja)}function _C(i,o){if(i==="click")return Mu(o)}function TC(i,o){if(i==="input"||i==="change")return Mu(o)}function EC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var wn=typeof Object.is=="function"?Object.is:EC;function Ka(i,o){if(wn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),u=Object.keys(o);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var y=a[u];if(!Ct.call(o,y)||!wn(i[y],o[y]))return!1}return!0}function ig(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sg(i,o){var a=ig(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=o&&u>=o)return{node:a,offset:o-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ig(a)}}function og(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?og(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function rg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ii(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Ii(i.document)}return o}function nd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var SC=kn&&"documentMode"in document&&11>=document.documentMode,Ar=null,id=null,$a=null,sd=!1;function ag(i,o,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||Ar==null||Ar!==Ii(u)||(u=Ar,"selectionStart"in u&&nd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$a&&Ka($a,u)||($a=u,u=_c(id,"onSelect"),0<u.length&&(o=new Ni("onSelect","select",null,o,a),i.push({event:o,listeners:u}),o.target=Ar)))}function Po(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Cr={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},od={},lg={};kn&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function Uo(i){if(od[i])return od[i];if(!Cr[i])return i;var o=Cr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in lg)return od[i]=o[a];return i}var ug=Uo("animationend"),cg=Uo("animationiteration"),fg=Uo("animationstart"),AC=Uo("transitionrun"),CC=Uo("transitionstart"),wC=Uo("transitioncancel"),dg=Uo("transitionend"),hg=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function ri(i,o){hg.set(i,o),wi(o,[i])}var Du=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},On=[],wr=0,ad=0;function Vu(){for(var i=wr,o=ad=wr=0;o<i;){var a=On[o];On[o++]=null;var u=On[o];On[o++]=null;var y=On[o];On[o++]=null;var v=On[o];if(On[o++]=null,u!==null&&y!==null){var A=u.pending;A===null?y.next=y:(y.next=A.next,A.next=y),u.pending=y}v!==0&&mg(a,y,v)}}function Pu(i,o,a,u){On[wr++]=i,On[wr++]=o,On[wr++]=a,On[wr++]=u,ad|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function ld(i,o,a,u){return Pu(i,o,a,u),Uu(i)}function ko(i,o){return Pu(i,null,null,o),Uu(i)}function mg(i,o,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,u=v.alternate,u!==null&&(u.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&o!==null&&(y=31-vt(a),i=v.hiddenUpdates,u=i[y],u===null?i[y]=[o]:u.push(o),o.lane=a|536870912),v):null}function Uu(i){if(50<gl)throw gl=0,yh=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Rr={};function RC(i,o,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(i,o,a,u){return new RC(i,o,a,u)}function ud(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wi(i,o){var a=i.alternate;return a===null?(a=Rn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function pg(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function ku(i,o,a,u,y,v){var A=0;if(u=i,typeof i=="function")ud(i)&&(A=1);else if(typeof i=="string")A=Mw(i,a,ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=Rn(31,a,o,y),i.elementType=x,i.lanes=v,i;case O:return Lo(a.children,y,v,o);case D:A=8,y|=24;break;case F:return i=Rn(12,a,o,y|2),i.elementType=F,i.lanes=v,i;case ce:return i=Rn(13,a,o,y),i.elementType=ce,i.lanes=v,i;case le:return i=Rn(19,a,o,y),i.elementType=le,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Q:A=10;break e;case j:A=9;break e;case re:A=11;break e;case M:A=14;break e;case V:A=16,u=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=Rn(A,a,o,y),o.elementType=i,o.type=u,o.lanes=v,o}function Lo(i,o,a,u){return i=Rn(7,i,u,o),i.lanes=a,i}function cd(i,o,a){return i=Rn(6,i,null,o),i.lanes=a,i}function gg(i){var o=Rn(18,null,null,0);return o.stateNode=i,o}function fd(i,o,a){return o=Rn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var yg=new WeakMap;function qn(i,o){if(typeof i=="object"&&i!==null){var a=yg.get(i);return a!==void 0?a:(o={value:i,source:o,stack:wa(o)},yg.set(i,o),o)}return{value:i,source:o,stack:wa(o)}}var Ir=[],xr=0,Lu=null,Qa=0,Bn=[],zn=0,Ds=null,Pi=1,Ui="";function Zi(i,o){Ir[xr++]=Qa,Ir[xr++]=Lu,Lu=i,Qa=o}function vg(i,o,a){Bn[zn++]=Pi,Bn[zn++]=Ui,Bn[zn++]=Ds,Ds=i;var u=Pi;i=Ui;var y=32-vt(u)-1;u&=~(1<<y),a+=1;var v=32-vt(o)+y;if(30<v){var A=y-y%5;v=(u&(1<<A)-1).toString(32),u>>=A,y-=A,Pi=1<<32-vt(o)+y|a<<y|u,Ui=v+i}else Pi=1<<v|a<<y|u,Ui=i}function dd(i){i.return!==null&&(Zi(i,1),vg(i,1,0))}function hd(i){for(;i===Lu;)Lu=Ir[--xr],Ir[xr]=null,Qa=Ir[--xr],Ir[xr]=null;for(;i===Ds;)Ds=Bn[--zn],Bn[zn]=null,Ui=Bn[--zn],Bn[zn]=null,Pi=Bn[--zn],Bn[zn]=null}function _g(i,o){Bn[zn++]=Pi,Bn[zn++]=Ui,Bn[zn++]=Ds,Pi=o.id,Ui=o.overflow,Ds=i}var $t=null,ut=null,He=!1,Vs=null,Fn=!1,md=Error(s(519));function Ps(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(qn(o,i)),md}function Tg(i){var o=i.stateNode,a=i.type,u=i.memoizedProps;switch(o[Rt]=i,o[zt]=u,a){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(a=0;a<vl.length;a++)Le(vl[a],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),gu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),ws(o,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||u.suppressHydrationWarning===!0||Lv(o.textContent,a)?(u.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),u.onScroll!=null&&Le("scroll",o),u.onScrollEnd!=null&&Le("scrollend",o),u.onClick!=null&&(o.onclick=ti),o=!0):o=!1,o||Ps(i,!0)}function Eg(i){for($t=i.return;$t;)switch($t.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:$t=$t.return}}function br(i){if(i!==$t)return!1;if(!He)return Eg(i),He=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Dh(i.type,i.memoizedProps)),a=!a),a&&ut&&Ps(i),Eg(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=Jv(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=Jv(i)}else o===27?(o=ut,$s(i.type)?(i=Lh,Lh=null,ut=i):ut=o):ut=$t?Hn(i.stateNode.nextSibling):null;return!0}function Oo(){ut=$t=null,He=!1}function pd(){var i=Vs;return i!==null&&(vn===null?vn=i:vn.push.apply(vn,i),Vs=null),i}function Xa(i){Vs===null?Vs=[i]:Vs.push(i)}var gd=z(null),qo=null,ji=null;function Us(i,o,a){Y(gd,o._currentValue),o._currentValue=a}function es(i){i._currentValue=gd.current,ne(gd)}function yd(i,o,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===a)break;i=i.return}}function vd(i,o,a,u){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var I=v;v=y;for(var L=0;L<o.length;L++)if(I.context===o[L]){v.lanes|=a,I=v.alternate,I!==null&&(I.lanes|=a),yd(v.return,a,i),u||(A=null);break e}v=I.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(s(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),yd(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Nr(i,o,a,u){i=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var I=y.type;wn(y.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(y===we.current){if(A=y.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Al):i=[Al])}y=y.return}i!==null&&vd(o,i,a,u),o.flags|=262144}function Ou(i){for(i=i.firstContext;i!==null;){if(!wn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Bo(i){qo=i,ji=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Sg(qo,i)}function qu(i,o){return qo===null&&Bo(i),Sg(i,o)}function Sg(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},ji===null){if(i===null)throw Error(s(308));ji=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else ji=ji.next=o;return a}var IC=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},xC=n.unstable_scheduleCallback,bC=n.unstable_NormalPriority,bt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new IC,data:new Map,refCount:0}}function Wa(i){i.refCount--,i.refCount===0&&xC(bC,function(){i.controller.abort()})}var Za=null,Td=0,Mr=0,Dr=null;function NC(i,o){if(Za===null){var a=Za=[];Td=0,Mr=Ah(),Dr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Td++,o.then(Ag,Ag),o}function Ag(){if(--Td===0&&Za!==null){Dr!==null&&(Dr.status="fulfilled");var i=Za;Za=null,Mr=0,Dr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function MC(i,o){var a=[],u={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(u.status="rejected",u.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),u}var Cg=W.S;W.S=function(i,o){av=an(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&NC(i,o),Cg!==null&&Cg(i,o)};var zo=z(null);function Ed(){var i=zo.current;return i!==null?i:rt.pooledCache}function Bu(i,o){o===null?Y(zo,zo.current):Y(zo,o.pool)}function wg(){var i=Ed();return i===null?null:{parent:bt._currentValue,pool:i}}var Vr=Error(s(460)),Sd=Error(s(474)),zu=Error(s(542)),Fu={then:function(){}};function Rg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ig(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(ti,ti),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,bg(i),i;default:if(typeof o.status=="string")o.then(ti,ti);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=u}},function(u){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,bg(i),i}throw Go=o,Vr}}function Fo(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Go=a,Vr):a}}var Go=null;function xg(){if(Go===null)throw Error(s(459));var i=Go;return Go=null,i}function bg(i){if(i===Vr||i===zu)throw Error(s(483))}var Pr=null,ja=0;function Gu(i){var o=ja;return ja+=1,Pr===null&&(Pr=[]),Ig(Pr,i,o)}function el(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Hu(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Ng(i){function o(G,B){if(i){var J=G.deletions;J===null?(G.deletions=[B],G.flags|=16):J.push(B)}}function a(G,B){if(!i)return null;for(;B!==null;)o(G,B),B=B.sibling;return null}function u(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=Wi(G,B),G.index=0,G.sibling=null,G}function v(G,B,J){return G.index=J,i?(J=G.alternate,J!==null?(J=J.index,J<B?(G.flags|=67108866,B):J):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function A(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function I(G,B,J,te){return B===null||B.tag!==6?(B=cd(J,G.mode,te),B.return=G,B):(B=y(B,J),B.return=G,B)}function L(G,B,J,te){var Ae=J.type;return Ae===O?ee(G,B,J.props.children,te,J.key):B!==null&&(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===V&&Fo(Ae)===B.type)?(B=y(B,J.props),el(B,J),B.return=G,B):(B=ku(J.type,J.key,J.props,null,G.mode,te),el(B,J),B.return=G,B)}function K(G,B,J,te){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=fd(J,G.mode,te),B.return=G,B):(B=y(B,J.children||[]),B.return=G,B)}function ee(G,B,J,te,Ae){return B===null||B.tag!==7?(B=Lo(J,G.mode,te,Ae),B.return=G,B):(B=y(B,J),B.return=G,B)}function ie(G,B,J){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=cd(""+B,G.mode,J),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case R:return J=ku(B.type,B.key,B.props,null,G.mode,J),el(J,B),J.return=G,J;case k:return B=fd(B,G.mode,J),B.return=G,B;case V:return B=Fo(B),ie(G,B,J)}if(De(B)||q(B))return B=Lo(B,G.mode,J,null),B.return=G,B;if(typeof B.then=="function")return ie(G,Gu(B),J);if(B.$$typeof===Q)return ie(G,qu(G,B),J);Hu(G,B)}return null}function $(G,B,J,te){var Ae=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ae!==null?null:I(G,B,""+J,te);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return J.key===Ae?L(G,B,J,te):null;case k:return J.key===Ae?K(G,B,J,te):null;case V:return J=Fo(J),$(G,B,J,te)}if(De(J)||q(J))return Ae!==null?null:ee(G,B,J,te,null);if(typeof J.then=="function")return $(G,B,Gu(J),te);if(J.$$typeof===Q)return $(G,B,qu(G,J),te);Hu(G,J)}return null}function Z(G,B,J,te,Ae){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return G=G.get(J)||null,I(B,G,""+te,Ae);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return G=G.get(te.key===null?J:te.key)||null,L(B,G,te,Ae);case k:return G=G.get(te.key===null?J:te.key)||null,K(B,G,te,Ae);case V:return te=Fo(te),Z(G,B,J,te,Ae)}if(De(te)||q(te))return G=G.get(J)||null,ee(B,G,te,Ae,null);if(typeof te.then=="function")return Z(G,B,J,Gu(te),Ae);if(te.$$typeof===Q)return Z(G,B,J,qu(B,te),Ae);Hu(B,te)}return null}function ye(G,B,J,te){for(var Ae=null,Ke=null,_e=B,Ue=B=0,ze=null;_e!==null&&Ue<J.length;Ue++){_e.index>Ue?(ze=_e,_e=null):ze=_e.sibling;var $e=$(G,_e,J[Ue],te);if($e===null){_e===null&&(_e=ze);break}i&&_e&&$e.alternate===null&&o(G,_e),B=v($e,B,Ue),Ke===null?Ae=$e:Ke.sibling=$e,Ke=$e,_e=ze}if(Ue===J.length)return a(G,_e),He&&Zi(G,Ue),Ae;if(_e===null){for(;Ue<J.length;Ue++)_e=ie(G,J[Ue],te),_e!==null&&(B=v(_e,B,Ue),Ke===null?Ae=_e:Ke.sibling=_e,Ke=_e);return He&&Zi(G,Ue),Ae}for(_e=u(_e);Ue<J.length;Ue++)ze=Z(_e,G,Ue,J[Ue],te),ze!==null&&(i&&ze.alternate!==null&&_e.delete(ze.key===null?Ue:ze.key),B=v(ze,B,Ue),Ke===null?Ae=ze:Ke.sibling=ze,Ke=ze);return i&&_e.forEach(function(js){return o(G,js)}),He&&Zi(G,Ue),Ae}function Re(G,B,J,te){if(J==null)throw Error(s(151));for(var Ae=null,Ke=null,_e=B,Ue=B=0,ze=null,$e=J.next();_e!==null&&!$e.done;Ue++,$e=J.next()){_e.index>Ue?(ze=_e,_e=null):ze=_e.sibling;var js=$(G,_e,$e.value,te);if(js===null){_e===null&&(_e=ze);break}i&&_e&&js.alternate===null&&o(G,_e),B=v(js,B,Ue),Ke===null?Ae=js:Ke.sibling=js,Ke=js,_e=ze}if($e.done)return a(G,_e),He&&Zi(G,Ue),Ae;if(_e===null){for(;!$e.done;Ue++,$e=J.next())$e=ie(G,$e.value,te),$e!==null&&(B=v($e,B,Ue),Ke===null?Ae=$e:Ke.sibling=$e,Ke=$e);return He&&Zi(G,Ue),Ae}for(_e=u(_e);!$e.done;Ue++,$e=J.next())$e=Z(_e,G,Ue,$e.value,te),$e!==null&&(i&&$e.alternate!==null&&_e.delete($e.key===null?Ue:$e.key),B=v($e,B,Ue),Ke===null?Ae=$e:Ke.sibling=$e,Ke=$e);return i&&_e.forEach(function(Fw){return o(G,Fw)}),He&&Zi(G,Ue),Ae}function ot(G,B,J,te){if(typeof J=="object"&&J!==null&&J.type===O&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case R:e:{for(var Ae=J.key;B!==null;){if(B.key===Ae){if(Ae=J.type,Ae===O){if(B.tag===7){a(G,B.sibling),te=y(B,J.props.children),te.return=G,G=te;break e}}else if(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===V&&Fo(Ae)===B.type){a(G,B.sibling),te=y(B,J.props),el(te,J),te.return=G,G=te;break e}a(G,B);break}else o(G,B);B=B.sibling}J.type===O?(te=Lo(J.props.children,G.mode,te,J.key),te.return=G,G=te):(te=ku(J.type,J.key,J.props,null,G.mode,te),el(te,J),te.return=G,G=te)}return A(G);case k:e:{for(Ae=J.key;B!==null;){if(B.key===Ae)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){a(G,B.sibling),te=y(B,J.children||[]),te.return=G,G=te;break e}else{a(G,B);break}else o(G,B);B=B.sibling}te=fd(J,G.mode,te),te.return=G,G=te}return A(G);case V:return J=Fo(J),ot(G,B,J,te)}if(De(J))return ye(G,B,J,te);if(q(J)){if(Ae=q(J),typeof Ae!="function")throw Error(s(150));return J=Ae.call(J),Re(G,B,J,te)}if(typeof J.then=="function")return ot(G,B,Gu(J),te);if(J.$$typeof===Q)return ot(G,B,qu(G,J),te);Hu(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,B!==null&&B.tag===6?(a(G,B.sibling),te=y(B,J),te.return=G,G=te):(a(G,B),te=cd(J,G.mode,te),te.return=G,G=te),A(G)):a(G,B)}return function(G,B,J,te){try{ja=0;var Ae=ot(G,B,J,te);return Pr=null,Ae}catch(_e){if(_e===Vr||_e===zu)throw _e;var Ke=Rn(29,_e,null,G.mode);return Ke.lanes=te,Ke.return=G,Ke}finally{}}}var Ho=Ng(!0),Mg=Ng(!1),ks=!1;function Ad(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ls(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Os(i,o,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var y=u.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),u.pending=o,o=Uu(i),mg(i,null,a),o}return Pu(i,u,o,a),Uu(i)}function tl(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,xa(i,a)}}function wd(i,o){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:u.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var Rd=!1;function nl(){if(Rd){var i=Dr;if(i!==null)throw i}}function il(i,o,a,u){Rd=!1;var y=i.updateQueue;ks=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,I=y.shared.pending;if(I!==null){y.shared.pending=null;var L=I,K=L.next;L.next=null,A===null?v=K:A.next=K,A=L;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,I=ee.lastBaseUpdate,I!==A&&(I===null?ee.firstBaseUpdate=K:I.next=K,ee.lastBaseUpdate=L))}if(v!==null){var ie=y.baseState;A=0,ee=K=L=null,I=v;do{var $=I.lane&-536870913,Z=$!==I.lane;if(Z?(Be&$)===$:(u&$)===$){$!==0&&$===Mr&&(Rd=!0),ee!==null&&(ee=ee.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ye=i,Re=I;$=o;var ot=a;switch(Re.tag){case 1:if(ye=Re.payload,typeof ye=="function"){ie=ye.call(ot,ie,$);break e}ie=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Re.payload,$=typeof ye=="function"?ye.call(ot,ie,$):ye,$==null)break e;ie=T({},ie,$);break e;case 2:ks=!0}}$=I.callback,$!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[$]:Z.push($))}else Z={lane:$,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ee===null?(K=ee=Z,L=ie):ee=ee.next=Z,A|=$;if(I=I.next,I===null){if(I=y.shared.pending,I===null)break;Z=I,I=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);ee===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=K,y.lastBaseUpdate=ee,v===null&&(y.shared.lanes=0),Gs|=A,i.lanes=A,i.memoizedState=ie}}function Dg(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Vg(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Dg(a[i],o)}var Ur=z(null),Yu=z(0);function Pg(i,o){i=us,Y(Yu,i),Y(Ur,o),us=i|o.baseLanes}function Id(){Y(Yu,us),Y(Ur,Ur.current)}function xd(){us=Yu.current,ne(Ur),ne(Yu)}var In=z(null),Gn=null;function qs(i){var o=i.alternate;Y(Tt,Tt.current&1),Y(In,i),Gn===null&&(o===null||Ur.current!==null||o.memoizedState!==null)&&(Gn=i)}function bd(i){Y(Tt,Tt.current),Y(In,i),Gn===null&&(Gn=i)}function Ug(i){i.tag===22?(Y(Tt,Tt.current),Y(In,i),Gn===null&&(Gn=i)):Bs()}function Bs(){Y(Tt,Tt.current),Y(In,In.current)}function xn(i){ne(In),Gn===i&&(Gn=null),ne(Tt)}var Tt=z(0);function Ju(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Uh(a)||kh(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ts=0,Pe=null,it=null,Nt=null,Ku=!1,kr=!1,Yo=!1,$u=0,sl=0,Lr=null,DC=0;function gt(){throw Error(s(321))}function Nd(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!wn(i[a],o[a]))return!1;return!0}function Md(i,o,a,u,y,v){return ts=v,Pe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,W.H=i===null||i.memoizedState===null?vy:Jd,Yo=!1,v=a(u,y),Yo=!1,kr&&(v=Lg(o,a,u,y)),kg(i),v}function kg(i){W.H=al;var o=it!==null&&it.next!==null;if(ts=0,Nt=it=Pe=null,Ku=!1,sl=0,Lr=null,o)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&Ou(i)&&(Mt=!0))}function Lg(i,o,a,u){Pe=i;var y=0;do{if(kr&&(Lr=null),sl=0,kr=!1,25<=y)throw Error(s(301));if(y+=1,Nt=it=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}W.H=_y,v=o(a,u)}while(kr);return v}function VC(){var i=W.H,o=i.useState()[0];return o=typeof o.then=="function"?ol(o):o,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(Pe.flags|=1024),o}function Dd(){var i=$u!==0;return $u=0,i}function Vd(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function Pd(i){if(Ku){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ku=!1}ts=0,Nt=it=Pe=null,kr=!1,sl=$u=0,Lr=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Pe.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Et(){if(it===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var o=Nt===null?Pe.memoizedState:Nt.next;if(o!==null)Nt=o,it=i;else{if(i===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Nt===null?Pe.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(i){var o=sl;return sl+=1,Lr===null&&(Lr=[]),i=Ig(Lr,i,o),o=Pe,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,W.H=o===null||o.memoizedState===null?vy:Jd),i}function Xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ol(i);if(i.$$typeof===Q)return Qt(i)}throw Error(s(438,String(i)))}function Ud(i){var o=null,a=Pe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Qu(),Pe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),u=0;u<i;u++)a[u]=U;return o.index++,a}function ns(i,o){return typeof o=="function"?o(i):o}function Wu(i){var o=Et();return kd(o,it,i)}function kd(i,o,a){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var y=i.baseQueue,v=u.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,u.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{o=y.next;var I=A=null,L=null,K=o,ee=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Be&ie)===ie:(ts&ie)===ie){var $=K.revertLane;if($===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Mr&&(ee=!0);else if((ts&$)===$){K=K.next,$===Mr&&(ee=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(I=L=ie,A=v):L=L.next=ie,Pe.lanes|=$,Gs|=$;ie=K.action,Yo&&a(v,ie),v=K.hasEagerState?K.eagerState:a(v,ie)}else $={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(I=L=$,A=v):L=L.next=$,Pe.lanes|=ie,Gs|=ie;K=K.next}while(K!==null&&K!==o);if(L===null?A=v:L.next=I,!wn(v,i.memoizedState)&&(Mt=!0,ee&&(a=Dr,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=L,u.lastRenderedState=v}return y===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Ld(i){var o=Et(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var u=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);wn(v,o.memoizedState)||(Mt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,u]}function Og(i,o,a){var u=Pe,y=Et(),v=He;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var A=!wn((it||y).memoizedState,a);if(A&&(y.memoizedState=a,Mt=!0),y=y.queue,Bd(zg.bind(null,u,y,i),[i]),y.getSnapshot!==o||A||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Or(9,{destroy:void 0},Bg.bind(null,u,y,a,o),null),rt===null)throw Error(s(349));v||(ts&127)!==0||qg(u,o,a)}return a}function qg(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Pe.updateQueue,o===null?(o=Qu(),Pe.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Bg(i,o,a,u){o.value=a,o.getSnapshot=u,Fg(o)&&Gg(i)}function zg(i,o,a){return a(function(){Fg(o)&&Gg(i)})}function Fg(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!wn(i,a)}catch{return!0}}function Gg(i){var o=ko(i,2);o!==null&&_n(o,i,2)}function Od(i){var o=un();if(typeof i=="function"){var a=i;if(i=a(),Yo){Vn(!0);try{a()}finally{Vn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},o}function Hg(i,o,a,u){return i.baseState=a,kd(i,it,typeof u=="function"?u:ns)}function PC(i,o,a,u,y){if(ec(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};W.T!==null?a(!0):v.isTransition=!1,u(v),a=o.pending,a===null?(v.next=o.pending=v,Yg(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Yg(i,o){var a=o.action,u=o.payload,y=i.state;if(o.isTransition){var v=W.T,A={};W.T=A;try{var I=a(y,u),L=W.S;L!==null&&L(A,I),Jg(i,o,I)}catch(K){qd(i,o,K)}finally{v!==null&&A.types!==null&&(v.types=A.types),W.T=v}}else try{v=a(y,u),Jg(i,o,v)}catch(K){qd(i,o,K)}}function Jg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Kg(i,o,u)},function(u){return qd(i,o,u)}):Kg(i,o,a)}function Kg(i,o,a){o.status="fulfilled",o.value=a,$g(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Yg(i,a)))}function qd(i,o,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=a,$g(o),o=o.next;while(o!==u)}i.action=null}function $g(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Qg(i,o){return o}function Xg(i,o){if(He){var a=rt.formState;if(a!==null){e:{var u=Pe;if(He){if(ut){t:{for(var y=ut,v=Fn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Hn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ut=Hn(y.nextSibling),u=y.data==="F!";break e}}Ps(u)}u=!1}u&&(o=a[0])}}return a=un(),a.memoizedState=a.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:o},a.queue=u,a=py.bind(null,Pe,u),u.dispatch=a,u=Od(!1),v=Yd.bind(null,Pe,!1,u.queue),u=un(),y={state:o,dispatch:null,action:i,pending:null},u.queue=y,a=PC.bind(null,Pe,y,v,a),y.dispatch=a,u.memoizedState=i,[o,a,!1]}function Wg(i){var o=Et();return Zg(o,it,i)}function Zg(i,o,a){if(o=kd(i,o,Qg)[0],i=Wu(ns)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=ol(o)}catch(A){throw A===Vr?zu:A}else u=o;o=Et();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(Pe.flags|=2048,Or(9,{destroy:void 0},UC.bind(null,y,a),null)),[u,v,i]}function UC(i,o){i.action=o}function jg(i){var o=Et(),a=it;if(a!==null)return Zg(o,a,i);Et(),o=o.memoizedState,a=Et();var u=a.queue.dispatch;return a.memoizedState=i,[o,u,!1]}function Or(i,o,a,u){return i={tag:i,create:a,deps:u,inst:o,next:null},o=Pe.updateQueue,o===null&&(o=Qu(),Pe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,o.lastEffect=i),i}function ey(){return Et().memoizedState}function Zu(i,o,a,u){var y=un();Pe.flags|=i,y.memoizedState=Or(1|o,{destroy:void 0},a,u===void 0?null:u)}function ju(i,o,a,u){var y=Et();u=u===void 0?null:u;var v=y.memoizedState.inst;it!==null&&u!==null&&Nd(u,it.memoizedState.deps)?y.memoizedState=Or(o,v,a,u):(Pe.flags|=i,y.memoizedState=Or(1|o,v,a,u))}function ty(i,o){Zu(8390656,8,i,o)}function Bd(i,o){ju(2048,8,i,o)}function kC(i){Pe.flags|=4;var o=Pe.updateQueue;if(o===null)o=Qu(),Pe.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function ny(i){var o=Et().memoizedState;return kC({ref:o,nextImpl:i}),function(){if((We&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function iy(i,o){return ju(4,2,i,o)}function sy(i,o){return ju(4,4,i,o)}function oy(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ry(i,o,a){a=a!=null?a.concat([i]):null,ju(4,4,oy.bind(null,o,i),a)}function zd(){}function ay(i,o){var a=Et();o=o===void 0?null:o;var u=a.memoizedState;return o!==null&&Nd(o,u[1])?u[0]:(a.memoizedState=[i,o],i)}function ly(i,o){var a=Et();o=o===void 0?null:o;var u=a.memoizedState;if(o!==null&&Nd(o,u[1]))return u[0];if(u=i(),Yo){Vn(!0);try{i()}finally{Vn(!1)}}return a.memoizedState=[u,o],u}function Fd(i,o,a){return a===void 0||(ts&1073741824)!==0&&(Be&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=uv(),Pe.lanes|=i,Gs|=i,a)}function uy(i,o,a,u){return wn(a,o)?a:Ur.current!==null?(i=Fd(i,a,u),wn(i,o)||(Mt=!0),i):(ts&42)===0||(ts&1073741824)!==0&&(Be&261930)===0?(Mt=!0,i.memoizedState=a):(i=uv(),Pe.lanes|=i,Gs|=i,o)}function cy(i,o,a,u,y){var v=ue.p;ue.p=v!==0&&8>v?v:8;var A=W.T,I={};W.T=I,Yd(i,!1,o,a);try{var L=y(),K=W.S;if(K!==null&&K(I,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ee=MC(L,u);rl(i,o,ee,Mn(i))}else rl(i,o,u,Mn(i))}catch(ie){rl(i,o,{then:function(){},status:"rejected",reason:ie},Mn())}finally{ue.p=v,A!==null&&I.types!==null&&(A.types=I.types),W.T=A}}function LC(){}function Gd(i,o,a,u){if(i.tag!==5)throw Error(s(476));var y=fy(i).queue;cy(i,y,o,Ee,a===null?LC:function(){return dy(i),a(u)})}function fy(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:Ee},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function dy(i){var o=fy(i);o.next===null&&(o=i.alternate.memoizedState),rl(i,o.next.queue,{},Mn())}function Hd(){return Qt(Al)}function hy(){return Et().memoizedState}function my(){return Et().memoizedState}function OC(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=Mn();i=Ls(a);var u=Os(o,i,a);u!==null&&(_n(u,o,a),tl(u,o,a)),o={cache:_d()},i.payload=o;return}o=o.return}}function qC(i,o,a){var u=Mn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ec(i)?gy(o,a):(a=ld(i,o,a,u),a!==null&&(_n(a,i,u),yy(a,o,u)))}function py(i,o,a){var u=Mn();rl(i,o,a,u)}function rl(i,o,a,u){var y={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(i))gy(o,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,I=v(A,a);if(y.hasEagerState=!0,y.eagerState=I,wn(I,A))return Pu(i,o,y,0),rt===null&&Vu(),!1}catch{}finally{}if(a=ld(i,o,y,u),a!==null)return _n(a,i,u),yy(a,o,u),!0}return!1}function Yd(i,o,a,u){if(u={lane:2,revertLane:Ah(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ec(i)){if(o)throw Error(s(479))}else o=ld(i,a,u,2),o!==null&&_n(o,i,2)}function ec(i){var o=i.alternate;return i===Pe||o!==null&&o===Pe}function gy(i,o){kr=Ku=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function yy(i,o,a){if((a&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,a|=u,o.lanes=a,xa(i,a)}}var al={readContext:Qt,use:Xu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};al.useEffectEvent=gt;var vy={readContext:Qt,use:Xu,useCallback:function(i,o){return un().memoizedState=[i,o===void 0?null:o],i},useContext:Qt,useEffect:ty,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Zu(4194308,4,oy.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Zu(4194308,4,i,o)},useInsertionEffect:function(i,o){Zu(4,2,i,o)},useMemo:function(i,o){var a=un();o=o===void 0?null:o;var u=i();if(Yo){Vn(!0);try{i()}finally{Vn(!1)}}return a.memoizedState=[u,o],u},useReducer:function(i,o,a){var u=un();if(a!==void 0){var y=a(o);if(Yo){Vn(!0);try{a(o)}finally{Vn(!1)}}}else y=o;return u.memoizedState=u.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},u.queue=i,i=i.dispatch=qC.bind(null,Pe,i),[u.memoizedState,i]},useRef:function(i){var o=un();return i={current:i},o.memoizedState=i},useState:function(i){i=Od(i);var o=i.queue,a=py.bind(null,Pe,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:zd,useDeferredValue:function(i,o){var a=un();return Fd(a,i,o)},useTransition:function(){var i=Od(!1);return i=cy.bind(null,Pe,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var u=Pe,y=un();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),rt===null)throw Error(s(349));(Be&127)!==0||qg(u,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,ty(zg.bind(null,u,v,i),[i]),u.flags|=2048,Or(9,{destroy:void 0},Bg.bind(null,u,v,a,o),null),a},useId:function(){var i=un(),o=rt.identifierPrefix;if(He){var a=Ui,u=Pi;a=(u&~(1<<32-vt(u)-1)).toString(32)+a,o="_"+o+"R_"+a,a=$u++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=DC++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Hd,useFormState:Xg,useActionState:Xg,useOptimistic:function(i){var o=un();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Yd.bind(null,Pe,!0,a),a.dispatch=o,[i,o]},useMemoCache:Ud,useCacheRefresh:function(){return un().memoizedState=OC.bind(null,Pe)},useEffectEvent:function(i){var o=un(),a={impl:i};return o.memoizedState=a,function(){if((We&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Jd={readContext:Qt,use:Xu,useCallback:ay,useContext:Qt,useEffect:Bd,useImperativeHandle:ry,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:ly,useReducer:Wu,useRef:ey,useState:function(){return Wu(ns)},useDebugValue:zd,useDeferredValue:function(i,o){var a=Et();return uy(a,it.memoizedState,i,o)},useTransition:function(){var i=Wu(ns)[0],o=Et().memoizedState;return[typeof i=="boolean"?i:ol(i),o]},useSyncExternalStore:Og,useId:hy,useHostTransitionStatus:Hd,useFormState:Wg,useActionState:Wg,useOptimistic:function(i,o){var a=Et();return Hg(a,it,i,o)},useMemoCache:Ud,useCacheRefresh:my};Jd.useEffectEvent=ny;var _y={readContext:Qt,use:Xu,useCallback:ay,useContext:Qt,useEffect:Bd,useImperativeHandle:ry,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:ly,useReducer:Ld,useRef:ey,useState:function(){return Ld(ns)},useDebugValue:zd,useDeferredValue:function(i,o){var a=Et();return it===null?Fd(a,i,o):uy(a,it.memoizedState,i,o)},useTransition:function(){var i=Ld(ns)[0],o=Et().memoizedState;return[typeof i=="boolean"?i:ol(i),o]},useSyncExternalStore:Og,useId:hy,useHostTransitionStatus:Hd,useFormState:jg,useActionState:jg,useOptimistic:function(i,o){var a=Et();return it!==null?Hg(a,it,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:my};_y.useEffectEvent=ny;function Kd(i,o,a,u){o=i.memoizedState,a=a(u,o),a=a==null?o:T({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var $d={enqueueSetState:function(i,o,a){i=i._reactInternals;var u=Mn(),y=Ls(u);y.payload=o,a!=null&&(y.callback=a),o=Os(i,y,u),o!==null&&(_n(o,i,u),tl(o,i,u))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var u=Mn(),y=Ls(u);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=Os(i,y,u),o!==null&&(_n(o,i,u),tl(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=Mn(),u=Ls(a);u.tag=2,o!=null&&(u.callback=o),o=Os(i,u,a),o!==null&&(_n(o,i,a),tl(o,i,a))}};function Ty(i,o,a,u,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,v,A):o.prototype&&o.prototype.isPureReactComponent?!Ka(a,u)||!Ka(y,v):!0}function Ey(i,o,a,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,u),o.state!==i&&$d.enqueueReplaceState(o,o.state,null)}function Jo(i,o){var a=o;if("ref"in o){a={};for(var u in o)u!=="ref"&&(a[u]=o[u])}if(i=i.defaultProps){a===o&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Sy(i){Du(i)}function Ay(i){console.error(i)}function Cy(i){Du(i)}function tc(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function wy(i,o,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Qd(i,o,a){return a=Ls(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(i,o)},a}function Ry(i){return i=Ls(i),i.tag=3,i}function Iy(i,o,a,u){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=u.value;i.payload=function(){return y(v)},i.callback=function(){wy(o,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){wy(o,a,u),typeof y!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function BC(i,o,a,u,y){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=a.alternate,o!==null&&Nr(o,a,y,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?hc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,u===Fu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([u]):o.add(u),Th(i,u,y)),!1;case 22:return a.flags|=65536,u===Fu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([u]):a.add(u)),Th(i,u,y)),!1}throw Error(s(435,a.tag))}return Th(i,u,y),hc(),!1}if(He)return o=In.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,u!==md&&(i=Error(s(422),{cause:u}),Xa(qn(i,a)))):(u!==md&&(o=Error(s(423),{cause:u}),Xa(qn(o,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,u=qn(u,a),y=Qd(i.stateNode,u,y),wd(i,y),yt!==4&&(yt=2)),!1;var v=Error(s(520),{cause:u});if(v=qn(v,a),pl===null?pl=[v]:pl.push(v),yt!==4&&(yt=2),o===null)return!0;u=qn(u,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Qd(a.stateNode,u,i),wd(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hs===null||!Hs.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=Ry(y),Iy(y,i,a,u),wd(a,y),!1}a=a.return}while(a!==null);return!1}var Xd=Error(s(461)),Mt=!1;function Xt(i,o,a,u){o.child=i===null?Mg(o,null,a,u):Ho(o,i.child,a,u)}function xy(i,o,a,u,y){a=a.render;var v=o.ref;if("ref"in u){var A={};for(var I in u)I!=="ref"&&(A[I]=u[I])}else A=u;return Bo(o),u=Md(i,o,a,A,v,y),I=Dd(),i!==null&&!Mt?(Vd(i,o,y),is(i,o,y)):(He&&I&&dd(o),o.flags|=1,Xt(i,o,u,y),o.child)}function by(i,o,a,u,y){if(i===null){var v=a.type;return typeof v=="function"&&!ud(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,Ny(i,o,v,u,y)):(i=ku(a.type,null,u,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!sh(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ka,a(A,u)&&i.ref===o.ref)return is(i,o,y)}return o.flags|=1,i=Wi(v,u),i.ref=o.ref,i.return=o,o.child=i}function Ny(i,o,a,u,y){if(i!==null){var v=i.memoizedProps;if(Ka(v,u)&&i.ref===o.ref)if(Mt=!1,o.pendingProps=u=v,sh(i,y))(i.flags&131072)!==0&&(Mt=!0);else return o.lanes=i.lanes,is(i,o,y)}return Wd(i,o,a,u,y)}function My(i,o,a,u){var y=u.children,v=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(u=o.child=i.child,y=0;u!==null;)y=y|u.lanes|u.childLanes,u=u.sibling;u=y&~v}else u=0,o.child=null;return Dy(i,o,v,a,u)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(o,v!==null?v.cachePool:null),v!==null?Pg(o,v):Id(),Ug(o);else return u=o.lanes=536870912,Dy(i,o,v!==null?v.baseLanes|a:a,a,u)}else v!==null?(Bu(o,v.cachePool),Pg(o,v),Bs(),o.memoizedState=null):(i!==null&&Bu(o,null),Id(),Bs());return Xt(i,o,y,a),o.child}function ll(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Dy(i,o,a,u,y){var v=Ed();return v=v===null?null:{parent:bt._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},i!==null&&Bu(o,null),Id(),Ug(o),i!==null&&Nr(i,o,u,!0),o.childLanes=y,null}function nc(i,o){return o=sc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Vy(i,o,a){return Ho(o,i.child,null,a),i=nc(o,o.pendingProps),i.flags|=2,xn(o),o.memoizedState=null,i}function zC(i,o,a){var u=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(He){if(u.mode==="hidden")return i=nc(o,u),o.lanes=536870912,ll(null,i);if(bd(o),(i=ut)?(i=Yv(i,Fn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=gg(i),a.return=o,o.child=a,$t=o,ut=null)):i=null,i===null)throw Ps(o);return o.lanes=536870912,null}return nc(o,u)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(bd(o),y)if(o.flags&256)o.flags&=-257,o=Vy(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Mt||Nr(i,o,a,!1),y=(a&i.childLanes)!==0,Mt||y){if(u=rt,u!==null&&(A=ba(u,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,ko(i,A),_n(u,i,A),Xd;hc(),o=Vy(i,o,a)}else i=v.treeContext,ut=Hn(A.nextSibling),$t=o,He=!0,Vs=null,Fn=!1,i!==null&&_g(o,i),o=nc(o,u),o.flags|=4096;return o}return i=Wi(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function ic(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function Wd(i,o,a,u,y){return Bo(o),a=Md(i,o,a,u,void 0,y),u=Dd(),i!==null&&!Mt?(Vd(i,o,y),is(i,o,y)):(He&&u&&dd(o),o.flags|=1,Xt(i,o,a,y),o.child)}function Py(i,o,a,u,y,v){return Bo(o),o.updateQueue=null,a=Lg(o,u,a,y),kg(i),u=Dd(),i!==null&&!Mt?(Vd(i,o,v),is(i,o,v)):(He&&u&&dd(o),o.flags|=1,Xt(i,o,a,v),o.child)}function Uy(i,o,a,u,y){if(Bo(o),o.stateNode===null){var v=Rr,A=a.contextType;typeof A=="object"&&A!==null&&(v=Qt(A)),v=new a(u,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$d,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=u,v.state=o.memoizedState,v.refs={},Ad(o),A=a.contextType,v.context=typeof A=="object"&&A!==null?Qt(A):Rr,v.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Kd(o,a,A,u),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&$d.enqueueReplaceState(v,v.state,null),il(o,u,v,y),nl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){v=o.stateNode;var I=o.memoizedProps,L=Jo(a,I);v.props=L;var K=v.context,ee=a.contextType;A=Rr,typeof ee=="object"&&ee!==null&&(A=Qt(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(I||K!==A)&&Ey(o,v,u,A),ks=!1;var $=o.memoizedState;v.state=$,il(o,u,v,y),nl(),K=o.memoizedState,I||$!==K||ks?(typeof ie=="function"&&(Kd(o,a,ie,u),K=o.memoizedState),(L=ks||Ty(o,a,L,u,$,K,A))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=K),v.props=u,v.state=K,v.context=A,u=L):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{v=o.stateNode,Cd(i,o),A=o.memoizedProps,ee=Jo(a,A),v.props=ee,ie=o.pendingProps,$=v.context,K=a.contextType,L=Rr,typeof K=="object"&&K!==null&&(L=Qt(K)),I=a.getDerivedStateFromProps,(K=typeof I=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ie||$!==L)&&Ey(o,v,u,L),ks=!1,$=o.memoizedState,v.state=$,il(o,u,v,y),nl();var Z=o.memoizedState;A!==ie||$!==Z||ks||i!==null&&i.dependencies!==null&&Ou(i.dependencies)?(typeof I=="function"&&(Kd(o,a,I,u),Z=o.memoizedState),(ee=ks||Ty(o,a,ee,u,$,Z,L)||i!==null&&i.dependencies!==null&&Ou(i.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,Z,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,Z,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=Z),v.props=u,v.state=Z,v.context=L,u=ee):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),u=!1)}return v=u,ic(i,o),u=(o.flags&128)!==0,v||u?(v=o.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&u?(o.child=Ho(o,i.child,null,y),o.child=Ho(o,null,a,y)):Xt(i,o,a,y),o.memoizedState=v.state,i=o.child):i=is(i,o,y),i}function ky(i,o,a,u){return Oo(),o.flags|=256,Xt(i,o,a,u),o.child}var Zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jd(i){return{baseLanes:i,cachePool:wg()}}function eh(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Nn),i}function Ly(i,o,a){var u=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(He){if(y?qs(o):Bs(),(i=ut)?(i=Yv(i,Fn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:Pi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},a=gg(i),a.return=o,o.child=a,$t=o,ut=null)):i=null,i===null)throw Ps(o);return kh(i)?o.lanes=32:o.lanes=536870912,null}var I=u.children;return u=u.fallback,y?(Bs(),y=o.mode,I=sc({mode:"hidden",children:I},y),u=Lo(u,y,a,null),I.return=o,u.return=o,I.sibling=u,o.child=I,u=o.child,u.memoizedState=jd(a),u.childLanes=eh(i,A,a),o.memoizedState=Zd,ll(null,u)):(qs(o),th(o,I))}var L=i.memoizedState;if(L!==null&&(I=L.dehydrated,I!==null)){if(v)o.flags&256?(qs(o),o.flags&=-257,o=nh(i,o,a)):o.memoizedState!==null?(Bs(),o.child=i.child,o.flags|=128,o=null):(Bs(),I=u.fallback,y=o.mode,u=sc({mode:"visible",children:u.children},y),I=Lo(I,y,a,null),I.flags|=2,u.return=o,I.return=o,u.sibling=I,o.child=u,Ho(o,i.child,null,a),u=o.child,u.memoizedState=jd(a),u.childLanes=eh(i,A,a),o.memoizedState=Zd,o=ll(null,u));else if(qs(o),kh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var K=A.dgst;A=K,u=Error(s(419)),u.stack="",u.digest=A,Xa({value:u,source:null,stack:null}),o=nh(i,o,a)}else if(Mt||Nr(i,o,a,!1),A=(a&i.childLanes)!==0,Mt||A){if(A=rt,A!==null&&(u=ba(A,a),u!==0&&u!==L.retryLane))throw L.retryLane=u,ko(i,u),_n(A,i,u),Xd;Uh(I)||hc(),o=nh(i,o,a)}else Uh(I)?(o.flags|=192,o.child=i.child,o=null):(i=L.treeContext,ut=Hn(I.nextSibling),$t=o,He=!0,Vs=null,Fn=!1,i!==null&&_g(o,i),o=th(o,u.children),o.flags|=4096);return o}return y?(Bs(),I=u.fallback,y=o.mode,L=i.child,K=L.sibling,u=Wi(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,K!==null?I=Wi(K,I):(I=Lo(I,y,a,null),I.flags|=2),I.return=o,u.return=o,u.sibling=I,o.child=u,ll(null,u),u=o.child,I=i.child.memoizedState,I===null?I=jd(a):(y=I.cachePool,y!==null?(L=bt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=wg(),I={baseLanes:I.baseLanes|a,cachePool:y}),u.memoizedState=I,u.childLanes=eh(i,A,a),o.memoizedState=Zd,ll(i.child,u)):(qs(o),a=i.child,i=a.sibling,a=Wi(a,{mode:"visible",children:u.children}),a.return=o,a.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=a,o.memoizedState=null,a)}function th(i,o){return o=sc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function sc(i,o){return i=Rn(22,i,null,o),i.lanes=0,i}function nh(i,o,a){return Ho(o,i.child,null,a),i=th(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Oy(i,o,a){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),yd(i.return,o,a)}function ih(i,o,a,u,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function qy(i,o,a){var u=o.pendingProps,y=u.revealOrder,v=u.tail;u=u.children;var A=Tt.current,I=(A&2)!==0;if(I?(A=A&1|2,o.flags|=128):A&=1,Y(Tt,A),Xt(i,o,u,a),u=He?Qa:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Oy(i,a,o);else if(i.tag===19)Oy(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)i=a.alternate,i!==null&&Ju(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),ih(o,!1,y,a,v,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Ju(i)===null){o.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}ih(o,!0,a,null,v,u);break;case"together":ih(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function is(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Gs|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(Nr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Wi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Wi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function sh(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Ou(i)))}function FC(i,o,a){switch(o.tag){case 3:Lt(o,o.stateNode.containerInfo),Us(o,bt,i.memoizedState.cache),Oo();break;case 27:case 5:vo(o);break;case 4:Lt(o,o.stateNode.containerInfo);break;case 10:Us(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,bd(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(qs(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Ly(i,o,a):(qs(o),i=is(i,o,a),i!==null?i.sibling:null);qs(o);break;case 19:var y=(i.flags&128)!==0;if(u=(a&o.childLanes)!==0,u||(Nr(i,o,a,!1),u=(a&o.childLanes)!==0),y){if(u)return qy(i,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Y(Tt,Tt.current),u)break;return null;case 22:return o.lanes=0,My(i,o,a,o.pendingProps);case 24:Us(o,bt,i.memoizedState.cache)}return is(i,o,a)}function By(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Mt=!0;else{if(!sh(i,a)&&(o.flags&128)===0)return Mt=!1,FC(i,o,a);Mt=(i.flags&131072)!==0}else Mt=!1,He&&(o.flags&1048576)!==0&&vg(o,Qa,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=Fo(o.elementType),o.type=i,typeof i=="function")ud(i)?(u=Jo(i,u),o.tag=1,o=Uy(null,o,i,u,a)):(o.tag=0,o=Wd(null,o,i,u,a));else{if(i!=null){var y=i.$$typeof;if(y===re){o.tag=11,o=xy(null,o,i,u,a);break e}else if(y===M){o.tag=14,o=by(null,o,i,u,a);break e}}throw o=ve(i)||i,Error(s(306,o,""))}}return o;case 0:return Wd(i,o,o.type,o.pendingProps,a);case 1:return u=o.type,y=Jo(u,o.pendingProps),Uy(i,o,u,y,a);case 3:e:{if(Lt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var v=o.memoizedState;y=v.element,Cd(i,o),il(o,u,null,a);var A=o.memoizedState;if(u=A.cache,Us(o,bt,u),u!==v.cache&&vd(o,[bt],a,!0),nl(),u=A.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=ky(i,o,u,a);break e}else if(u!==y){y=qn(Error(s(424)),o),Xa(y),o=ky(i,o,u,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=Hn(i.firstChild),$t=o,He=!0,Vs=null,Fn=!0,a=Mg(o,null,u,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Oo(),u===y){o=is(i,o,a);break e}Xt(i,o,u,a)}o=o.child}return o;case 26:return ic(i,o),i===null?(a=Wv(o.type,null,o.pendingProps,null))?o.memoizedState=a:He||(a=o.type,i=o.pendingProps,u=Tc(Se.current).createElement(a),u[Rt]=o,u[zt]=i,Wt(u,a,i),It(u),o.stateNode=u):o.memoizedState=Wv(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return vo(o),i===null&&He&&(u=o.stateNode=$v(o.type,o.pendingProps,Se.current),$t=o,Fn=!0,y=ut,$s(o.type)?(Lh=y,ut=Hn(u.firstChild)):ut=y),Xt(i,o,o.pendingProps.children,a),ic(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&He&&((y=u=ut)&&(u=vw(u,o.type,o.pendingProps,Fn),u!==null?(o.stateNode=u,$t=o,ut=Hn(u.firstChild),Fn=!1,y=!0):y=!1),y||Ps(o)),vo(o),y=o.type,v=o.pendingProps,A=i!==null?i.memoizedProps:null,u=v.children,Dh(y,v)?u=null:A!==null&&Dh(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=Md(i,o,VC,null,null,a),Al._currentValue=y),ic(i,o),Xt(i,o,u,a),o.child;case 6:return i===null&&He&&((i=a=ut)&&(a=_w(a,o.pendingProps,Fn),a!==null?(o.stateNode=a,$t=o,ut=null,i=!0):i=!1),i||Ps(o)),null;case 13:return Ly(i,o,a);case 4:return Lt(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Ho(o,null,u,a):Xt(i,o,u,a),o.child;case 11:return xy(i,o,o.type,o.pendingProps,a);case 7:return Xt(i,o,o.pendingProps,a),o.child;case 8:return Xt(i,o,o.pendingProps.children,a),o.child;case 12:return Xt(i,o,o.pendingProps.children,a),o.child;case 10:return u=o.pendingProps,Us(o,o.type,u.value),Xt(i,o,u.children,a),o.child;case 9:return y=o.type._context,u=o.pendingProps.children,Bo(o),y=Qt(y),u=u(y),o.flags|=1,Xt(i,o,u,a),o.child;case 14:return by(i,o,o.type,o.pendingProps,a);case 15:return Ny(i,o,o.type,o.pendingProps,a);case 19:return qy(i,o,a);case 31:return zC(i,o,a);case 22:return My(i,o,a,o.pendingProps);case 24:return Bo(o),u=Qt(bt),i===null?(y=Ed(),y===null&&(y=rt,v=_d(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:u,cache:y},Ad(o),Us(o,bt,y)):((i.lanes&a)!==0&&(Cd(i,o),il(o,null,null,a),nl()),y=i.memoizedState,v=o.memoizedState,y.parent!==u?(y={parent:u,cache:u},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Us(o,bt,u)):(u=v.cache,Us(o,bt,u),u!==y.cache&&vd(o,[bt],a,!0))),Xt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ss(i){i.flags|=4}function oh(i,o,a,u,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(hv())i.flags|=8192;else throw Go=Fu,Sd}else i.flags&=-16777217}function zy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!n0(o))if(hv())i.flags|=8192;else throw Go=Fu,Sd}function oc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?fu():536870912,i.lanes|=o,Fr|=o)}function ul(i,o){if(!He)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function ct(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(o)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags&65011712,u|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,u|=y.subtreeFlags,u|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=u,i.childLanes=a,o}function GC(i,o,a){var u=o.pendingProps;switch(hd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(o),null;case 1:return ct(o),null;case 3:return a=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),es(bt),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(br(o)?ss(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,pd())),ct(o),null;case 26:var y=o.type,v=o.memoizedState;return i===null?(ss(o),v!==null?(ct(o),zy(o,v)):(ct(o),oh(o,y,null,u,a))):v?v!==i.memoizedState?(ss(o),ct(o),zy(o,v)):(ct(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&ss(o),ct(o),oh(o,y,i,u,a)),null;case 27:if(ar(o),a=Se.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&ss(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ct(o),null}i=ae.current,br(o)?Tg(o):(i=$v(y,u,a),o.stateNode=i,ss(o))}return ct(o),null;case 5:if(ar(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&ss(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return ct(o),null}if(v=ae.current,br(o))Tg(o);else{var A=Tc(Se.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?A.createElement(y,{is:u.is}):A.createElement(y)}}v[Rt]=o,v[zt]=u;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(Wt(v,y,u),y){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ss(o)}}return ct(o),oh(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&ss(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=Se.current,br(o)){if(i=o.stateNode,a=o.memoizedProps,u=null,y=$t,y!==null)switch(y.tag){case 27:case 5:u=y.memoizedProps}i[Rt]=o,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Lv(i.nodeValue,a)),i||Ps(o,!0)}else i=Tc(i).createTextNode(u),i[Rt]=o,o.stateNode=i}return ct(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(u=br(o),a!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Rt]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),i=!1}else a=pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(xn(o),o):(xn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ct(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=br(o),u!==null&&u.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Rt]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),y=!1}else y=pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(xn(o),o):(xn(o),null)}return xn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=o.child,y=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(y=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==y&&(u.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),oc(o,o.updateQueue),ct(o),null);case 4:return dt(),i===null&&Ih(o.stateNode.containerInfo),ct(o),null;case 10:return es(o.type),ct(o),null;case 19:if(ne(Tt),u=o.memoizedState,u===null)return ct(o),null;if(y=(o.flags&128)!==0,v=u.rendering,v===null)if(y)ul(u,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Ju(i),v!==null){for(o.flags|=128,ul(u,!1),i=v.updateQueue,o.updateQueue=i,oc(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)pg(a,i),a=a.sibling;return Y(Tt,Tt.current&1|2),He&&Zi(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&an()>cc&&(o.flags|=128,y=!0,ul(u,!1),o.lanes=4194304)}else{if(!y)if(i=Ju(v),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,oc(o,i),ul(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!He)return ct(o),null}else 2*an()-u.renderingStartTime>cc&&a!==536870912&&(o.flags|=128,y=!0,ul(u,!1),o.lanes=4194304);u.isBackwards?(v.sibling=o.child,o.child=v):(i=u.last,i!==null?i.sibling=v:o.child=v,u.last=v)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=an(),i.sibling=null,a=Tt.current,Y(Tt,y?a&1|2:a&1),He&&Zi(o,u.treeForkCount),i):(ct(o),null);case 22:case 23:return xn(o),xd(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(a&536870912)!==0&&(o.flags&128)===0&&(ct(o),o.subtreeFlags&6&&(o.flags|=8192)):ct(o),a=o.updateQueue,a!==null&&oc(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==a&&(o.flags|=2048),i!==null&&ne(zo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),es(bt),ct(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function HC(i,o){switch(hd(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return es(bt),dt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return ar(o),null;case 31:if(o.memoizedState!==null){if(xn(o),o.alternate===null)throw Error(s(340));Oo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(xn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Oo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ne(Tt),null;case 4:return dt(),null;case 10:return es(o.type),null;case 22:case 23:return xn(o),xd(),i!==null&&ne(zo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return es(bt),null;case 25:return null;default:return null}}function Fy(i,o){switch(hd(o),o.tag){case 3:es(bt),dt();break;case 26:case 27:case 5:ar(o);break;case 4:dt();break;case 31:o.memoizedState!==null&&xn(o);break;case 13:xn(o);break;case 19:ne(Tt);break;case 10:es(o.type);break;case 22:case 23:xn(o),xd(),i!==null&&ne(zo);break;case 24:es(bt)}}function cl(i,o){try{var a=o.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var y=u.next;a=y;do{if((a.tag&i)===i){u=void 0;var v=a.create,A=a.inst;u=v(),A.destroy=u}a=a.next}while(a!==y)}}catch(I){tt(o,o.return,I)}}function zs(i,o,a){try{var u=o.updateQueue,y=u!==null?u.lastEffect:null;if(y!==null){var v=y.next;u=v;do{if((u.tag&i)===i){var A=u.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,y=o;var L=a,K=I;try{K()}catch(ee){tt(y,L,ee)}}}u=u.next}while(u!==v)}}catch(ee){tt(o,o.return,ee)}}function Gy(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Vg(o,a)}catch(u){tt(i,i.return,u)}}}function Hy(i,o,a){a.props=Jo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){tt(i,o,u)}}function fl(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(y){tt(i,o,y)}}function ki(i,o){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(y){tt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){tt(i,o,y)}else a.current=null}function Yy(i){var o=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(y){tt(i,i.return,y)}}function rh(i,o,a){try{var u=i.stateNode;dw(u,i.type,a,o),u[zt]=o}catch(y){tt(i,i.return,y)}}function Jy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$s(i.type)||i.tag===4}function ah(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Jy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$s(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lh(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=ti));else if(u!==4&&(u===27&&$s(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(lh(i,o,a),i=i.sibling;i!==null;)lh(i,o,a),i=i.sibling}function rc(i,o,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(u!==4&&(u===27&&$s(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(rc(i,o,a),i=i.sibling;i!==null;)rc(i,o,a),i=i.sibling}function Ky(i){var o=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Wt(o,u,a),o[Rt]=i,o[zt]=a}catch(v){tt(i,i.return,v)}}var os=!1,Dt=!1,uh=!1,$y=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function YC(i,o){if(i=i.containerInfo,Nh=Ic,i=rg(i),nd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var y=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,I=-1,L=-1,K=0,ee=0,ie=i,$=null;t:for(;;){for(var Z;ie!==a||y!==0&&ie.nodeType!==3||(I=A+y),ie!==v||u!==0&&ie.nodeType!==3||(L=A+u),ie.nodeType===3&&(A+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)$=ie,ie=Z;for(;;){if(ie===i)break t;if($===a&&++K===y&&(I=A),$===v&&++ee===u&&(L=A),(Z=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=Z}a=I===-1||L===-1?null:{start:I,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mh={focusedElem:i,selectionRange:a},Ic=!1,Gt=o;Gt!==null;)if(o=Gt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Gt=i;else for(;Gt!==null;){switch(o=Gt,v=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,u=a.stateNode;try{var ye=Jo(a.type,y);i=u.getSnapshotBeforeUpdate(ye,v),u.__reactInternalSnapshotBeforeUpdate=i}catch(Re){tt(a,a.return,Re)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)Ph(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ph(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Gt=i;break}Gt=o.return}}function Qy(i,o,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:as(i,a),u&4&&cl(5,a);break;case 1:if(as(i,a),u&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(A){tt(a,a.return,A)}else{var y=Jo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){tt(a,a.return,A)}}u&64&&Gy(a),u&512&&fl(a,a.return);break;case 3:if(as(i,a),u&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Vg(i,o)}catch(A){tt(a,a.return,A)}}break;case 27:o===null&&u&4&&Ky(a);case 26:case 5:as(i,a),o===null&&u&4&&Yy(a),u&512&&fl(a,a.return);break;case 12:as(i,a);break;case 31:as(i,a),u&4&&Zy(i,a);break;case 13:as(i,a),u&4&&jy(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=ew.bind(null,a),Tw(i,a))));break;case 22:if(u=a.memoizedState!==null||os,!u){o=o!==null&&o.memoizedState!==null||Dt,y=os;var v=Dt;os=u,(Dt=o)&&!v?ls(i,a,(a.subtreeFlags&8772)!==0):as(i,a),os=y,Dt=v}break;case 30:break;default:as(i,a)}}function Xy(i){var o=i.alternate;o!==null&&(i.alternate=null,Xy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&dr(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mt=null,pn=!1;function rs(i,o,a){for(a=a.child;a!==null;)Wy(i,o,a),a=a.sibling}function Wy(i,o,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:Dt||ki(a,o),rs(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||ki(a,o);var u=mt,y=pn;$s(a.type)&&(mt=a.stateNode,pn=!1),rs(i,o,a),Tl(a.stateNode),mt=u,pn=y;break;case 5:Dt||ki(a,o);case 6:if(u=mt,y=pn,mt=null,rs(i,o,a),mt=u,pn=y,mt!==null)if(pn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(v){tt(a,o,v)}else try{mt.removeChild(a.stateNode)}catch(v){tt(a,o,v)}break;case 18:mt!==null&&(pn?(i=mt,Gv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Xr(i)):Gv(mt,a.stateNode));break;case 4:u=mt,y=pn,mt=a.stateNode.containerInfo,pn=!0,rs(i,o,a),mt=u,pn=y;break;case 0:case 11:case 14:case 15:zs(2,a,o),Dt||zs(4,a,o),rs(i,o,a);break;case 1:Dt||(ki(a,o),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Hy(a,o,u)),rs(i,o,a);break;case 21:rs(i,o,a);break;case 22:Dt=(u=Dt)||a.memoizedState!==null,rs(i,o,a),Dt=u;break;default:rs(i,o,a)}}function Zy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xr(i)}catch(a){tt(o,o.return,a)}}}function jy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xr(i)}catch(a){tt(o,o.return,a)}}function JC(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new $y),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new $y),o;default:throw Error(s(435,i.tag))}}function ac(i,o){var a=JC(i);o.forEach(function(u){if(!a.has(u)){a.add(u);var y=tw.bind(null,i,u);u.then(y,y)}})}function gn(i,o){var a=o.deletions;if(a!==null)for(var u=0;u<a.length;u++){var y=a[u],v=i,A=o,I=A;e:for(;I!==null;){switch(I.tag){case 27:if($s(I.type)){mt=I.stateNode,pn=!1;break e}break;case 5:mt=I.stateNode,pn=!1;break e;case 3:case 4:mt=I.stateNode.containerInfo,pn=!0;break e}I=I.return}if(mt===null)throw Error(s(160));Wy(v,A,y),mt=null,pn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ev(o,i),o=o.sibling}var ai=null;function ev(i,o){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gn(o,i),yn(i),u&4&&(zs(3,i,i.return),cl(3,i),zs(5,i,i.return));break;case 1:gn(o,i),yn(i),u&512&&(Dt||a===null||ki(a,a.return)),u&64&&os&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var y=ai;if(gn(o,i),yn(i),u&512&&(Dt||a===null||ki(a,a.return)),u&4){var v=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(u){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Si]||v[Rt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(u),y.head.insertBefore(v,y.querySelector("head > title"))),Wt(v,u,a),v[Rt]=i,It(v),u=v;break e;case"link":var A=e0("link","href",y).get(u+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(v=A[I],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}v=y.createElement(u),Wt(v,u,a),y.head.appendChild(v);break;case"meta":if(A=e0("meta","content",y).get(u+(a.content||""))){for(I=0;I<A.length;I++)if(v=A[I],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}v=y.createElement(u),Wt(v,u,a),y.head.appendChild(v);break;default:throw Error(s(468,u))}v[Rt]=i,It(v),u=v}i.stateNode=u}else t0(y,i.type,i.stateNode);else i.stateNode=jv(y,u,i.memoizedProps);else v!==u?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,u===null?t0(y,i.type,i.stateNode):jv(y,u,i.memoizedProps)):u===null&&i.stateNode!==null&&rh(i,i.memoizedProps,a.memoizedProps)}break;case 27:gn(o,i),yn(i),u&512&&(Dt||a===null||ki(a,a.return)),a!==null&&u&4&&rh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(gn(o,i),yn(i),u&512&&(Dt||a===null||ki(a,a.return)),i.flags&32){y=i.stateNode;try{mn(y,"")}catch(ye){tt(i,i.return,ye)}}u&4&&i.stateNode!=null&&(y=i.memoizedProps,rh(i,y,a!==null?a.memoizedProps:y)),u&1024&&(uh=!0);break;case 6:if(gn(o,i),yn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(ye){tt(i,i.return,ye)}}break;case 3:if(Ac=null,y=ai,ai=Ec(o.containerInfo),gn(o,i),ai=y,yn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Xr(o.containerInfo)}catch(ye){tt(i,i.return,ye)}uh&&(uh=!1,tv(i));break;case 4:u=ai,ai=Ec(i.stateNode.containerInfo),gn(o,i),yn(i),ai=u;break;case 12:gn(o,i),yn(i);break;case 31:gn(o,i),yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ac(i,u)));break;case 13:gn(o,i),yn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=an()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ac(i,u)));break;case 22:y=i.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,K=os,ee=Dt;if(os=K||y,Dt=ee||L,gn(o,i),Dt=ee,os=K,yn(i),u&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||L||os||Dt||Ko(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){L=a=o;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=L.stateNode;var ie=L.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;I.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ye){tt(L,L.return,ye)}}}else if(o.tag===6){if(a===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ye){tt(L,L.return,ye)}}}else if(o.tag===18){if(a===null){L=o;try{var Z=L.stateNode;y?Hv(Z,!0):Hv(L.stateNode,!1)}catch(ye){tt(L,L.return,ye)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,ac(i,a))));break;case 19:gn(o,i),yn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ac(i,u)));break;case 30:break;case 21:break;default:gn(o,i),yn(i)}}function yn(i){var o=i.flags;if(o&2){try{for(var a,u=i.return;u!==null;){if(Jy(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,v=ah(i);rc(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(mn(A,""),a.flags&=-33);var I=ah(i);rc(i,I,A);break;case 3:case 4:var L=a.stateNode.containerInfo,K=ah(i);lh(i,K,L);break;default:throw Error(s(161))}}catch(ee){tt(i,i.return,ee)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function tv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;tv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function as(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Qy(i,o.alternate,o),o=o.sibling}function Ko(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:zs(4,o,o.return),Ko(o);break;case 1:ki(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Hy(o,o.return,a),Ko(o);break;case 27:Tl(o.stateNode);case 26:case 5:ki(o,o.return),Ko(o);break;case 22:o.memoizedState===null&&Ko(o);break;case 30:Ko(o);break;default:Ko(o)}i=i.sibling}}function ls(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,y=i,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:ls(y,v,a),cl(4,v);break;case 1:if(ls(y,v,a),u=v,y=u.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){tt(u,u.return,K)}if(u=v,y=u.updateQueue,y!==null){var I=u.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Dg(L[y],I)}catch(K){tt(u,u.return,K)}}a&&A&64&&Gy(v),fl(v,v.return);break;case 27:Ky(v);case 26:case 5:ls(y,v,a),a&&u===null&&A&4&&Yy(v),fl(v,v.return);break;case 12:ls(y,v,a);break;case 31:ls(y,v,a),a&&A&4&&Zy(y,v);break;case 13:ls(y,v,a),a&&A&4&&jy(y,v);break;case 22:v.memoizedState===null&&ls(y,v,a),fl(v,v.return);break;case 30:break;default:ls(y,v,a)}o=o.sibling}}function ch(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Wa(a))}function fh(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Wa(i))}function li(i,o,a,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)nv(i,o,a,u),o=o.sibling}function nv(i,o,a,u){var y=o.flags;switch(o.tag){case 0:case 11:case 15:li(i,o,a,u),y&2048&&cl(9,o);break;case 1:li(i,o,a,u);break;case 3:li(i,o,a,u),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Wa(i)));break;case 12:if(y&2048){li(i,o,a,u),i=o.stateNode;try{var v=o.memoizedProps,A=v.id,I=v.onPostCommit;typeof I=="function"&&I(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){tt(o,o.return,L)}}else li(i,o,a,u);break;case 31:li(i,o,a,u);break;case 13:li(i,o,a,u);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?li(i,o,a,u):dl(i,o):v._visibility&2?li(i,o,a,u):(v._visibility|=2,qr(i,o,a,u,(o.subtreeFlags&10256)!==0||!1)),y&2048&&ch(A,o);break;case 24:li(i,o,a,u),y&2048&&fh(o.alternate,o);break;default:li(i,o,a,u)}}function qr(i,o,a,u,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=i,A=o,I=a,L=u,K=A.flags;switch(A.tag){case 0:case 11:case 15:qr(v,A,I,L,y),cl(8,A);break;case 23:break;case 22:var ee=A.stateNode;A.memoizedState!==null?ee._visibility&2?qr(v,A,I,L,y):dl(v,A):(ee._visibility|=2,qr(v,A,I,L,y)),y&&K&2048&&ch(A.alternate,A);break;case 24:qr(v,A,I,L,y),y&&K&2048&&fh(A.alternate,A);break;default:qr(v,A,I,L,y)}o=o.sibling}}function dl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,u=o,y=u.flags;switch(u.tag){case 22:dl(a,u),y&2048&&ch(u.alternate,u);break;case 24:dl(a,u),y&2048&&fh(u.alternate,u);break;default:dl(a,u)}o=o.sibling}}var hl=8192;function Br(i,o,a){if(i.subtreeFlags&hl)for(i=i.child;i!==null;)iv(i,o,a),i=i.sibling}function iv(i,o,a){switch(i.tag){case 26:Br(i,o,a),i.flags&hl&&i.memoizedState!==null&&Dw(a,ai,i.memoizedState,i.memoizedProps);break;case 5:Br(i,o,a);break;case 3:case 4:var u=ai;ai=Ec(i.stateNode.containerInfo),Br(i,o,a),ai=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=hl,hl=16777216,Br(i,o,a),hl=u):Br(i,o,a));break;default:Br(i,o,a)}}function sv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ml(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Gt=u,rv(u,i)}sv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ov(i),i=i.sibling}function ov(i){switch(i.tag){case 0:case 11:case 15:ml(i),i.flags&2048&&zs(9,i,i.return);break;case 3:ml(i);break;case 12:ml(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,lc(i)):ml(i);break;default:ml(i)}}function lc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var u=o[a];Gt=u,rv(u,i)}sv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:zs(8,o,o.return),lc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,lc(o));break;default:lc(o)}i=i.sibling}}function rv(i,o){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:zs(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Gt=u;else e:for(a=i;Gt!==null;){u=Gt;var y=u.sibling,v=u.return;if(Xy(u),u===a){Gt=null;break e}if(y!==null){y.return=v,Gt=y;break e}Gt=v}}}var KC={getCacheForType:function(i){var o=Qt(bt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Qt(bt).controller.signal}},$C=typeof WeakMap=="function"?WeakMap:Map,We=0,rt=null,ke=null,Be=0,et=0,bn=null,Fs=!1,zr=!1,dh=!1,us=0,yt=0,Gs=0,$o=0,hh=0,Nn=0,Fr=0,pl=null,vn=null,mh=!1,uc=0,av=0,cc=1/0,fc=null,Hs=null,qt=0,Ys=null,Gr=null,cs=0,ph=0,gh=null,lv=null,gl=0,yh=null;function Mn(){return(We&2)!==0&&Be!==0?Be&-Be:W.T!==null?Ah():du()}function uv(){if(Nn===0)if((Be&536870912)===0||He){var i=Eo;Eo<<=1,(Eo&3932160)===0&&(Eo=262144),Nn=i}else Nn=536870912;return i=In.current,i!==null&&(i.flags|=32),Nn}function _n(i,o,a){(i===rt&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(Hr(i,0),Js(i,Be,Nn,!1)),So(i,a),((We&2)===0||i!==rt)&&(i===rt&&((We&2)===0&&($o|=a),yt===4&&Js(i,Be,Nn,!1)),Li(i))}function cv(i,o,a){if((We&6)!==0)throw Error(s(327));var u=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Zn(i,o),y=u?WC(i,o):_h(i,o,!0),v=u;do{if(y===0){zr&&!u&&Js(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!QC(a)){y=_h(i,o,!1),v=!1;continue}if(y===2){if(v=o,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var I=i;y=pl;var L=I.current.memoizedState.isDehydrated;if(L&&(Hr(I,A).flags|=256),A=_h(I,A,!1),A!==2){if(dh&&!L){I.errorRecoveryDisabledLanes|=v,$o|=v,y=4;break e}v=vn,vn=y,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){Hr(i,0),Js(i,o,0,!0);break}e:{switch(u=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Js(u,o,Nn,!Fs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(y=uc+300-an(),10<y)){if(Js(u,o,Nn,!Fs),_i(u,0,!0)!==0)break e;cs=o,u.timeoutHandle=zv(fv.bind(null,u,a,vn,fc,mh,o,Nn,$o,Fr,Fs,v,"Throttled",-0,0),y);break e}fv(u,a,vn,fc,mh,o,Nn,$o,Fr,Fs,v,null,-0,0)}}break}while(!0);Li(i)}function fv(i,o,a,u,y,v,A,I,L,K,ee,ie,$,Z){if(i.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},iv(o,v,ie);var ye=(v&62914560)===v?uc-an():(v&4194048)===v?av-an():0;if(ye=Vw(ie,ye),ye!==null){cs=v,i.cancelPendingCommit=ye(_v.bind(null,i,o,v,a,u,y,A,I,L,ee,ie,null,$,Z)),Js(i,v,A,!K);return}}_v(i,o,v,a,u,y,A,I,L)}function QC(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var y=a[u],v=y.getSnapshot;y=y.value;try{if(!wn(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Js(i,o,a,u){o&=~hh,o&=~$o,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var y=o;0<y;){var v=31-vt(y),A=1<<v;u[v]=-1,y&=~A}a!==0&&Ao(i,a,o)}function dc(){return(We&6)===0?(yl(0),!1):!0}function vh(){if(ke!==null){if(et===0)var i=ke.return;else i=ke,ji=qo=null,Pd(i),Pr=null,ja=0,i=ke;for(;i!==null;)Fy(i.alternate,i),i=i.return;ke=null}}function Hr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,pw(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),cs=0,vh(),rt=i,ke=a=Wi(i.current,null),Be=o,et=0,bn=null,Fs=!1,zr=Zn(i,o),dh=!1,Fr=Nn=hh=$o=Gs=yt=0,vn=pl=null,mh=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var y=31-vt(u),v=1<<y;o|=i[y],u&=~v}return us=o,Vu(),a}function dv(i,o){Pe=null,W.H=al,o===Vr||o===zu?(o=xg(),et=3):o===Sd?(o=xg(),et=4):et=o===Xd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bn=o,ke===null&&(yt=1,tc(i,qn(o,i.current)))}function hv(){var i=In.current;return i===null?!0:(Be&4194048)===Be?Gn===null:(Be&62914560)===Be||(Be&536870912)!==0?i===Gn:!1}function mv(){var i=W.H;return W.H=al,i===null?al:i}function pv(){var i=W.A;return W.A=KC,i}function hc(){yt=4,Fs||(Be&4194048)!==Be&&In.current!==null||(zr=!0),(Gs&134217727)===0&&($o&134217727)===0||rt===null||Js(rt,Be,Nn,!1)}function _h(i,o,a){var u=We;We|=2;var y=mv(),v=pv();(rt!==i||Be!==o)&&(fc=null,Hr(i,o)),o=!1;var A=yt;e:do try{if(et!==0&&ke!==null){var I=ke,L=bn;switch(et){case 8:vh(),A=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(o=!0);var K=et;if(et=0,bn=null,Yr(i,I,L,K),a&&zr){A=0;break e}break;default:K=et,et=0,bn=null,Yr(i,I,L,K)}}XC(),A=yt;break}catch(ee){dv(i,ee)}while(!0);return o&&i.shellSuspendCounter++,ji=qo=null,We=u,W.H=y,W.A=v,ke===null&&(rt=null,Be=0,Vu()),A}function XC(){for(;ke!==null;)gv(ke)}function WC(i,o){var a=We;We|=2;var u=mv(),y=pv();rt!==i||Be!==o?(fc=null,cc=an()+500,Hr(i,o)):zr=Zn(i,o);e:do try{if(et!==0&&ke!==null){o=ke;var v=bn;t:switch(et){case 1:et=0,bn=null,Yr(i,o,v,1);break;case 2:case 9:if(Rg(v)){et=0,bn=null,yv(o);break}o=function(){et!==2&&et!==9||rt!==i||(et=7),Li(i)},v.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Rg(v)?(et=0,bn=null,yv(o)):(et=0,bn=null,Yr(i,o,v,7));break;case 5:var A=null;switch(ke.tag){case 26:A=ke.memoizedState;case 5:case 27:var I=ke;if(A?n0(A):I.stateNode.complete){et=0,bn=null;var L=I.sibling;if(L!==null)ke=L;else{var K=I.return;K!==null?(ke=K,mc(K)):ke=null}break t}}et=0,bn=null,Yr(i,o,v,5);break;case 6:et=0,bn=null,Yr(i,o,v,6);break;case 8:vh(),yt=6;break e;default:throw Error(s(462))}}ZC();break}catch(ee){dv(i,ee)}while(!0);return ji=qo=null,W.H=u,W.A=y,We=a,ke!==null?0:(rt=null,Be=0,Vu(),yt)}function ZC(){for(;ke!==null&&!Qf();)gv(ke)}function gv(i){var o=By(i.alternate,i,us);i.memoizedProps=i.pendingProps,o===null?mc(i):ke=o}function yv(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Py(a,o,o.pendingProps,o.type,void 0,Be);break;case 11:o=Py(a,o,o.pendingProps,o.type.render,o.ref,Be);break;case 5:Pd(o);default:Fy(a,o),o=ke=pg(o,us),o=By(a,o,us)}i.memoizedProps=i.pendingProps,o===null?mc(i):ke=o}function Yr(i,o,a,u){ji=qo=null,Pd(o),Pr=null,ja=0;var y=o.return;try{if(BC(i,y,o,a,Be)){yt=1,tc(i,qn(a,i.current)),ke=null;return}}catch(v){if(y!==null)throw ke=y,v;yt=1,tc(i,qn(a,i.current)),ke=null;return}o.flags&32768?(He||u===1?i=!0:zr||(Be&536870912)!==0?i=!1:(Fs=i=!0,(u===2||u===9||u===3||u===6)&&(u=In.current,u!==null&&u.tag===13&&(u.flags|=16384))),vv(o,i)):mc(o)}function mc(i){var o=i;do{if((o.flags&32768)!==0){vv(o,Fs);return}i=o.return;var a=GC(o.alternate,o,us);if(a!==null){ke=a;return}if(o=o.sibling,o!==null){ke=o;return}ke=o=i}while(o!==null);yt===0&&(yt=5)}function vv(i,o){do{var a=HC(i.alternate,i);if(a!==null){a.flags&=32767,ke=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){ke=i;return}ke=i=a}while(i!==null);yt=6,ke=null}function _v(i,o,a,u,y,v,A,I,L){i.cancelPendingCommit=null;do pc();while(qt!==0);if((We&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=ad,Zf(i,a,v,A,I,L),i===rt&&(ke=rt=null,Be=0),Gr=o,Ys=i,cs=a,ph=v,gh=y,lv=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,nw(Ss,function(){return Cv(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,y=ue.p,ue.p=2,A=We,We|=4;try{YC(i,o,a)}finally{We=A,ue.p=y,W.T=u}}qt=1,Tv(),Ev(),Sv()}}function Tv(){if(qt===1){qt=0;var i=Ys,o=Gr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var u=ue.p;ue.p=2;var y=We;We|=4;try{ev(o,i);var v=Mh,A=rg(i.containerInfo),I=v.focusedElem,L=v.selectionRange;if(A!==I&&I&&I.ownerDocument&&og(I.ownerDocument.documentElement,I)){if(L!==null&&nd(I)){var K=L.start,ee=L.end;if(ee===void 0&&(ee=K),"selectionStart"in I)I.selectionStart=K,I.selectionEnd=Math.min(ee,I.value.length);else{var ie=I.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var Z=$.getSelection(),ye=I.textContent.length,Re=Math.min(L.start,ye),ot=L.end===void 0?Re:Math.min(L.end,ye);!Z.extend&&Re>ot&&(A=ot,ot=Re,Re=A);var G=sg(I,Re),B=sg(I,ot);if(G&&B&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var J=ie.createRange();J.setStart(G.node,G.offset),Z.removeAllRanges(),Re>ot?(Z.addRange(J),Z.extend(B.node,B.offset)):(J.setEnd(B.node,B.offset),Z.addRange(J))}}}}for(ie=[],Z=I;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ie.length;I++){var te=ie[I];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Ic=!!Nh,Mh=Nh=null}finally{We=y,ue.p=u,W.T=a}}i.current=o,qt=2}}function Ev(){if(qt===2){qt=0;var i=Ys,o=Gr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var u=ue.p;ue.p=2;var y=We;We|=4;try{Qy(i,o.alternate,o)}finally{We=y,ue.p=u,W.T=a}}qt=3}}function Sv(){if(qt===4||qt===3){qt=0,ou();var i=Ys,o=Gr,a=cs,u=lv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?qt=5:(qt=0,Gr=Ys=null,Av(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Hs=null),Ki(a),o=o.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Wn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=W.T,y=ue.p,ue.p=2,W.T=null;try{for(var v=i.onRecoverableError,A=0;A<u.length;A++){var I=u[A];v(I.value,{componentStack:I.stack})}}finally{W.T=o,ue.p=y}}(cs&3)!==0&&pc(),Li(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===yh?gl++:(gl=0,yh=i):gl=0,yl(0)}}function Av(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Wa(o)))}function pc(){return Tv(),Ev(),Sv(),Cv()}function Cv(){if(qt!==5)return!1;var i=Ys,o=ph;ph=0;var a=Ki(cs),u=W.T,y=ue.p;try{ue.p=32>a?32:a,W.T=null,a=gh,gh=null;var v=Ys,A=cs;if(qt=0,Gr=Ys=null,cs=0,(We&6)!==0)throw Error(s(331));var I=We;if(We|=4,ov(v.current),nv(v,v.current,A,a),We=I,yl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Wn,v)}catch{}return!0}finally{ue.p=y,W.T=u,Av(i,o)}}function wv(i,o,a){o=qn(a,o),o=Qd(i.stateNode,o,2),i=Os(i,o,2),i!==null&&(So(i,2),Li(i))}function tt(i,o,a){if(i.tag===3)wv(i,i,a);else for(;o!==null;){if(o.tag===3){wv(o,i,a);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hs===null||!Hs.has(u))){i=qn(a,i),a=Ry(2),u=Os(o,a,2),u!==null&&(Iy(a,u,o,i),So(u,2),Li(u));break}}o=o.return}}function Th(i,o,a){var u=i.pingCache;if(u===null){u=i.pingCache=new $C;var y=new Set;u.set(o,y)}else y=u.get(o),y===void 0&&(y=new Set,u.set(o,y));y.has(a)||(dh=!0,y.add(a),i=jC.bind(null,i,o,a),o.then(i,i))}function jC(i,o,a){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(Be&a)===a&&(yt===4||yt===3&&(Be&62914560)===Be&&300>an()-uc?(We&2)===0&&Hr(i,0):hh|=a,Fr===Be&&(Fr=0)),Li(i)}function Rv(i,o){o===0&&(o=fu()),i=ko(i,o),i!==null&&(So(i,o),Li(i))}function ew(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Rv(i,a)}function tw(i,o){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Rv(i,a)}function nw(i,o){return Ot(i,o)}var gc=null,Jr=null,Eh=!1,yc=!1,Sh=!1,Ks=0;function Li(i){i!==Jr&&i.next===null&&(Jr===null?gc=Jr=i:Jr=Jr.next=i),yc=!0,Eh||(Eh=!0,sw())}function yl(i,o){if(!Sh&&yc){Sh=!0;do for(var a=!1,u=gc;u!==null;){if(i!==0){var y=u.pendingLanes;if(y===0)var v=0;else{var A=u.suspendedLanes,I=u.pingedLanes;v=(1<<31-vt(42|i)+1)-1,v&=y&~(A&~I),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Nv(u,v))}else v=Be,v=_i(u,u===rt?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Zn(u,v)||(a=!0,Nv(u,v));u=u.next}while(a);Sh=!1}}function iw(){Iv()}function Iv(){yc=Eh=!1;var i=0;Ks!==0&&mw()&&(i=Ks);for(var o=an(),a=null,u=gc;u!==null;){var y=u.next,v=xv(u,o);v===0?(u.next=null,a===null?gc=y:a.next=y,y===null&&(Jr=a)):(a=u,(i!==0||(v&3)!==0)&&(yc=!0)),u=y}qt!==0&&qt!==5||yl(i),Ks!==0&&(Ks=0)}function xv(i,o){for(var a=i.suspendedLanes,u=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-vt(v),I=1<<A,L=y[A];L===-1?((I&a)===0||(I&u)!==0)&&(y[A]=Wf(I,o)):L<=o&&(i.expiredLanes|=I),v&=~I}if(o=rt,a=Be,a=_i(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===o&&(et===2||et===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Es(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Zn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(u!==null&&Es(u),Ki(a)){case 2:case 8:a=Ia;break;case 32:a=Ss;break;case 268435456:a=ru;break;default:a=Ss}return u=bv.bind(null,i),a=Ot(a,u),i.callbackPriority=o,i.callbackNode=a,o}return u!==null&&u!==null&&Es(u),i.callbackPriority=2,i.callbackNode=null,2}function bv(i,o){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(pc()&&i.callbackNode!==a)return null;var u=Be;return u=_i(i,i===rt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(cv(i,u,o),xv(i,an()),i.callbackNode!=null&&i.callbackNode===a?bv.bind(null,i):null)}function Nv(i,o){if(pc())return null;cv(i,o,!0)}function sw(){gw(function(){(We&6)!==0?Ot(Ra,iw):Iv()})}function Ah(){if(Ks===0){var i=Mr;i===0&&(i=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Ks=i}return Ks}function Mv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:gr(""+i)}function Dv(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function ow(i,o,a,u,y){if(o==="submit"&&a&&a.stateNode===y){var v=Mv((y[zt]||null).action),A=u.submitter;A&&(o=(o=A[zt]||null)?Mv(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var I=new Ni("action","action",null,u,y);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ks!==0){var L=A?Dv(y,A):new FormData(y);Gd(a,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(I.preventDefault(),L=A?Dv(y,A):new FormData(y),Gd(a,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var Ch=0;Ch<rd.length;Ch++){var wh=rd[Ch],rw=wh.toLowerCase(),aw=wh[0].toUpperCase()+wh.slice(1);ri(rw,"on"+aw)}ri(ug,"onAnimationEnd"),ri(cg,"onAnimationIteration"),ri(fg,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(AC,"onTransitionRun"),ri(CC,"onTransitionStart"),ri(wC,"onTransitionCancel"),ri(dg,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function Vv(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],y=u.event;u=u.listeners;e:{var v=void 0;if(o)for(var A=u.length-1;0<=A;A--){var I=u[A],L=I.instance,K=I.currentTarget;if(I=I.listener,L!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=K;try{v(y)}catch(ee){Du(ee)}y.currentTarget=null,v=L}else for(A=0;A<u.length;A++){if(I=u[A],L=I.instance,K=I.currentTarget,I=I.listener,L!==v&&y.isPropagationStopped())break e;v=I,y.currentTarget=K;try{v(y)}catch(ee){Du(ee)}y.currentTarget=null,v=L}}}}function Le(i,o){var a=o[fr];a===void 0&&(a=o[fr]=new Set);var u=i+"__bubble";a.has(u)||(Pv(o,i,2,!1),a.add(u))}function Rh(i,o,a){var u=0;o&&(u|=4),Pv(a,i,u,o)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Ih(i){if(!i[vc]){i[vc]=!0,Na.forEach(function(a){a!=="selectionchange"&&(lw.has(a)||Rh(a,!1,i),Rh(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[vc]||(o[vc]=!0,Rh("selectionchange",!1,o))}}function Pv(i,o,a,u){switch(u0(o)){case 2:var y=kw;break;case 8:y=Lw;break;default:y=Fh}a=y.bind(null,o,a,i),y=void 0,!xo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),u?y!==void 0?i.addEventListener(o,a,{capture:!0,passive:y}):i.addEventListener(o,a,!0):y!==void 0?i.addEventListener(o,a,{passive:y}):i.addEventListener(o,a,!1)}function xh(i,o,a,u,y){var v=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var I=u.stateNode.containerInfo;if(I===y)break;if(A===4)for(A=u.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;I!==null;){if(A=Ai(I),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){u=v=A;continue e}I=I.parentNode}}u=u.return}xs(function(){var K=v,ee=Un(a),ie=[];e:{var $=hg.get(i);if($!==void 0){var Z=Ni,ye=i;switch(i){case"keypress":if(No(a)===0)break e;case"keydown":case"keyup":Z=bu;break;case"focusin":ye="focus",Z=Do;break;case"focusout":ye="blur",Z=Do;break;case"beforeblur":case"afterblur":Z=Do;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=E;break;case ug:case cg:case fg:Z=Su;break;case dg:Z=b;break;case"scroll":case"scrollend":Z=Fa;break;case"wheel":Z=X;break;case"copy":case"cut":case"paste":Z=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Xi;break;case"toggle":case"beforetoggle":Z=Ve}var Re=(o&4)!==0,ot=!Re&&(i==="scroll"||i==="scrollend"),G=Re?$!==null?$+"Capture":null:$;Re=[];for(var B=K,J;B!==null;){var te=B;if(J=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||J===null||G===null||(te=ni(B,G),te!=null&&Re.push(_l(B,te,J))),ot)break;B=B.return}0<Re.length&&($=new Z($,ye,null,a,ee),ie.push({event:$,listeners:Re}))}}if((o&7)===0){e:{if($=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",$&&a!==qa&&(ye=a.relatedTarget||a.fromElement)&&(Ai(ye)||ye[Ei]))break e;if((Z||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,Z?(ye=a.relatedTarget||a.toElement,Z=K,ye=ye?Ai(ye):null,ye!==null&&(ot=l(ye),Re=ye.tag,ye!==ot||Re!==5&&Re!==27&&Re!==6)&&(ye=null)):(Z=null,ye=K),Z!==ye)){if(Re=Ga,te="onMouseLeave",G="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Re=Xi,te="onPointerLeave",G="onPointerEnter",B="pointer"),ot=Z==null?$:An(Z),J=ye==null?$:An(ye),$=new Re(te,B+"leave",Z,a,ee),$.target=ot,$.relatedTarget=J,te=null,Ai(ee)===K&&(Re=new Re(G,B+"enter",ye,a,ee),Re.target=J,Re.relatedTarget=ot,te=Re),ot=te,Z&&ye)t:{for(Re=uw,G=Z,B=ye,J=0,te=G;te;te=Re(te))J++;te=0;for(var Ae=B;Ae;Ae=Re(Ae))te++;for(;0<J-te;)G=Re(G),J--;for(;0<te-J;)B=Re(B),te--;for(;J--;){if(G===B||B!==null&&G===B.alternate){Re=G;break t}G=Re(G),B=Re(B)}Re=null}else Re=null;Z!==null&&Uv(ie,$,Z,Re,!1),ye!==null&&ot!==null&&Uv(ie,ot,ye,Re,!0)}}e:{if($=K?An(K):window,Z=$.nodeName&&$.nodeName.toLowerCase(),Z==="select"||Z==="input"&&$.type==="file")var Ke=Zp;else if(Xp($))if(jp)Ke=TC;else{Ke=vC;var _e=yC}else Z=$.nodeName,!Z||Z.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&pr(K.elementType)&&(Ke=Zp):Ke=_C;if(Ke&&(Ke=Ke(i,K))){Wp(ie,Ke,a,ee);break e}_e&&_e(i,$,K),i==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&ka($,"number",$.value)}switch(_e=K?An(K):window,i){case"focusin":(Xp(_e)||_e.contentEditable==="true")&&(Ar=_e,id=K,$a=null);break;case"focusout":$a=id=Ar=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,ag(ie,a,ee);break;case"selectionchange":if(SC)break;case"keydown":case"keyup":ag(ie,a,ee)}var Ue;if(Xe)e:{switch(i){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Sr?Vo(i,a)&&(ze="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Vi&&a.locale!=="ko"&&(Sr||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Sr&&(Ue=za()):(bi=ee,Ba="value"in bi?bi.value:bi.textContent,Sr=!0)),_e=_c(K,ze),0<_e.length&&(ze=new Di(ze,i,null,a,ee),ie.push({event:ze,listeners:_e}),Ue?ze.data=Ue:(Ue=Er(a),Ue!==null&&(ze.data=Ue)))),(Ue=Ln?hC(i,a):mC(i,a))&&(ze=_c(K,"onBeforeInput"),0<ze.length&&(_e=new Di("onBeforeInput","beforeinput",null,a,ee),ie.push({event:_e,listeners:ze}),_e.data=Ue)),ow(ie,i,K,a,ee)}Vv(ie,o)})}function _l(i,o,a){return{instance:i,listener:o,currentTarget:a}}function _c(i,o){for(var a=o+"Capture",u=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ni(i,a),y!=null&&u.unshift(_l(i,y,v)),y=ni(i,o),y!=null&&u.push(_l(i,y,v))),i.tag===3)return u;i=i.return}return[]}function uw(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Uv(i,o,a,u,y){for(var v=o._reactName,A=[];a!==null&&a!==u;){var I=a,L=I.alternate,K=I.stateNode;if(I=I.tag,L!==null&&L===u)break;I!==5&&I!==26&&I!==27||K===null||(L=K,y?(K=ni(a,v),K!=null&&A.unshift(_l(a,K,L))):y||(K=ni(a,v),K!=null&&A.push(_l(a,K,L)))),a=a.return}A.length!==0&&i.push({event:o,listeners:A})}var cw=/\r\n?/g,fw=/\u0000|\uFFFD/g;function kv(i){return(typeof i=="string"?i:""+i).replace(cw,`
`).replace(fw,"")}function Lv(i,o){return o=kv(o),kv(i)===o}function st(i,o,a,u,y,v){switch(a){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||mn(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&mn(i,""+u);break;case"className":Cn(i,"class",u);break;case"tabIndex":Cn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(i,a,u);break;case"style":Oa(i,u,v);break;case"data":if(o!=="object"){Cn(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=gr(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&st(i,o,"name",y.name,y,null),st(i,o,"formEncType",y.formEncType,y,null),st(i,o,"formMethod",y.formMethod,y,null),st(i,o,"formTarget",y.formTarget,y,null)):(st(i,o,"encType",y.encType,y,null),st(i,o,"method",y.method,y,null),st(i,o,"target",y.target,y,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=gr(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=ti);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=gr(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":Le("beforetoggle",i),Le("toggle",i),hr(i,"popover",u);break;case"xlinkActuate":xt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":hr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_u.get(a)||a,hr(i,a,u))}}function bh(i,o,a,u,y,v){switch(a){case"style":Oa(i,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof u=="string"?mn(i,u):(typeof u=="number"||typeof u=="bigint")&&mn(i,""+u);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=i[zt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,y),typeof u=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,u,y);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):hr(i,a,u)}}}function Wt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var u=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":u=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:st(i,o,v,A,a,null)}}y&&st(i,o,"srcSet",a.srcSet,a,null),u&&st(i,o,"src",a.src,a,null);return;case"input":Le("invalid",i);var I=v=A=y=null,L=null,K=null;for(u in a)if(a.hasOwnProperty(u)){var ee=a[u];if(ee!=null)switch(u){case"name":y=ee;break;case"type":A=ee;break;case"checked":L=ee;break;case"defaultChecked":K=ee;break;case"value":v=ee;break;case"defaultValue":I=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,o));break;default:st(i,o,u,ee,a,null)}}gu(i,v,I,L,K,A,y,!1);return;case"select":Le("invalid",i),u=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(I=a[y],I!=null))switch(y){case"value":v=I;break;case"defaultValue":A=I;break;case"multiple":u=I;default:st(i,o,y,I,a,null)}o=v,a=A,i.multiple=!!u,o!=null?Cs(i,!!u,o,!1):a!=null&&Cs(i,!!u,a,!0);return;case"textarea":Le("invalid",i),v=y=u=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":u=I;break;case"defaultValue":y=I;break;case"children":v=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(s(91));break;default:st(i,o,A,I,a,null)}ws(i,u,y,v);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(u=a[L],u!=null))switch(L){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(i,o,L,u,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(u=0;u<vl.length;u++)Le(vl[u],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(u=a[K],u!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:st(i,o,K,u,a,null)}return;default:if(pr(o)){for(ee in a)a.hasOwnProperty(ee)&&(u=a[ee],u!==void 0&&bh(i,o,ee,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&st(i,o,I,u,a,null))}function dw(i,o,a,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,I=null,L=null,K=null,ee=null;for(Z in a){var ie=a[Z];if(a.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ie;default:u.hasOwnProperty(Z)||st(i,o,Z,null,u,ie)}}for(var $ in u){var Z=u[$];if(ie=a[$],u.hasOwnProperty($)&&(Z!=null||ie!=null))switch($){case"type":v=Z;break;case"name":y=Z;break;case"checked":K=Z;break;case"defaultChecked":ee=Z;break;case"value":A=Z;break;case"defaultValue":I=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:Z!==ie&&st(i,o,$,Z,u,ie)}}mr(i,A,I,L,K,ee,v,y);return;case"select":Z=A=I=$=null;for(v in a)if(L=a[v],a.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":Z=L;default:u.hasOwnProperty(v)||st(i,o,v,null,u,L)}for(y in u)if(v=u[y],L=a[y],u.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":$=v;break;case"defaultValue":I=v;break;case"multiple":A=v;default:v!==L&&st(i,o,y,v,u,L)}o=I,a=A,u=Z,$!=null?Cs(i,!!a,$,!1):!!u!=!!a&&(o!=null?Cs(i,!!a,o,!0):Cs(i,!!a,a?[]:"",!1));return;case"textarea":Z=$=null;for(I in a)if(y=a[I],a.hasOwnProperty(I)&&y!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:st(i,o,I,null,u,y)}for(A in u)if(y=u[A],v=a[A],u.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&st(i,o,A,y,u,v)}yu(i,$,Z);return;case"option":for(var ye in a)if($=a[ye],a.hasOwnProperty(ye)&&$!=null&&!u.hasOwnProperty(ye))switch(ye){case"selected":i.selected=!1;break;default:st(i,o,ye,null,u,$)}for(L in u)if($=u[L],Z=a[L],u.hasOwnProperty(L)&&$!==Z&&($!=null||Z!=null))switch(L){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:st(i,o,L,$,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in a)$=a[Re],a.hasOwnProperty(Re)&&$!=null&&!u.hasOwnProperty(Re)&&st(i,o,Re,null,u,$);for(K in u)if($=u[K],Z=a[K],u.hasOwnProperty(K)&&$!==Z&&($!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:st(i,o,K,$,u,Z)}return;default:if(pr(o)){for(var ot in a)$=a[ot],a.hasOwnProperty(ot)&&$!==void 0&&!u.hasOwnProperty(ot)&&bh(i,o,ot,void 0,u,$);for(ee in u)$=u[ee],Z=a[ee],!u.hasOwnProperty(ee)||$===Z||$===void 0&&Z===void 0||bh(i,o,ee,$,u,Z);return}}for(var G in a)$=a[G],a.hasOwnProperty(G)&&$!=null&&!u.hasOwnProperty(G)&&st(i,o,G,null,u,$);for(ie in u)$=u[ie],Z=a[ie],!u.hasOwnProperty(ie)||$===Z||$==null&&Z==null||st(i,o,ie,$,u,Z)}function Ov(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var y=a[u],v=y.transferSize,A=y.initiatorType,I=y.duration;if(v&&I&&Ov(A)){for(A=0,I=y.responseEnd,u+=1;u<a.length;u++){var L=a[u],K=L.startTime;if(K>I)break;var ee=L.transferSize,ie=L.initiatorType;ee&&Ov(ie)&&(L=L.responseEnd,A+=ee*(L<I?1:(I-K)/(L-K)))}if(--u,o+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Nh=null,Mh=null;function Tc(i){return i.nodeType===9?i:i.ownerDocument}function qv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bv(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Dh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Vh=null;function mw(){var i=window.event;return i&&i.type==="popstate"?i===Vh?!1:(Vh=i,!0):(Vh=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,pw=typeof clearTimeout=="function"?clearTimeout:void 0,Fv=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fv<"u"?function(i){return Fv.resolve(null).then(i).catch(yw)}:zv;function yw(i){setTimeout(function(){throw i})}function $s(i){return i==="head"}function Gv(i,o){var a=o,u=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(y),Xr(o);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Tl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Tl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,I=v.nodeName;v[Si]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&Tl(i.ownerDocument.body);a=y}while(a);Xr(o)}function Hv(i,o){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Ph(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ph(a),dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function vw(i,o,a,u){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Si])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Hn(i.nextSibling),i===null)break}return null}function _w(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hn(i.nextSibling),i===null))return null;return i}function Yv(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Hn(i.nextSibling),i===null))return null;return i}function Uh(i){return i.data==="$?"||i.data==="$~"}function kh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Tw(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var u=function(){o(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Hn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Lh=null;function Jv(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Hn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function Kv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function $v(i,o,a){switch(o=Tc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Tl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);dr(i)}var Yn=new Map,Qv=new Set;function Ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fs=ue.d;ue.d={f:Ew,r:Sw,D:Aw,C:Cw,L:ww,m:Rw,X:xw,S:Iw,M:bw};function Ew(){var i=fs.f(),o=dc();return i||o}function Sw(i){var o=Pn(i);o!==null&&o.tag===5&&o.type==="form"?dy(o):fs.r(i)}var Kr=typeof document>"u"?null:document;function Xv(i,o,a){var u=Kr;if(u&&typeof o=="string"&&o){var y=hn(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Qv.has(y)||(Qv.add(y),i={rel:i,crossOrigin:a,href:o},u.querySelector(y)===null&&(o=u.createElement("link"),Wt(o,"link",i),It(o),u.head.appendChild(o)))}}function Aw(i){fs.D(i),Xv("dns-prefetch",i,null)}function Cw(i,o){fs.C(i,o),Xv("preconnect",i,o)}function ww(i,o,a){fs.L(i,o,a);var u=Kr;if(u&&i&&o){var y='link[rel="preload"][as="'+hn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+hn(a.imageSizes)+'"]')):y+='[href="'+hn(i)+'"]';var v=y;switch(o){case"style":v=$r(i);break;case"script":v=Qr(i)}Yn.has(v)||(i=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Yn.set(v,i),u.querySelector(y)!==null||o==="style"&&u.querySelector(El(v))||o==="script"&&u.querySelector(Sl(v))||(o=u.createElement("link"),Wt(o,"link",i),It(o),u.head.appendChild(o)))}}function Rw(i,o){fs.m(i,o);var a=Kr;if(a&&i){var u=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+hn(u)+'"][href="'+hn(i)+'"]',v=y;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Qr(i)}if(!Yn.has(v)&&(i=T({rel:"modulepreload",href:i},o),Yn.set(v,i),a.querySelector(y)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(v)))return}u=a.createElement("link"),Wt(u,"link",i),It(u),a.head.appendChild(u)}}}function Iw(i,o,a){fs.S(i,o,a);var u=Kr;if(u&&i){var y=Ci(u).hoistableStyles,v=$r(i);o=o||"default";var A=y.get(v);if(!A){var I={loading:0,preload:null};if(A=u.querySelector(El(v)))I.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Yn.get(v))&&Oh(i,a);var L=A=u.createElement("link");It(L),Wt(L,"link",i),L._p=new Promise(function(K,ee){L.onload=K,L.onerror=ee}),L.addEventListener("load",function(){I.loading|=1}),L.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Sc(A,o,u)}A={type:"stylesheet",instance:A,count:1,state:I},y.set(v,A)}}}function xw(i,o){fs.X(i,o);var a=Kr;if(a&&i){var u=Ci(a).hoistableScripts,y=Qr(i),v=u.get(y);v||(v=a.querySelector(Sl(y)),v||(i=T({src:i,async:!0},o),(o=Yn.get(y))&&qh(i,o),v=a.createElement("script"),It(v),Wt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(y,v))}}function bw(i,o){fs.M(i,o);var a=Kr;if(a&&i){var u=Ci(a).hoistableScripts,y=Qr(i),v=u.get(y);v||(v=a.querySelector(Sl(y)),v||(i=T({src:i,async:!0,type:"module"},o),(o=Yn.get(y))&&qh(i,o),v=a.createElement("script"),It(v),Wt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(y,v))}}function Wv(i,o,a,u){var y=(y=Se.current)?Ec(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=$r(a.href),a=Ci(y).hoistableStyles,u=a.get(o),u||(u={type:"style",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=$r(a.href);var v=Ci(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(El(i)))&&!v._p&&(A.instance=v,A.state.loading=5),Yn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(i,a),v||Nw(y,i,a,A.state))),o&&u===null)throw Error(s(528,""));return A}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Qr(a),a=Ci(y).hoistableScripts,u=a.get(o),u||(u={type:"script",instance:null,count:0,state:null},a.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function $r(i){return'href="'+hn(i)+'"'}function El(i){return'link[rel="stylesheet"]['+i+"]"}function Zv(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function Nw(i,o,a,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Wt(o,"link",a),It(o),i.head.appendChild(o))}function Qr(i){return'[src="'+hn(i)+'"]'}function Sl(i){return"script[async]"+i}function jv(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+hn(a.href)+'"]');if(u)return o.instance=u,It(u),u;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),It(u),Wt(u,"style",y),Sc(u,a.precedence,i),o.instance=u;case"stylesheet":y=$r(a.href);var v=i.querySelector(El(y));if(v)return o.state.loading|=4,o.instance=v,It(v),v;u=Zv(a),(y=Yn.get(y))&&Oh(u,y),v=(i.ownerDocument||i).createElement("link"),It(v);var A=v;return A._p=new Promise(function(I,L){A.onload=I,A.onerror=L}),Wt(v,"link",u),o.state.loading|=4,Sc(v,a.precedence,i),o.instance=v;case"script":return v=Qr(a.src),(y=i.querySelector(Sl(v)))?(o.instance=y,It(y),y):(u=a,(y=Yn.get(v))&&(u=T({},a),qh(u,y)),i=i.ownerDocument||i,y=i.createElement("script"),It(y),Wt(y,"link",u),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Sc(u,a.precedence,i));return o.instance}function Sc(i,o,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=u.length?u[u.length-1]:null,v=y,A=0;A<u.length;A++){var I=u[A];if(I.dataset.precedence===o)v=I;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Oh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function qh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Ac=null;function e0(i,o,a){if(Ac===null){var u=new Map,y=Ac=new Map;y.set(a,u)}else y=Ac,u=y.get(a),u||(u=new Map,y.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[Si]||v[Rt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=i+A;var I=u.get(A);I?I.push(v):u.set(A,[v])}}return u}function t0(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function Mw(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function n0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Dw(i,o,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=$r(u.href),v=o.querySelector(El(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Cc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=v,It(v);return}v=o.ownerDocument||o,u=Zv(u),(y=Yn.get(y))&&Oh(u,y),v=v.createElement("link"),It(v);var A=v;A._p=new Promise(function(I,L){A.onload=I,A.onerror=L}),Wt(v,"link",u),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Cc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var Bh=0;function Vw(i,o){return i.stylesheets&&i.count===0&&Rc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Rc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+o);0<i.imgBytes&&Bh===0&&(Bh=62500*hw());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Rc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Bh?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(y)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wc=null;function Rc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wc=new Map,o.forEach(Pw,i),wc=null,Cc.call(i))}function Pw(i,o){if(!(o.state.loading&4)){var a=wc.get(i);if(a)var u=a.get(null);else{a=new Map,wc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}y=o.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||u,v===u&&a.set(null,y),a.set(A,y),this.count++,u=Cc.bind(this),y.addEventListener("load",u),y.addEventListener("error",u),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var Al={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function Uw(i,o,a,u,y,v,A,I,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=u,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function i0(i,o,a,u,y,v,A,I,L,K,ee,ie){return i=new Uw(i,o,a,A,L,K,ee,ie,I),o=1,v===!0&&(o|=24),v=Rn(3,null,null,o),i.current=v,v.stateNode=i,o=_d(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:u,isDehydrated:a,cache:o},Ad(v),i}function s0(i){return i?(i=Rr,i):Rr}function o0(i,o,a,u,y,v){y=s0(y),u.context===null?u.context=y:u.pendingContext=y,u=Ls(o),u.payload={element:a},v=v===void 0?null:v,v!==null&&(u.callback=v),a=Os(i,u,o),a!==null&&(_n(a,i,o),tl(a,i,o))}function r0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function zh(i,o){r0(i,o),(i=i.alternate)&&r0(i,o)}function a0(i){if(i.tag===13||i.tag===31){var o=ko(i,67108864);o!==null&&_n(o,i,67108864),zh(i,67108864)}}function l0(i){if(i.tag===13||i.tag===31){var o=Mn();o=Co(o);var a=ko(i,o);a!==null&&_n(a,i,o),zh(i,o)}}var Ic=!0;function kw(i,o,a,u){var y=W.T;W.T=null;var v=ue.p;try{ue.p=2,Fh(i,o,a,u)}finally{ue.p=v,W.T=y}}function Lw(i,o,a,u){var y=W.T;W.T=null;var v=ue.p;try{ue.p=8,Fh(i,o,a,u)}finally{ue.p=v,W.T=y}}function Fh(i,o,a,u){if(Ic){var y=Gh(u);if(y===null)xh(i,o,u,xc,a),c0(i,u);else if(qw(y,i,o,a,u))u.stopPropagation();else if(c0(i,u),o&4&&-1<Ow.indexOf(i)){for(;y!==null;){var v=Pn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=vi(v.pendingLanes);if(A!==0){var I=v;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var L=1<<31-vt(A);I.entanglements[1]|=L,A&=~L}Li(v),(We&6)===0&&(cc=an()+500,yl(0))}}break;case 31:case 13:I=ko(v,2),I!==null&&_n(I,v,2),dc(),zh(v,2)}if(v=Gh(u),v===null&&xh(i,o,u,xc,a),v===y)break;y=v}y!==null&&u.stopPropagation()}else xh(i,o,u,null,a)}}function Gh(i){return i=Un(i),Hh(i)}var xc=null;function Hh(i){if(xc=null,i=Ai(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=c(o),i!==null)return i;i=null}else if(a===31){if(i=d(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return xc=i,null}function u0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(To()){case Ra:return 2;case Ia:return 8;case Ss:case Xf:return 32;case ru:return 268435456;default:return 32}default:return 32}}var Yh=!1,Qs=null,Xs=null,Ws=null,Cl=new Map,wl=new Map,Zs=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c0(i,o){switch(i){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Cl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(o.pointerId)}}function Rl(i,o,a,u,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:u,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Pn(o),o!==null&&a0(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function qw(i,o,a,u,y){switch(o){case"focusin":return Qs=Rl(Qs,i,o,a,u,y),!0;case"dragenter":return Xs=Rl(Xs,i,o,a,u,y),!0;case"mouseover":return Ws=Rl(Ws,i,o,a,u,y),!0;case"pointerover":var v=y.pointerId;return Cl.set(v,Rl(Cl.get(v)||null,i,o,a,u,y)),!0;case"gotpointercapture":return v=y.pointerId,wl.set(v,Rl(wl.get(v)||null,i,o,a,u,y)),!0}return!1}function f0(i){var o=Ai(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){i.blockedOn=o,jn(i.priority,function(){l0(a)});return}}else if(o===31){if(o=d(a),o!==null){i.blockedOn=o,jn(i.priority,function(){l0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function bc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Gh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);qa=u,a.target.dispatchEvent(u),qa=null}else return o=Pn(a),o!==null&&a0(o),i.blockedOn=a,!1;o.shift()}return!0}function d0(i,o,a){bc(i)&&a.delete(o)}function Bw(){Yh=!1,Qs!==null&&bc(Qs)&&(Qs=null),Xs!==null&&bc(Xs)&&(Xs=null),Ws!==null&&bc(Ws)&&(Ws=null),Cl.forEach(d0),wl.forEach(d0)}function Nc(i,o){i.blockedOn===o&&(i.blockedOn=null,Yh||(Yh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bw)))}var Mc=null;function h0(i){Mc!==i&&(Mc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mc===i&&(Mc=null);for(var o=0;o<i.length;o+=3){var a=i[o],u=i[o+1],y=i[o+2];if(typeof u!="function"){if(Hh(u||a)===null)continue;break}var v=Pn(a);v!==null&&(i.splice(o,3),o-=3,Gd(v,{pending:!0,data:y,method:a.method,action:u},u,y))}}))}function Xr(i){function o(L){return Nc(L,i)}Qs!==null&&Nc(Qs,i),Xs!==null&&Nc(Xs,i),Ws!==null&&Nc(Ws,i),Cl.forEach(o),wl.forEach(o);for(var a=0;a<Zs.length;a++){var u=Zs[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Zs.length&&(a=Zs[0],a.blockedOn===null);)f0(a),a.blockedOn===null&&Zs.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var y=a[u],v=a[u+1],A=y[zt]||null;if(typeof v=="function")A||h0(a);else if(A){var I=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[zt]||null)I=A.formAction;else if(Hh(y)!==null)continue}else I=A.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),h0(a)}}}function m0(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Jh(i){this._internalRoot=i}Dc.prototype.render=Jh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,u=Mn();o0(a,u,i,o,null,null)},Dc.prototype.unmount=Jh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;o0(i.current,2,null,i,null,null),dc(),o[Ei]=null}};function Dc(i){this._internalRoot=i}Dc.prototype.unstable_scheduleHydration=function(i){if(i){var o=du();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Zs.length&&o!==0&&o<Zs[a].priority;a++);Zs.splice(a,0,i),a===0&&f0(i)}};var p0=e.version;if(p0!=="19.2.3")throw Error(s(527,p0,"19.2.3"));ue.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var zw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{Wn=Vc.inject(zw),Jt=Vc}catch{}}return xl.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,u="",y=Sy,v=Ay,A=Cy;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=i0(i,1,!1,null,null,a,u,null,y,v,A,m0),i[Ei]=o.current,Ih(i),new Jh(o)},xl.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var u=!1,y="",v=Sy,A=Ay,I=Cy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),o=i0(i,1,!0,o,a??null,u,y,L,v,A,I,m0),o.context=s0(null),a=o.current,u=Mn(),u=Co(u),y=Ls(u),y.callback=null,Os(a,y,u),a=u,o.current.lanes=a,So(o,a),Li(o),i[Ei]=o.current,Ih(i),new Dc(o)},xl.version="19.2.3",xl}var w0;function Zw(){if(w0)return Qh.exports;w0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qh.exports=Ww(),Qh.exports}var jw=Zw();const eR=TE(jw);var at=(n=>(n.ADMIN="ADMIN",n.STAFF="STAFF",n.CUSTOMER="CUSTOMER",n))(at||{});const qi=()=>new Date().toISOString().split("T")[0],R0="TYRANDEVU";at.ADMIN,at.STAFF,at.STAFF,at.CUSTOMER;const Wr=[{id:"s1",name:"Premium Sa Kesimi",price:500,durationMin:45,image:"https://images.unsplash.com/photo-1621605815971-fbc98d665033?w=500&auto=format&fit=crop"},{id:"s2",name:"Sakal Tasarm & Bakm",price:300,durationMin:30,image:"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=500&auto=format&fit=crop"},{id:"s3",name:"Cilt Bakm & Maske",price:400,durationMin:40,image:"https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=500&auto=format&fit=crop"},{id:"s4",name:"TYRANDEVU zel Paket",price:1e3,durationMin:90,image:"https://images.unsplash.com/photo-1503951914875-452162b7f300?w=500&auto=format&fit=crop"}];qi(),qi(),qi();const cm=5,tR=cm*1024*1024,nR=50,iR=500,sR=()=>{};var I0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},oR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],d=n[t++],g=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,g=r+2<n.length,p=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|p>>6,R=p&63;g||(R=64,c||(S=64)),s.push(t[_],t[T],t[S],t[R])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):oR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||p==null||T==null)throw new rR;const S=l<<2|d>>4;if(s.push(S),p!==64){const R=d<<4&240|p>>2;if(s.push(R),T!==64){const k=p<<6&192|T;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aR=function(n){const e=EE(n);return SE.encodeByteArray(e,!0)},Zc=function(n){return aR(n).replace(/\./g,"")},lR=function(n){try{return SE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=()=>uR().__FIREBASE_DEFAULTS__,fR=()=>{if(typeof process>"u"||typeof I0>"u")return;const n=I0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lR(n[1]);return e&&JSON.parse(e)},Qm=()=>{try{return sR()||cR()||fR()||dR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hR=n=>{var e,t;return(t=(e=Qm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},mR=n=>{const e=hR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},AE=()=>{var n;return(n=Qm())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gR(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Zc(JSON.stringify(t)),Zc(JSON.stringify(c)),""].join(".")}const kl={};function vR(){const n={prod:[],emulator:[]};for(const e of Object.keys(kl))kl[e]?n.emulator.push(e):n.prod.push(e);return n}function _R(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let x0=!1;function TR(n,e){if(typeof window>"u"||typeof document>"u"||!Xm(window.location.host)||kl[n]===e||kl[n]||x0)return;kl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=vR().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{x0=!0,c()},S}function _(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=_R(s),R=t("text"),k=document.getElementById(R)||document.createElement("span"),O=t("learnmore"),D=document.getElementById(O)||document.createElement("a"),F=t("preprendIcon"),j=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),_(D,O);const re=p();g(j,F),Q.append(j,k,D,re),document.body.appendChild(Q)}l?(k.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SR(){var e;const n=(e=Qm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AR(){return!SR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CR(){try{return typeof indexedDB=="object"}catch{return!1}}function wR(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="FirebaseError";class pa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=RR,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CE.prototype.create)}}class CE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?IR(l,s):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new pa(r,d,s)}}function IR(n,e){return n.replace(xR,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const xR=/\{\$([^}]+)}/g;function jc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],c=e[r];if(b0(l)&&b0(c)){if(!jc(l,c))return!1}else if(l!==c)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function b0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n){return n&&n._delegate?n._delegate:n}class zl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new pR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MR(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NR(n){return n===Qo?void 0:n}function MR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const VR={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},PR=Je.INFO,UR={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},kR=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=UR[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wE{constructor(e){this.name=e,this._logLevel=PR,this._logHandler=kR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const LR=(n,e)=>e.some(t=>n instanceof t);let N0,M0;function OR(){return N0||(N0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qR(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RE=new WeakMap,fm=new WeakMap,IE=new WeakMap,jh=new WeakMap,Wm=new WeakMap;function BR(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(to(n.result)),r()},c=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&RE.set(t,n)}).catch(()=>{}),Wm.set(e,n),e}function zR(n){if(fm.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});fm.set(n,e)}let dm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return to(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function FR(n){dm=n(dm)}function GR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(em(this),e,...t);return IE.set(s,e.sort?e.sort():[e]),to(s)}:qR().includes(n)?function(...e){return n.apply(em(this),e),to(RE.get(this))}:function(...e){return to(n.apply(em(this),e))}}function HR(n){return typeof n=="function"?GR(n):(n instanceof IDBTransaction&&zR(n),LR(n,OR())?new Proxy(n,dm):n)}function to(n){if(n instanceof IDBRequest)return BR(n);if(jh.has(n))return jh.get(n);const e=HR(n);return e!==n&&(jh.set(n,e),Wm.set(e,n)),e}const em=n=>Wm.get(n);function YR(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),d=to(c);return s&&c.addEventListener("upgradeneeded",g=>{s(to(c.result),g.oldVersion,g.newVersion,to(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const JR=["get","getKey","getAll","getAllKeys","count"],KR=["put","add","delete","clear"],tm=new Map;function D0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=KR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||JR.includes(t)))return;const l=async function(c,...d){const g=this.transaction(c,r?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&g.done]))[0]};return tm.set(e,l),l}FR(n=>({...n,get:(e,t,s)=>D0(e,t)||n.get(e,t,s),has:(e,t)=>!!D0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function QR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hm="@firebase/app",V0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new wE("@firebase/app"),XR="@firebase/app-compat",WR="@firebase/analytics-compat",ZR="@firebase/analytics",jR="@firebase/app-check-compat",eI="@firebase/app-check",tI="@firebase/auth",nI="@firebase/auth-compat",iI="@firebase/database",sI="@firebase/data-connect",oI="@firebase/database-compat",rI="@firebase/functions",aI="@firebase/functions-compat",lI="@firebase/installations",uI="@firebase/installations-compat",cI="@firebase/messaging",fI="@firebase/messaging-compat",dI="@firebase/performance",hI="@firebase/performance-compat",mI="@firebase/remote-config",pI="@firebase/remote-config-compat",gI="@firebase/storage",yI="@firebase/storage-compat",vI="@firebase/firestore",_I="@firebase/ai",TI="@firebase/firestore-compat",EI="firebase",SI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",AI={[hm]:"fire-core",[XR]:"fire-core-compat",[ZR]:"fire-analytics",[WR]:"fire-analytics-compat",[eI]:"fire-app-check",[jR]:"fire-app-check-compat",[tI]:"fire-auth",[nI]:"fire-auth-compat",[iI]:"fire-rtdb",[sI]:"fire-data-connect",[oI]:"fire-rtdb-compat",[rI]:"fire-fn",[aI]:"fire-fn-compat",[lI]:"fire-iid",[uI]:"fire-iid-compat",[cI]:"fire-fcm",[fI]:"fire-fcm-compat",[dI]:"fire-perf",[hI]:"fire-perf-compat",[mI]:"fire-rc",[pI]:"fire-rc-compat",[gI]:"fire-gcs",[yI]:"fire-gcs-compat",[vI]:"fire-fst",[TI]:"fire-fst-compat",[_I]:"fire-vertex","fire-js":"fire-js",[EI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,CI=new Map,pm=new Map;function P0(n,e){try{n.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ef(n){const e=n.name;if(pm.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,n);for(const t of Fl.values())P0(t,n);for(const t of CI.values())P0(t,n);return!0}function wI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function RI(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new CE("app","Firebase",II);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=SI;function xE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:mm,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw no.create("bad-app-name",{appName:String(r)});if(t||(t=AE()),!t)throw no.create("no-options");const l=Fl.get(r);if(l){if(jc(t,l.options)&&jc(s,l.config))return l;throw no.create("duplicate-app",{appName:r})}const c=new DR(r);for(const g of pm.values())c.addComponent(g);const d=new xI(t,s,c);return Fl.set(r,d),d}function bE(n=mm){const e=Fl.get(n);if(!e&&n===mm&&AE())return xE();if(!e)throw no.create("no-app",{appName:n});return e}function NI(){return Array.from(Fl.values())}function oa(n,e,t){let s=AI[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${s}" with version "${e}":`];r&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(c.join(" "));return}ef(new zl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firebase-heartbeat-database",DI=1,Gl="firebase-heartbeat-store";let nm=null;function NE(){return nm||(nm=YR(MI,DI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gl)}catch(t){console.warn(t)}}}}).catch(n=>{throw no.create("idb-open",{originalErrorMessage:n.message})})),nm}async function VI(n){try{const t=(await NE()).transaction(Gl),s=await t.objectStore(Gl).get(ME(n));return await t.done,s}catch(e){if(e instanceof pa)ds.warn(e.message);else{const t=no.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(t.message)}}}async function U0(n,e){try{const s=(await NE()).transaction(Gl,"readwrite");await s.objectStore(Gl).put(e,ME(n)),await s.done}catch(t){if(t instanceof pa)ds.warn(t.message);else{const s=no.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ds.warn(s.message)}}}function ME(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=1024,UI=30;class kI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=k0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>UI){const c=qI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ds.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=k0(),{heartbeatsToSend:s,unsentEntries:r}=LI(this._heartbeatsCache.heartbeats),l=Zc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ds.warn(t),""}}}function k0(){return new Date().toISOString().substring(0,10)}function LI(n,e=PI){const t=[];let s=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),L0(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),L0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class OI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CR()?wR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return U0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return U0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function L0(n){return Zc(JSON.stringify({version:2,heartbeats:n})).length}function qI(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(n){ef(new zl("platform-logger",e=>new $R(e),"PRIVATE")),ef(new zl("heartbeat",e=>new kI(e),"PRIVATE")),oa(hm,V0,n),oa(hm,V0,"esm2020"),oa("fire-js","")}BI("");var zI="firebase",FI="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oa(zI,FI,"app");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,DE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,V){function x(){}x.prototype=V.prototype,M.F=V.prototype,M.prototype=new x,M.prototype.constructor=M,M.D=function(U,P,q){for(var N=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)N[ve-2]=arguments[ve];return V.prototype[P].apply(U,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,V,x){x||(x=0);const U=Array(16);if(typeof V=="string")for(var P=0;P<16;++P)U[P]=V.charCodeAt(x++)|V.charCodeAt(x++)<<8|V.charCodeAt(x++)<<16|V.charCodeAt(x++)<<24;else for(P=0;P<16;++P)U[P]=V[x++]|V[x++]<<8|V[x++]<<16|V[x++]<<24;V=M.g[0],x=M.g[1],P=M.g[2];let q=M.g[3],N;N=V+(q^x&(P^q))+U[0]+3614090360&4294967295,V=x+(N<<7&4294967295|N>>>25),N=q+(P^V&(x^P))+U[1]+3905402710&4294967295,q=V+(N<<12&4294967295|N>>>20),N=P+(x^q&(V^x))+U[2]+606105819&4294967295,P=q+(N<<17&4294967295|N>>>15),N=x+(V^P&(q^V))+U[3]+3250441966&4294967295,x=P+(N<<22&4294967295|N>>>10),N=V+(q^x&(P^q))+U[4]+4118548399&4294967295,V=x+(N<<7&4294967295|N>>>25),N=q+(P^V&(x^P))+U[5]+1200080426&4294967295,q=V+(N<<12&4294967295|N>>>20),N=P+(x^q&(V^x))+U[6]+2821735955&4294967295,P=q+(N<<17&4294967295|N>>>15),N=x+(V^P&(q^V))+U[7]+4249261313&4294967295,x=P+(N<<22&4294967295|N>>>10),N=V+(q^x&(P^q))+U[8]+1770035416&4294967295,V=x+(N<<7&4294967295|N>>>25),N=q+(P^V&(x^P))+U[9]+2336552879&4294967295,q=V+(N<<12&4294967295|N>>>20),N=P+(x^q&(V^x))+U[10]+4294925233&4294967295,P=q+(N<<17&4294967295|N>>>15),N=x+(V^P&(q^V))+U[11]+2304563134&4294967295,x=P+(N<<22&4294967295|N>>>10),N=V+(q^x&(P^q))+U[12]+1804603682&4294967295,V=x+(N<<7&4294967295|N>>>25),N=q+(P^V&(x^P))+U[13]+4254626195&4294967295,q=V+(N<<12&4294967295|N>>>20),N=P+(x^q&(V^x))+U[14]+2792965006&4294967295,P=q+(N<<17&4294967295|N>>>15),N=x+(V^P&(q^V))+U[15]+1236535329&4294967295,x=P+(N<<22&4294967295|N>>>10),N=V+(P^q&(x^P))+U[1]+4129170786&4294967295,V=x+(N<<5&4294967295|N>>>27),N=q+(x^P&(V^x))+U[6]+3225465664&4294967295,q=V+(N<<9&4294967295|N>>>23),N=P+(V^x&(q^V))+U[11]+643717713&4294967295,P=q+(N<<14&4294967295|N>>>18),N=x+(q^V&(P^q))+U[0]+3921069994&4294967295,x=P+(N<<20&4294967295|N>>>12),N=V+(P^q&(x^P))+U[5]+3593408605&4294967295,V=x+(N<<5&4294967295|N>>>27),N=q+(x^P&(V^x))+U[10]+38016083&4294967295,q=V+(N<<9&4294967295|N>>>23),N=P+(V^x&(q^V))+U[15]+3634488961&4294967295,P=q+(N<<14&4294967295|N>>>18),N=x+(q^V&(P^q))+U[4]+3889429448&4294967295,x=P+(N<<20&4294967295|N>>>12),N=V+(P^q&(x^P))+U[9]+568446438&4294967295,V=x+(N<<5&4294967295|N>>>27),N=q+(x^P&(V^x))+U[14]+3275163606&4294967295,q=V+(N<<9&4294967295|N>>>23),N=P+(V^x&(q^V))+U[3]+4107603335&4294967295,P=q+(N<<14&4294967295|N>>>18),N=x+(q^V&(P^q))+U[8]+1163531501&4294967295,x=P+(N<<20&4294967295|N>>>12),N=V+(P^q&(x^P))+U[13]+2850285829&4294967295,V=x+(N<<5&4294967295|N>>>27),N=q+(x^P&(V^x))+U[2]+4243563512&4294967295,q=V+(N<<9&4294967295|N>>>23),N=P+(V^x&(q^V))+U[7]+1735328473&4294967295,P=q+(N<<14&4294967295|N>>>18),N=x+(q^V&(P^q))+U[12]+2368359562&4294967295,x=P+(N<<20&4294967295|N>>>12),N=V+(x^P^q)+U[5]+4294588738&4294967295,V=x+(N<<4&4294967295|N>>>28),N=q+(V^x^P)+U[8]+2272392833&4294967295,q=V+(N<<11&4294967295|N>>>21),N=P+(q^V^x)+U[11]+1839030562&4294967295,P=q+(N<<16&4294967295|N>>>16),N=x+(P^q^V)+U[14]+4259657740&4294967295,x=P+(N<<23&4294967295|N>>>9),N=V+(x^P^q)+U[1]+2763975236&4294967295,V=x+(N<<4&4294967295|N>>>28),N=q+(V^x^P)+U[4]+1272893353&4294967295,q=V+(N<<11&4294967295|N>>>21),N=P+(q^V^x)+U[7]+4139469664&4294967295,P=q+(N<<16&4294967295|N>>>16),N=x+(P^q^V)+U[10]+3200236656&4294967295,x=P+(N<<23&4294967295|N>>>9),N=V+(x^P^q)+U[13]+681279174&4294967295,V=x+(N<<4&4294967295|N>>>28),N=q+(V^x^P)+U[0]+3936430074&4294967295,q=V+(N<<11&4294967295|N>>>21),N=P+(q^V^x)+U[3]+3572445317&4294967295,P=q+(N<<16&4294967295|N>>>16),N=x+(P^q^V)+U[6]+76029189&4294967295,x=P+(N<<23&4294967295|N>>>9),N=V+(x^P^q)+U[9]+3654602809&4294967295,V=x+(N<<4&4294967295|N>>>28),N=q+(V^x^P)+U[12]+3873151461&4294967295,q=V+(N<<11&4294967295|N>>>21),N=P+(q^V^x)+U[15]+530742520&4294967295,P=q+(N<<16&4294967295|N>>>16),N=x+(P^q^V)+U[2]+3299628645&4294967295,x=P+(N<<23&4294967295|N>>>9),N=V+(P^(x|~q))+U[0]+4096336452&4294967295,V=x+(N<<6&4294967295|N>>>26),N=q+(x^(V|~P))+U[7]+1126891415&4294967295,q=V+(N<<10&4294967295|N>>>22),N=P+(V^(q|~x))+U[14]+2878612391&4294967295,P=q+(N<<15&4294967295|N>>>17),N=x+(q^(P|~V))+U[5]+4237533241&4294967295,x=P+(N<<21&4294967295|N>>>11),N=V+(P^(x|~q))+U[12]+1700485571&4294967295,V=x+(N<<6&4294967295|N>>>26),N=q+(x^(V|~P))+U[3]+2399980690&4294967295,q=V+(N<<10&4294967295|N>>>22),N=P+(V^(q|~x))+U[10]+4293915773&4294967295,P=q+(N<<15&4294967295|N>>>17),N=x+(q^(P|~V))+U[1]+2240044497&4294967295,x=P+(N<<21&4294967295|N>>>11),N=V+(P^(x|~q))+U[8]+1873313359&4294967295,V=x+(N<<6&4294967295|N>>>26),N=q+(x^(V|~P))+U[15]+4264355552&4294967295,q=V+(N<<10&4294967295|N>>>22),N=P+(V^(q|~x))+U[6]+2734768916&4294967295,P=q+(N<<15&4294967295|N>>>17),N=x+(q^(P|~V))+U[13]+1309151649&4294967295,x=P+(N<<21&4294967295|N>>>11),N=V+(P^(x|~q))+U[4]+4149444226&4294967295,V=x+(N<<6&4294967295|N>>>26),N=q+(x^(V|~P))+U[11]+3174756917&4294967295,q=V+(N<<10&4294967295|N>>>22),N=P+(V^(q|~x))+U[2]+718787259&4294967295,P=q+(N<<15&4294967295|N>>>17),N=x+(q^(P|~V))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+V&4294967295,M.g[1]=M.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+P&4294967295,M.g[3]=M.g[3]+q&4294967295}s.prototype.v=function(M,V){V===void 0&&(V=M.length);const x=V-this.blockSize,U=this.C;let P=this.h,q=0;for(;q<V;){if(P==0)for(;q<=x;)r(this,M,q),q+=this.blockSize;if(typeof M=="string"){for(;q<V;)if(U[P++]=M.charCodeAt(q++),P==this.blockSize){r(this,U),P=0;break}}else for(;q<V;)if(U[P++]=M[q++],P==this.blockSize){r(this,U),P=0;break}}this.h=P,this.o+=V},s.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var V=1;V<M.length-8;++V)M[V]=0;V=this.o*8;for(var x=M.length-8;x<M.length;++x)M[x]=V&255,V/=256;for(this.v(M),M=Array(16),V=0,x=0;x<4;++x)for(let U=0;U<32;U+=8)M[V++]=this.g[x]>>>U&255;return M};function l(M,V){var x=d;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=V(M)}function c(M,V){this.h=V;const x=[];let U=!0;for(let P=M.length-1;P>=0;P--){const q=M[P]|0;U&&q==V||(x[P]=q,U=!1)}this.g=x}var d={};function g(M){return-128<=M&&M<128?l(M,function(V){return new c([V|0],V<0?-1:0)}):new c([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return T;if(M<0)return D(p(-M));const V=[];let x=1;for(let U=0;M>=x;U++)V[U]=M/x|0,x*=4294967296;return new c(V,0)}function _(M,V){if(M.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(M.charAt(0)=="-")return D(_(M.substring(1),V));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(V,8));let U=T;for(let q=0;q<M.length;q+=8){var P=Math.min(8,M.length-q);const N=parseInt(M.substring(q,q+P),V);P<8?(P=p(Math.pow(V,P)),U=U.j(P).add(p(N))):(U=U.j(x),U=U.add(p(N)))}return U}var T=g(0),S=g(1),R=g(16777216);n=c.prototype,n.m=function(){if(O(this))return-D(this).m();let M=0,V=1;for(let x=0;x<this.g.length;x++){const U=this.i(x);M+=(U>=0?U:4294967296+U)*V,V*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k(this))return"0";if(O(this))return"-"+D(this).toString(M);const V=p(Math.pow(M,6));var x=this;let U="";for(;;){const P=re(x,V).g;x=F(x,P.j(V));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(M);if(x=P,k(x))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function k(M){if(M.h!=0)return!1;for(let V=0;V<M.g.length;V++)if(M.g[V]!=0)return!1;return!0}function O(M){return M.h==-1}n.l=function(M){return M=F(this,M),O(M)?-1:k(M)?0:1};function D(M){const V=M.g.length,x=[];for(let U=0;U<V;U++)x[U]=~M.g[U];return new c(x,~M.h).add(S)}n.abs=function(){return O(this)?D(this):this},n.add=function(M){const V=Math.max(this.g.length,M.g.length),x=[];let U=0;for(let P=0;P<=V;P++){let q=U+(this.i(P)&65535)+(M.i(P)&65535),N=(q>>>16)+(this.i(P)>>>16)+(M.i(P)>>>16);U=N>>>16,q&=65535,N&=65535,x[P]=N<<16|q}return new c(x,x[x.length-1]&-2147483648?-1:0)};function F(M,V){return M.add(D(V))}n.j=function(M){if(k(this)||k(M))return T;if(O(this))return O(M)?D(this).j(D(M)):D(D(this).j(M));if(O(M))return D(this.j(D(M)));if(this.l(R)<0&&M.l(R)<0)return p(this.m()*M.m());const V=this.g.length+M.g.length,x=[];for(var U=0;U<2*V;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<M.g.length;P++){const q=this.i(U)>>>16,N=this.i(U)&65535,ve=M.i(P)>>>16,De=M.i(P)&65535;x[2*U+2*P]+=N*De,j(x,2*U+2*P),x[2*U+2*P+1]+=q*De,j(x,2*U+2*P+1),x[2*U+2*P+1]+=N*ve,j(x,2*U+2*P+1),x[2*U+2*P+2]+=q*ve,j(x,2*U+2*P+2)}for(M=0;M<V;M++)x[M]=x[2*M+1]<<16|x[2*M];for(M=V;M<2*V;M++)x[M]=0;return new c(x,0)};function j(M,V){for(;(M[V]&65535)!=M[V];)M[V+1]+=M[V]>>>16,M[V]&=65535,V++}function Q(M,V){this.g=M,this.h=V}function re(M,V){if(k(V))throw Error("division by zero");if(k(M))return new Q(T,T);if(O(M))return V=re(D(M),V),new Q(D(V.g),D(V.h));if(O(V))return V=re(M,D(V)),new Q(D(V.g),V.h);if(M.g.length>30){if(O(M)||O(V))throw Error("slowDivide_ only works with positive integers.");for(var x=S,U=V;U.l(M)<=0;)x=ce(x),U=ce(U);var P=le(x,1),q=le(U,1);for(U=le(U,2),x=le(x,2);!k(U);){var N=q.add(U);N.l(M)<=0&&(P=P.add(x),q=N),U=le(U,1),x=le(x,1)}return V=F(M,P.j(V)),new Q(P,V)}for(P=T;M.l(V)>=0;){for(x=Math.max(1,Math.floor(M.m()/V.m())),U=Math.ceil(Math.log(x)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=p(x),N=q.j(V);O(N)||N.l(M)>0;)x-=U,q=p(x),N=q.j(V);k(q)&&(q=S),P=P.add(q),M=F(M,N)}return new Q(P,M)}n.B=function(M){return re(this,M).h},n.and=function(M){const V=Math.max(this.g.length,M.g.length),x=[];for(let U=0;U<V;U++)x[U]=this.i(U)&M.i(U);return new c(x,this.h&M.h)},n.or=function(M){const V=Math.max(this.g.length,M.g.length),x=[];for(let U=0;U<V;U++)x[U]=this.i(U)|M.i(U);return new c(x,this.h|M.h)},n.xor=function(M){const V=Math.max(this.g.length,M.g.length),x=[];for(let U=0;U<V;U++)x[U]=this.i(U)^M.i(U);return new c(x,this.h^M.h)};function ce(M){const V=M.g.length+1,x=[];for(let U=0;U<V;U++)x[U]=M.i(U)<<1|M.i(U-1)>>>31;return new c(x,M.h)}function le(M,V){const x=V>>5;V%=32;const U=M.g.length-x,P=[];for(let q=0;q<U;q++)P[q]=V>0?M.i(q+x)>>>V|M.i(q+x+1)<<32-V:M.i(q+x);return new c(P,M.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,DE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,io=c}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VE,Ml,PE,Hc,gm,UE,kE,LE;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var E=0;E<m.length;++E){var w=m[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function r(m,E){if(E)e:{var w=s;m=m.split(".");for(var b=0;b<m.length-1;b++){var H=m[b];if(!(H in w))break e;w=w[H]}m=m[m.length-1],b=w[m],E=E(b),E!=b&&E!=null&&e(w,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var w=[],b;for(b in E)Object.prototype.hasOwnProperty.call(E,b)&&w.push([b,E[b]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,w){return m.call.apply(m.bind,arguments)}function p(m,E,w){return p=g,p.apply(null,arguments)}function _(m,E){var w=Array.prototype.slice.call(arguments,1);return function(){var b=w.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function T(m,E){function w(){}w.prototype=E.prototype,m.Z=E.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(b,H,X){for(var fe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)fe[Ve-2]=arguments[Ve];return E.prototype[H].apply(b,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function R(m){const E=m.length;if(E>0){const w=Array(E);for(let b=0;b<E;b++)w[b]=m[b];return w}return[]}function k(m,E){for(let b=1;b<arguments.length;b++){const H=arguments[b];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=m.length||0;const X=H.length||0;m.length=w+X;for(let fe=0;fe<X;fe++)m[w+fe]=H[fe]}else m.push(H)}}class O{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function D(m){c.setTimeout(()=>{throw m},0)}function F(){var m=M;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class j{constructor(){this.h=this.g=null}add(E,w){const b=Q.get();b.set(E,w),this.h?this.h.next=b:this.g=b,this.h=b}}var Q=new O(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,le=!1,M=new j,V=()=>{const m=Promise.resolve(void 0);ce=()=>{m.then(x)}};function x(){for(var m;m=F();){try{m.h.call(m.g)}catch(w){D(w)}var E=Q;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};c.addEventListener("test",w,E),c.removeEventListener("test",w,E)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function ve(m,E){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(ve,P),ve.prototype.init=function(m,E){const w=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(w=="mouseover"?E=m.fromElement:w=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),W=0;function ue(m,E,w,b,H){this.listener=m,this.proxy=null,this.src=E,this.type=w,this.capture=!!b,this.ha=H,this.key=++W,this.da=this.fa=!1}function Ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Oe(m,E,w){for(const b in m)E.call(w,m[b],b,m)}function qe(m,E){for(const w in m)E.call(void 0,m[w],w,m)}function z(m){const E={};for(const w in m)E[w]=m[w];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(m,E){let w,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(w in b)m[w]=b[w];for(let X=0;X<ne.length;X++)w=ne[X],Object.prototype.hasOwnProperty.call(b,w)&&(m[w]=b[w])}}function ae(m){this.src=m,this.g={},this.h=0}ae.prototype.add=function(m,E,w,b,H){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const fe=Se(m,E,b,H);return fe>-1?(E=m[fe],w||(E.fa=!1)):(E=new ue(E,this.src,X,!!b,H),E.fa=w,m.push(E)),E};function he(m,E){const w=E.type;if(w in m.g){var b=m.g[w],H=Array.prototype.indexOf.call(b,E,void 0),X;(X=H>=0)&&Array.prototype.splice.call(b,H,1),X&&(Ee(E),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Se(m,E,w,b){for(let H=0;H<m.length;++H){const X=m[H];if(!X.da&&X.listener==E&&X.capture==!!w&&X.ha==b)return H}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Lt={};function dt(m,E,w,b,H){if(Array.isArray(E)){for(let X=0;X<E.length;X++)dt(m,E[X],w,b,H);return null}return w=wa(w),m&&m[De]?m.J(E,w,d(b)?!!b.capture:!1,H):vo(m,E,w,!1,b,H)}function vo(m,E,w,b,H,X){if(!E)throw Error("Invalid event type");const fe=d(H)?!!H.capture:!!H;let Ve=_o(m);if(Ve||(m[we]=Ve=new ae(m)),w=Ve.add(E,w,b,fe,X),w.proxy)return w;if(b=ar(),w.proxy=b,b.src=m,b.listener=w,m.addEventListener)q||(H=fe),H===void 0&&(H=!1),m.addEventListener(E.toString(),b,H);else if(m.attachEvent)m.attachEvent(gi(E.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ar(){function m(w){return E.call(m.src,m.listener,w)}const E=Aa;return m}function lr(m,E,w,b,H){if(Array.isArray(E))for(var X=0;X<E.length;X++)lr(m,E[X],w,b,H);else b=d(b)?!!b.capture:!!b,w=wa(w),m&&m[De]?(m=m.i,X=String(E).toString(),X in m.g&&(E=m.g[X],w=Se(E,w,b,H),w>-1&&(Ee(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete m.g[X],m.h--)))):m&&(m=_o(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Se(E,w,b,H)),(w=m>-1?E[m]:null)&&ur(w))}function ur(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[De])he(E.i,m);else{var w=m.type,b=m.proxy;E.removeEventListener?E.removeEventListener(w,b,m.capture):E.detachEvent?E.detachEvent(gi(w),b):E.addListener&&E.removeListener&&E.removeListener(b),(w=_o(E))?(he(w,m),w.h==0&&(w.src=null,E[we]=null)):Ee(m)}}}function gi(m){return m in Lt?Lt[m]:Lt[m]="on"+m}function Aa(m,E){if(m.da)m=!0;else{E=new ve(E,this);const w=m.listener,b=m.ha||m.src;m.fa&&ur(m),m=w.call(b,E)}return m}function _o(m){return m=m[we],m instanceof ae?m:null}var Ca="__closure_events_fn_"+(Math.random()*1e9>>>0);function wa(m){return typeof m=="function"?m:(m[Ca]||(m[Ca]=function(E){return m.handleEvent(E)}),m[Ca])}function Ct(){U.call(this),this.i=new ae(this),this.M=this,this.G=null}T(Ct,U),Ct.prototype[De]=!0,Ct.prototype.removeEventListener=function(m,E,w,b){lr(this,m,E,w,b)};function Ot(m,E){var w,b=m.G;if(b)for(w=[];b;b=b.G)w.push(b);if(m=m.M,b=E.type||E,typeof E=="string")E=new P(E,m);else if(E instanceof P)E.target=E.target||m;else{var H=E;E=new P(b,m),Y(E,H)}H=!0;let X,fe;if(w)for(fe=w.length-1;fe>=0;fe--)X=E.g=w[fe],H=Es(X,b,!0,E)&&H;if(X=E.g=m,H=Es(X,b,!0,E)&&H,H=Es(X,b,!1,E)&&H,w)for(fe=0;fe<w.length;fe++)X=E.g=w[fe],H=Es(X,b,!1,E)&&H}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const w=m.g[E];for(let b=0;b<w.length;b++)Ee(w[b]);delete m.g[E],m.h--}}this.G=null},Ct.prototype.J=function(m,E,w,b){return this.i.add(String(m),E,!1,w,b)},Ct.prototype.K=function(m,E,w,b){return this.i.add(String(m),E,!0,w,b)};function Es(m,E,w,b){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let X=0;X<E.length;++X){const fe=E[X];if(fe&&!fe.da&&fe.capture==w){const Ve=fe.listener,_t=fe.ha||fe.src;fe.fa&&he(m.i,fe),H=Ve.call(_t,b)!==!1&&H}}return H&&!b.defaultPrevented}function Qf(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function ou(m){m.g=Qf(()=>{m.g=null,m.i&&(m.i=!1,ou(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class an extends U{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ou(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function To(m){U.call(this),this.h=m,this.g={}}T(To,U);var Ra=[];function Ia(m){Oe(m.g,function(E,w){this.g.hasOwnProperty(w)&&ur(E)},m),m.g={}}To.prototype.N=function(){To.Z.N.call(this),Ia(this)},To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=c.JSON.stringify,Xf=c.JSON.parse,ru=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function au(){}function lu(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){P.call(this,"d")}T(Jt,P);function Vn(){P.call(this,"c")}T(Vn,P);var vt={},uu=null;function cr(){return uu=uu||new Ct}vt.Ia="serverreachability";function cu(m){P.call(this,vt.Ia,m)}T(cu,P);function yi(m){const E=cr();Ot(E,new cu(E))}vt.STAT_EVENT="statevent";function Eo(m,E){P.call(this,vt.STAT_EVENT,m),this.stat=E}T(Eo,P);function wt(m){const E=cr();Ot(E,new Eo(E,m))}vt.Ja="timingevent";function vi(m,E){P.call(this,vt.Ja,m),this.size=E}T(vi,P);function _i(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function Wf(m,E,w,b,H,X){m.info(function(){if(m.g)if(X){var fe="",Ve=X.split("&");for(let Xe=0;Xe<Ve.length;Xe++){var _t=Ve[Xe].split("=");if(_t.length>1){const ht=_t[0];_t=_t[1];const Ln=ht.split("_");fe=Ln.length>=2&&Ln[1]=="type"?fe+(ht+"="+_t+"&"):fe+(ht+"=redacted&")}}}else fe=null;else fe=X;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+E+`
`+w+`
`+fe})}function fu(m,E,w,b,H,X,fe){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+E+`
`+w+`
`+X+" "+fe})}function Ti(m,E,w,b){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Zf(m,w)+(b?" "+b:"")})}function So(m,E){m.info(function(){return"TIMEOUT: "+E})}Zn.prototype.info=function(){};function Zf(m,E){if(!m.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var w=X[m];if(!(w.length<2)){var b=w[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let fe=1;fe<b.length;fe++)b[fe]=""}}}}return Ss(X)}catch{return E}}var Ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ba;function Co(){}T(Co,au),Co.prototype.g=function(){return new XMLHttpRequest},ba=new Co;function Ki(m){return encodeURIComponent(String(m))}function du(m){var E=1;m=m.split(":");const w=[];for(;E>0&&m.length;)w.push(m.shift()),E--;return m.length&&w.push(m.join(":")),w}function jn(m,E,w,b){this.j=m,this.i=E,this.l=w,this.S=b||1,this.V=new To(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var Rt={},zt={};function Ei(m,E,w){m.M=1,m.A=wo(xt(E)),m.u=w,m.R=!0,fr(m,null)}function fr(m,E){m.F=Date.now(),Si(m),m.B=xt(m.A);var w=m.B,b=m.S;Array.isArray(b)||(b=[String(b)]),pr(w.i,"t",b),m.C=0,w=m.j.L,m.h=new ei,m.g=Iu(m.j,w?E:null,!m.u),m.P>0&&(m.O=new an(p(m.Y,m,m.g),m.P)),E=m.V,w=m.g,b=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ra[0]=H.toString()),H=Ra);for(let X=0;X<H.length;X++){const fe=dt(w,H[X],b||E.handleEvent,!1,E.h||E);if(!fe)break;E.g[fe.key]=fe}E=m.J?z(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),yi(),Wf(m.i,m.v,m.B,m.l,m.S,m.u)}jn.prototype.ba=function(m){m=m.target;const E=this.O;E&&ii(m)==3?E.j():this.Y(m)},jn.prototype.Y=function(m){try{if(m==this.g)e:{const Ve=ii(this.g),_t=this.g.ya(),Xe=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||Ve!=4||_t==7||(_t==8||Xe<=0?yi(3):yi(2)),Ai(this);var E=this.g.ca();this.X=E;var w=jf(this);if(this.o=E==200,fu(this.i,this.v,this.B,this.l,this.S,Ve,E),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(b)){var X=b;break t}}X=null}if(m=X)Ti(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,m);else{this.o=!1,this.m=3,wt(12),An(this),Pn(this);break e}}if(this.R){m=!0;let ht;for(;!this.K&&this.C<w.length;)if(ht=mu(this,w),ht==zt){Ve==4&&(this.m=4,wt(14),m=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Rt){this.m=4,wt(15),Ti(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else Ti(this.i,this.l,ht,null),Ci(this,ht);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||w.length!=0||this.h.h||(this.m=1,wt(16),m=!1),this.o=this.o&&m,!m)Ti(this.i,this.l,w,"[Invalid Chunked Response]"),An(this),Pn(this);else if(w.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ha(fe),fe.P=!0,wt(11))}}else Ti(this.i,this.l,w,null),Ci(this,w);Ve==4&&An(this),this.o&&!this.K&&(Ve==4?Au(this.j,this):(this.o=!1,Si(this)))}else Qi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),An(this),Pn(this)}}}catch{}finally{}};function jf(m){if(!hu(m))return m.g.la();const E=Kt(m.g);if(E==="")return"";let w="";const b=E.length,H=ii(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return An(m),Pn(m),"";m.h.i=new c.TextDecoder}for(let X=0;X<b;X++)m.h.h=!0,w+=m.h.i.decode(E[X],{stream:!(H&&X==b-1)});return E.length=0,m.h.g+=w,m.C=0,m.h.g}function hu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mu(m,E){var w=m.C,b=E.indexOf(`
`,w);return b==-1?zt:(w=Number(E.substring(w,b)),isNaN(w)?Rt:(b+=1,b+w>E.length?zt:(E=E.slice(b,b+w),m.C=b+w,E)))}jn.prototype.cancel=function(){this.K=!0,An(this)};function Si(m){m.T=Date.now()+m.H,dr(m,m.H)}function dr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=_i(p(m.aa,m),E)}function Ai(m){m.D&&(c.clearTimeout(m.D),m.D=null)}jn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(So(this.i,this.B),this.M!=2&&(yi(),wt(17)),An(this),this.m=2,Pn(this)):dr(this,this.T-m)};function Pn(m){m.j.I==0||m.K||Au(m.j,m)}function An(m){Ai(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ia(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Ci(m,E){try{var w=m.j;if(w.I!=0&&(w.g==m||Ri(w.h,m))){if(!m.L&&Ri(w.h,m)&&w.I==3){try{var b=w.Ba.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)Tr(w),Ns(w);else break e;Do(w),wt(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=_i(p(w.Va,w),6e3));wi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Di(w,11)}else if((m.L||w.g==m)&&Tr(w),!N(E))for(H=w.Ba.g.parse(E),E=0;E<H.length;E++){let Xe=H[E];const ht=Xe[0];if(!(ht<=w.K))if(w.K=ht,Xe=Xe[1],w.I==2)if(Xe[0]=="c"){w.M=Xe[1],w.ba=Xe[2];const Ln=Xe[3];Ln!=null&&(w.ka=Ln,w.j.info("VER="+w.ka));const Vi=Xe[4];Vi!=null&&(w.za=Vi,w.j.info("SVER="+w.za));const si=Xe[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,w.O=b,w.j.info("backChannelRequestTimeoutMs_="+b)),b=w;const oi=m.g;if(oi){const Vo=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var X=b.h;X.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Da(X,X.h),X.h=null))}if(b.G){const Er=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Er&&(b.wa=Er,je(b.J,b.G,Er))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),b=w;var fe=m;if(b.na=Ru(b,b.L?b.ba:null,b.W),fe.L){Va(b.h,fe);var Ve=fe,_t=b.O;_t&&(Ve.H=_t),Ve.D&&(Ai(Ve),Si(Ve)),b.g=fe}else Eu(b);w.i.length>0&&Mi(w)}else Xe[0]!="stop"&&Xe[0]!="close"||Di(w,7);else w.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Di(w,7):Fa(w):Xe[0]!="noop"&&w.l&&w.l.qa(Xe),w.A=0)}}yi(4)}catch{}}var It=class{constructor(m,E){this.g=m,this.map=E}};function Na(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ma(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function wi(m){return m.h?1:m.g?m.g.size:0}function Ri(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Da(m,E){m.g?m.g.add(E):m.h=E}function Va(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Na.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Pa(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const w of m.g.values())E=E.concat(w.G);return E}return R(m.i)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hr(m,E){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const b=m[w].indexOf("=");let H,X=null;b>=0?(H=m[w].substring(0,b),X=m[w].substring(b+1)):H=m[w],E(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Cn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Cn?(this.l=m.l,Ft(this,m.j),this.o=m.o,this.g=m.g,As(this,m.u),this.h=m.h,Ua(this,_u(m.i)),this.m=m.m):m&&(E=String(m).match(pu))?(this.l=!1,Ft(this,E[1]||"",!0),this.o=Ii(E[2]||""),this.g=Ii(E[3]||"",!0),As(this,E[4]),this.h=Ii(E[5]||"",!0),Ua(this,E[6]||"",!0),this.m=Ii(E[7]||"")):(this.l=!1,this.i=new ws(null,this.l))}Cn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Ro(E,mr,!0),":");var w=this.g;return(w||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Ro(E,mr,!0),"@"),m.push(Ki(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(Ro(w,w.charAt(0)=="/"?ka:gu,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",Ro(w,yu)),m.join("")},Cn.prototype.resolve=function(m){const E=xt(this);let w=!!m.j;w?Ft(E,m.j):w=!!m.o,w?E.o=m.o:w=!!m.g,w?E.g=m.g:w=m.u!=null;var b=m.h;if(w)As(E,m.u);else if(w=!!m.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=E.h.lastIndexOf("/");H!=-1&&(b=E.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let fe=0;fe<H.length;){const Ve=H[fe++];Ve=="."?b&&fe==H.length&&X.push(""):Ve==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&fe==H.length&&X.push("")):(X.push(Ve),b=!0)}b=X.join("/")}else b=H}return w?E.h=b:w=m.i.toString()!=="",w?Ua(E,_u(m.i)):w=!!m.m,w&&(E.m=m.m),E};function xt(m){return new Cn(m)}function Ft(m,E,w){m.j=w?Ii(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function As(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Ua(m,E,w){E instanceof ws?(m.i=E,gr(m.i,m.l)):(w||(E=Ro(E,Cs)),m.i=new ws(E,m.l))}function je(m,E,w){m.i.set(E,w)}function wo(m){return je(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ii(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ro(m,E,w){return typeof m=="string"?(m=encodeURI(m).replace(E,hn),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function hn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var mr=/[#\/\?@]/g,gu=/[#\?:]/g,ka=/[#\?]/g,Cs=/[#\?@]/g,yu=/#/g;function ws(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function mn(m){m.g||(m.g=new Map,m.h=0,m.i&&hr(m.i,function(E,w){m.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=ws.prototype,n.add=function(m,E){mn(this),this.i=null,m=Rs(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(E),this.h+=1,this};function vu(m,E){mn(m),E=Rs(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function La(m,E){return mn(m),E=Rs(m,E),m.g.has(E)}n.forEach=function(m,E){mn(this),this.g.forEach(function(w,b){w.forEach(function(H){m.call(E,H,b,this)},this)},this)};function Oa(m,E){mn(m);let w=[];if(typeof E=="string")La(m,E)&&(w=w.concat(m.g.get(Rs(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)w=w.concat(m[E]);return w}n.set=function(m,E){return mn(this),this.i=null,m=Rs(this,m),La(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=Oa(this,m),m.length>0?String(m[0]):E):E};function pr(m,E,w){vu(m,E),w.length>0&&(m.i=null,m.g.set(Rs(m,E),R(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let b=0;b<E.length;b++){var w=E[b];const H=Ki(w);w=Oa(this,w);for(let X=0;X<w.length;X++){let fe=H;w[X]!==""&&(fe+="="+Ki(w[X])),m.push(fe)}}return this.i=m.join("&")};function _u(m){const E=new ws;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Rs(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function gr(m,E){E&&!m.j&&(mn(m),m.i=null,m.g.forEach(function(w,b){const H=b.toLowerCase();b!=H&&(vu(this,b),pr(this,H,w))},m)),m.j=E}function ti(m,E){const w=new Zn;if(c.Image){const b=new Image;b.onload=_(Un,w,"TestLoadImage: loaded",!0,E,b),b.onerror=_(Un,w,"TestLoadImage: error",!1,E,b),b.onabort=_(Un,w,"TestLoadImage: abort",!1,E,b),b.ontimeout=_(Un,w,"TestLoadImage: timeout",!1,E,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else E(!1)}function qa(m,E){const w=new Zn,b=new AbortController,H=setTimeout(()=>{b.abort(),Un(w,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:b.signal}).then(X=>{clearTimeout(H),X.ok?Un(w,"TestPingServer: ok",!0,E):Un(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Un(w,"TestPingServer: error",!1,E)})}function Un(m,E,w,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(w)}catch{}}function Is(){this.g=new ru}function xi(m){this.i=m.Sb||null,this.h=m.ab||!1}T(xi,au),xi.prototype.g=function(){return new Io(this.i,this.h)};function Io(m,E){Ct.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Io,Ct),n=Io.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,ni(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xs(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function yr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?xs(this):ni(this),this.readyState==3&&yr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,xs(this))},n.Na=function(m){this.g&&(this.response=m,xs(this))},n.ga=function(){this.g&&xs(this)};function xs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ni(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=E.next();return m.join(`\r
`)};function ni(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function kn(m){let E="";return Oe(m,function(w,b){E+=b,E+=":",E+=w,E+=`\r
`}),E}function xo(m,E,w){e:{for(b in w){var b=!1;break e}b=!0}b||(w=kn(w),typeof m=="string"?w!=null&&Ki(w):je(m,E,w))}function nt(m){Ct.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Ct);var bi=/^https?$/i,Ba=["POST","PUT"];n=nt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,w,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ba.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(X){bo(this,X);return}if(m=w||"",w=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)w.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())w.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),H=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Ba,E,void 0)>=0)||b||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,fe]of w)this.g.setRequestHeader(X,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){bo(this,X)}};function bo(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,za(m),$i(m)}function za(m){m.A||(m.A=!0,Ot(m,"complete"),Ot(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ot(this,"complete"),Ot(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?No(this):this.Xa())},n.Xa=function(){No(this)};function No(m){if(m.h&&typeof l<"u"){if(m.v&&ii(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ot(m,"readystatechange"),ii(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var b;if(b=X===0){let fe=String(m.D).match(pu)[1]||null;!fe&&c.self&&c.self.location&&(fe=c.self.location.protocol.slice(0,-1)),b=!bi.test(fe?fe.toLowerCase():"")}w=b}if(w)Ot(m,"complete"),Ot(m,"success");else{m.o=6;try{var H=ii(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",za(m)}}finally{$i(m)}}}}function $i(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,E||Ot(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ii(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Xf(E)}};function Kt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(m){const E={};m=(m.g&&ii(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(N(m[b]))continue;var w=du(m[b]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=E[H]||[];E[H]=X,X.push(w)}qe(E,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(m,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||E}function bs(m){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,m),this.Za=Ni("retryDelaySeedMs",1e4,m),this.Ta=Ni("forwardChannelMaxRetries",2,m),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Na(m&&m.concurrentRequestLimit),this.Ba=new Is,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=bs.prototype,n.ka=8,n.I=1,n.connect=function(m,E,w,b){wt(0),this.W=m,this.H=E||{},w&&b!==void 0&&(this.H.OSID=w,this.H.OAID=b),this.F=this.X,this.J=Ru(this,null,this.W),Mi(this)};function Fa(m){if(vr(m),m.I==3){var E=m.V++,w=xt(m.J);if(je(w,"SID",m.M),je(w,"RID",E),je(w,"TYPE","terminate"),Mo(m,w),E=new jn(m,m.j,E),E.M=2,E.A=wo(xt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=E.A,w=!0),w||(E.g=Iu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Si(E)}wu(m)}function Ns(m){m.g&&(Ha(m),m.g.cancel(),m.g=null)}function vr(m){Ns(m),m.v&&(c.clearTimeout(m.v),m.v=null),Tr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function Mi(m){if(!Ma(m.h)&&!m.m){m.m=!0;var E=m.Ea;ce||V(),le||(ce(),le=!0),M.add(E,m),m.D=0}}function _r(m,E){return wi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=_i(p(m.Ea,m,E),Cu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new jn(this,this.j,m);let X=this.o;if(this.U&&(X?(X=z(X),Y(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var b=this.i[w];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=Tu(this,H,E),w=xt(this.J),je(w,"RID",m),je(w,"CVER",22),this.G&&je(w,"X-HTTP-Session-Id",this.G),Mo(this,w),X&&(this.R?E="headers="+Ki(kn(X))+"&"+E:this.u&&xo(w,this.u,X)),Da(this.h,H),this.Ra&&je(w,"TYPE","init"),this.S?(je(w,"$req",E),je(w,"SID","null"),H.U=!0,Ei(H,w,null)):Ei(H,w,E),this.I=2}}else this.I==3&&(m?Ga(this,m):this.i.length==0||Ma(this.h)||Ga(this))};function Ga(m,E){var w;E?w=E.l:w=m.V++;const b=xt(m.J);je(b,"SID",m.M),je(b,"RID",w),je(b,"AID",m.K),Mo(m,b),m.u&&m.o&&xo(b,m.u,m.o),w=new jn(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Tu(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Da(m.h,w),Ei(w,b,E)}function Mo(m,E){m.H&&Oe(m.H,function(w,b){je(E,b,w)}),m.l&&Oe({},function(w,b){je(E,b,w)})}function Tu(m,E,w){w=Math.min(m.i.length,w);const b=m.l?p(m.l.Ka,m.l,m):null;e:{var H=m.i;let Ve=-1;for(;;){const _t=["count="+w];Ve==-1?w>0?(Ve=H[0].g,_t.push("ofs="+Ve)):Ve=0:_t.push("ofs="+Ve);let Xe=!0;for(let ht=0;ht<w;ht++){var X=H[ht].g;const Ln=H[ht].map;if(X-=Ve,X<0)Ve=Math.max(0,H[ht].g-100),Xe=!1;else try{X="req"+X+"_"||"";try{var fe=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Vi,si]of fe){let oi=si;d(si)&&(oi=Ss(si)),_t.push(X+Vi+"="+encodeURIComponent(oi))}}catch(Vi){throw _t.push(X+"type="+encodeURIComponent("_badmap")),Vi}}catch{b&&b(Ln)}}if(Xe){fe=_t.join("&");break e}}fe=void 0}return m=m.i.splice(0,w),E.G=m,fe}function Eu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;ce||V(),le||(ce(),le=!0),M.add(E,m),m.A=0}}function Do(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=_i(p(m.Da,m),Cu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=_i(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Ns(this),Su(this))};function Ha(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Su(m){m.g=new jn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=xt(m.na);je(E,"RID","rpc"),je(E,"SID",m.M),je(E,"AID",m.K),je(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&je(E,"TO",m.ia),je(E,"TYPE","xmlhttp"),Mo(m,E),m.u&&m.o&&xo(E,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=wo(xt(E)),w.u=null,w.R=!0,fr(w,m)}n.Va=function(){this.C!=null&&(this.C=null,Ns(this),Do(this),wt(19))};function Tr(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Au(m,E){var w=null;if(m.g==E){Tr(m),Ha(m),m.g=null;var b=2}else if(Ri(m.h,E))w=E.G,Va(m.h,E),b=1;else return;if(m.I!=0){if(E.o)if(b==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var H=m.D;b=cr(),Ot(b,new vi(b,w)),Mi(m)}else Eu(m);else if(H=E.m,H==3||H==0&&E.X>0||!(b==1&&_r(m,E)||b==2&&Do(m)))switch(w&&w.length>0&&(E=m.h,E.i=E.i.concat(w)),H){case 1:Di(m,5);break;case 4:Di(m,10);break;case 3:Di(m,6);break;default:Di(m,2)}}}function Cu(m,E){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*E}function Di(m,E){if(m.j.info("Error code "+E),E==2){var w=p(m.bb,m),b=m.Ua;const H=!b;b=new Cn(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(b,"https"),wo(b),H?ti(b.toString(),w):qa(b.toString(),w)}else wt(2);m.I=0,m.l&&m.l.pa(E),wu(m),vr(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function wu(m){if(m.I=0,m.ja=[],m.l){const E=Pa(m.h);(E.length!=0||m.i.length!=0)&&(k(m.ja,E),k(m.ja,m.i),m.h.i.length=0,R(m.i),m.i.length=0),m.l.oa()}}function Ru(m,E,w){var b=w instanceof Cn?xt(w):new Cn(w);if(b.g!="")E&&(b.g=E+"."+b.g),As(b,b.u);else{var H=c.location;b=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const X=new Cn(null);b&&Ft(X,b),E&&(X.g=E),H&&As(X,H),w&&(X.h=w),b=X}return w=m.G,E=m.wa,w&&E&&je(b,w,E),je(b,"VER",m.ka),Mo(m,b),b}function Iu(m,E,w){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new nt(new xi({ab:w})):new nt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ms(){}Ms.prototype.g=function(m,E){return new ln(m,E)};function ln(m,E){Ct.call(this),this.g=new bs(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!N(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!N(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Xi(this)}T(ln,Ct),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Fa(this.g)},ln.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=Ss(m),m=w);E.i.push(new It(E.Ya++,m)),E.I==3&&Mi(E)},ln.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,ln.Z.N.call(this)};function bu(m){Jt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const w in E){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(bu,Jt);function Nu(){Vn.call(this),this.status=1}T(Nu,Vn);function Xi(m){this.g=m}T(Xi,xu),Xi.prototype.ra=function(){Ot(this.g,"a")},Xi.prototype.qa=function(m){Ot(this.g,new bu(m))},Xi.prototype.pa=function(m){Ot(this.g,new Nu)},Xi.prototype.oa=function(){Ot(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,LE=function(){return new Ms},kE=function(){return cr()},UE=vt,gm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ao.NO_ERROR=0,Ao.TIMEOUT=8,Ao.HTTP_ERROR=6,Hc=Ao,xa.COMPLETE="complete",PE=xa,lu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Ml=lu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,VE=nt}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore",B0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new wE("@firebase/firestore");function Zr(){return er.logLevel}function ge(n,...e){if(er.logLevel<=Je.DEBUG){const t=e.map(Zm);er.debug(`Firestore (${ga}): ${n}`,...t)}}function hs(n,...e){if(er.logLevel<=Je.ERROR){const t=e.map(Zm);er.error(`Firestore (${ga}): ${n}`,...t)}}function ua(n,...e){if(er.logLevel<=Je.WARN){const t=e.map(Zm);er.warn(`Firestore (${ga}): ${n}`,...t)}}function Zm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,OE(n,s,t)}function OE(n,e,t){let s=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw hs(s),new Error(s)}function Ze(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||OE(e,r,s)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class HI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class YI{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let s=this.i;const r=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new so;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new so,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new so)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new qE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class JI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new JI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $I{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,RI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=QI(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function Fe(n,e){return n<e?-1:n>e?1:0}function ym(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return im(r)===im(l)?Fe(r,l):im(r)?1:-1}return Fe(n.length,e.length)}const XI=55296,WI=57343;function im(n){const e=n.charCodeAt(0);return e>=XI&&e<=WI}function ca(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="__name__";class Oi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ie(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Oi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Oi.isNumericId(e),r=Oi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class lt extends Oi{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const ZI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Oi{construct(e,t,s){return new jt(e,t,s)}static isValidIdentifier(e){return ZI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F0}static keyField(){return new jt([F0])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(s+=d,r++):(l(),r++)}if(l(),c)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(lt.fromString(e))}static fromName(e){return new Ce(lt.fromString(e).popFirst(5))}static empty(){return new Ce(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e,t){if(!t)throw new pe(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function jI(n,e,t,s){if(e===!0&&s===!0)throw new pe(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function G0(n){if(!Ce.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H0(n){if(Ce.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Bi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(n);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function Xl(n,e){if(!zE(n))throw new pe(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(r&&typeof c!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=-62135596800,J0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*J0);return new ft(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Y0)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J0}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xl(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Ut("string",ft._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ft(0,0))}static max(){return new be(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function ex(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=be.fromTimestamp(s===1e9?new ft(t+1,0):new ft(t,s));return new ro(r,Ce.empty(),e)}function tx(n){return new ro(n.readTime,n.key,Hl)}class ro{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ro(be.min(),Ce.empty(),Hl)}static max(){return new ro(be.max(),Ce.empty(),Hl)}}function nx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==ix)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,s)=>{t(e)}))}static reject(e){return new oe(((t,s)=>{s(e)}))}static waitFor(e){return new oe(((t,s)=>{let r=0,l=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&t()}),(g=>s(g)))})),c=!0,l===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const s of e)t=t.next((r=>r?oe.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new oe(((s,r)=>{const l=e.length,c=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((_=>{c[p]=_,++d,d===l&&s(c)}),(_=>r(_)))}}))}static doWhile(e,t){return new oe(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function ox(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function Rf(n){return n==null}function tf(n){return n===0&&1/n==-1/0}function rx(n){return typeof n=="number"&&Number.isInteger(n)&&!tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="";function ax(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=K0(e)),e=lx(n.get(t),e);return K0(e)}function lx(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case FE:t+="";break;default:t+=l}}return t}function K0(n){return n+FE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uc(this.root,e,this.comparator,!0)}}class Uc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Zt.RED,this.left=r??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Zt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Zt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Bt(jt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new HE("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const ux=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=ux.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="server_timestamp",JE="__type__",KE="__previous_value__",$E="__local_write_time__";function tp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[JE])==null?void 0:s.stringValue)===YE}function If(n){const e=n.mapValue.fields[KE];return tp(e)?If(e):e}function Yl(n){const e=ao(n.mapValue.fields[$E].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t,s,r,l,c,d,g,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const nf="(default)";class Jl{constructor(e,t){this.projectId=e,this.database=t||nf}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="__type__",fx="__max__",kc={mapValue:{}},XE="__vector__",sf="value";function uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tp(n)?4:hx(n)?9007199254740991:dx(n)?10:11:Ie(28295,{value:n})}function Ji(n,e){if(n===e)return!0;const t=uo(n);if(t!==uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=ao(r.timestampValue),d=ao(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return lo(r.bytesValue).isEqual(lo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return St(r.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return St(r.integerValue)===St(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=St(r.doubleValue),d=St(l.doubleValue);return c===d?tf(c)===tf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return ca(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if($0(c)!==$0(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!Ji(c[g],d[g])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Kl(n,e){return(n.values||[]).find((t=>Ji(t,e)))!==void 0}function fa(n,e){if(n===e)return 0;const t=uo(n),s=uo(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=St(l.integerValue||l.doubleValue),g=St(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return X0(n.timestampValue,e.timestampValue);case 4:return X0(Yl(n),Yl(e));case 5:return ym(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=lo(l),g=lo(c);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const _=Fe(d[p],g[p]);if(_!==0)return _}return Fe(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Fe(St(l.latitude),St(c.latitude));return d!==0?d:Fe(St(l.longitude),St(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return W0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,k,O;const d=l.fields||{},g=c.fields||{},p=(S=d[sf])==null?void 0:S.arrayValue,_=(R=g[sf])==null?void 0:R.arrayValue,T=Fe(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((O=_==null?void 0:_.values)==null?void 0:O.length)||0);return T!==0?T:W0(p,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===kc.mapValue&&c===kc.mapValue)return 0;if(l===kc.mapValue)return 1;if(c===kc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=c.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const S=ym(g[T],_[T]);if(S!==0)return S;const R=fa(d[g[T]],p[_[T]]);if(R!==0)return R}return Fe(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function X0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=ao(n),s=ao(e),r=Fe(t.seconds,s.seconds);return r!==0?r:Fe(t.nanos,s.nanos)}function W0(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=fa(t[r],s[r]);if(l)return l}return Fe(t.length,s.length)}function da(n){return vm(n)}function vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ao(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return lo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=vm(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of s)l?l=!1:r+=",",r+=`${c}:${vm(t.fields[c])}`;return r+"}"})(n.mapValue):Ie(61005,{value:n})}function Yc(n){switch(uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(n);return e?16+Yc(e):16;case 5:return 2*n.stringValue.length;case 6:return lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Yc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return ho(s.fields,((l,c)=>{r+=l.length+Yc(c)})),r})(n.mapValue);default:throw Ie(13486,{value:n})}}function Z0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _m(n){return!!n&&"integerValue"in n}function np(n){return!!n&&"arrayValue"in n}function j0(n){return!!n&&"nullValue"in n}function e_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jc(n){return!!n&&"mapValue"in n}function dx(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[QE])==null?void 0:s.stringValue)===XE}function Ll(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ho(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ll(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return{...n}}function hx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=jt.emptyPath(),s={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,r),s={},r=[],t=d.popLast()}c?s[d.lastSegment()]=Ll(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());Jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Jc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){ho(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new Sn(Ll(this.value))}}function WE(n){const e=[];return ho(n.fields,((t,s)=>{const r=new jt([t]);if(Jc(s)){const l=WE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,r,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new on(e,0,be.min(),be.min(),be.min(),Sn.empty(),0)}static newFoundDocument(e,t,s,r){return new on(e,1,t,be.min(),s,r,0)}static newNoDocument(e,t){return new on(e,2,t,be.min(),be.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,be.min(),be.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.position=e,this.inclusive=t}}function t_(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(c.referenceValue),t.key):s=fa(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function n_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function mx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{}class Pt extends ZE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new gx(e,t,s):t==="array-contains"?new _x(e,s):t==="in"?new Tx(e,s):t==="not-in"?new Ex(e,s):t==="array-contains-any"?new Sx(e,s):new Pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new yx(e,s):new vx(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&uo(this.value)===uo(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends ZE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return jE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jE(n){return n.op==="and"}function eS(n){return px(n)&&jE(n)}function px(n){for(const e of n.filters)if(e instanceof hi)return!1;return!0}function Tm(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+da(n.value);if(eS(n))return n.filters.map((e=>Tm(e))).join(",");{const e=n.filters.map((t=>Tm(t))).join(",");return`${n.op}(${e})`}}function tS(n,e){return n instanceof Pt?(function(s,r){return r instanceof Pt&&s.op===r.op&&s.field.isEqual(r.field)&&Ji(s.value,r.value)})(n,e):n instanceof hi?(function(s,r){return r instanceof hi&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,c,d)=>l&&tS(c,r.filters[d])),!0):!1})(n,e):void Ie(19439)}function nS(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${da(t.value)}`})(n):n instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(nS).join(" ,")+"}"})(n):"Filter"}class gx extends Pt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class yx extends Pt{constructor(e,t){super(e,"in",t),this.keys=iS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vx extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=iS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class _x extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return np(t)&&Kl(t.arrayValue,this.value)}}class Tx extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kl(this.value.arrayValue,t)}}class Ex extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kl(this.value.arrayValue,t)}}class Sx extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!np(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Kl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t=null,s=[],r=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function i_(n,e=null,t=[],s=[],r=null,l=null,c=null){return new Ax(n,e,t,s,r,l,c)}function ip(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Tm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>da(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>da(s))).join(",")),e.Te=t}return e.Te}function sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!n_(n.startAt,e.startAt)&&n_(n.endAt,e.endAt)}function Em(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t=null,s=[],r=[],l=null,c="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Cx(n,e,t,s,r,l,c,d){return new Wl(n,e,t,s,r,l,c,d)}function op(n){return new Wl(n)}function s_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sS(n){return n.collectionGroup!==null}function Ol(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Bt(jt.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rf(l,s))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new rf(jt.keyField(),s))}return e.Ie}function zi(n){const e=Me(n);return e.Ee||(e.Ee=wx(e,Ol(n))),e.Ee}function wx(n,e){if(n.limitType==="F")return i_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new rf(r.field,l)}));const t=n.endAt?new of(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new of(n.startAt.position,n.startAt.inclusive):null;return i_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Sm(n,e){const t=n.filters.concat([e]);return new Wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function af(n,e,t){return new Wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xf(n,e){return sp(zi(n),zi(e))&&n.limitType===e.limitType}function oS(n){return`${ip(zi(n))}|lt:${n.limitType}`}function jr(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>nS(r))).join(", ")}]`),Rf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>da(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>da(r))).join(",")),`Target(${s})`})(zi(n))}; limitType=${n.limitType})`}function bf(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of Ol(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(c,d,g){const p=t_(c,d,g);return c.inclusive?p<=0:p<0})(s.startAt,Ol(s),r)||s.endAt&&!(function(c,d,g){const p=t_(c,d,g);return c.inclusive?p>=0:p>0})(s.endAt,Ol(s),r))})(n,e)}function Rx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rS(n){return(e,t)=>{let s=!1;for(const r of Ol(n)){const l=Ix(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function Ix(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,c,d){const g=c.data.field(l),p=d.data.field(l);return g!==null&&p!==null?fa(g,p):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=new pt(Ce.comparator);function ms(){return xx}const aS=new pt(Ce.comparator);function Dl(...n){let e=aS;for(const t of n)e=e.insert(t.key,t);return e}function lS(n){let e=aS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Wo(){return ql()}function uS(){return ql()}function ql(){return new ir((n=>n.toString()),((n,e)=>n.isEqual(e)))}const bx=new pt(Ce.comparator),Nx=new Bt(Ce.comparator);function Ge(...n){let e=Nx;for(const t of n)e=e.add(t);return e}const Mx=new Bt(Fe);function Dx(){return Mx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(e)?"-0":e}}function cS(n){return{integerValue:""+n}}function Vx(n,e){return rx(e)?cS(e):rp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function Px(n,e,t){return n instanceof lf?(function(r,l){const c={fields:{[JE]:{stringValue:YE},[$E]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&tp(l)&&(l=If(l)),l&&(c.fields[KE]=l),{mapValue:c}})(t,e):n instanceof $l?dS(n,e):n instanceof Ql?hS(n,e):(function(r,l){const c=fS(r,l),d=o_(c)+o_(r.Ae);return _m(c)&&_m(r.Ae)?cS(d):rp(r.serializer,d)})(n,e)}function Ux(n,e,t){return n instanceof $l?dS(n,e):n instanceof Ql?hS(n,e):t}function fS(n,e){return n instanceof uf?(function(s){return _m(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class lf extends Nf{}class $l extends Nf{constructor(e){super(),this.elements=e}}function dS(n,e){const t=mS(e);for(const s of n.elements)t.some((r=>Ji(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Ql extends Nf{constructor(e){super(),this.elements=e}}function hS(n,e){let t=mS(e);for(const s of n.elements)t=t.filter((r=>!Ji(r,s)));return{arrayValue:{values:t}}}class uf extends Nf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o_(n){return St(n.integerValue||n.doubleValue)}function mS(n){return np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function kx(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof $l&&r instanceof $l||s instanceof Ql&&r instanceof Ql?ca(s.elements,r.elements,Ji):s instanceof uf&&r instanceof uf?Ji(s.Ae,r.Ae):s instanceof lf&&r instanceof lf})(n.transform,e.transform)}class Lx{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mf{}function pS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ap(n.key,ui.none()):new Zl(n.key,n.data,ui.none());{const t=n.data,s=Sn.empty();let r=new Bt(jt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),r=r.add(l)}return new mo(n.key,s,new Dn(r.toArray()),ui.none())}}function Ox(n,e,t){n instanceof Zl?(function(r,l,c){const d=r.value.clone(),g=a_(r.fieldTransforms,l,c.transformResults);d.setAll(g),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof mo?(function(r,l,c){if(!Kc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=a_(r.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(gS(r)),g.setAll(d),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Bl(n,e,t,s){return n instanceof Zl?(function(l,c,d,g){if(!Kc(l.precondition,c))return d;const p=l.value.clone(),_=l_(l.fieldTransforms,g,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof mo?(function(l,c,d,g){if(!Kc(l.precondition,c))return d;const p=l_(l.fieldTransforms,g,c),_=c.data;return _.setAll(gS(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,c,d){return Kc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function qx(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=fS(s.transform,r||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(s.field,l))}return t||null}function r_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ca(s,r,((l,c)=>kx(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zl extends Mf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mo extends Mf{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function a_(n,e,t){const s=new Map;Ze(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,d=e.data.field(l.field);s.set(l.field,Ux(c,d,t[r]))}return s}function l_(n,e,t){const s=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);s.set(r.field,Px(l,c,e))}return s}class ap extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bx extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&Ox(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Bl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Bl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=uS();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(r.key)?null:d;const g=pS(c,d);g!==null&&s.set(r.key,g),c.isValidDocument()||c.convertToNoDocument(be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,((t,s)=>r_(t,s)))&&ca(this.baseMutations,e.baseMutations,((t,s)=>r_(t,s)))}}class lp{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){Ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return bx})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,s[c].version);return new lp(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ye;function Hx(n){switch(n){case se.OK:return Ie(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function yS(n){if(n===void 0)return hs("GRPC error has no .code"),se.UNKNOWN;switch(n){case Vt.OK:return se.OK;case Vt.CANCELLED:return se.CANCELLED;case Vt.UNKNOWN:return se.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return se.INTERNAL;case Vt.UNAVAILABLE:return se.UNAVAILABLE;case Vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Vt.NOT_FOUND:return se.NOT_FOUND;case Vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Vt.ABORTED:return se.ABORTED;case Vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Vt.DATA_LOSS:return se.DATA_LOSS;default:return Ie(39323,{code:n})}}(Ye=Vt||(Vt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new io([4294967295,4294967295],0);function u_(n){const e=Yx().encode(n),t=new DE;return t.update(e),new Uint8Array(t.digest())}function c_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new io([t,s],0),new io([r,l],0)]}class up{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Vl(`Invalid padding: ${t}`);if(s<0)throw new Vl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=io.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(io.fromNumber(s)));return r.compare(Jx)===1&&(r=new io([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=u_(e),[s,r]=c_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new up(l,r,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=u_(e),[s,r]=c_(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Df(be.min(),r,new pt(Fe),ms(),Ge())}}class jl{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new jl(s,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class vS{constructor(e,t){this.targetId=e,this.Ce=t}}class _S{constructor(e,t,s=en.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class f_{constructor(){this.ve=0,this.Fe=d_(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),s=Ge();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ie(38017,{changeType:l})}})),new jl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=d_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Kx{constructor(e){this.Ge=e,this.ze=new Map,this.je=ms(),this.Je=Lc(),this.He=Lc(),this.Ye=new pt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Em(l))if(s===0){const c=new Ce(l.path);this.et(t,c,on.newNoDocument(c,be.min()))}else Ze(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),g=d?this.ct(d,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let c,d;try{c=lo(s).toUint8Array()}catch(g){if(g instanceof HE)return ua("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new up(c,r,l)}catch(g){return ua(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Em(d.target)){const g=new Ce(d.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,on.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=Ge();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new Df(e,t,this.Ye,this.je,s);return this.je=ms(),this.Je=Lc(),this.He=Lc(),this.Ye=new pt(Fe),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new f_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new f_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new pt(Ce.comparator)}function d_(){return new pt(Ce.comparator)}const $x={asc:"ASCENDING",desc:"DESCENDING"},Qx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xx={and:"AND",or:"OR"};class Wx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Am(n,e){return n.useProto3Json||Rf(e)?e:{value:e}}function cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zx(n,e){return cf(n,e.toTimestamp())}function Fi(n){return Ze(!!n,49232),be.fromTimestamp((function(t){const s=ao(t);return new ft(s.seconds,s.nanos)})(n))}function cp(n,e){return Cm(n,e).canonicalString()}function Cm(n,e){const t=(function(r){return new lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ES(n){const e=lt.fromString(n);return Ze(RS(e),10190,{key:e.toString()}),e}function wm(n,e){return cp(n.databaseId,e.path)}function sm(n,e){const t=ES(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(AS(t))}function SS(n,e){return cp(n.databaseId,e)}function jx(n){const e=ES(n);return e.length===4?lt.emptyPath():AS(e)}function Rm(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AS(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function h_(n,e,t){return{name:wm(n,e),fields:t.value.mapValue.fields}}function eb(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(Ze(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(Ze(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const _=p.code===void 0?se.UNKNOWN:yS(p.code);return new pe(_,p.message||"")})(c);t=new _S(s,r,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=sm(n,s.document.name),l=Fi(s.document.updateTime),c=s.document.createTime?Fi(s.document.createTime):be.min(),d=new Sn({mapValue:{fields:s.document.fields}}),g=on.newFoundDocument(r,l,c,d),p=s.targetIds||[],_=s.removedTargetIds||[];t=new $c(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=sm(n,s.document),l=s.readTime?Fi(s.readTime):be.min(),c=on.newNoDocument(r,l),d=s.removedTargetIds||[];t=new $c([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=sm(n,s.document),l=s.removedTargetIds||[];t=new $c([],l,r,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,c=new Gx(r,l),d=s.targetId;t=new vS(d,c)}}return t}function tb(n,e){let t;if(e instanceof Zl)t={update:h_(n,e.key,e.value)};else if(e instanceof ap)t={delete:wm(n,e.key)};else if(e instanceof mo)t={update:h_(n,e.key,e.data),updateMask:cb(e.fieldMask)};else{if(!(e instanceof Bx))return Ie(16599,{Vt:e.type});t={verify:wm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof lf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $l)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ql)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof uf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ie(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:Zx(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function nb(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?Fi(r.updateTime):Fi(l);return c.isEqual(be.min())&&(c=Fi(l)),new Lx(c,r.transformResults||[])})(t,e)))):[]}function ib(n,e){return{documents:[SS(n,e.path)]}}function sb(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=SS(n,r);const l=(function(p){if(p.length!==0)return wS(hi.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((_=>(function(S){return{field:ea(S.field),direction:ab(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Am(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function ob(n){let e=jx(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){Ze(s===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=CS(T);return S instanceof hi&&eS(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(k){return new rf(ta(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,Rf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,R=T.values||[];return new of(R,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const S=!T.before,R=T.values||[];return new of(R,S)})(t.endAt)),Cx(e,r,c,l,d,"F",g,p)}function rb(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ta(t.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ta(t.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ta(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ta(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(ta(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((s=>CS(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function ab(n){return $x[n]}function lb(n){return Qx[n]}function ub(n){return Xx[n]}function ea(n){return{fieldPath:n.canonicalString()}}function ta(n){return jt.fromServerFormat(n.fieldPath)}function wS(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(e_(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NAN"}};if(j0(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(e_(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NAN"}};if(j0(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(t.field),op:lb(t.op),value:t.value}}})(n):n instanceof hi?(function(t){const s=t.getFilters().map((r=>wS(r)));return s.length===1?s[0]:{compositeFilter:{op:ub(t.op),filters:s}}})(n):Ie(54877,{filter:n})}function cb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,s,r,l=be.min(),c=be.min(),d=en.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.yt=e}}function db(n){const e=ob({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.Cn=new mb}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ro.min())}updateCollectionGroup(e,t,s){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class mb{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Bt(lt.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Bt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IS=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(IS,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ha(0)}static cr(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="LruGarbageCollector",pb=1048576;function g_([n,e],[t,s]){const r=Fe(n,t);return r===0?Fe(e,s):r}class gb{constructor(e){this.Ir=e,this.buffer=new Bt(g_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();g_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yb{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(p_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?ge(p_,"Ignoring IndexedDB error during garbage collection: ",t):await ya(t)}await this.Vr(3e5)}))}}class vb{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(wf.ce);const s=new gb(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(m_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,c,d,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Zr()<=Je.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function _b(n,e){return new vb(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.changes=new ir((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Bl(s.mutation,r,Dn.empty(),ft.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ge()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ge()){const r=Wo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let c=Dl();return l.forEach(((d,g)=>{c=c.insert(d,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Wo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ge())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,r){let l=ms();const c=ql(),d=(function(){return ql()})();return t.forEach(((g,p)=>{const _=s.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof mo)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Bl(_.mutation,p,_.mutation.getFieldMask(),ft.now())):c.set(p.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>c.set(p,_))),t.forEach(((p,_)=>d.set(p,new Eb(_,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=ql();let r=new pt(((c,d)=>c-d)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=s.get(g)||Dn.empty();_=d.applyToLocalView(p,_),s.set(g,_);const T=(r.get(d.batchId)||Ge()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,_=g.value,T=uS();_.forEach((S=>{if(!l.has(S)){const R=pS(t.get(S),s.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return oe.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):oe.resolve(Wo());let d=Hl,g=l;return c.next((p=>oe.forEach(p,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Ge()))).next((_=>({batchId:d,changes:lS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let r=Dl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let c=Dl();return this.indexManager.getCollectionParents(e,l).next((d=>oe.forEach(d,(g=>{const p=(function(T,S){return new Wl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((_=>{_.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((c=>{l.forEach(((g,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,on.newInvalidDocument(_)))}));let d=Dl();return c.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&Bl(_.mutation,p,Dn.empty(),ft.now()),bf(t,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Fi(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:db(r.bundledQuery),readTime:Fi(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.overlays=new pt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Wo();return oe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,t,s){const r=Wo(),l=t.length+1,c=new Ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&r.set(g.getKey(),g)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new pt(((p,_)=>p-_));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let _=l.get(p.largestBatchId);_===null&&(_=Wo(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Wo(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>d.set(p,_))),!(d.size()>=r)););return oe.resolve(d)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Fx(t,s));let l=this.qr.get(t);l===void 0&&(l=Ge(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new Bt(Ht.$r),this.Ur=new Bt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new lt([])),s=new Ht(t,e),r=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new lt([])),s=new Ht(t,e),r=new Ht(t,e+1);let l=Ge();return this.Ur.forEachInRange([s,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Ht.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zx(l,t,s,r);this.mutationQueue.push(c);for(const d of r)this.Zr=this.Zr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?ep:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),r=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(c=>{const d=this.Xr(c.Yr);l.push(d)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Bt(Fe);return t.forEach((r=>{const l=new Ht(r,0),c=new Ht(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new Ce(l),0);let d=new Bt(Fe);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(d=d.add(g.Yr)),!0)}),c),oe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(t.mutations,(r=>{const l=new Ht(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ht(t,0),r=this.Zr.firstAfterOrEqual(s);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return oe.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=ms();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():on.newInvalidDocument(r))})),oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=ms();const c=t.path,d=new Ce(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||nx(tx(_),s)<=0||(r.has(_.key)||bf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,s,r){Ie(9500)}ii(e,t){return oe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new xb(this)}getSize(e){return oe.resolve(this.size)}}class xb extends Tb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.persistence=e,this.si=new ir((t=>ip(t)),sp),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=ha.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ha(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return oe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),oe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return oe.resolve(s)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t){this.ui={},this.overlays={},this.ci=new wf(0),this.li=!1,this.li=!0,this.hi=new wb,this.referenceDelegate=e(this),this.Pi=new bb(this),this.indexManager=new hb,this.remoteDocumentCache=(function(r){return new Ib(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fb(t),this.Ii=new Ab(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Rb(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ge("MemoryPersistence","Starting transaction:",e);const r=new Nb(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Nb extends sx{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new dp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(s=>{const r=Ce.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ff{constructor(e,t){this.persistence=e,this.pi=new ir((s=>ax(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=_b(this,t)}static mi(e,t){return new ff(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?oe.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,be.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yc(e.data.value)),t}br(e,t,s){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return oe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Ge(),r=Ge();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new hp(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AR()?8:ox(ER())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Mb;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Zr()<=Je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",jr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Zr()<=Je.DEBUG&&ge("QueryEngine","Query:",jr(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Zr()<=Je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",jr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):oe.resolve())}ys(e,t){if(s_(t))return oe.resolve(null);let s=zi(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=af(t,null,"F"),s=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ge(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,d);return this.Cs(t,p,c,g.readTime)?this.ys(e,af(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,r){return s_(t)||r.isEqual(be.min())?oe.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,r)?oe.resolve(null):(Zr()<=Je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jr(t)),this.vs(e,c,t,ex(r,Hl)).next((d=>d)))}))}Ds(e,t){let s=new Bt(rS(e));return t.forEach(((r,l)=>{bf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Zr()<=Je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",jr(t)),this.ps.getDocumentsMatchingQuery(e,t,ro.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="LocalStore",Vb=3e8;class Pb{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new pt(Fe),this.xs=new ir((l=>ip(l)),sp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Ub(n,e,t,s){return new Pb(n,e,t,s)}async function bS(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let g=Ge();for(const p of r){c.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function kb(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,_){const T=p.batch,S=T.keys();let R=oe.resolve();return S.forEach((k=>{R=R.next((()=>_.getEntry(g,k))).next((O=>{const D=p.docVersions.get(k);Ze(D!==null,48541),O.version.compareTo(D)<0&&(T.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),_.addEntry(O)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Ge();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function NS(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Lb(n,e){const t=Me(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const S=r.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(en.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,s)),r=r.insert(T,R),(function(O,D,F){return O.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Vb?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(S,R,_)&&d.push(t.Pi.updateTargetData(l,R))}));let g=ms(),p=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(Ob(l,c,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!s.isEqual(be.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(_)}return oe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function Ob(n,e,t){let s=Ge(),r=Ge();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ms();return t.forEach(((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(be.min())?(e.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(d,g)):ge(mp,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:r}}))}function qb(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ep),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Bb(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,oe.resolve(r)):t.Pi.allocateTargetId(s).next((c=>(r=new eo(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Im(n,e,t){const s=Me(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!va(c))throw c;ge(mp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function y_(n,e,t){const s=Me(n);let r=be.min(),l=Ge();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,_){const T=Me(g),S=T.xs.get(_);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,_)})(s,c,zi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?r:be.min(),t?l:Ge()))).next((d=>(zb(s,Rx(e),d),{documents:d,Qs:l})))))}function zb(n,e,t){let s=n.Os.get(e)||be.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class v_{constructor(){this.activeTargetIds=Dx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fb{constructor(){this.Mo=new v_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new v_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="ConnectivityMonitor";class T_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(__,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(__,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function xm(){return Oc===null?Oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",Hb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===nf?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const c=xm(),d=this.zo(e,t.toUriEncodedString());ge(om,`Sending RPC '${e}' ${c}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:p}=new URL(d),_=Xm(p);return this.Jo(e,d,g,s,_).then((T=>(ge(om,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw ua(om,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",s),T}))}Ho(e,t,s,r,l,c){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ga})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=Hb[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class Kb extends Yb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const c=xm();return new Promise(((d,g)=>{const p=new VE;p.setWithCredentials(!0),p.listenOnce(PE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Hc.NO_ERROR:const T=p.getResponseJson();ge(nn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Hc.TIMEOUT:ge(nn,`RPC '${e}' ${c} timed out`),g(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const S=p.getStatus();if(ge(nn,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const k=R==null?void 0:R.error;if(k&&k.status&&k.message){const O=(function(F){const j=F.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(j)>=0?j:se.UNKNOWN})(k.status);g(new pe(O,k.message))}else g(new pe(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(se.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(nn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(r);ge(nn,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",_,s,15)}))}T_(e,t,s){const r=xm(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=LE(),d=kE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=l.join("");ge(nn,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=c.createWebChannel(_,g);this.I_(T);let S=!1,R=!1;const k=new Jb({Yo:D=>{R?ge(nn,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(S||(ge(nn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ge(nn,`RPC '${e}' stream ${r} sending:`,D),T.send(D))},Zo:()=>T.close()}),O=(D,F,j)=>{D.listen(F,(Q=>{try{j(Q)}catch(re){setTimeout((()=>{throw re}),0)}}))};return O(T,Ml.EventType.OPEN,(()=>{R||(ge(nn,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),O(T,Ml.EventType.CLOSE,(()=>{R||(R=!0,ge(nn,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(T))})),O(T,Ml.EventType.ERROR,(D=>{R||(R=!0,ua(nn,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new pe(se.UNAVAILABLE,"The operation could not be completed")))})),O(T,Ml.EventType.MESSAGE,(D=>{var F;if(!R){const j=D.data[0];Ze(!!j,16349);const Q=j,re=(Q==null?void 0:Q.error)||((F=Q[0])==null?void 0:F.error);if(re){ge(nn,`RPC '${e}' stream ${r} received error:`,re);const ce=re.status;let le=(function(x){const U=Vt[x];if(U!==void 0)return yS(U)})(ce),M=re.message;le===void 0&&(le=se.INTERNAL,M="Unknown error status: "+ce+" with message "+re.message),R=!0,k.a_(new pe(le,M)),T.close()}else ge(nn,`RPC '${e}' stream ${r} received:`,j),k.u_(j)}})),O(d,UE.STAT_EVENT,(D=>{D.stat===gm.PROXY?ge(nn,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===gm.NOPROXY&&ge(nn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){return new Wx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="PersistentStream";class DS{constructor(e,t,s,r,l,c,d,g){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(hs(t.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new pe(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(E_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(E_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $b extends DS{constructor(e,t,s,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eb(this.serializer,e),s=(function(l){if(!("targetChange"in l))return be.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?be.min():c.readTime?Fi(c.readTime):be.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Rm(this.serializer),t.addTarget=(function(l,c){let d;const g=c.target;if(d=Em(g)?{documents:ib(l,g)}:{query:sb(l,g).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=TS(l,c.resumeToken);const p=Am(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(be.min())>0){d.readTime=cf(l,c.snapshotVersion.toTimestamp());const p=Am(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const s=rb(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Rm(this.serializer),t.removeTarget=e,this.q_(t)}}class Qb extends DS{constructor(e,t,s,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nb(e.writeResults,e.commitTime),s=Fi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Rm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>tb(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{}class Wb extends Xb{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Cm(t,s),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(se.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Cm(t,s),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Zb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hs(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="RemoteStore";class jb{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{sr(this)&&(ge(tr,"Restarting streams for network reachability change."),await(async function(g){const p=Me(g);p.Ea.add(4),await eu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Pf(p)})(this))}))})),this.Ra=new Zb(s,r)}}async function Pf(n){if(sr(n))for(const e of n.da)await e(!0)}async function eu(n){for(const e of n.da)await e(!1)}function VS(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vp(t)?yp(t):_a(t).O_()&&gp(t,e))}function pp(n,e){const t=Me(n),s=_a(t);t.Ia.delete(e),s.O_()&&PS(t,e),t.Ia.size===0&&(s.O_()?s.L_():sr(t)&&t.Ra.set("Unknown"))}function gp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).Y_(e)}function PS(n,e){n.Va.Ue(e),_a(n).Z_(e)}function yp(n){n.Va=new Kx({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Ra.ua()}function vp(n){return sr(n)&&!_a(n).x_()&&n.Ia.size>0}function sr(n){return Me(n).Ea.size===0}function US(n){n.Va=void 0}async function e1(n){n.Ra.set("Online")}async function t1(n){n.Ia.forEach(((e,t)=>{gp(n,e)}))}async function n1(n,e){US(n),vp(n)?(n.Ra.ha(e),yp(n)):n.Ra.set("Unknown")}async function i1(n,e,t){if(n.Ra.set("Online"),e instanceof _S&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ia.delete(d),r.Va.removeTarget(d))})(n,e)}catch(s){ge(tr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await df(n,s)}else if(e instanceof $c?n.Va.Ze(e):e instanceof vS?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const s=await NS(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(g.resumeToken,c))}})),d.targetMismatches.forEach(((g,p)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),PS(l,g);const T=new eo(_.target,g,p,_.sequenceNumber);gp(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ge(tr,"Failed to raise snapshot:",s),await df(n,s)}}async function df(n,e,t){if(!va(e))throw e;n.Ea.add(1),await eu(n),n.Ra.set("Offline"),t||(t=()=>NS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(tr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Pf(n)}))}function kS(n,e){return e().catch((t=>df(n,t,e)))}async function Uf(n){const e=Me(n),t=co(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;s1(e);)try{const r=await qb(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,o1(e,r)}catch(r){await df(e,r)}LS(e)&&OS(e)}function s1(n){return sr(n)&&n.Ta.length<10}function o1(n,e){n.Ta.push(e);const t=co(n);t.O_()&&t.X_&&t.ea(e.mutations)}function LS(n){return sr(n)&&!co(n).x_()&&n.Ta.length>0}function OS(n){co(n).start()}async function r1(n){co(n).ra()}async function a1(n){const e=co(n);for(const t of n.Ta)e.ea(t.mutations)}async function l1(n,e,t){const s=n.Ta.shift(),r=lp.from(s,e,t);await kS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Uf(n)}async function u1(n,e){e&&co(n).X_&&await(async function(s,r){if((function(c){return Hx(c)&&c!==se.ABORTED})(r.code)){const l=s.Ta.shift();co(s).B_(),await kS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Uf(s)}})(n,e),LS(n)&&OS(n)}async function S_(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),ge(tr,"RemoteStore received new credentials");const s=sr(t);t.Ea.add(3),await eu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function c1(n,e){const t=Me(n);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await eu(t),t.Ra.set("Unknown"))}function _a(n){return n.ma||(n.ma=(function(t,s,r){const l=Me(t);return l.sa(),new $b(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:e1.bind(null,n),t_:t1.bind(null,n),r_:n1.bind(null,n),H_:i1.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),vp(n)?yp(n):n.Ra.set("Unknown")):(await n.ma.stop(),US(n))}))),n.ma}function co(n){return n.fa||(n.fa=(function(t,s,r){const l=Me(t);return l.sa(),new Qb(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:r1.bind(null,n),r_:u1.bind(null,n),ta:a1.bind(null,n),na:l1.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Uf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(tr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const c=Date.now()+s,d=new _p(e,t,c,r,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,e){if(hs("AsyncQueue",`${e}: ${n}`),va(n))return new pe(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{static emptySet(e){return new ra(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Dl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ra;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ga=new pt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ma{constructor(e,t,s,r,l,c,d,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ma(e,t,ra.emptySet(t),c,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d1{constructor(){this.queries=C_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Me(t),l=r.queries;r.queries=C_(),l.forEach(((c,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function C_(){return new ir((n=>oS(n)),xf)}async function qS(n,e){const t=Me(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new f1,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=Tp(c,`Initialization of query '${jr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ep(t)}async function BS(n,e){const t=Me(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function h1(n,e){const t=Me(n);let s=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(r)&&(s=!0);c.wa=r}}s&&Ep(t)}function m1(n,e,t){const s=Me(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function Ep(n){n.Ca.forEach((e=>{e.next()}))}var bm,w_;(w_=bm||(bm={})).Ma="default",w_.Cache="cache";class zS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ma(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class GS{constructor(e){this.key=e}}class p1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=rS(e),this.tu=new ra(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new A_,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const S=r.get(_),R=bf(this.query,T)?T:null,k=!!S&&this.mutatedKeys.has(S.key),O=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let D=!1;S&&R?S.data.isEqual(R.data)?k!==O&&(s.track({type:3,doc:R}),D=!0):this.su(S,R)||(s.track({type:2,doc:R}),D=!0,(g&&this.eu(R,g)>0||p&&this.eu(R,p)<0)&&(d=!0)):!S&&R?(s.track({type:0,doc:R}),D=!0):S&&!R&&(s.track({type:1,doc:S}),D=!0,(g||p)&&(d=!0)),D&&(R?(c=c.add(R),l=O?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(R,k){const O=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:D})}};return O(R)-O(k)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),r=r??!1;const d=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new ma(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new GS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new FS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sp="SyncEngine";class g1{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class y1{constructor(e){this.key=e,this.hu=!1}}class v1{constructor(e,t,s,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ir((d=>oS(d)),xf),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ce.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _1(n,e,t=!0){const s=QS(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await HS(s,e,t,!0),r}async function T1(n,e){const t=QS(n);await HS(t,e,!0,!1)}async function HS(n,e,t,s){const r=await Bb(n.localStore,zi(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await E1(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&VS(n.remoteStore,r),d}async function E1(n,e,t,s,r){n.pu=(T,S,R)=>(async function(O,D,F,j){let Q=D.view.ru(F);Q.Cs&&(Q=await y_(O.localStore,D.query,!1).then((({documents:M})=>D.view.ru(M,Q))));const re=j&&j.targetChanges.get(D.targetId),ce=j&&j.targetMismatches.get(D.targetId)!=null,le=D.view.applyChanges(Q,O.isPrimaryClient,re,ce);return I_(O,D.targetId,le.au),le.snapshot})(n,T,S,R);const l=await y_(n.localStore,e,!0),c=new p1(e,l.Qs),d=c.ru(l.documents),g=jl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=c.applyChanges(d,n.isPrimaryClient,g);I_(n,t,p.au);const _=new g1(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function S1(n,e,t){const s=Me(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((c=>!xf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Im(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&pp(s.remoteStore,r.targetId),Nm(s,r.targetId)})).catch(ya)):(Nm(s,r.targetId),await Im(s.localStore,r.targetId,!0))}async function A1(n,e){const t=Me(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),pp(t.remoteStore,s.targetId))}async function C1(n,e,t){const s=M1(n);try{const r=await(function(c,d){const g=Me(c),p=ft.now(),_=d.reduce(((R,k)=>R.add(k.key)),Ge());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let k=ms(),O=Ge();return g.Ns.getEntries(R,_).next((D=>{k=D,k.forEach(((F,j)=>{j.isValidDocument()||(O=O.add(F))}))})).next((()=>g.localDocuments.getOverlayedDocuments(R,k))).next((D=>{T=D;const F=[];for(const j of d){const Q=qx(j,T.get(j.key).overlayedDocument);Q!=null&&F.push(new mo(j.key,Q,WE(Q.value.mapValue),ui.exists(!0)))}return g.mutationQueue.addMutationBatch(R,p,F,d)})).next((D=>{S=D;const F=D.applyToLocalDocumentSet(T,O);return g.documentOverlayCache.saveOverlays(R,D.batchId,F)}))})).then((()=>({batchId:S.batchId,changes:lS(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(c,d,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new pt(Fe)),p=p.insert(d,g),c.Vu[c.currentUser.toKey()]=p})(s,r.batchId,t),await tu(s,r.changes),await Uf(s.remoteStore)}catch(r){const l=Tp(r,"Failed to persist write");t.reject(l)}}async function YS(n,e){const t=Me(n);try{const s=await Lb(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(Ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Ze(c.hu,14607):r.removedDocuments.size>0&&(Ze(c.hu,42227),c.hu=!1))})),await tu(t,s,e)}catch(s){await ya(s)}}function R_(n,e,t){const s=Me(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const g=Me(c);g.onlineState=d;let p=!1;g.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(d)&&(p=!0)})),p&&Ep(g)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function w1(n,e,t){const s=Me(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let c=new pt(Ce.comparator);c=c.insert(l,on.newNoDocument(l,be.min()));const d=Ge().add(l),g=new Df(be.min(),new Map,new pt(Fe),c,d);await YS(s,g),s.du=s.du.remove(l),s.Au.delete(e),Ap(s)}else await Im(s.localStore,e,!1).then((()=>Nm(s,e,t))).catch(ya)}async function R1(n,e){const t=Me(n),s=e.batch.batchId;try{const r=await kb(t.localStore,e);KS(t,s,null),JS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await tu(t,r)}catch(r){await ya(r)}}async function I1(n,e,t){const s=Me(n);try{const r=await(function(c,d){const g=Me(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,d).next((T=>(Ze(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(s.localStore,e);KS(s,e,t),JS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await tu(s,r)}catch(r){await ya(r)}}function JS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function KS(n,e,t){const s=Me(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Nm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||$S(n,s)}))}function $S(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(pp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ap(n))}function I_(n,e,t){for(const s of t)s instanceof FS?(n.Ru.addReference(s.key,e),x1(n,s)):s instanceof GS?(ge(Sp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||$S(n,s.key)):Ie(19791,{wu:s})}function x1(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ge(Sp,"New document in limbo: "+t),n.Eu.add(s),Ap(n))}function Ap(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(lt.fromString(e)),s=n.fu.next();n.Au.set(s,new y1(t)),n.du=n.du.insert(t,s),VS(n.remoteStore,new eo(zi(op(t.path)),s,"TargetPurposeLimboResolution",wf.ce))}}async function tu(n,e,t){const s=Me(n),r=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{c.push(s.pu(g,e,t).then((p=>{var _;if((p||t)&&s.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){r.push(p);const T=hp.As(g.targetId,p);l.push(T)}})))})),await Promise.all(c),s.Pu.H_(r),await(async function(g,p){const _=Me(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(p,(S=>oe.forEach(S.Es,(R=>_.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>oe.forEach(S.ds,(R=>_.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!va(T))throw T;ge(mp,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const R=_.Ms.get(S),k=R.snapshotVersion,O=R.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(S,O)}}})(s.localStore,l))}async function b1(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){ge(Sp,"User change. New user:",e.toKey());const s=await bS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new pe(se.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tu(t,s.Ls)}}function N1(n,e){const t=Me(n),s=t.Au.get(e);if(s&&s.hu)return Ge().add(s.key);{let r=Ge();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const d=t.Tu.get(c);r=r.unionWith(d.view.nu)}return r}}function QS(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w1.bind(null,e),e.Pu.H_=h1.bind(null,e.eventManager),e.Pu.yu=m1.bind(null,e.eventManager),e}function M1(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I1.bind(null,e),e}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ub(this.persistence,new Db,e.initialUser,this.serializer)}Cu(e){return new xS(dp.mi,this.serializer)}Du(e){return new Fb}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class D1 extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof ff,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yb(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new xS((s=>ff.mi(s,t)),this.serializer)}}class Mm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>R_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=b1.bind(null,this.syncEngine),await c1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d1})()}createDatastore(e){const t=Vf(e.databaseInfo.databaseId),s=(function(l){return new Kb(l)})(e.databaseInfo);return(function(l,c,d,g){return new Wb(l,c,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,c,d){return new jb(s,r,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>R_(this.syncEngine,t,0)),(function(){return T_.v()?new T_:new Gb})())}createSyncEngine(e,t){return(function(r,l,c,d,g,p,_){const T=new v1(r,l,c,d,g,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Me(r);ge(tr,"RemoteStore shutting down."),l.Ea.add(5),await eu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class V1{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=sn.UNAUTHENTICATED,this.clientId=jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ge(fo,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ge(fo,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Tp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function am(n,e){n.asyncQueue.verifyOperationInProgress(),ge(fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await bS(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function x_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P1(n);ge(fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>S_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>S_(e.remoteStore,r))),n._onlineComponents=e}async function P1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(fo,"Using user provided OfflineComponentProvider");try{await am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===se.FAILED_PRECONDITION||r.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ua("Error using user provided cache. Falling back to memory cache: "+t),await am(n,new hf)}}else ge(fo,"Using default OfflineComponentProvider"),await am(n,new D1(void 0));return n._offlineComponents}async function WS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(fo,"Using user provided OnlineComponentProvider"),await x_(n,n._uninitializedComponentsProvider._online)):(ge(fo,"Using default OnlineComponentProvider"),await x_(n,new Mm))),n._onlineComponents}function U1(n){return WS(n).then((e=>e.syncEngine))}async function Dm(n){const e=await WS(n),t=e.eventManager;return t.onListen=_1.bind(null,e.syncEngine),t.onUnlisten=S1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A1.bind(null,e.syncEngine),t}function k1(n,e,t={}){const s=new so;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,g,p){const _=new XS({next:S=>{_.Nu(),c.enqueueAndForget((()=>BS(l,T))),S.fromCache&&g.source==="server"?p.reject(new pe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new zS(d,_,{includeMetadataChanges:!0,qa:!0});return qS(l,T)})(await Dm(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="firestore.googleapis.com",N_=!0;class M_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jS,this.ssl=N_}else this.host=e.host,this.ssl=e.ssl??N_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pb)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new GI;switch(s.type){case"firstParty":return new KI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=b_.get(t);s&&(ge("ComponentProvider","Removing Datastore"),b_.delete(t),s.terminate())})(this),Promise.resolve()}}function L1(n,e,t,s={}){var p;n=Bi(n,kf);const r=Xm(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(gR(`https://${d}`),TR("Firestore",!0)),l.host!==jS&&l.host!==d&&ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:r,emulatorOptions:s};if(!jc(g,c)&&(n._setSettings(g),s.mockUserToken)){let _,T;if(typeof s.mockUserToken=="string")_=s.mockUserToken,T=sn.MOCK_USER;else{_=yR(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(S)}n._authCredentials=new HI(new qE(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new po(this.firestore,e,this._query)}}class kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Xl(t,kt._jsonSchema))return new kt(e,s||null,new Ce(lt.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Ut("string",kt._jsonSchemaVersion),referencePath:Ut("string")};class oo extends po{constructor(e,t,s){super(e,t,op(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Ce(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function gs(n,e,...t){if(n=Yi(n),BE("collection","path",e),n instanceof kf){const s=lt.fromString(e,...t);return H0(s),new oo(n,null,s)}{if(!(n instanceof kt||n instanceof oo))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return H0(s),new oo(n.firestore,null,s)}}function mi(n,e,...t){if(n=Yi(n),arguments.length===1&&(e=jm.newId()),BE("doc","path",e),n instanceof kf){const s=lt.fromString(e,...t);return G0(s),new kt(n,null,new Ce(s))}{if(!(n instanceof kt||n instanceof oo))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return G0(s),new kt(n.firestore,n instanceof oo?n.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="AsyncQueue";class V_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MS(this,"async_queue_retry"),this._c=()=>{const s=rm();s&&ge(D_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new so;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;ge(D_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,hs("INTERNAL UNHANDLED ERROR: ",P_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=_p.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ie(47125,{Pc:P_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function P_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of s)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}class nr extends kf{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new V_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V_(e),this._firestoreClient=void 0,await e}}}function O1(n,e){const t=typeof n=="object"?n:bE(),s=typeof n=="string"?n:nf,r=wI(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=mR("firestore");l&&L1(r,...l)}return r}function Cp(n){if(n._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q1(n),n._firestoreClient}function q1(n){var s,r,l;const e=n._freezeSettings(),t=(function(d,g,p,_){return new cx(d,g,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ZS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new V1(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(en.fromBase64String(e))}catch(t){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xl(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Ut("string",Jn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Xl(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Ut("string",Gi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xl(e,Hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Hi(e.vectorValues);throw new pe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hi._jsonSchemaVersion="firestore/vectorValue/1.0",Hi._jsonSchema={type:Ut("string",Hi._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=/^__.*__$/;class z1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zl(e,this.data,t,this.fieldTransforms)}}class eA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Rp{constructor(e,t,s,r,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tA(this.Ac)&&B1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class F1{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Vf(e)}Cc(e,t,s,r=!1){return new Rp({Ac:e,methodName:t,Dc:s,path:jt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(n){const e=n._freezeSettings(),t=Vf(n._databaseId);return new F1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function G1(n,e,t,s,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);xp("Data must be an object, but it was:",c,s);const d=nA(s,c);let g,p;if(l.merge)g=new Dn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=Vm(e,T,t);if(!c.contains(S))throw new pe(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sA(_,S)||_.push(S)}g=new Dn(_),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new z1(new Sn(d),g,p)}class nu extends wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nu}}function H1(n,e,t,s){const r=n.Cc(1,e,t);xp("Data must be an object, but it was:",r,s);const l=[],c=Sn.empty();ho(s,((g,p)=>{const _=bp(e,g,t);p=Yi(p);const T=r.yc(_);if(p instanceof nu)l.push(_);else{const S=iu(p,T);S!=null&&(l.push(_),c.set(_,S))}}));const d=new Dn(l);return new eA(c,d,r.fieldTransforms)}function Y1(n,e,t,s,r,l){const c=n.Cc(1,e,t),d=[Vm(e,s,t)],g=[r];if(l.length%2!=0)throw new pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Vm(e,l[S])),g.push(l[S+1]);const p=[],_=Sn.empty();for(let S=d.length-1;S>=0;--S)if(!sA(p,d[S])){const R=d[S];let k=g[S];k=Yi(k);const O=c.yc(R);if(k instanceof nu)p.push(R);else{const D=iu(k,O);D!=null&&(p.push(R),_.set(R,D))}}const T=new Dn(p);return new eA(_,T,c.fieldTransforms)}function J1(n,e,t,s=!1){return iu(t,n.Cc(s?4:3,e))}function iu(n,e){if(iA(n=Yi(n)))return xp("Unsupported field value:",e,n),nA(n,e);if(n instanceof wp)return(function(s,r){if(!tA(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let c=0;for(const d of s){let g=iu(d,r.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=Yi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Vx(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ft.fromDate(s);return{timestampValue:cf(r.serializer,l)}}if(s instanceof ft){const l=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cf(r.serializer,l)}}if(s instanceof Gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Jn)return{bytesValue:TS(r.serializer,s._byteString)};if(s instanceof kt){const l=r.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:cp(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Hi)return(function(c,d){return{mapValue:{fields:{[QE]:{stringValue:XE},[sf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return rp(d.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Cf(s)}`)})(n,e)}function nA(n,e){const t={};return GE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,((s,r)=>{const l=iu(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function iA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Gi||n instanceof Jn||n instanceof kt||n instanceof wp||n instanceof Hi)}function xp(n,e,t){if(!iA(t)||!zE(t)){const s=Cf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Vm(n,e,t){if((e=Yi(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return bp(n,e);throw mf("Field path arguments must be of type string or ",n,!1,void 0,t)}const K1=new RegExp("[~\\*/\\[\\]]");function bp(n,e,t){if(e.search(K1)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mf(n,e,t,s,r){const l=s&&!s.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${r}`),g+=")"),new pe(se.INVALID_ARGUMENT,d+n+g)}function sA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Np("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $1 extends oA{data(){return super.data()}}function Np(n,e){return typeof e=="string"?bp(n,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mp{}class aA extends Mp{}function Of(n,e,...t){let s=[];e instanceof Mp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof Dp)).length,d=l.filter((g=>g instanceof qf)).length;if(c>1||c>0&&d>0)throw new pe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class qf extends aA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new qf(e,t,s)}_apply(e){const t=this._parse(e);return uA(e._query,t),new po(e.firestore,e.converter,Sm(e._query,t))}_parse(e){const t=Ip(e.firestore);return(function(l,c,d,g,p,_,T){let S;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){L_(T,_);const k=[];for(const O of T)k.push(k_(g,l,O));S={arrayValue:{values:k}}}else S=k_(g,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||L_(T,_),S=J1(d,c,T,_==="in"||_==="not-in");return Pt.create(p,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pf(n,e,t){const s=e,r=Np("where",n);return qf._create(r,s,t)}class Dp extends Mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const d=l.getFlattenedFilters();for(const g of d)uA(c,g),c=Sm(c,g)})(e._query,t),new po(e.firestore,e.converter,Sm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vp extends aA{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Vp(e,t,s)}_apply(e){return new po(e.firestore,e.converter,af(e._query,this._limit,this._limitType))}}function lA(n){return Vp._create("limit",n,"F")}function k_(n,e,t){if(typeof(t=Yi(t))=="string"){if(t==="")throw new pe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sS(e)&&t.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!Ce.isDocumentKey(s))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Z0(n,new Ce(s))}if(t instanceof kt)return Z0(n,t._key);throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(t)}.`)}function L_(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uA(n,e){const t=(function(r,l){for(const c of r)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Q1{convertValue(e,t="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ho(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[sf].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>St(c.doubleValue)));return new Hi(t)}convertGeoPoint(e){return new Gi(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=If(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const t=ao(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);Ze(RS(s),9688,{name:e});const r=new Jl(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return r.isEqual(t)||hs(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends oA{constructor(e,t,s,r,l,c){super(e,t,s,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Np("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:Ut("string",Zo._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Qc extends Zo{data(e={}){return super.data(e)}}class jo{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Qc(this._firestore,this._userDataWriter,s.key,s,new Pl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const g=new Qc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Pl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Qc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Pl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:W1(d.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}jo._jsonSchemaVersion="firestore/querySnapshot/1.0",jo._jsonSchema={type:Ut("string",jo._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Pp extends Q1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function Bf(n){n=Bi(n,po);const e=Bi(n.firestore,nr),t=Cp(e),s=new Pp(e);return rA(n._query),k1(t,n._query).then((r=>new jo(e,s,n,r)))}function ys(n,e,t,...s){n=Bi(n,kt);const r=Bi(n.firestore,nr),l=Ip(r);let c;return c=typeof(e=Yi(e))=="string"||e instanceof Lf?Y1(l,"updateDoc",n._key,e,t,s):H1(l,"updateDoc",n._key,e),Up(r,[c.toMutation(n._key,ui.exists(!0))])}function Z1(n){return Up(Bi(n.firestore,nr),[new ap(n._key,ui.none())])}function zf(n,e){const t=Bi(n.firestore,nr),s=mi(n),r=X1(n.converter,e);return Up(t,[G1(Ip(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,ui.exists(!1))]).then((()=>s))}function j1(n,...e){var g,p,_;n=Yi(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||U_(e[s])||(t=e[s++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(U_(e[s])){const T=e[s];e[s]=(g=T.next)==null?void 0:g.bind(T),e[s+1]=(p=T.error)==null?void 0:p.bind(T),e[s+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,c,d;if(n instanceof kt)c=Bi(n.firestore,nr),d=op(n._key.path),l={next:T=>{e[s]&&e[s](eN(c,n,T))},error:e[s+1],complete:e[s+2]};else{const T=Bi(n,po);c=Bi(T.firestore,nr),d=T._query;const S=new Pp(c);l={next:R=>{e[s]&&e[s](new jo(c,S,T,R))},error:e[s+1],complete:e[s+2]},rA(n._query)}return(function(S,R,k,O){const D=new XS(O),F=new zS(R,D,k);return S.asyncQueue.enqueueAndForget((async()=>qS(await Dm(S),F))),()=>{D.Nu(),S.asyncQueue.enqueueAndForget((async()=>BS(await Dm(S),F)))}})(Cp(c),d,r,l)}function Up(n,e){return(function(s,r){const l=new so;return s.asyncQueue.enqueueAndForget((async()=>C1(await U1(s),r,l))),l.promise})(Cp(n),e)}function eN(n,e,t){const s=t.docs.get(e._key),r=new Pp(n);return new Zo(n,r,e._key,s,new Pl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(){return new nu("deleteField")}(function(e,t=!0){(function(r){ga=r})(bI),ef(new zl("firestore",((s,{instanceIdentifier:r,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new nr(new YI(s.getProvider("auth-internal")),new $I(c,s.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(p.options.projectId,_)})(c,r),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),oa(q0,B0,e),oa(q0,B0,"esm2020")})();const tN={apiKey:"AIzaSyBSA5B66H-0BL0LcpFs0FVmo_02MX7twI8",authDomain:"tyapp2-1d8f9.firebaseapp.com",projectId:"tyapp2-1d8f9",storageBucket:"tyapp2-1d8f9.firebasestorage.app",messagingSenderId:"147317426980",appId:"1:147317426980:web:49bbcd69b2553cf48581b1"};let cA=null;try{const e=NI().length>0?bE():xE(tN);cA=O1(e)}catch(n){console.error("Firebase initialization failed:",n)}const At=cA,or="users",Qn="appointments",vs=()=>window.__PLAYWRIGHT__===!0,go=()=>vs()?!1:At!==null&&typeof At=="object",su=()=>{if(typeof window>"u")return[];const n=localStorage.getItem("__mockUsers__");if(n)return JSON.parse(n);const e=[{id:"admin-1",name:"Tark Yaln",phoneNumber:"5555555555",password:"admin",role:at.ADMIN,specialty:"Master Stylist",avatar:"https://images.unsplash.com/photo-1556157382-97eda2d62296?w=150&h=150&fit=crop"},{id:"staff-1",name:"Ahmet Makas",phoneNumber:"5111111111",password:"123456",role:at.STAFF,specialty:"Barber",avatar:"https://ui-avatars.com/api/?name=Ahmet+Makas&background=333&color=fff"},{id:"staff-2",name:"Mehmet Bak",phoneNumber:"5222222222",password:"123456",role:at.STAFF,specialty:"Stylist",avatar:"https://ui-avatars.com/api/?name=Mehmet+Bicak&background=333&color=fff"}];return localStorage.setItem("__mockUsers__",JSON.stringify(e)),e},nN=n=>{typeof window<"u"&&localStorage.setItem("__mockUsers__",JSON.stringify(n))},fA=()=>{if(typeof window>"u")return[];const n=localStorage.getItem("__mockAppointments__");return n?JSON.parse(n):[]},iN=n=>{typeof window<"u"&&localStorage.setItem("__mockAppointments__",JSON.stringify(n))};let ci=su(),gf=fA();const Lp=async n=>(ci=su(),ci.some(e=>e.phoneNumber===n)),sN=async(n,e)=>(ci=su(),ci.find(s=>s.phoneNumber===n&&s.password===e)||null),oN=async(n,e,t)=>{if(ci=su(),await Lp(e))throw new Error("Bu telefon numaras zaten kaytl.");const r={id:`user-${Date.now()}`,name:n,phoneNumber:e,password:t,role:at.CUSTOMER,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=D4AF37&color=000`};return ci.push(r),nN(ci),r},rN=async()=>(ci=su(),console.log("[MOCK] mockGetUsers called, returning users:",ci.map(n=>({id:n.id,name:n.name,role:n.role}))),ci.map(n=>{const{password:e,...t}=n;return t})),aN=async(n,e,t,s)=>{if(await Lp(e))throw new Error("Bu telefon numaras zaten sistemde kaytl.");const l={id:`staff-${Date.now()}`,name:n,phoneNumber:e,password:t,role:at.STAFF,specialty:s,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=333&color=fff`};ci.push(l)},Op=async n=>{if(vs()||!go())return Lp(n);const e=Of(gs(At,or),pf("phoneNumber","==",n));return!(await Bf(e)).empty},dA=async(n,e)=>{if(vs()||!go())return sN(n,e);try{const t=Of(gs(At,or),pf("phoneNumber","==",n),pf("password","==",e),lA(1)),s=await Bf(t);if(s.empty)return null;const r=s.docs[0],l=r.data();return{id:r.id,name:l.name,role:l.role,phoneNumber:l.phoneNumber,avatar:l.avatar,specialty:l.specialty}}catch(t){throw console.error("Login error:",t),t}},hA=async(n,e,t)=>{if(vs()||!go())return oN(n,e,t);if(await Op(e))throw new Error("Bu telefon numaras zaten kaytl.");const r={name:n,phoneNumber:e,password:t,role:at.CUSTOMER,avatar:`https://ui-avatars.com/api/?name=${n}&background=D4AF37&color=000`,createdAt:new Date().toISOString()};return{id:(await zf(gs(At,or),r)).id,name:r.name,role:r.role,phoneNumber:r.phoneNumber,avatar:r.avatar}},lN=async(n,e)=>{const t=Of(gs(At,or),pf("phoneNumber","==",e),lA(1)),s=await Bf(t);if(!s.empty){const r=s.docs[0],l=r.data();return{id:r.id,name:l.name,role:l.role,phoneNumber:l.phoneNumber,avatar:l.avatar}}return console.log("User not found, creating new customer:",n),await hA(n,e,"123456")},uN=async(n,e,t,s)=>{if(vs()||!go())return aN(n,e,t,s);if(await Op(e))throw new Error("Bu telefon numaras zaten sistemde kaytl.");const l={name:n,phoneNumber:e,password:t,role:at.STAFF,specialty:s,avatar:`https://ui-avatars.com/api/?name=${n}&background=333&color=fff`,createdAt:new Date().toISOString()};await zf(gs(At,or),l)},yf=async()=>{if(vs()||!go())return rN();try{const n=await Bf(gs(At,or)),e=[];return n.forEach(t=>{const{password:s,...r}=t.data();e.push({id:t.id,...r})}),e}catch(n){return console.error("Error fetching users:",n),[]}},cN=async()=>{if(vs()||!go())return!1;const n="5555555555";return await Op(n)?!1:(console.log("Admin account missing. Creating..."),await zf(gs(At,or),{name:"Tark Yaln",phoneNumber:n,password:"admin",role:at.ADMIN,specialty:"Master Stylist",avatar:"https://images.unsplash.com/photo-1556157382-97eda2d62296?w=150&h=150&fit=crop"}),!0)},mA=async n=>{if(vs()||!go()){const e={id:`appt-${Date.now()}`,...n};return gf.push(e),iN(gf),console.log("[MOCK] Created appointment:",e),e.id}try{return(await zf(gs(At,Qn),n)).id}catch(e){throw console.error("Error creating appointment:",e),e}},fN=async(n,e)=>{const t=mi(At,Qn,n),{id:s,...r}=e;await ys(t,r)},qp=n=>{if(vs()||!go())return gf=fA(),n(gf),()=>{};const e=Of(gs(At,Qn));return j1(e,t=>{const s=[];t.forEach(r=>{s.push({id:r.id,...r.data()})}),n(s)})},dN=async n=>{const e=mi(At,Qn,n);await ys(e,{status:"cancelled"})},hN=async n=>{const e=mi(At,Qn,n);await Z1(e)},mN=async(n,e,t)=>{const s=mi(At,Qn,n);await ys(s,{changeRequest:{newDate:e,newTime:t,status:"pending",requestedAt:new Date().toISOString()}})},pN=async n=>{const e=mi(At,Qn,n);await ys(e,{changeRequest:kp()})},gN=async(n,e,t)=>{const s=mi(At,Qn,n);await ys(s,{date:e,time:t,changeRequest:kp(),status:"confirmed"})},yN=async n=>{const e=mi(At,Qn,n);await ys(e,{"changeRequest.status":"rejected"})},vN=async(n,e,t)=>{const s=mi(At,Qn,n);await ys(s,{adminProposal:{newDate:e,newTime:t,status:"pending",proposedAt:new Date().toISOString()}})},_N=async(n,e,t)=>{const s=mi(At,Qn,n);await ys(s,{date:e,time:t,adminProposal:kp(),status:"confirmed"})},TN=async n=>{const e=mi(At,Qn,n);await ys(e,{"adminProposal.status":"rejected"})},fn=({children:n,className:e="",onClick:t})=>C.jsx("div",{onClick:t,className:`glass-panel rounded-2xl p-6 shadow-2xl border-t border-l border-white/20 transition-all duration-300 ${t?"cursor-pointer hover:bg-white/5 hover:scale-[1.01]":""} ${e}`,children:n});/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),O_=n=>{const e=SN(n);return e.charAt(0).toUpperCase()+e.slice(1)},pA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),AN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=de.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...d},g)=>de.createElement("svg",{ref:g,...CN,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:pA("lucide",r),...!l&&!AN(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,_])=>de.createElement(p,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=(n,e)=>{const t=de.forwardRef(({className:s,...r},l)=>de.createElement(wN,{ref:l,iconNode:e,className:pA(`lucide-${EN(O_(n))}`,`lucide-${n}`,s),...r}));return t.displayName=O_(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IN=Xn("calendar",RN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bN=Xn("chevron-right",xN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],MN=Xn("circle-check-big",NN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],VN=Xn("crown",DN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],UN=Xn("log-out",PN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],LN=Xn("menu",kN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],qN=Xn("scissors",ON);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zN=Xn("shield",BN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],GN=Xn("sparkles",FN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],YN=Xn("upload",HN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],KN=Xn("user",JN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],QN=Xn("x",$N),Te=({name:n,size:e=24,className:t=""})=>{const r={scissors:qN,user:KN,calendar:IN,shield:zN,sparkles:GN,logout:UN,menu:LN,close:QN,chevronRight:bN,check:MN,crown:VN,upload:YN}[n];return r?C.jsx(r,{size:e,className:t}):null};var XN={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let WN,ZN;function jN(){return{geminiUrl:WN,vertexUrl:ZN}}function eM(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const c=jN();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _s{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let p=0;p<g.length;p++){const _=g[p];h(_,e.slice(l+1),t[p])}else for(const p of g)h(p,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function tM(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),c=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Pm(n,r,l,0,c)}}function Pm(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const g of d[c])Pm(g,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of d)g[p]=c[p];for(const[p,_]of Object.entries(g)){const T=[];for(const S of t.slice(s))S==="*"?T.push(p):T.push(S);h(c,T,_)}for(const p of d)delete c[p]}}else{const c=n;l in c&&Pm(c[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function iM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],oM(c)),e}function sM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],rM(c)),e}function oM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>aM(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function rM(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>lM(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function aM(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],mM(t)),e}function lM(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],pM(t)),e}function uM(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function cM(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function fM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],dM(c)),e}function dM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function gA(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],hM(c)),e}function hM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function mM(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Bp(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function pM(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Bp(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var q_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(q_||(q_={}));var B_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(B_||(B_={}));var z_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(z_||(z_={}));var En;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(En||(En={}));var F_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(F_||(F_={}));var G_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(G_||(G_={}));var H_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(H_||(H_={}));var Y_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Y_||(Y_={}));var J_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(J_||(J_={}));var K_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(K_||(K_={}));var $_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})($_||($_={}));var Q_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Q_||(Q_={}));var X_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(X_||(X_={}));var W_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(W_||(W_={}));var Z_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Z_||(Z_={}));var j_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(j_||(j_={}));var eT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eT||(eT={}));var tT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(tT||(tT={}));var nT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nT||(nT={}));var vf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(vf||(vf={}));var iT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iT||(iT={}));var sT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sT||(sT={}));var oT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oT||(oT={}));var Um;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Um||(Um={}));var rT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(rT||(rT={}));var aT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(aT||(aT={}));var lT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(lT||(lT={}));var uT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(uT||(uT={}));var cT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cT||(cT={}));var fT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fT||(fT={}));var dT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(dT||(dT={}));var hT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var mT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mT||(mT={}));var pT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(pT||(pT={}));var gT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gT||(gT={}));var yT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yT||(yT={}));var vT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vT||(vT={}));var _T;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_T||(_T={}));var TT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(TT||(TT={}));var ET;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ET||(ET={}));var ST;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ST||(ST={}));var AT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(AT||(AT={}));var CT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(CT||(CT={}));var wT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(wT||(wT={}));var RT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(RT||(RT={}));var IT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(IT||(IT={}));var xT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xT||(xT={}));var bT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(bT||(bT={}));var NT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(NT||(NT={}));var MT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(MT||(MT={}));var DT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(DT||(DT={}));var VT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(VT||(VT={}));var PT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(PT||(PT={}));var UT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UT||(UT={}));var kT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(kT||(kT={}));var ia;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ia||(ia={}));class km{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class bl{get text(){var e,t,s,r,l,c,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const T=[];for(const S of(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[R,k]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(k!==null||k!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,t,s,r,l,c,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const T of(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,l,c,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,l,c,d,g,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,l,c,d,g,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class LT{}class OT{}class gM{}class yM{}class vM{}class _M{}class qT{}class BT{}class zT{}class TM{}class _f{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new _f;let r;const l=e;return t?r=sM(l):r=iM(l),Object.assign(s,r),s}}class FT{}class GT{}class HT{}class YT{}class EM{}class SM{}class AM{}class zp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new zp,l=fM(e);return Object.assign(s,l),s}}class CM{}class wM{}class RM{}class JT{}class IM{get text(){var e,t,s;let r="",l=!1;const c=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(d))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const c of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,g]of Object.entries(c))d!=="inlineData"&&g!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class xM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Fp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Fp,l=gA(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yA(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function vA(n){return Array.isArray(n)?n.map(e=>Tf(e)):[Tf(n)]}function Tf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function _A(n){const e=Tf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function TA(n){const e=Tf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function EA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>KT(e)):[KT(n)]}function Lm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function $T(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function QT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Lm(n)?n:{role:"user",parts:EA(n)}}function Gp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function Kn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if($T(n)||QT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=Lm(n[0]);for(const r of n){const l=Lm(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if($T(r)||QT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:EA(t)}),e}function bM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(En).includes(t[0].toUpperCase())?t[0].toUpperCase():En.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(En).includes(s.toUpperCase())?s.toUpperCase():En.TYPE_UNSPECIFIED})}}function aa(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&bM(n.type,e);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(En).includes(d.toUpperCase())?d.toUpperCase():En.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=aa(d);else if(s.includes(c)){const g=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}g.push(aa(p))}e[c]=g}else if(r.includes(c)){const g={};for(const[p,_]of Object.entries(d))g[p]=aa(_);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=d}return e}function Hp(n){return aa(n)}function Yp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Jp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ta(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=aa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=aa(e.response));return n}function Ea(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function NM(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Ts(n,e){if(typeof e!="string")throw new Error("name must be a string");return NM(n,e,"cachedContents")}function SA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function yo(n){return Bp(n)}function MM(n){return n!=null&&typeof n=="object"&&"name"in n}function DM(n){return n!=null&&typeof n=="object"&&"video"in n}function VM(n){return n!=null&&typeof n=="object"&&"uri"in n}function AA(n){var e;let t;if(MM(n)&&(t=n.name),!(VM(n)&&(t=n.uri,t===void 0))&&!(DM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function CA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function wA(n){for(const e of["models","tunedModels","publisherModels"])if(PM(n,e))return n[e];return[]}function PM(n,e){return n!==null&&typeof n=="object"&&e in n}function UM(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function kM(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=UM(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function RA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function LM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function IA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Sa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function xA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OM(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>vD(c))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["inlinedEmbedContentResponses"],l)}return e}function qM(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function BM(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],xA(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&h(e,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const p=f(n,["metadata","output"]);return p!=null&&h(e,["dest"],OM(IA(p))),e}function Om(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],xA(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["createTime"]);c!=null&&h(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const _=f(n,["model"]);_!=null&&h(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],zM(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],qM(IA(S)));const R=f(n,["completionStats"]);return R!=null&&h(e,["completionStats"],R),e}function zM(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function FM(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>yD(n,c))),h(t,["requests","requests"],l)}return t}function GM(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function HM(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function YM(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function JM(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function KM(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],$M(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function $M(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function bA(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>wD(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function QM(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function XM(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],BM(LM(r))),t}function XT(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],FM(n,RA(n,r)));const l=f(e,["config"]);return l!=null&&QM(l,t),t}function WM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Qe(n,s));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],GM(RA(n,r)));const l=f(e,["config"]);return l!=null&&XM(l,t),t}function ZM(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function jM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],rD(n,r));const l=f(e,["config"]);return l!=null&&ZM(l,t),t}function eD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function tD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function nD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function iD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function sD(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Gp(n,s);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],oD(r,t)),tM(t,{"requests[].*":"requests[].request.*"})),t}function oD(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function rD(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],sD(n,r)),t}function aD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function lD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uD(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cD(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],bA(rn(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(s,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(s,["presencePenalty"],R);const k=f(e,["frequencyPenalty"]);k!=null&&h(s,["frequencyPenalty"],k);const O=f(e,["seed"]);O!=null&&h(s,["seed"],O);const D=f(e,["responseMimeType"]);D!=null&&h(s,["responseMimeType"],D);const F=f(e,["responseSchema"]);F!=null&&h(s,["responseSchema"],Hp(F));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(s,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let N=Q;Array.isArray(N)&&(N=N.map(ve=>RD(ve))),h(t,["safetySettings"],N)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let N=Ea(re);Array.isArray(N)&&(N=N.map(ve=>xD(Ta(ve)))),h(t,["tools"],N)}const ce=f(e,["toolConfig"]);if(t!==void 0&&ce!=null&&h(t,["toolConfig"],ID(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&h(t,["cachedContent"],Ts(n,le));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const V=f(e,["mediaResolution"]);V!=null&&h(s,["mediaResolution"],V);const x=f(e,["speechConfig"]);if(x!=null&&h(s,["speechConfig"],Yp(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(s,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&h(s,["imageConfig"],gD(P));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&h(s,["enableEnhancedCivicAnswers"],q),s}function fD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>KM(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function dD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function hD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function mD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function pD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function gD(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yD(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let d=Kn(r);Array.isArray(d)&&(d=d.map(g=>bA(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&h(t,["request","generationConfig"],cD(n,c,f(t,["request"],{}))),t}function vD(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],fD(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function _D(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function TD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function ED(n){const e={},t=f(n,["config"]);return t!=null&&_D(t,e),e}function SD(n){const e={},t=f(n,["config"]);return t!=null&&TD(t,e),e}function AD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Xc(c))),h(e,["batchJobs"],l)}return e}function CD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Om(c))),h(e,["batchJobs"],l)}return e}function wD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],aD(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],lD(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],HM(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function RD(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function ID(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],uD(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function xD(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],mD(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],pD(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ps;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ps||(ps={}));class rr{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bD extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=XT(this.apiClient,e),s=t._url,r=me("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,g=d.requests,p=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}p.push(T)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(c)s.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=WM(this.apiClient,e);return d=me("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>Om(_))}else{const p=XT(this.apiClient,e);return d=me("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Xc(_))}}async createEmbeddingsInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jM(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Xc(g))}}async get(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=hD(this.apiClient,e);return d=me("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>Om(_))}else{const p=dD(this.apiClient,e);return d=me("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>Xc(_))}}async cancel(e){var t,s,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const g=JM(this.apiClient,e);c=me("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=YM(this.apiClient,e);c=me("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=SD(e);return d=me("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=CD(_),S=new JT;return Object.assign(S,T),S})}else{const p=ED(e);return d=me("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=AD(_),S=new JT;return Object.assign(S,T),S})}}async delete(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=tD(this.apiClient,e);return d=me("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>iD(_))}else{const p=eD(this.apiClient,e);return d=me("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>nD(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ND(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function WT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>jD(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function MD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let _=Kn(c);Array.isArray(_)&&(_=_.map(T=>WT(T))),h(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],WT(rn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>t2(T))),h(e,["tools"],_)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],e2(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function DD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Kn(c);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],rn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>n2(S))),h(e,["tools"],T)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),t}function VD(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],yA(n,s));const r=f(e,["config"]);return r!=null&&MD(r,t),t}function PD(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],yA(n,s));const r=f(e,["config"]);return r!=null&&DD(r,t),t}function UD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function kD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function LD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function OD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function qD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function BD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zD(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FD(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function GD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function HD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function YD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function JD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function KD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function $D(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function QD(n){const e={},t=f(n,["config"]);return t!=null&&KD(t,e),e}function XD(n){const e={},t=f(n,["config"]);return t!=null&&$D(t,e),e}function WD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function ZD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["cachedContents"],l)}return e}function jD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],qD(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],BD(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],ND(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function e2(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],zD(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function t2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],YD(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],JD(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function n2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>FD(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function i2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function s2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function o2(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],Ts(n,s));const r=f(e,["config"]);return r!=null&&i2(r,t),t}function r2(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],Ts(n,s));const r=f(e,["config"]);return r!=null&&s2(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a2 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=PD(this.apiClient,e);return d=me("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=VD(this.apiClient,e);return d=me("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=HD(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=GD(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=kD(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=OD(_),S=new HT;return Object.assign(S,T),S})}else{const p=UD(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=LD(_),S=new HT;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=r2(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=o2(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=XD(e);return d=me("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=ZD(_),S=new YT;return Object.assign(S,T),S})}else{const p=QD(e);return d=me("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=WD(_),S=new YT;return Object.assign(S,T),S})}}}function Ef(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function ZT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(n){return this instanceof xe?(this.v=n,this):new xe(n)}function fi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(R){return function(k){return Promise.resolve(k).then(R,T)}}function d(R,k){s[R]&&(r[R]=function(O){return new Promise(function(D,F){l.push([R,O,D,F])>1||g(R,O)})},k&&(r[R]=k(r[R])))}function g(R,k){try{p(s[R](k))}catch(O){S(l[0][3],O)}}function p(R){R.value instanceof xe?Promise.resolve(R.value.v).then(_,T):S(l[0][2],R)}function _(R){g("next",R)}function T(R){g("throw",R)}function S(R,k){R(k),l.shift(),l.length&&g(l[0][0],l[0][1])}}function di(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ZT=="function"?ZT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(d,g){c=n[l](c),r(d,g,c.done,c.value)})}}function r(l,c,d,g){Promise.resolve(g).then(function(p){l({value:p,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:NA(t)}function NA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function u2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!NA(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class c2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new f2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class f2{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),u2(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,d;const g=await r,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(T))!==null&&d!==void 0?d:[]);const R=p?[p]:[];this.recordHistory(s,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?jT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return fi(this,arguments,function*(){var r,l,c,d,g,p;const _=[];try{for(var T=!0,S=di(e),R;R=yield xe(S.next()),r=R.done,!r;T=!0){d=R.value,T=!1;const k=d;if(l2(k)){const O=(p=(g=k.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;O!==void 0&&_.push(O)}yield yield xe(k)}}catch(k){l={error:k}}finally{try{!T&&!r&&(c=S.return)&&(yield xe(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...jT(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ff extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ff.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d2(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function h2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function m2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],AA(t)),e}function p2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function g2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],AA(t)),e}function y2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function v2(n){const e={},t=f(n,["config"]);return t!=null&&y2(t,e),e}function _2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=v2(e);return l=me("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=_2(g),_=new CM;return Object.assign(_,p),_})}}async createInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=d2(e);return l=me("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=h2(g),_=new wM;return Object.assign(_,p),_})}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=g2(e);return l=me("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m2(e);return l=me("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=p2(g),_=new RM;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function E2(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>L2(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function S2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function A2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C2(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function w2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const k=f(n,["responseModalities"]);k!=null&&h(e,["responseModalities"],k);const O=f(n,["responseSchema"]);O!=null&&h(e,["responseSchema"],O);const D=f(n,["routingConfig"]);D!=null&&h(e,["routingConfig"],D);const F=f(n,["seed"]);F!=null&&h(e,["seed"],F);const j=f(n,["speechConfig"]);j!=null&&h(e,["speechConfig"],j);const Q=f(n,["stopSequences"]);Q!=null&&h(e,["stopSequences"],Q);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const ce=f(n,["thinkingConfig"]);ce!=null&&h(e,["thinkingConfig"],ce);const le=f(n,["topK"]);le!=null&&h(e,["topK"],le);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function R2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function I2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function x2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Jp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&h(e,["setup","systemInstruction"],E2(rn(k)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let le=Ea(O);Array.isArray(le)&&(le=le.map(M=>q2(Ta(M)))),h(e,["setup","tools"],le)}const D=f(n,["sessionResumption"]);e!==void 0&&D!=null&&h(e,["setup","sessionResumption"],O2(D));const F=f(n,["inputAudioTranscription"]);e!==void 0&&F!=null&&h(e,["setup","inputAudioTranscription"],F);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const ce=f(n,["proactivity"]);if(e!==void 0&&ce!=null&&h(e,["setup","proactivity"],ce),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function b2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],w2(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Jp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&h(e,["setup","systemInstruction"],rn(k));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let M=Ea(O);Array.isArray(M)&&(M=M.map(V=>B2(Ta(V)))),h(e,["setup","tools"],M)}const D=f(n,["sessionResumption"]);e!==void 0&&D!=null&&h(e,["setup","sessionResumption"],D);const F=f(n,["inputAudioTranscription"]);e!==void 0&&F!=null&&h(e,["setup","inputAudioTranscription"],F);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const ce=f(n,["proactivity"]);e!==void 0&&ce!=null&&h(e,["setup","proactivity"],ce);const le=f(n,["explicitVadSignal"]);return e!==void 0&&le!=null&&h(e,["setup","explicitVadSignal"],le),t}function N2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],x2(r,t)),t}function M2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],b2(r,t)),t}function D2(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function V2(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function P2(n){const e={},t=f(n,["media"]);if(t!=null){let p=vA(t);Array.isArray(p)&&(p=p.map(_=>Wc(_))),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],Wc(TA(s)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],Wc(_A(l)));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function U2(n){const e={},t=f(n,["media"]);if(t!=null){let p=vA(t);Array.isArray(p)&&(p=p.map(_=>_)),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],TA(s));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],_A(l));const c=f(n,["text"]);c!=null&&h(e,["text"],c);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function k2(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&h(e,["usageMetadata"],z2(c));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const p=f(n,["voiceActivityDetectionSignal"]);return p!=null&&h(e,["voiceActivityDetectionSignal"],p),e}function L2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],S2(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],A2(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],Wc(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function O2(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function q2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],R2(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],I2(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function B2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>C2(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function z2(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&h(e,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(k=>k)),h(e,["promptTokensDetails"],R)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let R=p;Array.isArray(R)&&(R=R.map(k=>k)),h(e,["cacheTokensDetails"],R)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let R=_;Array.isArray(R)&&(R=R.map(k=>k)),h(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(k=>k)),h(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F2(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function G2(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],H2(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&h(e,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(R=>R)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function H2(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function Y2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let l=Kn(r);Array.isArray(l)&&(l=l.map(c=>c)),h(t,["contents"],l)}return t}function J2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function K2(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],$2(s)),e}function $2(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function Gf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>iP(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function Q2(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function X2(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function W2(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],rn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>PA(d))),h(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],FV(l)),t}function Z2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>Gf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&X2(l),t}function j2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&W2(l,t),t}function eV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function tV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function nV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function iV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function sV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function oV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function rV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&h(e,["parameters","language"],R);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&h(e,["parameters","outputOptions","mimeType"],k);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const D=f(n,["addWatermark"]);e!==void 0&&D!=null&&h(e,["parameters","addWatermark"],D);const F=f(n,["labels"]);e!==void 0&&F!=null&&h(e,["labels"],F);const j=f(n,["editMode"]);e!==void 0&&j!=null&&h(e,["parameters","editMode"],j);const Q=f(n,["baseSteps"]);return e!==void 0&&Q!=null&&h(e,["parameters","editConfig","baseSteps"],Q),t}function aV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>uP(g))),h(t,["instances[0]","referenceImages"],d)}const c=f(e,["config"]);return c!=null&&rV(c,t),t}function lV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Hf(l))),h(e,["generatedImages"],r)}return e}function uV(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function cV(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&h(e,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function fV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let d=Gp(n,r);Array.isArray(d)&&(d=d.map(g=>g)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&uV(l,t);const c=f(e,["model"]);return c!==void 0&&h(t,["requests[]","model"],Qe(n,c)),t}function dV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let c=Gp(n,r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&cV(l,t),t}function hV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function mV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>K2(c))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function pV(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function gV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function yV(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vV(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _V(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&h(e,["response"],c);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function TV(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],Gf(rn(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(s,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(s,["presencePenalty"],R);const k=f(e,["frequencyPenalty"]);k!=null&&h(s,["frequencyPenalty"],k);const O=f(e,["seed"]);O!=null&&h(s,["seed"],O);const D=f(e,["responseMimeType"]);D!=null&&h(s,["responseMimeType"],D);const F=f(e,["responseSchema"]);F!=null&&h(s,["responseSchema"],Hp(F));const j=f(e,["responseJsonSchema"]);if(j!=null&&h(s,["responseJsonSchema"],j),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let N=Q;Array.isArray(N)&&(N=N.map(ve=>cP(ve))),h(t,["safetySettings"],N)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let N=Ea(re);Array.isArray(N)&&(N=N.map(ve=>yP(Ta(ve)))),h(t,["tools"],N)}const ce=f(e,["toolConfig"]);if(t!==void 0&&ce!=null&&h(t,["toolConfig"],gP(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&h(t,["cachedContent"],Ts(n,le));const M=f(e,["responseModalities"]);M!=null&&h(s,["responseModalities"],M);const V=f(e,["mediaResolution"]);V!=null&&h(s,["mediaResolution"],V);const x=f(e,["speechConfig"]);if(x!=null&&h(s,["speechConfig"],Yp(x)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&h(s,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&h(s,["imageConfig"],KV(P));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&h(s,["enableEnhancedCivicAnswers"],q),s}function EV(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],rn(r));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&h(s,["topP"],c);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(s,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&h(s,["presencePenalty"],R);const k=f(e,["frequencyPenalty"]);k!=null&&h(s,["frequencyPenalty"],k);const O=f(e,["seed"]);O!=null&&h(s,["seed"],O);const D=f(e,["responseMimeType"]);D!=null&&h(s,["responseMimeType"],D);const F=f(e,["responseSchema"]);F!=null&&h(s,["responseSchema"],Hp(F));const j=f(e,["responseJsonSchema"]);j!=null&&h(s,["responseJsonSchema"],j);const Q=f(e,["routingConfig"]);Q!=null&&h(s,["routingConfig"],Q);const re=f(e,["modelSelectionConfig"]);re!=null&&h(s,["modelConfig"],re);const ce=f(e,["safetySettings"]);if(t!==void 0&&ce!=null){let W=ce;Array.isArray(W)&&(W=W.map(ue=>ue)),h(t,["safetySettings"],W)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let W=Ea(le);Array.isArray(W)&&(W=W.map(ue=>PA(Ta(ue)))),h(t,["tools"],W)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&h(t,["toolConfig"],M);const V=f(e,["labels"]);t!==void 0&&V!=null&&h(t,["labels"],V);const x=f(e,["cachedContent"]);t!==void 0&&x!=null&&h(t,["cachedContent"],Ts(n,x));const U=f(e,["responseModalities"]);U!=null&&h(s,["responseModalities"],U);const P=f(e,["mediaResolution"]);P!=null&&h(s,["mediaResolution"],P);const q=f(e,["speechConfig"]);q!=null&&h(s,["speechConfig"],Yp(q));const N=f(e,["audioTimestamp"]);N!=null&&h(s,["audioTimestamp"],N);const ve=f(e,["thinkingConfig"]);ve!=null&&h(s,["thinkingConfig"],ve);const De=f(e,["imageConfig"]);if(De!=null&&h(s,["imageConfig"],$V(De)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function eE(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>Gf(d))),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],TV(n,l,t)),t}function tE(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let c=Kn(r);Array.isArray(c)&&(c=c.map(d=>d)),h(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],EV(n,l,t)),t}function nE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>G2(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&h(e,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function iE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(_=>_)),h(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&h(e,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function SV(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const _=f(n,["language"]);e!==void 0&&_!=null&&h(e,["parameters","language"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&h(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function AV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&h(e,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&h(e,["parameters","language"],R);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&h(e,["parameters","outputOptions","mimeType"],k);const O=f(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&h(e,["parameters","outputOptions","compressionQuality"],O);const D=f(n,["addWatermark"]);e!==void 0&&D!=null&&h(e,["parameters","addWatermark"],D);const F=f(n,["labels"]);e!==void 0&&F!=null&&h(e,["labels"],F);const j=f(n,["imageSize"]);e!==void 0&&j!=null&&h(e,["parameters","sampleImageSize"],j);const Q=f(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&h(e,["parameters","enhancePrompt"],Q),t}function CV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&SV(l,t),t}function wV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&AV(l,t),t}function RV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>OV(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],DA(r)),e}function IV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Hf(c))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],VA(r)),e}function xV(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&h(e,["instances[0]","lastFrame"],Yf(_));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>NP(R))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function bV(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&h(e,["parameters","durationSeconds"],c);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const p=f(n,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&h(e,["parameters","enhancePrompt"],R);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&h(e,["parameters","generateAudio"],k);const O=f(n,["lastFrame"]);e!==void 0&&O!=null&&h(e,["instances[0]","lastFrame"],pi(O));const D=f(n,["referenceImages"]);if(e!==void 0&&D!=null){let Q=D;Array.isArray(Q)&&(Q=Q.map(re=>MP(re))),h(e,["instances[0]","referenceImages"],Q)}const F=f(n,["mask"]);e!==void 0&&F!=null&&h(e,["instances[0]","mask"],bP(F));const j=f(n,["compressionQuality"]);return e!==void 0&&j!=null&&h(e,["parameters","compressionQuality"],j),t}function NV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&h(e,["response"],PV(c)),e}function MV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],UV(c)),e}function DV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],Yf(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],UA(c));const d=f(e,["source"]);d!=null&&kV(d,t);const g=f(e,["config"]);return g!=null&&xV(g,t),t}function VV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],pi(l));const c=f(e,["video"]);c!=null&&h(t,["instances[0]","video"],kA(c));const d=f(e,["source"]);d!=null&&LV(d,t);const g=f(e,["config"]);return g!=null&&bV(g,t),t}function PV(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>BV(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function UV(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>zV(c))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function kV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],Yf(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],UA(l)),t}function LV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],pi(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],kA(l)),t}function OV(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],QV(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],DA(r)),e}function Hf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],MA(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],VA(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function qV(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],MA(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function BV(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],IP(t)),e}function zV(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],xP(t)),e}function FV(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&h(e,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&h(e,["responseMimeType"],R);const k=f(n,["responseModalities"]);k!=null&&h(e,["responseModalities"],k);const O=f(n,["responseSchema"]);O!=null&&h(e,["responseSchema"],O);const D=f(n,["routingConfig"]);D!=null&&h(e,["routingConfig"],D);const F=f(n,["seed"]);F!=null&&h(e,["seed"],F);const j=f(n,["speechConfig"]);j!=null&&h(e,["speechConfig"],j);const Q=f(n,["stopSequences"]);Q!=null&&h(e,["stopSequences"],Q);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const ce=f(n,["thinkingConfig"]);ce!=null&&h(e,["thinkingConfig"],ce);const le=f(n,["topK"]);le!=null&&h(e,["topK"],le);const M=f(n,["topP"]);if(M!=null&&h(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function HV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function YV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function JV(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function KV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $V(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const r=f(n,["outputMimeType"]);r!=null&&h(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function QV(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],yo(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function MA(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Yf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],yo(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function pi(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function XV(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],CA(n,d)),s}function WV(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&h(t,["_query","filter"],c);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],CA(n,d)),s}function ZV(n,e){const t={},s=f(e,["config"]);return s!=null&&XV(n,s,t),t}function jV(n,e){const t={},s=f(e,["config"]);return s!=null&&WV(n,s,t),t}function eP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=wA(r);Array.isArray(l)&&(l=l.map(c=>qm(c))),h(e,["models"],l)}return e}function tP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=wA(r);Array.isArray(l)&&(l=l.map(c=>Bm(c))),h(e,["models"],l)}return e}function nP(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function qm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const c=f(n,["_self"]);c!=null&&h(e,["tunedModelInfo"],vP(c));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(n,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const p=f(n,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const _=f(n,["temperature"]);_!=null&&h(e,["temperature"],_);const T=f(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const R=f(n,["topK"]);R!=null&&h(e,["topK"],R);const k=f(n,["thinking"]);return k!=null&&h(e,["thinking"],k),e}function Bm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>pV(S))),h(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const g=f(n,["_self"]);g!=null&&h(e,["tunedModelInfo"],_P(g));const p=f(n,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const _=f(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),h(e,["checkpoints"],T)}return e}function iP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],gV(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],yV(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],F2(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function sP(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],pi(t)),e}function oP(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&h(e,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&h(e,["labels"],R),t}function rP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["source"]);r!=null&&lP(r,t);const l=f(e,["config"]);return l!=null&&oP(l,t),t}function aP(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Hf(r))),h(e,["generatedImages"],s)}return e}function lP(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],pi(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>sP(d))),h(e,["instances[0]","productImages"],c)}return t}function uP(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],pi(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],nP(l));const c=f(n,["controlImageConfig"]);c!=null&&h(e,["controlImageConfig"],Q2(c));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(n,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function DA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function VA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function cP(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function fP(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],pi(t)),e}function dP(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&h(e,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(n,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),t}function hP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["source"]);r!=null&&pP(r,t);const l=f(e,["config"]);return l!=null&&dP(l,t),t}function mP(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>qV(r))),h(e,["generatedMasks"],s)}return e}function pP(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],pi(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],fP(l)),t}function gP(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],vV(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function yP(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],YV(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],JV(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function PA(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>_V(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&h(e,["codeExecution"],c);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function vP(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function _P(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function TP(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function EP(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function SP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],Qe(n,s));const r=f(e,["config"]);return r!=null&&TP(r,t),t}function AP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&EP(r,t),t}function CP(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&h(e,["parameters","mode"],R),t}function wP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],pi(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&CP(c,t),t}function RP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Hf(l))),h(e,["generatedImages"],r)}return e}function IP(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],yo(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function xP(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function bP(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],pi(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function NP(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],Yf(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function MP(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],pi(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function UA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function kA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DP(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function VP(n){const e={},t=f(n,["config"]);return t!=null&&DP(t,e),e}function PP(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function UP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&PP(s,e),e}function kP(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function LP(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function OP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const c=f(n,["response"]);return c!=null&&h(e,["response"],BP(c)),e}function qP(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&LP(r,e),e}function BP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function zP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function FP(n){const e={},t=f(n,["config"]);return t!=null&&zP(t,e),e}function GP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["fileSearchStores"],l)}return e}function LA(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&h(e,["chunkingConfig"],c),t}function HP(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&LA(s,e),e}function YP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JP="Content-Type",KP="X-Server-Timeout",$P="User-Agent",zm="x-goog-api-client",QP="1.34.0",XP=`google-genai-sdk/${QP}`,WP="v1beta1",ZP="v1beta";class jP{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:WP,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:ZP,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))r.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&e4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await sE(r),new km(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await sE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return fi(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield xe(r.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const k=JSON.parse(T);if("error"in k){const O=JSON.parse(JSON.stringify(k.error)),D=O.status,F=O.code,j=`got status: ${D}. ${JSON.stringify(k)}`;if(F>=400&&F<600)throw new Ff({message:j,status:F})}}catch(k){if(k.name==="ApiError")throw k}c+=T;let S=-1,R=0;for(;;){S=-1,R=0;for(const D of g){const F=c.indexOf(D);F!==-1&&(S===-1||F<S)&&(S=F,R=D.length)}if(S===-1)break;const k=c.substring(0,S);c=c.substring(S+R);const O=k.trim();if(O.startsWith(d)){const D=O.substring(d.length).trim();try{const F=new Response(D,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xe(new km(F))}catch(F){throw new Error(`exception parsing stream chunk ${D}. ${F}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=XP+" "+this.clientOptions.userAgentExtra;return e[$P]=t,e[zm]=t,e[JP]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(KP,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},p=this.getFileName(e),_=me("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,p,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,c=await l.stat(t),d=String(c.size),g=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};s!=null&&LA(s,T);const S=await this.fetchUploadUrl(p,d,g,_,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,c){var d;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function sE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Ff({message:r,status:t}):new Error(r)}}function e4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const d=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],_=d[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=s(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),d[g]=p)}return d}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t4="mcp_used/unknown";let n4=!1;function OA(n){for(const e of n)if(i4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return n4}function qA(n){var e;const t=(e=n[zm])!==null&&e!==void 0?e:"";n[zm]=(t+` ${t4}`).trimStart()}function i4(n){return n!==null&&typeof n=="object"&&n instanceof Kp}function s4(n){return fi(this,arguments,function*(t,s=100){let r,l=0;for(;l<s;){const c=yield xe(t.listTools({cursor:r}));for(const d of c.tools)yield yield xe(d),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class Kp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Kp(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(t=void 0,di(s4(_))),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const T=r;c.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),kM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function o4(n,e,t){const s=new xM;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class r4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=u4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const _=new Promise(Q=>{p=Q}),T=e.callbacks,S=function(){p({})},R=this.apiClient,k={onopen:S,onmessage:Q=>{o4(R,T.onmessage,Q)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(Q){}},O=this.webSocketFactory.create(g,l4(c),k);O.connect(),await _;const j={setup:{model:Qe(this.apiClient,e.model)}};return O.send(JSON.stringify(j)),new a4(O,this.apiClient)}}class a4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=V2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=D2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ia.PLAY)}pause(){this.sendPlaybackControl(ia.PAUSE)}stop(){this.sendPlaybackControl(ia.STOP)}resetContext(){this.sendPlaybackControl(ia.RESET_CONTEXT)}close(){this.conn.close()}}function l4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function u4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function f4(n,e,t){const s=new IM;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=k2(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class d4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new r4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,c,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&OA(e.config.tools)&&qA(T);const S=g4(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const x=this.apiClient.getApiKey();let U="BidiGenerateContent",P="key";x!=null&&x.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",P="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${U}?${P}=${x}`}let R=()=>{};const k=new Promise(x=>{R=x}),O=e.callbacks,D=function(){var x;(x=O==null?void 0:O.onopen)===null||x===void 0||x.call(O),R({})},F=this.apiClient,j={onopen:D,onmessage:x=>{f4(F,O.onmessage,x)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(x){},onclose:(s=O==null?void 0:O.onclose)!==null&&s!==void 0?s:function(x){}},Q=this.webSocketFactory.create(_,p4(S),j);Q.connect(),await k;let re=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const x=this.apiClient.getProject(),U=this.apiClient.getLocation();re=`projects/${x}/locations/${U}/`+re}let ce={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[vf.AUDIO]}:e.config.responseModalities=[vf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],M=[];for(const x of le)if(this.isCallableTool(x)){const U=x;M.push(await U.tool())}else M.push(x);M.length>0&&(e.config.tools=M);const V={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=M2(this.apiClient,V):ce=N2(this.apiClient,V),delete ce.config,Q.send(JSON.stringify(ce)),new m4(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const h4={turnComplete:!0};class m4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=Kn(t.turns),e.isVertexAI()||(s=s.map(r=>Gf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(c4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},h4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:U2(e)}:t={realtimeInput:P2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function p4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function g4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oE=10;function rE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(c)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function y4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>la(r)))!==null&&s!==void 0?s:!1}function aE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(la(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function lE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v4 extends _s{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,c,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!y4(t)||rE(t.config))return await this.generateContentInternal(g);const p=aE(t);if(p.length>0){const O=p.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let _,T;const S=Kn(g.contents),R=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:oE;let k=0;for(;k<R&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const O=_.candidates[0].content,D=[];for(const F of(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(la(F)){const Q=await F.callTool(_.functionCalls);D.push(...Q)}k++,T={role:"user",parts:D},g.contents=Kn(g.contents),g.contents.push(O),g.contents.push(T),lE(g.config)&&(S.push(O),S.push(T))}return lE(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var s,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(t),rE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=aE(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:c.push(g);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new rr(ps.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,c,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>la(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(d.config.tools=c,e.config&&e.config.tools&&OA(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),qA(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const c of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(c)){const d=c,g=await d.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:oE;let c=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(p,_,T){return fi(this,arguments,function*(){for(var S,R,k,O,D,F;d<l;){c&&(d++,c=!1);const ce=yield xe(p.processParamsMaybeAddMcpUsage(T)),le=yield xe(p.generateContentStreamInternal(ce)),M=[],V=[];try{for(var j=!0,Q=(R=void 0,di(le)),re;re=yield xe(Q.next()),S=re.done,!S;j=!0){O=re.value,j=!1;const x=O;if(yield yield xe(x),x.candidates&&(!((D=x.candidates[0])===null||D===void 0)&&D.content)){V.push(x.candidates[0].content);for(const U of(F=x.candidates[0].content.parts)!==null&&F!==void 0?F:[])if(d<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(U.functionCall.name)){const P=yield xe(_.get(U.functionCall.name).callTool([U.functionCall]));M.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(x){R={error:x}}finally{try{!j&&!S&&(k=Q.return)&&(yield xe(k.call(Q)))}finally{if(R)throw R.error}}if(M.length>0){c=!0;const x=new bl;x.candidates=[{content:{role:"user",parts:M}}],yield yield xe(x);const U=[];U.push(...V),U.push({role:"user",parts:M});const P=Kn(T.contents).concat(U);T.contents=P}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=tE(this.apiClient,e);return d=me("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=iE(_),S=new bl;return Object.assign(S,T),S})}else{const p=eE(this.apiClient,e);return d=me("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=nE(_),S=new bl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=tE(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(T){return fi(this,arguments,function*(){var S,R,k,O;try{for(var D=!0,F=di(T),j;j=yield xe(F.next()),S=j.done,!S;D=!0){O=j.value,D=!1;const Q=O,re=iE(yield xe(Q.json()));re.sdkHttpResponse={headers:Q.headers};const ce=new bl;Object.assign(ce,re),yield yield xe(ce)}}catch(Q){R={error:Q}}finally{try{!D&&!S&&(k=F.return)&&(yield xe(k.call(F)))}finally{if(R)throw R.error}}})})}else{const p=eE(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return fi(this,arguments,function*(){var S,R,k,O;try{for(var D=!0,F=di(T),j;j=yield xe(F.next()),S=j.done,!S;D=!0){O=j.value,D=!1;const Q=O,re=nE(yield xe(Q.json()));re.sdkHttpResponse={headers:Q.headers};const ce=new bl;Object.assign(ce,re),yield yield xe(ce)}}catch(Q){R={error:Q}}finally{try{!D&&!S&&(k=F.return)&&(yield xe(k.call(F)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=dV(this.apiClient,e);return d=me("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=mV(_),S=new LT;return Object.assign(S,T),S})}else{const p=fV(this.apiClient,e);return d=me("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=hV(_),S=new LT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=wV(this.apiClient,e);return d=me("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=IV(_),S=new OT;return Object.assign(S,T),S})}else{const p=CV(this.apiClient,e);return d=me("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=RV(_),S=new OT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=aV(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=lV(g),_=new gM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=wP(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=RP(g),_=new yM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=rP(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=aP(g),_=new vM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=hP(this.apiClient,e);return l=me("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=mP(g),_=new _M;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=HV(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>Bm(_))}else{const p=GV(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>qm(_))}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=jV(this.apiClient,e);return d=me("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=tP(_),S=new qT;return Object.assign(S,T),S})}else{const p=ZV(this.apiClient,e);return d=me("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=eP(_),S=new qT;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=AP(this.apiClient,e);return d=me("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>Bm(_))}else{const p=SP(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>qm(_))}}async delete(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=iV(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=oV(_),S=new BT;return Object.assign(S,T),S})}else{const p=nV(this.apiClient,e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=sV(_),S=new BT;return Object.assign(S,T),S})}}async countTokens(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=j2(this.apiClient,e);return d=me("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=tV(_),S=new zT;return Object.assign(S,T),S})}else{const p=Z2(this.apiClient,e);return d=me("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=eV(_),S=new zT;return Object.assign(S,T),S})}}async computeTokens(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Y2(this.apiClient,e);return l=me("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=J2(g),_=new TM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=VV(this.apiClient,e);return d=me("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const T=MV(_),S=new _f;return Object.assign(S,T),S})}else{const p=DV(this.apiClient,e);return d=me("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c.then(_=>{const T=NV(_),S=new _f;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _4 extends _s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=cM(e);return d=me("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c}else{const p=uM(e);return d=me("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=nM(e);return l=me("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T4(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function E4(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>N4(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function S4(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&h(t,["uses"],c);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],b4(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),s}function A4(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],S4(n,s,t)),t}function C4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function w4(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function I4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function x4(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Jp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],R);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&h(e,["setup","systemInstruction"],E4(rn(k)));const O=f(n,["tools"]);if(e!==void 0&&O!=null){let le=Ea(O);Array.isArray(le)&&(le=le.map(M=>D4(Ta(M)))),h(e,["setup","tools"],le)}const D=f(n,["sessionResumption"]);e!==void 0&&D!=null&&h(e,["setup","sessionResumption"],M4(D));const F=f(n,["inputAudioTranscription"]);e!==void 0&&F!=null&&h(e,["setup","inputAudioTranscription"],F);const j=f(n,["outputAudioTranscription"]);e!==void 0&&j!=null&&h(e,["setup","outputAudioTranscription"],j);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const ce=f(n,["proactivity"]);if(e!==void 0&&ce!=null&&h(e,["setup","proactivity"],ce),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function b4(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],x4(r,t)),t}function N4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],C4(l));const c=f(n,["functionCall"]);c!=null&&h(e,["functionCall"],w4(c));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],T4(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function M4(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function D4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&h(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],R4(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],I4(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function P4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=V4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class U4 extends _s{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=A4(this.apiClient,e);l=me("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const g=P4(d,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k4(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function L4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&k4(s,e),e}function O4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function q4(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function B4(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&q4(s,e),e}function z4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F4 extends _s{constructor(e){super(),this.apiClient=e,this.list=async t=>new rr(ps.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O4(e);return l=me("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=L4(e);r=me("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=B4(e);return l=me("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=z4(g),_=new EM;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G4 extends _s{constructor(e,t=new F4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new rr(ps.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=VP(e);return l=me("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kP(e);return l=me("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=UP(e);r=me("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=FP(e);return l=me("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=GP(g),_=new SM;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HP(e);return l=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=YP(g),_=new AM;return Object.assign(_,p),_})}}async importFile(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qP(e);return l=me("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=OP(g),_=new zp;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let BA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return BA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const H4=()=>BA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Gm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $n extends Error{}class dn extends $n{constructor(e,t,s,r){super(`${dn.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Jf({message:s,cause:Gm(t)});const l=t;return e===400?new FA(e,l,s,r):e===401?new GA(e,l,s,r):e===403?new HA(e,l,s,r):e===404?new YA(e,l,s,r):e===409?new JA(e,l,s,r):e===422?new KA(e,l,s,r):e===429?new $A(e,l,s,r):e>=500?new QA(e,l,s,r):new dn(e,l,s,r)}}class Hm extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Jf extends dn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class zA extends Jf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class FA extends dn{}class GA extends dn{}class HA extends dn{}class YA extends dn{}class JA extends dn{}class KA extends dn{}class $A extends dn{}class QA extends dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y4=/^[a-z][a-z0-9+.-]*:/i,J4=n=>Y4.test(n);let Ym=n=>(Ym=Array.isArray,Ym(n));const K4=Ym;let $4=K4;const uE=$4;function Q4(n){if(!n)return!0;for(const e in n)return!1;return!0}function X4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const W4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $n(`${n} must be an integer`);if(e<0)throw new $n(`${n} must be a positive integer`);return e},Z4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const na="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eU(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tU=()=>{var n,e,t,s,r;const l=eU();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":fE(Deno.build.os),"X-Stainless-Arch":cE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":fE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":cE((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=nU();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nU(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const cE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",fE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let qc;const iU=()=>qc??(qc=tU());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sU(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function XA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function oU(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return XA({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function WA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function rU(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aU=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function lm(n,e,t){return ZA(),new File(n,e??"unknown_file",t)}function lU(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const uU=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",cU=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&jA(n),fU=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function dU(n,e,t){if(ZA(),n=await n,cU(n))return n instanceof File?n:lm([await n.arrayBuffer()],n.name);if(fU(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),lm(await Jm(r),e,t)}const s=await Jm(n);if(e||(e=lU(n)),!(t!=null&&t.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return lm(s,e,t)}async function Jm(n){var e,t,s,r,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(jA(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(uU(n))try{for(var d=!0,g=di(n),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const _=r;c.push(...await Jm(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${hU(n)}`)}return c}function hU(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eC{constructor(e){this._client=e}}eC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tC(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const dE=Object.freeze(Object.create(null)),mU=(n=tC)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const l=[],c=t.reduce((_,T,S)=>{var R,k,O;/[?#]/.test(T)&&(r=!0);const D=s[S];let F=(r?encodeURIComponent:n)(""+D);return S!==s.length&&(D==null||typeof D=="object"&&D.toString===((O=Object.getPrototypeOf((k=Object.getPrototypeOf((R=D.hasOwnProperty)!==null&&R!==void 0?R:dE))!==null&&k!==void 0?k:dE))===null||O===void 0?void 0:O.toString))&&(F=D+"",l.push({start:_.length+T.length,length:F.length,error:`Value of type ${Object.prototype.toString.call(D).slice(8,-1)} is not a valid path parameter`})),_+T+(S===s.length?"":F)},""),d=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(d))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((S,R)=>{const k=" ".repeat(R.start-_),O="^".repeat(R.length);return _=R.start+R.length,S+k+O},"");throw new $n(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${T}`)}return c}),Bc=mU(tC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nC extends eC{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,l=Ef(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new $n("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new $n("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Bc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Bc`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Bc`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const l=t??{},{api_version:c=this._client.apiVersion}=l,d=Ef(l,["api_version"]);return this._client.get(Bc`/${c}/interactions/${e}`,Object.assign(Object.assign({query:d},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}nC._key=Object.freeze(["interactions"]);class iC extends nC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pU(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let zc;function $p(n){let e;return(zc??(e=new globalThis.TextEncoder,zc=e.encode.bind(e)))(n)}let Fc;function hE(n){let e;return(Fc??(e=new globalThis.TextDecoder,Fc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?$p(e):e;this.buffer=pU([this.buffer,t]);const s=[];let r;for(;(r=gU(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(hE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=hE(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Kf.NEWLINE_CHARS=new Set([`
`,"\r"]);Kf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gU(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function yU(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sf={off:0,error:200,warn:300,info:400,debug:500},mE=(n,e,t)=>{if(n){if(X4(Sf,n))return n;cn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Sf))}`)}};function Ul(){}function Gc(n,e,t){return!e||Sf[n]>Sf[t]?Ul:e[n].bind(e)}const vU={error:Ul,warn:Ul,info:Ul,debug:Ul};let pE=new WeakMap;function cn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return vU;const r=pE.get(t);if(r&&r[0]===s)return r[1];const l={error:Gc("error",t,s),warn:Gc("warn",t,s),info:Gc("info",t,s),debug:Gc("debug",t,s)};return pE.set(t,[s,l]),l}const Xo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sa{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const l=s?cn(s):console;function c(){return fi(this,arguments,function*(){var g,p,_,T;if(r)throw new $n("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,k=di(_U(e,t)),O;O=yield xe(k.next()),g=O.done,!g;R=!0){T=O.value,R=!1;const D=T;if(!S)if(D.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield xe(JSON.parse(D.data))}catch(F){throw l.error("Could not parse message into JSON:",D.data),l.error("From chunk:",D.raw),F}}}catch(D){p={error:D}}finally{try{!R&&!g&&(_=k.return)&&(yield xe(_.call(k)))}finally{if(p)throw p.error}}S=!0}catch(D){if(Fm(D))return yield xe(void 0);throw D}finally{S||t.abort()}})}return new sa(c,t,s)}static fromReadableStream(e,t,s){let r=!1;function l(){return fi(this,arguments,function*(){var g,p,_,T;const S=new Kf,R=WA(e);try{for(var k=!0,O=di(R),D;D=yield xe(O.next()),g=D.done,!g;k=!0){T=D.value,k=!1;const F=T;for(const j of S.decode(F))yield yield xe(j)}}catch(F){p={error:F}}finally{try{!k&&!g&&(_=O.return)&&(yield xe(_.call(O)))}finally{if(p)throw p.error}}for(const F of S.flush())yield yield xe(F)})}function c(){return fi(this,arguments,function*(){var g,p,_,T;if(r)throw new $n("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,k=di(l()),O;O=yield xe(k.next()),g=O.done,!g;R=!0){T=O.value,R=!1;const D=T;S||D&&(yield yield xe(JSON.parse(D)))}}catch(D){p={error:D}}finally{try{!R&&!g&&(_=k.return)&&(yield xe(_.call(k)))}finally{if(p)throw p.error}}S=!0}catch(D){if(Fm(D))return yield xe(void 0);throw D}finally{S||t.abort()}})}return new sa(c,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),t.push(c)}return l.shift()}});return[new sa(()=>r(e),this.controller,this.client),new sa(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return XA({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await t.next();if(l)return s.close();const c=$p(JSON.stringify(r)+`
`);s.enqueue(c)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function _U(n,e){return fi(this,arguments,function*(){var s,r,l,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $n("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $n("Attempted to iterate over a response with no body");const d=new EU,g=new Kf,p=WA(n.body);try{for(var _=!0,T=di(TU(p)),S;S=yield xe(T.next()),s=S.done,!s;_=!0){c=S.value,_=!1;const R=c;for(const k of g.decode(R)){const O=d.decode(k);O&&(yield yield xe(O))}}}catch(R){r={error:R}}finally{try{!_&&!s&&(l=T.return)&&(yield xe(l.call(T)))}finally{if(r)throw r.error}}for(const R of g.flush()){const k=d.decode(R);k&&(yield yield xe(k))}})}function TU(n){return fi(this,arguments,function*(){var t,s,r,l;let c=new Uint8Array;try{for(var d=!0,g=di(n),p;p=yield xe(g.next()),t=p.done,!t;d=!0){l=p.value,d=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?$p(_):_;let S=new Uint8Array(c.length+T.length);S.set(c),S.set(T,c.length),c=S;let R;for(;(R=yU(c))!==-1;)yield yield xe(c.slice(0,R)),c=c.slice(R)}}catch(_){s={error:_}}finally{try{!d&&!t&&(r=g.return)&&(yield xe(r.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield xe(c))})}class EU{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=SU(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function SU(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AU(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var d;if(e.options.stream)return cn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):sa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),p=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return cn(n).debug(`[${s}] response parsed`,Xo({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qp extends Promise{constructor(e,t,s=AU){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Qp(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sC=Symbol("brand.privateNullableHeaders");function*CU(n){if(!n)return;if(sC in n){const{values:s,nulls:r}=n;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():uE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=uE(s[1])?s[1]:[s[1]];let c=!1;for(const d of l)d!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,d])}}const Nl=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[l,c]of CU(s)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),c===null?(e.delete(l),t.add(d)):(e.append(l,c),t.delete(d))}}return{[sC]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const um=n=>{var e,t,s,r,l,c;if(typeof globalThis.process<"u")return(s=(t=(e=XN)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oC;class $f{constructor(e){var t,s,r,l,c,d,g,{baseURL:p=um("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=um("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Ef(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(s=R.timeout)!==null&&s!==void 0?s:$f.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const k="warn";this.logLevel=k,this.logLevel=(c=(l=mE(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:mE(um("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:k,this.fetchOptions=R.fetchOptions,this.maxRetries=(d=R.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=R.fetch)!==null&&g!==void 0?g:sU(),this.encoder=aU,this._options=R,this.apiKey=_,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Nl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Nl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Nl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new $n(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${na}`}defaultIdempotencyKey(){return`stainless-node-retry-${H4()}`}makeStatusError(e,t,s,r){return dn.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=J4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return Q4(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Qp(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,l,c;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:p,url:_,timeout:T}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(p,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=s===void 0?"":`, retryOf: ${s}`,k=Date.now();if(cn(this).debug(`[${S}] sending request`,Xo({retryOfRequestLogID:s,method:d.method,url:_,options:d,headers:p.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Hm;const O=new AbortController,D=await this.fetchWithTimeout(_,p,T,O).catch(Gm),F=Date.now();if(D instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new Hm;const re=Fm(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(t)return cn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${Q}`),cn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${Q})`,Xo({retryOfRequestLogID:s,url:_,durationMs:F-k,message:D.message})),this.retryRequest(d,t,s??S);throw cn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,Xo({retryOfRequestLogID:s,url:_,durationMs:F-k,message:D.message})),re?new zA:new Jf({cause:D})}const j=`[${S}${R}] ${p.method} ${_} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${F-k}ms`;if(!D.ok){const Q=await this.shouldRetry(D);if(t&&Q){const x=`retrying, ${t} attempts remaining`;return await rU(D.body),cn(this).info(`${j} - ${x}`),cn(this).debug(`[${S}] response error (${x})`,Xo({retryOfRequestLogID:s,url:D.url,status:D.status,headers:D.headers,durationMs:F-k})),this.retryRequest(d,t,s??S,D.headers)}const re=Q?"error; no more retries left":"error; not retryable";cn(this).info(`${j} - ${re}`);const ce=await D.text().catch(x=>Gm(x).message),le=Z4(ce),M=le?void 0:ce;throw cn(this).debug(`[${S}] response error (${re})`,Xo({retryOfRequestLogID:s,url:D.url,status:D.status,headers:D.headers,message:M,durationMs:Date.now()-k})),this.makeStatusError(D.status,le,M,D.headers)}return cn(this).info(j),cn(this).debug(`[${S}] response start`,Xo({retryOfRequestLogID:s,url:D.url,status:D.status,headers:D.headers,durationMs:F-k})),{response:D,options:d,controller:O,requestLogID:S,retryOfRequestLogID:s,startTime:k}}async fetchWithTimeout(e,t,s,r){const l=t||{},{signal:c,method:d}=l,g=Ef(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var l;let c;const d=r==null?void 0:r.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(c=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,p)}return await j4(c),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,l;const c=Object.assign({},e),{method:d,path:g,query:p,defaultBaseURL:_}=c,T=this.buildURL(g,p,_);"timeout"in c&&W4("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:c}),k=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:k},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let d=Nl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),iU()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Nl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:oU(e)}:this.encoder({body:e,headers:s})}}$f.DEFAULT_TIMEOUT=6e4;class Yt extends $f{constructor(){super(...arguments),this.interactions=new iC(this)}}oC=Yt;Yt.GeminiNextGenAPIClient=oC;Yt.GeminiNextGenAPIClientError=$n;Yt.APIError=dn;Yt.APIConnectionError=Jf;Yt.APIConnectionTimeoutError=zA;Yt.APIUserAbortError=Hm;Yt.NotFoundError=YA;Yt.ConflictError=JA;Yt.RateLimitError=$A;Yt.BadRequestError=FA;Yt.AuthenticationError=GA;Yt.InternalServerError=QA;Yt.PermissionDeniedError=HA;Yt.UnprocessableEntityError=KA;Yt.toFile=dU;Yt.Interactions=iC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wU(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function RU(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function IU(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function xU(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function bU(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function NU(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec"],gE(R))}else if(r==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec"],gE(R))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&h(e,["description"],c);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(d==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(g==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(p==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(_==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function MU(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&FU(l);const c=f(n,["config"]);return c!=null&&bU(c,t),t}function DU(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&GU(l,t,e);const c=f(n,["config"]);return c!=null&&NU(c,t,e),t}function VU(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function PU(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function UU(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function kU(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&h(e,["_query","filter"],c),s}function LU(n,e){const t={},s=f(n,["config"]);return s!=null&&UU(s,t),t}function OU(n,e){const t={},s=f(n,["config"]);return s!=null&&kU(s,t),t}function qU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>rC(d))),h(t,["tuningJobs"],c)}return t}function BU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Km(d))),h(t,["tuningJobs"],c)}return t}function zU(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function FU(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function GU(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function rC(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],SA(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const _=f(n,["description"]);_!=null&&h(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],zU(S)),t}function Km(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],SA(l));const c=f(n,["createTime"]);c!=null&&h(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const _=f(n,["error"]);_!=null&&h(t,["error"],_);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&h(t,["tunedModel"],R);const k=f(n,["preTunedModel"]);k!=null&&h(t,["preTunedModel"],k);const O=f(n,["supervisedTuningSpec"]);O!=null&&h(t,["supervisedTuningSpec"],O);const D=f(n,["preferenceOptimizationSpec"]);D!=null&&h(t,["preferenceOptimizationSpec"],D);const F=f(n,["tuningDataStats"]);F!=null&&h(t,["tuningDataStats"],F);const j=f(n,["encryptionSpec"]);j!=null&&h(t,["encryptionSpec"],j);const Q=f(n,["partnerModelTuningSpec"]);Q!=null&&h(t,["partnerModelTuningSpec"],Q);const re=f(n,["customBaseModel"]);re!=null&&h(t,["customBaseModel"],re);const ce=f(n,["experiment"]);ce!=null&&h(t,["experiment"],ce);const le=f(n,["labels"]);le!=null&&h(t,["labels"],le);const M=f(n,["outputUri"]);M!=null&&h(t,["outputUri"],M);const V=f(n,["pipelineJob"]);V!=null&&h(t,["pipelineJob"],V);const x=f(n,["serviceAccount"]);x!=null&&h(t,["serviceAccount"],x);const U=f(n,["tunedModelDisplayName"]);U!=null&&h(t,["tunedModelDisplayName"],U);const P=f(n,["veoTuningSpec"]);return P!=null&&h(t,["veoTuningSpec"],P),t}function HU(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const c=f(n,["done"]);c!=null&&h(t,["done"],c);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function gE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YU extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Um.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=PU(e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>Km(_))}else{const p=VU(e);return d=me("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>rC(_))}}async listInternal(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=OU(e);return d=me("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=BU(_),S=new FT;return Object.assign(S,T),S})}else{const p=LU(e);return d=me("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=qU(_),S=new FT;return Object.assign(S,T),S})}}async cancel(e){var t,s,r,l;let c,d="",g={};if(this.apiClient.isVertexAI()){const p=RU(e);return d=me("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=xU(_),S=new GT;return Object.assign(S,T),S})}else{const p=wU(e);return d=me("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),c.then(_=>{const T=IU(_),S=new GT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=DU(e,e);return l=me("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>Km(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=MU(e);return l=me("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>HU(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JU{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const KU=1024*1024*8,$U=3,QU=1e3,XU=2,Af="x-goog-upload-status";async function WU(n,e,t){var s;const r=await aC(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function ZU(n,e,t){var s;const r=await aC(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=gA(l),d=new Fp;return Object.assign(d,c),d}async function aC(n,e,t){var s,r;let l=0,c=0,d=new km(new Response),g="upload";for(l=n.size;c<l;){const p=Math.min(KU,l-c),_=n.slice(c,c+p);c+p>=l&&(g+=", finalize");let T=0,S=QU;for(;T<$U&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Af]));)T++,await ek(S),S=S*XU;if(c+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Af])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function jU(n){return{size:n.size,type:n.type}}function ek(n){return new Promise(e=>setTimeout(e,n))}class tk{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WU(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ZU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nk{create(e,t,s){return new ik(e,t,s)}}class ik{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yE="x-goog-api-key";class sk{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(yE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ok="gl-node/";class lC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=eM(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new sk(this.apiKey);this.apiClient=new jP({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:ok+"web",uploader:new tk,downloader:new JU}),this.models=new v4(this.apiClient),this.live=new d4(this.apiClient,r,new nk),this.batches=new bD(this.apiClient),this.chats=new c2(this.models,this.apiClient),this.caches=new a2(this.apiClient),this.files=new T2(this.apiClient),this.operations=new _4(this.apiClient),this.authTokens=new U4(this.apiClient),this.tunings=new YU(this.apiClient),this.fileSearchStores=new G4(this.apiClient)}}const uC=()=>{try{return typeof lC>"u"?!1:!!window.GEMINI_API_KEY}catch{return!1}},cC=()=>{const n=window.GEMINI_API_KEY;if(!n)throw new Error("GEMINI_API_KEY not found. Please configure the environment variable.");return new lC({apiKey:n})},vE=()=>[{name:"Classic Textured Crop",description:"Modern ve ok ynl bir kesim. Bu stil, yz hatlarn dengeleyen katmanlar ve doal doku ile alr. Gnlk kullanma uygun, hafif products ile ekillendirilebilir.",faceShapeMatch:"Oval/Yuvarlatlm Kare - yan katmanlar yz ereveler",maintenanceLevel:"Dk",imageUrl:"https://images.unsplash.com/photo-1503951914875-452162b7f300?w=400&auto=format&fit=crop&q=60"},{name:"Modern Quiff",description:"zgvenli ve k bir grnm. stte hacim, yanda fade ile modern bir siluet oluturur. Gl ene hatt olan yzler iin mkemmel bir denge salar.",faceShapeMatch:"Kare/Diamond - yukardaki hacim yz uzatr",maintenanceLevel:"Orta",imageUrl:"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=400&auto=format&fit=crop&q=60"},{name:"Textured Fringe",description:"Gen ve dinamik bir stil. ndeki peruk kalar hafife rtp yumuak bir gei salar. Yumuak zellikleri olan yzler iin idealdir.",faceShapeMatch:"Kalp/Oval - n perk yz dengeler",maintenanceLevel:"Dk-Orta",imageUrl:"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=400&auto=format&fit=crop&q=60"}],rk=async(n,e)=>{if(!uC())return console.warn("Google GenAI SDK not available or API key missing, using fallback recommendations"),vE();try{const t=cC(),s="gemini-2.5-flash-image",l=[{text:`
      You are a world-class hair stylist and image consultant at the elite "TYRANDEVU" salon.
      Your task is to provide a highly personalized consultation based on the user's photo and description.

      CRITICAL ANALYSIS STEPS:
      1. **Face Shape Analysis:** rigorous analysis of the user's face shape (e.g., Oval, Square, Round, Diamond, Heart).
      2. **Texture Analysis:** Analyze the hair texture (Straight, Wavy, Curly, Coily) and density (Fine, Thick).
      3. **Recommendation:** Suggest 3 distinct, modern hairstyles that aesthetically balance their specific features.

      OUTPUT REQUIREMENTS:
      - **description**: Must be detailed and personalized. Explain *WHY* this style works for *their* specific face shape and texture. (e.g., "This textured crop adds volume on top to elongate your round face structure," or "The fade is kept lower to balance your strong jawline.").
      - **faceShapeMatch**: Explicitly state their face shape and why this matches.
      - **maintenanceLevel**: Be realistic based on the cut complexity.

      Return STRICT JSON format (Array of objects). Do not use Markdown code blocks.
    `}];if(e){const d=e.includes(",")?e.split(",")[1]:e;l.push({inlineData:{mimeType:"image/jpeg",data:d}})}l.push({text:`User Description & Preferences: ${n}`});const c=await t.models.generateContent({model:s,contents:{parts:l},config:{responseMimeType:"application/json",responseSchema:{type:En.ARRAY,items:{type:En.OBJECT,properties:{name:{type:En.STRING,description:"Name of the hairstyle"},description:{type:En.STRING,description:"Detailed explanation of why this suits the specific user's features"},faceShapeMatch:{type:En.STRING,description:"The detected face shape and the strategy used"},maintenanceLevel:{type:En.STRING,description:"Low, Medium, or High"}},required:["name","description","faceShapeMatch","maintenanceLevel"]}}}});if(c.text){let d=c.text.trim();d.startsWith("```")&&(d=d.replace(/^```json\n?|```$/g,"").trim(),d=d.replace(/^```\n?|```$/g,"").trim());try{return JSON.parse(d).map(p=>({...p,imageUrl:"https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=400&auto=format&fit=crop&q=60"}))}catch{throw console.error("JSON Parse Error. Raw text:",d),new Error("AI yant okunamad. Ltfen tekrar deneyin.")}}return[]}catch(t){return console.error("Gemini Analysis Failed:",t),console.warn("Using fallback recommendations due to error"),vE()}},_E=async(n,e,t)=>{if(!uC())return console.warn("Cannot generate preview: GenAI SDK or API key not available"),null;try{const s=cC(),r="gemini-2.5-flash-image",l=n.includes(",")?n.split(",")[1]:n,c=await s.models.generateContent({model:r,contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:l}},{text:`Generate a high-resolution, photorealistic makeover of the person in the image.
                   Target Hairstyle: "${e}"
                   Style Details: ${t}

                   CRITICAL REQUIREMENTS FOR PHOTOREALISM:
                   1. PRESERVE IDENTITY: Keep the face, facial features, skin texture, and lighting EXACTLY as they are in the original image.
                   2. REALISTIC HAIR: The generated hair must look indistinguishable from real hair, with individual strands, natural shine, and weight.
                   3. RESOLUTION: Output in 4k/8k quality, sharp details, no blurring or artifacts.
                   4. BLENDING: Ensure the hairline blends naturally with the forehead and skin. Match the lighting on the hair to the original scene.`}]}});if(c.candidates&&c.candidates.length>0){const d=c.candidates[0];if(d.content&&d.content.parts){for(const g of d.content.parts)if(g.inlineData&&g.inlineData.data)return`data:image/jpeg;base64,${g.inlineData.data}`}}return null}catch(s){return console.error(`Gemini Image Gen Error for ${e}:`,s),null}},ak=({onClose:n})=>{const[e,t]=de.useState(""),[s,r]=de.useState(!1),[l,c]=de.useState([]),[d,g]=de.useState(null),[p,_]=de.useState({}),[T,S]=de.useState({}),[R,k]=de.useState(!1),[O,D]=de.useState(0),[F,j]=de.useState(null),Q=x=>{if(j(null),!x.type.startsWith("image/")){j("Ltfen geerli bir resim dosyas ykleyin.");return}if(x.size>tR){const q=(x.size/1048576).toFixed(1);j(`Dosya boyutu ok byk (${q}MB). Ltfen ${cm}MB alt bir dosya ykleyin.`);return}D(10);const U=setInterval(()=>{D(q=>q>=90?(clearInterval(U),90):q+5)},nR),P=new FileReader;P.onloadend=()=>{clearInterval(U),D(100),setTimeout(()=>{g(P.result),D(0)},600)},P.readAsDataURL(x)},re=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?k(!0):x.type==="dragleave"&&k(!1)},ce=x=>{x.preventDefault(),x.stopPropagation(),k(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&Q(x.dataTransfer.files[0])},le=x=>{var P;const U=(P=x.target.files)==null?void 0:P[0];U&&Q(U)},M=async()=>{if(!(!e&&!d)){r(!0),c([]),_({}),S({}),j(null);try{const x=await rk(e,d||void 0);if(c(x),r(!1),d&&x.length>0){const U={};x.forEach((P,q)=>U[q]=!0),_(U),x.forEach(async(P,q)=>{try{await new Promise(ve=>setTimeout(ve,q*iR));const N=await _E(d,P.name,P.description);N&&c(ve=>{const De=[...ve];return De[q]&&(De[q]={...De[q],imageUrl:N}),De})}catch(N){console.error(`Image generation failed for index ${q}`,N)}finally{_(N=>({...N,[q]:!1}))}})}}catch(x){console.error(x),alert("AI servisi u anda yant veremiyor. Ltfen bilgilerinizi kontrol edip tekrar deneyin."),r(!1)}}},V=async x=>{const U=T[x];if(!(!U||!d)){_(P=>({...P,[x]:!0}));try{const P=l[x],q=`${P.description}. Modification request: ${U}`,N=await _E(d,P.name,q);N&&(c(ve=>{const De=[...ve];return De[x]={...De[x],imageUrl:N},De}),S(ve=>({...ve,[x]:""})))}catch(P){console.error("Refinement failed",P),alert("Dzenleme srasnda bir hata olutu.")}finally{_(P=>({...P,[x]:!1}))}}};return C.jsxs("div",{className:"space-y-8 animate-fade-in w-full max-w-4xl mx-auto pb-20 relative",children:[n&&C.jsx("button",{onClick:n,className:"absolute -top-12 right-0 md:top-0 md:-right-12 p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:"Ana Sayfaya Dn",children:C.jsx(Te,{name:"close",size:28})}),C.jsxs("div",{className:"text-center space-y-2",children:[C.jsxs("h2",{className:"text-3xl font-serif text-gold-400 flex items-center justify-center gap-2",children:[C.jsx(Te,{name:"sparkles",className:"text-gold-400"}),"AI Stil Danman"]}),C.jsx("p",{className:"text-gray-300",children:"Yz ekline ve tarzna en uygun sa yapay zeka ile bul."})]}),C.jsxs(fn,{className:"space-y-6",children:[C.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Fotorafn Ykle"}),C.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 relative group overflow-hidden
                ${R?"border-gold-500 bg-gold-500/10 scale-[1.02]":"border-gray-600 hover:border-gold-500 hover:bg-white/5"} ${F?"border-red-500/50":""}`,onDragEnter:re,onDragOver:re,onDragLeave:re,onDrop:ce,children:[O>0?C.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in transition-all",children:[C.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-4 border border-gold-500/30 animate-bounce",children:C.jsx(Te,{name:"upload",className:"text-gold-400",size:24})}),C.jsx("p",{className:"text-lg font-serif text-white mb-1",children:"Ykleniyor"}),C.jsx("p",{className:"text-xs text-gold-400/80 mb-6 font-mono tracking-widest animate-pulse",children:"GRNT LENYOR..."}),C.jsx("div",{className:"w-48 sm:w-64 h-2 bg-gray-800 rounded-full overflow-hidden border border-white/10 relative shadow-inner",children:C.jsx("div",{className:"h-full bg-gradient-to-r from-gold-600 via-gold-400 to-gold-300 transition-all duration-200 ease-out shadow-[0_0_15px_rgba(212,175,55,0.6)]",style:{width:`${O}%`}})}),C.jsxs("span",{className:"mt-3 text-xs text-gray-400 font-medium",children:[O,"%"]})]}):d?C.jsxs("div",{className:"relative h-48 group-hover:opacity-50 transition-opacity",children:[C.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover rounded-lg shadow-lg"}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:C.jsx("p",{className:"text-white font-bold bg-black/50 px-3 py-1 rounded-full text-sm backdrop-blur-md border border-white/20",children:"Deitirmek iin srkleyin"})})]}):C.jsxs("div",{className:"flex flex-col items-center justify-center h-48 transition-transform duration-300 group-hover:scale-105",children:[C.jsx("div",{className:`p-4 rounded-full mb-3 transition-colors ${R?"bg-gold-500 text-black":"bg-white/5 text-gray-400 group-hover:text-gold-400 group-hover:bg-gold-500/20"}`,children:C.jsx(Te,{name:"upload",size:32})}),C.jsx("span",{className:`text-sm font-medium transition-colors ${R?"text-gold-400":"text-gray-400 group-hover:text-white"}`,children:R?"Fotoraf Buraya Brakn":"Fotoraf srkleyin veya tklayn"}),C.jsxs("span",{className:"text-xs text-gray-500 mt-2",children:["JPG, PNG (Max ",cm,"MB)"]})]}),C.jsx("input",{type:"file",accept:"image/*",onChange:le,disabled:O>0,className:"absolute inset-0 opacity-0 cursor-pointer disabled:cursor-not-allowed"})]}),F&&C.jsxs("div",{className:"animate-fade-in flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/20 p-3 rounded-lg mt-2",children:[C.jsx(Te,{name:"close",size:16,className:"shrink-0"}),C.jsx("span",{children:F})]})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Tarzn Anlat"}),C.jsx("textarea",{value:e,onChange:x=>t(x.target.value),placeholder:"rn: Modern, ksa, bakm kolay bir sa istiyorum. Sakallarm gr...",className:"w-full h-full min-h-[200px] glass-input rounded-xl p-4 resize-none border-2 border-transparent focus:border-gold-500/50 transition-all"})]})]}),C.jsx("button",{onClick:M,disabled:s||!e&&!d,className:`w-full py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2
            ${s?"bg-gray-700 cursor-wait":"bg-gradient-to-r from-gold-600 to-gold-400 hover:from-gold-500 hover:to-gold-300 text-black shadow-lg shadow-gold-500/20 hover:shadow-gold-500/40"}`,children:s?C.jsxs(C.Fragment,{children:[C.jsxs("svg",{className:"animate-spin h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analiz Ediliyor..."]}):C.jsxs(C.Fragment,{children:[C.jsx(Te,{name:"sparkles",size:20}),"Stilimi Bul"]})})]}),l.length>0&&C.jsx("div",{className:"grid md:grid-cols-3 gap-6 animate-slide-up",children:l.map((x,U)=>C.jsxs(fn,{className:"group overflow-hidden border-gold-500/30 flex flex-col h-full",children:[C.jsxs("div",{className:"relative h-48 -mx-6 -mt-6 mb-4 overflow-hidden bg-black/40",children:[p[U]?C.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 backdrop-blur-sm bg-black/60 transition-all",children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"w-12 h-12 border-2 border-gold-500/30 border-t-gold-500 rounded-full animate-spin mb-3"}),C.jsx(Te,{name:"sparkles",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[65%] text-gold-400 animate-pulse",size:16})]}),C.jsx("span",{className:"text-xs text-gold-400 font-medium animate-pulse tracking-wide",children:T[U]?"Stil Gncelleniyor...":"Yz leniyor..."})]}):null,C.jsx("img",{src:x.imageUrl,alt:x.name,className:`w-full h-full object-cover transition-all duration-700 group-hover:scale-110 
                    ${p[U]?"opacity-30 blur-sm":"opacity-100 blur-0"}`}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex items-end p-4",children:C.jsx("h3",{className:"text-xl font-serif text-white shadow-black drop-shadow-md",children:x.name})})]}),C.jsxs("div",{className:"flex-1 space-y-3 flex flex-col",children:[C.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-3",children:x.description}),C.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[C.jsxs("div",{className:"bg-white/5 rounded-lg p-3 flex flex-col items-center justify-center text-center border border-white/5 hover:border-gold-500/30 transition-colors",children:[C.jsx(Te,{name:"user",className:"text-gold-400 mb-1",size:16}),C.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-0.5",children:"Yz ekli"}),C.jsx("span",{className:"text-sm font-medium text-white",children:x.faceShapeMatch})]}),C.jsxs("div",{className:"bg-white/5 rounded-lg p-3 flex flex-col items-center justify-center text-center border border-white/5 hover:border-gold-500/30 transition-colors",children:[C.jsx(Te,{name:"scissors",className:"text-gold-400 mb-1",size:16}),C.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-0.5",children:"Bakm"}),C.jsx("span",{className:"text-sm font-medium text-white",children:x.maintenanceLevel})]})]}),C.jsx("div",{className:"mt-auto pt-4 border-t border-white/10",children:C.jsxs("div",{className:"relative group/input",children:[C.jsx("input",{type:"text",value:T[U]||"",onChange:P=>S(q=>({...q,[U]:P.target.value})),onKeyDown:P=>P.key==="Enter"&&V(U),disabled:p[U],placeholder:"rn: Daha ksa yap, sakal ekle...",className:"w-full bg-black/30 border border-white/10 rounded-lg pl-3 pr-10 py-2.5 text-xs text-white focus:border-gold-500 outline-none placeholder-gray-500 disabled:opacity-50 transition-all focus:bg-white/5"}),C.jsx("button",{onClick:()=>V(U),disabled:p[U]||!T[U],className:"absolute right-1 top-1/2 -translate-y-1/2 p-1.5 text-gold-400 hover:text-white disabled:opacity-30 transition-colors rounded-md hover:bg-gold-500/20",title:"Stili Gncelle",children:C.jsx(Te,{name:"sparkles",size:14})})]})})]})]},U))})]})},lk=({isOpen:n,onClose:e,existingAppointment:t,staffMembers:s})=>{const[r,l]=de.useState(""),[c,d]=de.useState(""),[g,p]=de.useState(Wr[0].id),[_,T]=de.useState(""),[S,R]=de.useState(""),[k,O]=de.useState(""),[D,F]=de.useState(""),[j,Q]=de.useState(!1);de.useEffect(()=>{var M;n&&(t?(l(t.customerName),d(""),p(t.serviceId),T(t.staffId),R(t.date),O(t.time),F(t.notes||"")):(l(""),d(""),p(Wr[0].id),T(((M=s[0])==null?void 0:M.id)||""),R(qi()),O("12:00"),F("")))},[n,t,s]);const re=async()=>{if(!r||!_||!S||!k){alert("Ltfen gerekli alanlar doldurun.");return}if(!t&&!c){alert("Ltfen mteri telefon numarasn giriniz.");return}const M=s.find(x=>x.id===_);if(!M){alert("Geersiz personel seimi. Ltfen geerli bir personel sein.");return}Q(!0);const V=Wr.find(x=>x.id===g)||Wr[0];try{if(t)await fN(t.id,{staffId:_,staffName:M.name,date:S,time:k,serviceId:g,serviceName:V.name,notes:D}),alert("Randevu baaryla gncellendi.");else{const x=await lN(r,c);await mA({customerId:x.id,customerName:x.name,staffId:_,staffName:M.name,date:S,time:k,serviceId:g,serviceName:V.name,status:"confirmed",notes:D}),alert(`Randevu oluturuldu! Mteri: ${x.name}`)}e()}catch(x){console.error(x),alert("lem baarsz.")}finally{Q(!1)}},ce=async()=>{if(t&&confirm("Bu deiiklik mterinin paneline 'neri' olarak gnderilecek. Onaylyor musunuz?")){Q(!0);try{await vN(t.id,S,k),alert("Deiiklik nerisi mteriye gnderildi."),e()}catch(M){console.error(M),alert("neri gnderilemedi.")}finally{Q(!1)}}},le=async()=>{if(t&&confirm("Randevuyu kalc olarak silmek istediinize emin misiniz?")){Q(!0);try{await hN(t.id),e()}catch{alert("Silinemedi.")}finally{Q(!1)}}};return n?C.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-fade-in",children:C.jsxs(fn,{className:"w-full max-w-lg relative overflow-y-auto max-h-[90vh]",children:[C.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:C.jsx(Te,{name:"close",size:24})}),C.jsxs("h3",{className:"text-2xl font-serif text-white mb-6 flex items-center gap-2",children:[C.jsx(Te,{name:t?"scissors":"sparkles",className:"text-gold-400"}),t?"Randevuyu Dzenle":"Yeni Randevu Ekle"]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Mteri Ad"}),C.jsx("input",{value:r,onChange:M=>l(M.target.value),disabled:!!t,className:`w-full glass-input p-3 rounded-xl ${t?"opacity-50 cursor-not-allowed":""}`,placeholder:"Ad Soyad"})]}),!t&&C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Telefon Numaras"}),C.jsx("input",{type:"tel",value:c,onChange:M=>d(M.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:"05XX XXX XX XX"}),C.jsx("p",{className:"text-[10px] text-gray-500 mt-1 ml-1",children:"*Numara kaytlysa eleir, deilse yeni mteri oluturulur."})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Hizmet"}),C.jsx("select",{value:g,onChange:M=>p(M.target.value),className:"w-full glass-input p-3 rounded-xl bg-black",children:Wr.map(M=>C.jsxs("option",{value:M.id,children:[M.name," (",M.durationMin," dk)"]},M.id))})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Personel"}),C.jsx("select",{value:_,onChange:M=>T(M.target.value),className:"w-full glass-input p-3 rounded-xl bg-black",children:s.map(M=>C.jsx("option",{value:M.id,children:M.name},M.id))})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Tarih"}),C.jsx("input",{type:"date",value:S,onChange:M=>R(M.target.value),className:"w-full glass-input p-3 rounded-xl"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Saat"}),C.jsx("input",{type:"time",value:k,onChange:M=>O(M.target.value),className:"w-full glass-input p-3 rounded-xl"})]})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Notlar (Opsiyonel)"}),C.jsx("textarea",{value:D,onChange:M=>F(M.target.value),className:"w-full glass-input p-3 rounded-xl h-20 resize-none",placeholder:"rn: Cilt hassasiyeti var..."})]}),C.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[C.jsxs("button",{onClick:re,disabled:j,className:"w-full bg-gold-500 hover:bg-gold-400 text-black font-bold py-3 rounded-xl transition-all shadow-lg shadow-gold-500/20 flex justify-center items-center gap-2",children:[C.jsx(Te,{name:"check",size:18}),j?"leniyor...":t?"Deiiklikleri Kaydet (Direkt)":"Randevuyu Olutur"]}),t&&C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("button",{onClick:ce,disabled:j,className:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 border border-blue-500/30 py-3 rounded-xl text-sm font-bold flex justify-center items-center gap-2",title:"Deiiklii mteriye onaya gnder",children:[C.jsx(Te,{name:"sparkles",size:16}),"Mteriye ner"]}),C.jsxs("button",{onClick:le,disabled:j,className:"bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 py-3 rounded-xl text-sm font-bold flex justify-center items-center gap-2",children:[C.jsx(Te,{name:"logout",size:16,className:"rotate-180"}),"Sil"]})]})]})]})]})}):null},uk={pending:{label:"Beklemede",labelShort:"Beklemede",classes:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",icon:"clock"},confirmed:{label:"Onayl",labelShort:"Onayland",classes:"bg-green-500/10 text-green-400 border-green-500/30",icon:"check"},completed:{label:"Bitti",labelShort:"Tamamland",classes:"bg-blue-500/10 text-blue-400 border-blue-500/30",icon:"check"},cancelled:{label:"ptal",labelShort:"ptal Edildi",classes:"bg-red-500/10 text-red-400 border-red-500/30",icon:"close"}},fC=({status:n,className:e=""})=>{const t=uk[n];return C.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${t.classes} ${e}`,children:t.label})},ck=()=>{const[n,e]=de.useState([]),[t,s]=de.useState([]),[r,l]=de.useState(!1),[c,d]=de.useState(!1),[g,p]=de.useState(!1),[_,T]=de.useState(null),[S,R]=de.useState("all"),[k,O]=de.useState("all"),[D,F]=de.useState("upcoming"),[j,Q]=de.useState(""),[re,ce]=de.useState(""),[le,M]=de.useState(""),[V,x]=de.useState(""),[U,P]=de.useState("");de.useEffect(()=>{yf().then(e);const Y=qp(s);return()=>Y()},[]);const q=async Y=>{if(Y.preventDefault(),!re||!le||!V){alert("Ltfen zorunlu alanlar doldurunuz.");return}d(!0);try{await uN(re,le,V,U||"Stylist"),alert("Personel baaryla eklendi!"),l(!1),ce(""),M(""),x(""),yf().then(e)}catch(ae){alert(ae.message||"Hata olutu. Telefon numaras akmas olabilir.")}finally{d(!1)}},N=async(Y,ae,he,Se)=>{if(ae==="approve"&&(!he||!Se)){alert("Hata: Yeni tarih ve saat bilgisi eksik. Talep hatal olabilir.");return}if(confirm(ae==="approve"?"Deiiklii ONAYLIYOR musunuz?":"Deiiklii REDDEDYOR musunuz?"))try{ae==="approve"&&he&&Se?await gN(Y,he,Se):await yN(Y)}catch(we){console.error(we),alert("lem baarsz.")}},ve=()=>{T(null),p(!0)},De=Y=>{T(Y),p(!0)},W=de.useMemo(()=>{let Y=[...t];const ae=qi();if(j){const he=j.toLowerCase();Y=Y.filter(Se=>Se.customerName.toLowerCase().includes(he)||Se.serviceName.toLowerCase().includes(he)||Se.staffName.toLowerCase().includes(he))}return S!=="all"&&(Y=Y.filter(he=>he.status===S)),k!=="all"&&(Y=Y.filter(he=>he.staffId===k)),D==="upcoming"?Y=Y.filter(he=>he.date>=ae):D==="past"&&(Y=Y.filter(he=>he.date<ae)),Y},[t,j,S,k,D]),ue=de.useMemo(()=>{const Y={};return W.forEach(ae=>{Y[ae.date]||(Y[ae.date]=[]),Y[ae.date].push(ae)}),Object.keys(Y).forEach(ae=>{Y[ae].sort((he,Se)=>he.time.localeCompare(Se.time))}),Y},[W]),Ee=de.useMemo(()=>{const Y=Object.keys(ue);return D==="past"?Y.sort((ae,he)=>he.localeCompare(ae)):Y.sort((ae,he)=>ae.localeCompare(he))},[ue,D]),Oe=n.filter(Y=>Y.role===at.STAFF||Y.role===at.ADMIN),qe=t.filter(Y=>Y.changeRequest&&Y.changeRequest.status==="pending"),z=t.filter(Y=>Y.date===qi()&&Y.status!=="cancelled"),ne=[{title:"Toplam Randevu",value:t.length.toString(),icon:"calendar",change:"Genel"},{title:"Bekleyen Talepler",value:qe.length.toString(),icon:"sparkles",change:qe.length>0?"lgilenin":"Yok"},{title:"Bugnk Randevular",value:z.length.toString(),icon:"scissors",change:"Bugn"}];return C.jsxs("div",{className:"space-y-8 animate-slide-up w-full pb-20",children:[C.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-3xl font-serif text-white",children:"Ynetim Paneli"}),C.jsx("p",{className:"text-gold-400",children:"Hogeldiniz, Tark Bey"})]}),C.jsxs("div",{className:"flex gap-4 items-center",children:[C.jsx("div",{className:"text-sm text-gray-400 hidden md:block",children:new Date().toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),C.jsxs("button",{onClick:ve,className:"bg-gold-500 hover:bg-gold-400 text-black font-bold py-2 px-4 rounded-lg shadow-lg shadow-gold-500/20 flex items-center gap-2 transition-all active:scale-95",children:[C.jsx(Te,{name:"sparkles",size:18}),"+ Randevu Ekle"]})]})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:ne.map((Y,ae)=>C.jsxs(fn,{className:"relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:C.jsx(Te,{name:Y.icon,size:60})}),C.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:Y.title}),C.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[C.jsx("span",{className:"text-3xl font-bold text-white",children:Y.value}),C.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Y.title==="Bekleyen Talepler"&&qe.length>0?"bg-red-500/20 text-red-400 animate-pulse":"bg-green-400/10 text-green-400"}`,children:Y.change})]})]},ae))}),qe.length>0&&C.jsxs("div",{className:"animate-fade-in border-b border-white/10 pb-8 bg-gold-500/5 p-6 rounded-2xl border border-gold-500/20 relative overflow-hidden",children:[C.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gold-500/5 rounded-full blur-3xl -z-10 pointer-events-none"}),C.jsxs("h3",{className:"text-xl font-serif mb-6 flex items-center gap-3 text-gold-400",children:[C.jsxs("div",{className:"relative",children:[C.jsx(Te,{name:"sparkles",className:"animate-spin text-gold-500"}),C.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[C.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),C.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),"Talep Edilen Deiiklikler (",qe.length,")"]}),C.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:qe.map(Y=>{var ae,he;return C.jsxs(fn,{className:"border border-gold-500/50 shadow-[0_0_20px_rgba(212,175,55,0.1)] bg-black/40 relative overflow-hidden group",children:[C.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gold-500/10 blur-xl rounded-full -mr-10 -mt-10 pointer-events-none"}),C.jsxs("div",{className:"relative z-10",children:[C.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-white/10 pb-4",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:"w-10 h-10 rounded-full bg-gold-500/20 flex items-center justify-center text-gold-400 font-bold text-lg",children:Y.customerName.charAt(0).toUpperCase()}),C.jsxs("div",{children:[C.jsx("div",{className:"font-bold text-white text-lg leading-tight",children:Y.customerName}),C.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Y.serviceName})]})]}),C.jsx("div",{className:"text-[10px] bg-gold-500 text-black px-2 py-1 rounded font-bold uppercase tracking-wider animate-pulse",children:"Talep"})]}),C.jsxs("div",{className:"space-y-4 mb-6",children:[C.jsxs("div",{className:"relative p-3 bg-white/5 rounded-lg border border-white/5 group-hover:border-red-500/30 transition-colors",children:[C.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500/50 rounded-l-lg"}),C.jsx("span",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-widest block mb-1 pl-2",children:"Mevcut Randevu"}),C.jsxs("div",{className:"text-gray-300 font-mono pl-2 flex items-center gap-2",children:[C.jsx(Te,{name:"calendar",size:14,className:"text-gray-500"}),Y.date,C.jsx("span",{className:"w-1 h-1 bg-gray-500 rounded-full"}),Y.time]})]}),C.jsx("div",{className:"flex justify-center -my-2 relative z-20",children:C.jsx("div",{className:"bg-black border border-gold-500/30 rounded-full p-1 shadow-lg text-gold-500",children:C.jsx(Te,{name:"chevronRight",size:16,className:"rotate-90"})})}),C.jsxs("div",{className:"relative p-3 bg-gold-500/10 rounded-lg border border-gold-500/30 group-hover:border-gold-500 transition-colors",children:[C.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gold-500 rounded-l-lg"}),C.jsx("span",{className:"text-[10px] uppercase text-gold-600 font-bold tracking-widest block mb-1 pl-2",children:"stenen Deiiklik"}),C.jsxs("div",{className:"text-white font-mono font-bold pl-2 flex items-center gap-2",children:[C.jsx(Te,{name:"sparkles",size:14,className:"text-gold-400"}),(ae=Y.changeRequest)==null?void 0:ae.newDate,C.jsx("span",{className:"w-1 h-1 bg-gold-500 rounded-full"}),(he=Y.changeRequest)==null?void 0:he.newTime]})]})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.jsxs("button",{onClick:()=>{var Se,we;return N(Y.id,"approve",(Se=Y.changeRequest)==null?void 0:Se.newDate,(we=Y.changeRequest)==null?void 0:we.newTime)},className:"bg-green-600/90 hover:bg-green-500 text-white font-bold py-3 rounded-lg transition-all text-sm shadow-lg shadow-green-900/20 flex items-center justify-center gap-2 active:scale-95",children:[C.jsx(Te,{name:"check",size:16}),"Onayla"]}),C.jsxs("button",{onClick:()=>N(Y.id,"reject"),className:"bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 font-medium py-3 rounded-lg transition-all text-sm border border-red-500/30 flex items-center justify-center gap-2 active:scale-95",children:[C.jsx(Te,{name:"close",size:16}),"Reddet"]})]})]})]},Y.id)})})]}),C.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[C.jsx("div",{className:"w-full lg:w-1/3 space-y-6",children:C.jsxs(fn,{children:[C.jsxs("div",{className:"flex justify-between items-center mb-4",children:[C.jsxs("h3",{className:"text-xl font-serif flex items-center gap-2",children:[C.jsx(Te,{name:"user",className:"text-gold-400"}),"Personel"]}),C.jsx("button",{onClick:()=>l(!r),className:"bg-gold-500/20 hover:bg-gold-500 text-gold-400 hover:text-black p-2 rounded-lg transition-colors text-xs font-bold",children:r?"ptal":"+ Ekle"})]}),r&&C.jsxs("form",{onSubmit:q,className:"bg-white/5 p-4 rounded-xl mb-4 border border-gold-500/30 animate-fade-in space-y-3",children:[C.jsx("div",{className:"text-sm text-gold-400 font-bold mb-2",children:"Yeni Personel Bilgileri"}),C.jsx("input",{placeholder:"Ad Soyad",value:re,onChange:Y=>ce(Y.target.value),className:"w-full glass-input p-2 rounded text-sm",required:!0}),C.jsx("input",{placeholder:"Telefon (Giri ID)",value:le,onChange:Y=>M(Y.target.value),className:"w-full glass-input p-2 rounded text-sm",required:!0}),C.jsx("input",{placeholder:"ifre",value:V,onChange:Y=>x(Y.target.value),className:"w-full glass-input p-2 rounded text-sm",required:!0}),C.jsx("input",{placeholder:"Uzmanlk",value:U,onChange:Y=>P(Y.target.value),className:"w-full glass-input p-2 rounded text-sm"}),C.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gold-500 text-black font-bold py-2 rounded text-sm hover:bg-gold-400",children:c?"...":"Kaydet"})]}),C.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:Oe.map(Y=>C.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[C.jsx("img",{src:Y.avatar,alt:Y.name,className:"w-10 h-10 rounded-full border border-gold-500/30 object-cover"}),C.jsxs("div",{className:"flex-1",children:[C.jsxs("div",{className:"font-medium text-white text-sm flex items-center gap-2",children:[Y.name,Y.role===at.ADMIN&&C.jsx(Te,{name:"crown",size:10,className:"text-gold-400"})]}),C.jsx("div",{className:"text-xs text-gray-400",children:Y.specialty||"Personel"})]})]},Y.id))})]})}),C.jsxs("div",{className:"w-full lg:w-2/3 space-y-4",children:[C.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-wrap gap-4 items-center justify-between",children:[C.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[C.jsx(Te,{name:"scissors",size:16,className:"text-gray-400"}),C.jsx("input",{type:"text",placeholder:"Mteri veya Hizmet Ara...",value:j,onChange:Y=>Q(Y.target.value),className:"bg-transparent border-none outline-none text-white text-sm w-full placeholder-gray-500"})]}),C.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 md:pb-0",children:[C.jsxs("select",{value:D,onChange:Y=>F(Y.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-3 py-1 text-sm text-white focus:border-gold-500 outline-none",children:[C.jsx("option",{value:"upcoming",children:"Gelecek"}),C.jsx("option",{value:"past",children:"Gemi"}),C.jsx("option",{value:"all",children:"Tm"})]}),C.jsxs("select",{value:S,onChange:Y=>R(Y.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-3 py-1 text-sm text-white focus:border-gold-500 outline-none",children:[C.jsx("option",{value:"all",children:"Durum"}),C.jsx("option",{value:"pending",children:"Bekleyen"}),C.jsx("option",{value:"confirmed",children:"Onayl"})]})]})]}),C.jsx("div",{className:"space-y-6",children:Ee.length===0?C.jsx("div",{className:"text-center py-12 text-gray-500 border border-dashed border-white/10 rounded-xl",children:"Kriterlere uygun randevu bulunamad."}):Ee.map(Y=>{const ae=new Date(Y),he=Y===qi(),Se=ae.toLocaleDateString("tr-TR",{weekday:"long",day:"numeric",month:"long"});return C.jsxs("div",{className:"animate-slide-up",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[C.jsx("div",{className:`w-2 h-2 rounded-full ${he?"bg-gold-500 animate-pulse":"bg-gray-500"}`}),C.jsx("h4",{className:`text-sm font-bold uppercase tracking-wider ${he?"text-white":"text-gray-400"}`,children:he?"Bugn":Se}),C.jsx("div",{className:"flex-1 h-[1px] bg-white/5"})]}),C.jsx("div",{className:"space-y-3",children:ue[Y].map(we=>C.jsx(fn,{onClick:()=>De(we),className:`p-4 hover:border-white/30 group transition-all cursor-pointer ${we.status==="cancelled"?"opacity-50 border-red-900/30":""}`,children:C.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsxs("div",{className:`p-3 rounded-lg text-center min-w-[70px] ${we.status==="cancelled"?"bg-red-900/20":"bg-white/5"}`,children:[C.jsx("div",{className:"text-lg font-bold text-white",children:we.time}),C.jsx("div",{className:"text-[10px] text-gray-400 uppercase",children:"Saat"})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"font-bold text-white text-lg flex items-center gap-2",children:[we.customerName,we.adminProposal&&we.adminProposal.status==="pending"&&C.jsx("span",{className:"text-[10px] bg-blue-500 text-white px-1.5 rounded animate-pulse",children:"Teklif Var"})]}),C.jsx("div",{className:"text-gold-400 text-sm",children:we.serviceName}),C.jsxs("div",{className:"text-gray-500 text-xs mt-1 flex items-center gap-1",children:[C.jsx(Te,{name:"user",size:10}),we.staffName]})]})]}),C.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[C.jsx(fC,{status:we.status,className:"font-bold uppercase tracking-wide"}),C.jsx(Te,{name:"chevronRight",size:16,className:"text-gray-600 group-hover:text-white transition-colors"})]})]})},we.id))})]},Y)})})]})]}),C.jsx(lk,{isOpen:g,onClose:()=>p(!1),existingAppointment:_,staffMembers:Oe})]})},fk=5e3,dk=()=>window.__PLAYWRIGHT__===!0||window.Cypress!==void 0||navigator.webdriver===!0,hk=({onComplete:n})=>{const[e,t]=de.useState(0),s=de.useRef(!1),r=de.useRef(!0),l=de.useCallback(()=>{if(!s.current&&r.current){s.current=!0;try{n()}catch(c){console.error("IntroAnimation onComplete error:",c),t(3),setTimeout(()=>{r.current&&(s.current=!0)},1e3)}}},[n]);return de.useEffect(()=>{if(dk()){console.log("Test environment detected, skipping intro animation"),l();return}if(s.current)return;const c=[setTimeout(()=>{r.current&&t(1)},500),setTimeout(()=>{r.current&&t(2)},2e3),setTimeout(()=>{r.current&&t(3)},3500),setTimeout(()=>l(),4500),setTimeout(()=>l(),fk)];return()=>{r.current=!1,c.forEach(clearTimeout)}},[l]),C.jsxs("div",{className:`fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center transition-opacity duration-1000 ${e===3?"opacity-0 pointer-events-none":"opacity-100"}`,children:[C.jsxs("button",{onClick:l,className:"absolute top-6 right-6 z-50 flex items-center gap-2 text-white/40 hover:text-white transition-colors text-sm uppercase tracking-widest group",children:["Tantm Atla",C.jsx(Te,{name:"chevronRight",size:16,className:"group-hover:translate-x-1 transition-transform"})]}),C.jsxs("div",{className:"relative z-10 text-center px-4",children:[C.jsx("h1",{className:`text-4xl md:text-6xl font-serif text-gold-400 tracking-widest mb-6 transition-all duration-1000 transform
            ${e>=1?"opacity-100 translate-y-0 blur-0":"opacity-0 translate-y-10 blur-sm"}`,children:"TARIK YALIN"}),C.jsx("h2",{className:`text-xl md:text-3xl font-light text-white tracking-[0.3em] uppercase transition-all duration-1000 delay-300 transform
            ${e>=1?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:"Hair Design"}),C.jsx("div",{className:`w-32 h-[1px] bg-gradient-to-r from-transparent via-gold-500 to-transparent mx-auto my-8 transition-all duration-1000 delay-500
          ${e>=1?"w-32 opacity-100":"w-0 opacity-0"}`}),C.jsx("div",{className:`text-2xl font-serif italic text-gray-300 transition-all duration-1000 transform
            ${e>=2?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:"Hogeldiniz"})]}),C.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1633681926022-84c23e8cb2d6?q=80&w=2070')] bg-cover bg-center opacity-20 mix-blend-overlay"})]})},mk=({currentUser:n,onComplete:e,onCancel:t})=>{const[s,r]=de.useState("SERVICE"),[l,c]=de.useState(null),[d,g]=de.useState(null),[p,_]=de.useState(qi()),[T,S]=de.useState(null),[R,k]=de.useState([]),[O,D]=de.useState([]),[F,j]=de.useState(!1);de.useEffect(()=>{yf().then(ve=>{k(ve.filter(De=>De.role===at.STAFF||De.role===at.ADMIN))});const N=qp(ve=>{D(ve)});return()=>N()},[]);const Q=()=>{const N=[];let ve=10;const De=20;for(let W=ve;W<De;W++)N.push(`${W}:00`),N.push(`${W}:30`);return N},re=N=>!d||!p?!1:O.some(ve=>ve.staffId===d.id&&ve.date===p&&ve.time===N),ce=N=>{c(N),r("STAFF")},le=N=>{g(N),r("DATETIME")},M=N=>{S(N),r("CONFIRM")},V=async()=>{if(!(!l||!d||!p||!T)){j(!0);try{const N={customerId:n.id,customerName:n.name,staffId:d.id,staffName:d.name,date:p,time:T,serviceId:l.id,serviceName:l.name,status:"pending"};await mA(N),e()}catch(N){alert("Randevu oluturulurken bir hata olutu."),console.error(N)}finally{j(!1)}}},x=()=>C.jsxs("div",{className:"space-y-4 animate-slide-up",children:[C.jsx("h3",{className:"text-xl font-serif text-white mb-6",children:"Hizmet Seimi"}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Wr.map(N=>C.jsxs(fn,{onClick:()=>ce(N),className:"group flex items-center gap-4 active:bg-gold-500/10 md:hover:bg-gold-500/10 border-white/10 cursor-pointer",children:[C.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 border border-white/20",children:C.jsx("img",{src:N.image,alt:N.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"})}),C.jsxs("div",{className:"flex-1 text-left",children:[C.jsx("div",{className:"font-medium text-white group-hover:text-gold-400 transition-colors",children:N.name}),C.jsxs("div",{className:"text-xs text-gray-400",children:[N.durationMin," Dakika"]})]}),C.jsxs("div",{className:"text-gold-400 font-bold",children:["",N.price]})]},N.id))})]}),U=()=>C.jsxs("div",{className:"space-y-4 animate-slide-up",children:[C.jsx("h3",{className:"text-xl font-serif text-white mb-6",children:"Personel Seimi"}),C.jsx("div",{className:"grid grid-cols-1 gap-3",children:R.length===0?C.jsx("div",{className:"text-gray-400 text-center py-4",children:"Personel listesi ykleniyor..."}):R.map(N=>C.jsxs(fn,{onClick:()=>le(N),className:"flex items-center gap-4 active:bg-white/10 md:hover:bg-white/10 cursor-pointer",children:[C.jsx("img",{src:N.avatar||"https://via.placeholder.com/150",alt:N.name,className:"w-14 h-14 rounded-full border-2 border-gold-500/50 object-cover"}),C.jsxs("div",{className:"flex-1 text-left",children:[C.jsx("div",{className:"font-bold text-white",children:N.name}),C.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider",children:N.specialty||N.role})]}),C.jsx(Te,{name:"chevronRight",className:"text-gray-600"})]},N.id))})]}),P=()=>{const N=Q();return C.jsxs("div",{className:"space-y-6 animate-slide-up",children:[C.jsx("h3",{className:"text-xl font-serif text-white",children:"Tarih ve Saat"}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-sm text-gray-400",children:"Tarih"}),C.jsx("input",{type:"date",value:p,min:qi(),onChange:ve=>_(ve.target.value),className:"w-full glass-input p-4 rounded-xl text-lg md:text-base appearance-none"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"text-sm text-gray-400",children:["Uygun Saatler (",d==null?void 0:d.name,")"]}),C.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar pb-10",children:N.map(ve=>{const De=re(ve);return C.jsx("button",{disabled:De,onClick:()=>M(ve),className:`
                    py-3 md:py-2 rounded-lg text-base font-medium transition-all shadow-sm
                    ${De?"bg-red-500/10 text-red-400 cursor-not-allowed border border-red-500/20":"bg-white/5 text-white active:bg-gold-500 active:text-black md:hover:bg-gold-500 md:hover:text-black border border-white/10"}
                  `,children:ve},ve)})}),C.jsxs("div",{className:"flex gap-4 text-xs mt-2",children:[C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx("div",{className:"w-2 h-2 rounded-full bg-white/20"})," Bo"]}),C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500/50"})," Dolu"]})]})]})]})},q=()=>C.jsxs("div",{className:"space-y-6 animate-slide-up text-center",children:[C.jsx("div",{className:"w-20 h-20 bg-gold-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:C.jsx(Te,{name:"check",size:40,className:"text-gold-400"})}),C.jsx("h3",{className:"text-2xl font-serif text-white",children:"Randevu zeti"}),C.jsxs("div",{className:"bg-white/5 rounded-xl p-6 space-y-4 text-left border border-white/10",children:[C.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[C.jsx("span",{className:"text-gray-400",children:"Hizmet"}),C.jsx("span",{className:"font-medium",children:l==null?void 0:l.name})]}),C.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[C.jsx("span",{className:"text-gray-400",children:"Personel"}),C.jsx("span",{className:"font-medium",children:d==null?void 0:d.name})]}),C.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[C.jsx("span",{className:"text-gray-400",children:"Tarih"}),C.jsx("span",{className:"font-medium",children:p})]}),C.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[C.jsx("span",{className:"text-gray-400",children:"Saat"}),C.jsx("span",{className:"font-medium",children:T})]}),C.jsxs("div",{className:"flex justify-between pt-2",children:[C.jsx("span",{className:"text-gold-400",children:"Toplam"}),C.jsxs("span",{className:"text-xl font-bold text-gold-400",children:["",l==null?void 0:l.price]})]})]}),C.jsx("button",{onClick:V,disabled:F,className:`w-full font-bold py-4 rounded-xl transition-colors shadow-lg shadow-gold-500/20 flex justify-center items-center gap-2
          ${F?"bg-gray-700 cursor-wait text-gray-300":"bg-gold-500 text-black active:bg-gold-600 md:hover:bg-gold-400"}
        `,children:F?"leniyor...":"Randevuyu Onayla"})]});return C.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[C.jsx("div",{className:"flex items-center justify-between mb-8 px-4",children:["Service","Staff","Time","Confirm"].map((N,ve)=>{const De=["SERVICE","STAFF","DATETIME","CONFIRM"].indexOf(s);return C.jsx("div",{className:"flex flex-col items-center",children:C.jsx("div",{className:`w-3 h-3 rounded-full transition-colors duration-300 ${ve<=De?"bg-gold-500":"bg-gray-700"}`})},N)})}),C.jsxs(fn,{className:"relative min-h-[400px]",children:[C.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-red-400 hover:bg-white/5 rounded-full transition-all z-10",title:"Kapat",children:C.jsx(Te,{name:"close",size:24})}),s==="SERVICE"&&x(),s==="STAFF"&&U(),s==="DATETIME"&&P(),s==="CONFIRM"&&q(),s!=="SERVICE"&&s!=="CONFIRM"&&C.jsxs("button",{onClick:()=>{s==="STAFF"&&r("SERVICE"),s==="DATETIME"&&r("STAFF")},className:"mt-6 text-sm text-gray-400 hover:text-white flex items-center gap-1 p-2",children:[C.jsx("span",{className:"rotate-180 inline-block",children:C.jsx(Te,{name:"chevronRight",size:14})})," Geri"]})]})]})},pk=({onLogin:n,onClose:e,onSwitchToAdmin:t})=>{const[s,r]=de.useState(!0),[l,c]=de.useState(!1),[d,g]=de.useState(null),[p,_]=de.useState(""),[T,S]=de.useState(""),[R,k]=de.useState(""),O=async D=>{D.preventDefault(),g(null),c(!0);try{if(s){const F=await dA(T,R);F?F.role==="ADMIN"||F.role==="STAFF"?g("Personel girii iin ltfen Ynetici Panelini kullann."):n(F):g("Telefon numaras veya ifre hatal.")}else{if(!p||!T||!R){g("Ltfen tm alanlar doldurun."),c(!1);return}const F=await hA(p,T,R);n(F)}}catch(F){console.error(F),g(F.message||"Bir hata olutu.")}finally{c(!1)}};return C.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-md animate-fade-in",children:C.jsxs(fn,{className:"w-full max-w-md relative overflow-hidden",children:[C.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10",children:C.jsx(Te,{name:"close",size:24})}),C.jsxs("div",{className:"flex border-b border-white/10 mb-6",children:[C.jsx("button",{onClick:()=>{r(!0),g(null)},className:`flex-1 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${s?"text-gold-400 border-b-2 border-gold-400":"text-gray-500 hover:text-gray-300"}`,children:"Giri Yap"}),C.jsx("button",{onClick:()=>{r(!1),g(null)},className:`flex-1 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${s?"text-gray-500 hover:text-gray-300":"text-gold-400 border-b-2 border-gold-400"}`,children:"Kayt Ol"})]}),C.jsxs("div",{className:"text-center mb-6",children:[C.jsx(Te,{name:s?"user":"sparkles",size:40,className:"text-gold-400 mx-auto mb-2"}),C.jsx("h3",{className:"text-xl font-serif text-white",children:s?"Tekrar Hogeldiniz":"TYRANDEVU Ailesine Katln"})]}),C.jsxs("form",{onSubmit:O,className:"space-y-4",children:[!s&&C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Ad Soyad"}),C.jsx("input",{type:"text",value:p,onChange:D=>_(D.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:"rn: Ahmet Ylmaz"})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Telefon Numaras"}),C.jsx("input",{type:"tel",value:T,onChange:D=>S(D.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:"0555 555 55 55"})]}),C.jsxs("div",{className:"space-y-1",children:[C.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"ifre"}),C.jsx("input",{type:"password",value:R,onChange:D=>k(D.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:""})]}),d&&C.jsx("div",{className:"text-red-400 text-sm text-center bg-red-400/10 p-2 rounded-lg",children:d}),C.jsx("button",{type:"submit",disabled:l,className:`w-full py-4 rounded-xl font-bold text-black transition-all mt-4
              ${l?"bg-gray-600 cursor-wait":"bg-gold-500 hover:bg-gold-400 shadow-lg shadow-gold-500/20"}
            `,children:l?"leniyor...":s?"Giri Yap":"Hesap Olutur"})]}),C.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:C.jsxs("button",{onClick:t,className:"text-xs text-gray-500 hover:text-gold-400 transition-colors uppercase tracking-widest font-semibold flex items-center justify-center gap-1 mx-auto",children:[C.jsx(Te,{name:"shield",size:12}),"Personel / Ynetici Girii"]})})]})})},gk=({onLogin:n,onClose:e,onSwitchToCustomer:t})=>{const[s,r]=de.useState(""),[l,c]=de.useState(""),[d,g]=de.useState(null),[p,_]=de.useState(!1),T=async S=>{S.preventDefault(),_(!0),g(null);try{const R=await dA(s,l);R?R.role==="CUSTOMER"?g("Bu panelden sadece yetkili personel giri yapabilir."):n(R):g("Giri bilgileri hatal.")}catch(R){console.error(R),g("Balant hatas.")}finally{_(!1)}};return C.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-fade-in",children:C.jsxs(fn,{className:"w-full max-w-sm relative border-red-500/20 shadow-red-900/20",children:[C.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:C.jsx(Te,{name:"close",size:24})}),C.jsxs("div",{className:"text-center space-y-6 py-4",children:[C.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:C.jsx(Te,{name:"shield",size:32,className:"text-red-400"})}),C.jsx("h3",{className:"text-xl font-serif text-white",children:"Ynetici & Personel Girii"}),C.jsxs("form",{onSubmit:T,className:"space-y-4",children:[C.jsx("input",{type:"text",value:s,onChange:S=>r(S.target.value),placeholder:"Kullanc No / Telefon",className:"w-full glass-input p-3 rounded-lg border-red-500/30 focus:border-red-500"}),C.jsx("input",{type:"password",value:l,onChange:S=>c(S.target.value),placeholder:"ifre",className:"w-full glass-input p-3 rounded-lg border-red-500/30 focus:border-red-500"}),d&&C.jsx("div",{className:"text-red-400 text-sm",children:d}),C.jsx("button",{type:"submit",disabled:p,className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-lg transition-colors shadow-lg shadow-red-600/20",children:p?"Kontrol Ediliyor...":"Giri Yap"})]}),C.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 text-center",children:C.jsx("button",{onClick:t,className:"text-xs text-gray-500 hover:text-white transition-colors",children:" Mteri Giriine Dn"})})]})]})})},yk=({currentUser:n})=>{const[e,t]=de.useState([]),[s,r]=de.useState(null),[l,c]=de.useState(""),[d,g]=de.useState(""),[p,_]=de.useState(!1);de.useEffect(()=>{const D=qp(F=>{const j=F.filter(Q=>Q.customerId===n.id);j.sort((Q,re)=>new Date(re.date).getTime()-new Date(Q.date).getTime()),t(j)});return()=>D()},[n.id]);const T=(D,F)=>{D.stopPropagation(),r(F.id),c(F.date),g(F.time)},S=async D=>{if(D.stopPropagation(),!(!s||!l||!d)){_(!0);try{await mN(s,l,d),alert("Deiiklik talebiniz iletildi. Admin onay bekleniyor."),r(null)}catch(F){console.error(F),alert("Hata olutu.")}finally{_(!1)}}},R=async(D,F)=>{if(D.stopPropagation(),!!confirm("Deiiklik talebini iptal etmek istediinize emin misiniz?"))try{await pN(F)}catch(j){console.error(j),alert("lem baarsz")}},k=async(D,F)=>{if(D.stopPropagation(),!!confirm("Randevuyu tamamen PTAL etmek zeresiniz. Onaylyor musunuz?"))try{await dN(F)}catch(j){console.error(j),alert("ptal ilemi baarsz")}},O=async(D,F,j,Q)=>{if(D.stopPropagation(),!!Q){_(!0);try{j?(await _N(F,Q.newDate,Q.newTime),alert("Yeni randevu saati onayland!")):await TN(F)}catch(re){console.error(re),alert("lem baarsz.")}finally{_(!1)}}};return e.length===0?null:C.jsxs("div",{className:"animate-slide-up mt-8",children:[C.jsxs("h3",{className:"text-xl font-serif text-white mb-4 flex items-center gap-2",children:[C.jsx(Te,{name:"calendar",className:"text-gold-400"}),"Randevularm"]}),C.jsx("div",{className:"space-y-4",children:e.map(D=>C.jsxs(fn,{className:`relative border-l-4 ${D.status==="cancelled"?"border-l-red-500 opacity-60":"border-l-gold-500"}`,children:[D.adminProposal&&D.adminProposal.status==="pending"&&C.jsxs("div",{className:"mb-4 bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 animate-pulse",children:[C.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold text-sm mb-2",children:[C.jsx(Te,{name:"sparkles",size:16}),"Salon nerisi (Deiiklik Teklifi)"]}),C.jsx("div",{className:"text-gray-300 text-xs mb-3",children:"Salonumuz randevu saatiniz iin bir deiiklik neriyor:"}),C.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-2 rounded mb-3",children:[C.jsxs("div",{className:"text-gray-500 line-through text-xs",children:[D.date," ",D.time]}),C.jsx(Te,{name:"chevronRight",size:12,className:"text-blue-500"}),C.jsxs("div",{className:"text-white font-bold text-sm",children:[D.adminProposal.newDate," ",D.adminProposal.newTime]})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("button",{onClick:F=>O(F,D.id,!0,D.adminProposal),disabled:p,className:"flex-1 bg-blue-500 text-white text-xs font-bold py-2 rounded hover:bg-blue-400",children:"Kabul Et"}),C.jsx("button",{onClick:F=>O(F,D.id,!1,D.adminProposal),disabled:p,className:"flex-1 bg-white/10 text-white text-xs font-bold py-2 rounded hover:bg-white/20",children:"Reddet"})]})]}),C.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[C.jsxs("div",{className:"space-y-1",children:[C.jsxs("div",{className:"font-bold text-lg text-white flex items-center gap-2",children:[D.serviceName,D.status==="cancelled"&&C.jsx("span",{className:"text-xs bg-red-500 text-white px-2 py-0.5 rounded",children:"PTAL EDLD"})]}),C.jsxs("div",{className:"text-gray-300 flex items-center gap-2",children:[C.jsx(Te,{name:"user",size:14}),D.staffName]}),C.jsxs("div",{className:"text-gold-400 font-mono text-sm flex items-center gap-2",children:[C.jsx(Te,{name:"calendar",size:14}),D.date," ",C.jsx("span",{className:"text-white/50",children:"|"})," ",D.time]}),C.jsxs("div",{className:"flex gap-2 mt-2",children:[D.status!=="cancelled"&&C.jsx(fC,{status:D.status}),D.changeRequest&&D.changeRequest.status==="pending"&&C.jsxs("span",{className:"text-xs px-2 py-1 rounded-full border border-blue-500/50 bg-blue-500/10 text-blue-400 flex items-center gap-1 animate-pulse",children:[C.jsx(Te,{name:"sparkles",size:10})," Deiiklik Bekleniyor"]}),D.changeRequest&&D.changeRequest.status==="rejected"&&C.jsx("span",{className:"text-xs px-2 py-1 rounded-full border border-red-500/50 bg-red-500/10 text-red-400",children:"Deiiklik Reddedildi"})]})]}),C.jsx("div",{className:"w-full md:w-auto",children:D.status!=="cancelled"&&C.jsx(C.Fragment,{children:s===D.id?C.jsxs("div",{className:"bg-white/10 p-4 rounded-lg space-y-3 animate-fade-in",onClick:F=>F.stopPropagation(),children:[C.jsx("div",{className:"text-sm text-gold-400 font-bold mb-1",children:"Yeni Tarih & Saat Sein"}),C.jsx("input",{type:"date",value:l,min:qi(),onChange:F=>c(F.target.value),className:"w-full glass-input p-2 rounded text-sm"}),C.jsxs("select",{value:d,onChange:F=>g(F.target.value),className:"w-full glass-input p-2 rounded text-sm",children:[C.jsx("option",{value:"",className:"bg-slate-900",children:"Saat Sein"}),Array.from({length:20},(F,j)=>{const Q=Math.floor(j/2)+10,re=j%2===0?"00":"30";return`${Q}:${re}`}).map(F=>C.jsx("option",{value:F,className:"bg-slate-900 text-white",children:F},F))]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("button",{onClick:S,disabled:p,className:"flex-1 bg-gold-500 text-black text-xs font-bold py-2 rounded hover:bg-gold-400",children:p?"...":"Gnder"}),C.jsx("button",{onClick:F=>{F.stopPropagation(),r(null)},className:"flex-1 bg-white/10 text-white text-xs font-bold py-2 rounded hover:bg-white/20",children:"ptal"})]})]}):C.jsxs("div",{className:"flex flex-col gap-2",children:[D.changeRequest&&D.changeRequest.status==="pending"?C.jsxs("button",{onClick:F=>R(F,D.id),className:"w-full px-4 py-2 bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-all text-xs font-bold flex items-center justify-center gap-1",children:[C.jsx(Te,{name:"close",size:12})," Talebi Geri ek"]}):C.jsx("button",{onClick:F=>T(F,D),className:"w-full px-4 py-2 bg-white/5 border border-white/10 hover:border-gold-500 hover:text-gold-400 text-gray-300 rounded-lg transition-all text-xs font-bold",children:"Deiiklik Talep Et"}),C.jsx("button",{onClick:F=>k(F,D.id),className:"w-full px-4 py-2 bg-red-500/10 border border-red-500/30 text-red-400 hover:bg-red-500/20 rounded-lg transition-all text-xs font-bold",children:"Randevuyu ptal Et"})]})})})]})]},D.id))})]})},vk=({currentView:n,setCurrentView:e,currentUser:t,onLoginClick:s,onLogoutClick:r})=>{const l=c=>`
    flex flex-col items-center justify-center w-full h-full space-y-1
    transition-colors duration-200
    ${c?"text-gold-400":"text-gray-500 hover:text-gray-300"}
  `;return C.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-black/90 backdrop-blur-xl border-t border-white/10 z-50 pb-safe-bottom",children:C.jsxs("div",{className:"flex justify-around items-center h-full px-2",children:[C.jsxs("button",{onClick:()=>e("DASHBOARD"),className:l(n==="DASHBOARD"),children:[C.jsx(Te,{name:(t==null?void 0:t.role)===at.ADMIN||(t==null?void 0:t.role)===at.STAFF?"shield":"scissors",size:24}),C.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:(t==null?void 0:t.role)===at.ADMIN?"Panel":"Ana Sayfa"})]}),C.jsxs("button",{onClick:()=>e("AI_CONSULT"),className:l(n==="AI_CONSULT"),children:[C.jsx(Te,{name:"sparkles",size:24}),C.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:"AI Stil"})]}),t?C.jsxs("button",{onClick:r,className:l(!1),children:[C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:t.avatar||"https://via.placeholder.com/150",alt:"Profile",className:"w-6 h-6 rounded-full border border-gold-500/50"}),C.jsx("div",{className:"absolute -bottom-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full border border-black"})]}),C.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:"k"})]}):C.jsxs("button",{onClick:s,className:l(!1),children:[C.jsx(Te,{name:"user",size:24}),C.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:"Giri"})]})]})})};function _k(){const[n,e]=de.useState(!0),[t,s]=de.useState(null),[r,l]=de.useState("DASHBOARD"),[c,d]=de.useState(!1),[g,p]=de.useState(!1),[_,T]=de.useState([]),[S,R]=de.useState(!0),[k,O]=de.useState(null);de.useEffect(()=>{(async()=>{try{await cN();const le=await yf();T(le)}catch(le){console.error("Failed to load users",le),O("Veritaban balants baarsz. Baz zellikler almayabilir."),setTimeout(()=>O(null),5e3)}finally{R(!1)}})()},[]);const D=de.useCallback(()=>{e(!1)},[]),F=ce=>{s(ce),d(!1),p(!1),(ce.role===at.ADMIN||ce.role===at.STAFF)&&l("DASHBOARD")},j=()=>{s(null),l("DASHBOARD")},Q=()=>{t?l("BOOKING"):d(!0)},re=()=>C.jsxs("div",{className:"flex flex-col min-h-screen",children:[C.jsx("nav",{className:"hidden md:block fixed top-0 left-0 right-0 z-50 glass-panel border-b border-white/10 backdrop-blur-xl transition-all",children:C.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:C.jsxs("div",{className:"flex items-center justify-between h-20",children:[C.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group select-none",onClick:()=>l("DASHBOARD"),children:[C.jsx("div",{className:"p-2 rounded-lg bg-gold-500/10 group-hover:bg-gold-500/20 transition-colors",children:C.jsx(Te,{name:"scissors",className:"text-gold-400",size:24})}),C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-lg font-serif tracking-wide font-bold leading-none",children:R0}),C.jsx("span",{className:"text-[0.6rem] text-gray-400 tracking-[0.2em] uppercase leading-none mt-1",children:"Hair Design"})]})]}),C.jsxs("div",{className:"flex items-center gap-8",children:[C.jsxs("button",{onClick:()=>l("DASHBOARD"),className:`text-sm uppercase tracking-widest hover:text-gold-400 transition-colors relative py-2 ${r==="DASHBOARD"?"text-gold-400":"text-gray-300"}`,children:["Ana Sayfa",r==="DASHBOARD"&&C.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gold-400 shadow-[0_0_10px_rgba(212,175,55,0.5)]"})]}),C.jsxs("button",{onClick:()=>l("AI_CONSULT"),className:`text-sm uppercase tracking-widest hover:text-gold-400 transition-colors relative py-2 ${r==="AI_CONSULT"?"text-gold-400":"text-gray-300"}`,children:["AI Stilist",r==="AI_CONSULT"&&C.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gold-400 shadow-[0_0_10px_rgba(212,175,55,0.5)]"})]}),C.jsx("div",{className:"flex items-center gap-4 pl-8 border-l border-white/10",children:t?C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"text-right",children:[C.jsx("div",{className:"text-sm font-medium text-white",children:t.name}),C.jsx("div",{className:"text-xs text-gold-500 uppercase font-bold tracking-wider",children:t.role})]}),C.jsx("img",{src:t.avatar||"https://via.placeholder.com/150",alt:"Profile",className:"w-10 h-10 rounded-full border border-gold-500/50"}),C.jsx("button",{onClick:j,className:"text-gray-400 hover:text-red-400 transition-colors",title:"k Yap",children:C.jsx(Te,{name:"logout",size:20})})]}):C.jsx("button",{"data-testid":"login-button",onClick:()=>d(!0),className:"px-6 py-2 bg-gold-500/10 hover:bg-gold-500 text-gold-400 hover:text-black border border-gold-500 rounded-lg transition-all text-sm font-bold tracking-wide",children:"Giri Yap"})})]})]})})}),C.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-black/80 backdrop-blur-md border-b border-white/10 h-16 flex items-center justify-center",children:C.jsxs("div",{className:"flex items-center gap-2",onClick:()=>l("DASHBOARD"),children:[C.jsx(Te,{name:"scissors",className:"text-gold-400",size:20}),C.jsx("span",{className:"text-lg font-serif font-bold text-white tracking-widest",children:R0})]})}),C.jsxs("main",{className:"flex-1 pt-20 md:pt-28 pb-24 md:pb-10 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full",children:[t&&(t.role===at.ADMIN||t.role===at.STAFF)&&r==="DASHBOARD"?C.jsx(ck,{}):r==="DASHBOARD"&&C.jsxs("div",{className:"space-y-6 md:space-y-8 animate-slide-up",children:[C.jsxs("div",{className:"md:hidden text-center space-y-2 mb-4",children:[C.jsx("h2",{className:"text-2xl font-serif text-white",children:t?`Merhaba, ${t.name.split(" ")[0]}`:"Hogeldiniz"}),C.jsx("p",{className:"text-gray-400 text-sm",children:"TYRANDEVU Premium Deneyimi"})]}),C.jsxs("div",{className:"hidden md:flex flex-col md:flex-row justify-between items-end gap-4 border-b border-white/10 pb-6",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-4xl font-serif text-white",children:t?`Hogeldiniz, ${t.name}`:"Stilinizi Kefedin"}),C.jsx("p",{className:"text-gray-400 mt-2 text-lg",children:t?"Bugn kendin iin bir iyilik yap.":"Premium sa tasarm ve kiisel bakm deneyimi."})]}),(t==null?void 0:t.role)===at.CUSTOMER&&C.jsxs("div",{className:"px-4 py-2 bg-gold-500/10 border border-gold-500/20 rounded-full text-gold-400 text-sm flex items-center gap-2",children:[C.jsx(Te,{name:"check",size:16})," Premium ye"]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[C.jsxs(fn,{onClick:()=>l("AI_CONSULT"),className:"group min-h-[200px] md:min-h-[300px] flex flex-col justify-center items-center text-center p-6 md:p-8 border-gold-500/20 active:scale-95 md:active:scale-100 md:hover:border-gold-500/50 bg-gradient-to-br from-white/5 to-transparent hover:to-gold-500/5 relative overflow-hidden transition-all duration-300",children:[C.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-50",children:C.jsx(Te,{name:"sparkles",size:80,className:"text-white/5"})}),C.jsx("div",{className:"w-16 h-16 md:w-24 md:h-24 rounded-full bg-gold-500/10 flex items-center justify-center mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-500 border border-gold-500/20 z-10",children:C.jsx(Te,{name:"sparkles",size:32,className:"text-gold-400 md:w-12 md:h-12"})}),C.jsx("h3",{className:"text-xl md:text-3xl font-serif text-white mb-2 z-10",children:"AI Stil Danman"}),C.jsx("p",{className:"text-gray-400 text-sm md:text-base max-w-xs mx-auto leading-relaxed z-10",children:"Yz ekline en uygun sa modelini kefet."}),C.jsx("button",{className:"mt-4 md:mt-6 px-6 py-2 bg-white/5 md:hover:bg-gold-500 md:hover:text-black rounded-full text-sm transition-colors z-10 border border-white/10",children:"Hemen Dene"})]}),C.jsxs(fn,{onClick:Q,className:"group min-h-[200px] md:min-h-[300px] flex flex-col justify-center items-center text-center p-6 md:p-8 border-white/10 active:scale-95 md:active:scale-100 md:hover:border-white/30 bg-gradient-to-bl from-white/5 to-transparent hover:to-white/10 relative overflow-hidden transition-all duration-300",children:[C.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-50",children:C.jsx(Te,{name:"calendar",size:80,className:"text-white/5"})}),C.jsx("div",{className:"w-16 h-16 md:w-24 md:h-24 rounded-full bg-white/5 flex items-center justify-center mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-500 border border-white/10 z-10",children:C.jsx(Te,{name:"calendar",size:32,className:"text-white md:w-12 md:h-12"})}),C.jsx("h3",{className:"text-xl md:text-3xl font-serif text-white mb-2 z-10",children:"Randevu Olutur"}),C.jsx("p",{className:"text-gray-400 text-sm md:text-base max-w-xs mx-auto leading-relaxed z-10",children:"Hzlca yerini ayrt."}),C.jsx("button",{className:"mt-4 md:mt-6 px-6 py-2 bg-white/5 md:hover:bg-white md:hover:text-black rounded-full text-sm transition-colors z-10 border border-white/10",children:"Randevu Al"})]})]}),t&&t.role===at.CUSTOMER&&C.jsx(yk,{currentUser:t}),C.jsxs("div",{className:"mt-8 md:mt-16",children:[C.jsxs("h3",{className:"text-lg font-serif text-white mb-4 md:mb-6 flex items-center gap-2",children:[C.jsx("span",{className:"w-8 h-[1px] bg-gold-500"})," Popler Hizmetler"]}),C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:["Sa Kesimi","Sakal Tasarm","Cilt Bakm","Boya","Fn","Keratin","Manikr","Pedikr"].map((ce,le)=>C.jsx("div",{className:"glass-panel p-3 md:p-4 rounded-xl text-center active:bg-white/10 md:hover:bg-white/10 cursor-pointer transition-colors border-transparent md:hover:border-gold-500/20",children:C.jsx("span",{className:"text-gray-300 font-medium text-xs md:text-sm",children:ce})},le))})]})]}),r==="AI_CONSULT"&&C.jsx(ak,{onClose:()=>l("DASHBOARD")}),r==="BOOKING"&&t&&C.jsx(mk,{currentUser:t,onComplete:()=>{alert("Randevunuz baaryla oluturuldu!"),l("DASHBOARD")},onCancel:()=>l("DASHBOARD")})]}),C.jsx(vk,{currentView:r,setCurrentView:l,currentUser:t,onLoginClick:()=>d(!0),onLogoutClick:j}),c&&C.jsx(pk,{onLogin:F,onClose:()=>d(!1),onSwitchToAdmin:()=>{d(!1),p(!0)}}),g&&C.jsx(gk,{onLogin:F,onClose:()=>p(!1),onSwitchToCustomer:()=>{p(!1),d(!0)}})]});return C.jsxs(C.Fragment,{children:[k&&C.jsxs("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-[200] bg-red-500/90 backdrop-blur-md text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-fade-in",children:[C.jsx(Te,{name:"close",size:20}),C.jsx("span",{className:"text-sm",children:k})]}),n?C.jsx(hk,{onComplete:D}):re()]})}class Tk extends de.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error Boundary caught an error:",e,t)}render(){return this.state.hasError?C.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:C.jsxs("div",{className:"max-w-md w-full glass-panel rounded-2xl p-8 text-center",children:[C.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:C.jsx(Te,{name:"close",size:32,className:"text-red-400"})}),C.jsx("h1",{className:"text-2xl font-serif text-white mb-4",children:"Bir Sorun Olutu"}),C.jsx("p",{className:"text-gray-400 mb-6",children:"Uygulamay yklerken bir hata olutu. Ltfen sayfay yenileyin."}),C.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gold-500 hover:bg-gold-400 text-black rounded-lg font-bold transition-colors",children:"Sayfay Yenile"}),this.state.error&&C.jsxs("details",{className:"mt-6 text-left",children:[C.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Hata Detay"}),C.jsx("pre",{className:"mt-2 text-xs text-red-400 bg-black/30 p-3 rounded overflow-auto max-h-32",children:this.state.error.message})]})]})}):this.props.children}}const dC=document.getElementById("root");if(!dC)throw new Error("Could not find root element to mount to");const Ek=eR.createRoot(dC);Ek.render(C.jsx(Jw.StrictMode,{children:C.jsx(Tk,{children:C.jsx(_k,{})})}));
