(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function TE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kh={exports:{}},Rl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function Gw(){if(g0)return Rl;g0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:l}}return Rl.Fragment=e,Rl.jsx=t,Rl.jsxs=t,Rl}var y0;function Hw(){return y0||(y0=1,Kh.exports=Gw()),Kh.exports}var A=Hw(),$h={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function Yw(){if(v0)return Me;v0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,M={};function F(O,ee,H){this.props=O,this.context=ee,this.refs=M,this.updater=H||U}F.prototype.isReactComponent={},F.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},F.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Z(){}Z.prototype=F.prototype;function Q(O,ee,H){this.props=O,this.context=ee,this.refs=M,this.updater=H||U}var re=Q.prototype=new Z;re.constructor=Q,z(re,F.prototype),re.isPureReactComponent=!0;var de=Array.isArray;function ue(){}var N={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function I(O,ee,H){var ae=H.ref;return{$$typeof:n,type:O,key:ee,ref:ae!==void 0?ae:null,props:H}}function P(O,ee){return I(O.type,ee,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function q(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(H){return ee[H]})}var V=/\/+/g;function Ie(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):ee.toString(36)}function Ge(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ue,ue):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function W(O,ee,H,ae,me){var Se=typeof O;(Se==="undefined"||Se==="boolean")&&(O=null);var we=!1;if(O===null)we=!0;else switch(Se){case"bigint":case"string":case"number":we=!0;break;case"object":switch(O.$$typeof){case n:case e:we=!0;break;case _:return we=O._init,W(we(O._payload),ee,H,ae,me)}}if(we)return me=me(O),we=ae===""?"."+Ie(O,0):ae,de(me)?(H="",we!=null&&(H=we.replace(V,"$&/")+"/"),W(me,ee,H,"",function(vo){return vo})):me!=null&&(k(me)&&(me=P(me,H+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(V,"$&/")+"/")+we)),ee.push(me)),1;we=0;var Lt=ae===""?".":ae+":";if(de(O))for(var dt=0;dt<O.length;dt++)ae=O[dt],Se=Lt+Ie(ae,dt),we+=W(ae,ee,H,Se,me);else if(dt=x(O),typeof dt=="function")for(O=dt.call(O),dt=0;!(ae=O.next()).done;)ae=ae.value,Se=Lt+Ie(ae,dt++),we+=W(ae,ee,H,Se,me);else if(Se==="object"){if(typeof O.then=="function")return W(Ge(O),ee,H,ae,me);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return we}function le(O,ee,H){if(O==null)return O;var ae=[],me=0;return W(O,ae,"","",function(Se){return ee.call(H,Se,me++)}),ae}function Ee(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(H){(O._status===0||O._status===-1)&&(O._status=1,O._result=H)},function(H){(O._status===0||O._status===-1)&&(O._status=2,O._result=H)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var Ue=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},he={map:le,forEach:function(O,ee,H){le(O,function(){ee.apply(this,arguments)},H)},count:function(O){var ee=0;return le(O,function(){ee++}),ee},toArray:function(O){return le(O,function(ee){return ee})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Me.Activity=T,Me.Children=he,Me.Component=F,Me.Fragment=t,Me.Profiler=r,Me.PureComponent=Q,Me.StrictMode=s,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Me.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},Me.cache=function(O){return function(){return O.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(O,ee,H){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ae=z({},O.props),me=O.key;if(ee!=null)for(Se in ee.key!==void 0&&(me=""+ee.key),ee)!D.call(ee,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&ee.ref===void 0||(ae[Se]=ee[Se]);var Se=arguments.length-2;if(Se===1)ae.children=H;else if(1<Se){for(var we=Array(Se),Lt=0;Lt<Se;Lt++)we[Lt]=arguments[Lt+2];ae.children=we}return I(O.type,me,ae)},Me.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Me.createElement=function(O,ee,H){var ae,me={},Se=null;if(ee!=null)for(ae in ee.key!==void 0&&(Se=""+ee.key),ee)D.call(ee,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(me[ae]=ee[ae]);var we=arguments.length-2;if(we===1)me.children=H;else if(1<we){for(var Lt=Array(we),dt=0;dt<we;dt++)Lt[dt]=arguments[dt+2];me.children=Lt}if(O&&O.defaultProps)for(ae in we=O.defaultProps,we)me[ae]===void 0&&(me[ae]=we[ae]);return I(O,Se,me)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(O){return{$$typeof:d,render:O}},Me.isValidElement=k,Me.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:Ee}},Me.memo=function(O,ee){return{$$typeof:p,type:O,compare:ee===void 0?null:ee}},Me.startTransition=function(O){var ee=N.T,H={};N.T=H;try{var ae=O(),me=N.S;me!==null&&me(H,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(ue,Ue)}catch(Se){Ue(Se)}finally{ee!==null&&H.types!==null&&(ee.types=H.types),N.T=ee}},Me.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Me.use=function(O){return N.H.use(O)},Me.useActionState=function(O,ee,H){return N.H.useActionState(O,ee,H)},Me.useCallback=function(O,ee){return N.H.useCallback(O,ee)},Me.useContext=function(O){return N.H.useContext(O)},Me.useDebugValue=function(){},Me.useDeferredValue=function(O,ee){return N.H.useDeferredValue(O,ee)},Me.useEffect=function(O,ee){return N.H.useEffect(O,ee)},Me.useEffectEvent=function(O){return N.H.useEffectEvent(O)},Me.useId=function(){return N.H.useId()},Me.useImperativeHandle=function(O,ee,H){return N.H.useImperativeHandle(O,ee,H)},Me.useInsertionEffect=function(O,ee){return N.H.useInsertionEffect(O,ee)},Me.useLayoutEffect=function(O,ee){return N.H.useLayoutEffect(O,ee)},Me.useMemo=function(O,ee){return N.H.useMemo(O,ee)},Me.useOptimistic=function(O,ee){return N.H.useOptimistic(O,ee)},Me.useReducer=function(O,ee,H){return N.H.useReducer(O,ee,H)},Me.useRef=function(O){return N.H.useRef(O)},Me.useState=function(O){return N.H.useState(O)},Me.useSyncExternalStore=function(O,ee,H){return N.H.useSyncExternalStore(O,ee,H)},Me.useTransition=function(){return N.H.useTransition()},Me.version="19.2.3",Me}var _0;function $m(){return _0||(_0=1,$h.exports=Yw()),$h.exports}var ce=$m();const Jw=TE(ce);var Qh={exports:{}},Il={},Xh={exports:{}},jh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Kw(){return T0||(T0=1,(function(n){function e(W,le){var Ee=W.length;W.push(le);e:for(;0<Ee;){var Ue=Ee-1>>>1,he=W[Ue];if(0<r(he,le))W[Ue]=le,W[Ee]=he,Ee=Ue;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var le=W[0],Ee=W.pop();if(Ee!==le){W[0]=Ee;e:for(var Ue=0,he=W.length,O=he>>>1;Ue<O;){var ee=2*(Ue+1)-1,H=W[ee],ae=ee+1,me=W[ae];if(0>r(H,Ee))ae<he&&0>r(me,H)?(W[Ue]=me,W[ae]=Ee,Ue=ae):(W[Ue]=H,W[ee]=Ee,Ue=ee);else if(ae<he&&0>r(me,Ee))W[Ue]=me,W[ae]=Ee,Ue=ae;else break e}}return le}function r(W,le){var Ee=W.sortIndex-le.sortIndex;return Ee!==0?Ee:W.id-le.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var g=[],p=[],_=1,T=null,S=3,x=!1,U=!1,z=!1,M=!1,F=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function re(W){for(var le=t(p);le!==null;){if(le.callback===null)s(p);else if(le.startTime<=W)s(p),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(p)}}function de(W){if(z=!1,re(W),!U)if(t(g)!==null)U=!0,ue||(ue=!0,q());else{var le=t(p);le!==null&&Ge(de,le.startTime-W)}}var ue=!1,N=-1,D=5,I=-1;function P(){return M?!0:!(n.unstable_now()-I<D)}function k(){if(M=!1,ue){var W=n.unstable_now();I=W;var le=!0;try{e:{U=!1,z&&(z=!1,Z(N),N=-1),x=!0;var Ee=S;try{t:{for(re(W),T=t(g);T!==null&&!(T.expirationTime>W&&P());){var Ue=T.callback;if(typeof Ue=="function"){T.callback=null,S=T.priorityLevel;var he=Ue(T.expirationTime<=W);if(W=n.unstable_now(),typeof he=="function"){T.callback=he,re(W),le=!0;break t}T===t(g)&&s(g),re(W)}else s(g);T=t(g)}if(T!==null)le=!0;else{var O=t(p);O!==null&&Ge(de,O.startTime-W),le=!1}}break e}finally{T=null,S=Ee,x=!1}le=void 0}}finally{le?q():ue=!1}}}var q;if(typeof Q=="function")q=function(){Q(k)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ie=V.port2;V.port1.onmessage=k,q=function(){Ie.postMessage(null)}}else q=function(){F(k,0)};function Ge(W,le){N=F(function(){W(n.unstable_now())},le)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var Ee=S;S=le;try{return W()}finally{S=Ee}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(W,le){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ee=S;S=W;try{return le()}finally{S=Ee}},n.unstable_scheduleCallback=function(W,le,Ee){var Ue=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ue+Ee:Ue):Ee=Ue,W){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ee+he,W={id:_++,callback:le,priorityLevel:W,startTime:Ee,expirationTime:he,sortIndex:-1},Ee>Ue?(W.sortIndex=Ee,e(p,W),t(g)===null&&W===t(p)&&(z?(Z(N),N=-1):z=!0,Ge(de,Ee-Ue))):(W.sortIndex=he,e(g,W),U||x||(U=!0,ue||(ue=!0,q()))),W},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(W){var le=S;return function(){var Ee=S;S=le;try{return W.apply(this,arguments)}finally{S=Ee}}}})(jh)),jh}var E0;function $w(){return E0||(E0=1,Xh.exports=Kw()),Xh.exports}var Wh={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function Qw(){if(S0)return tn;S0=1;var n=$m();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:p,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,tn.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,_)},tn.flushSync=function(g){var p=u.T,_=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=p,s.p=_,s.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:x}):_==="script"&&s.d.X(g,{crossOrigin:T,integrity:S,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);s.d.L(g,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=d(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},tn.requestFormReset=function(g){s.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,_){return u.H.useFormState(g,p,_)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var A0;function Xw(){if(A0)return Wh.exports;A0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wh.exports=Qw(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function jw(){if(C0)return Il;C0=1;var n=$w(),e=$m(),t=Xw();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,c=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),o;v=v.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=v;else{for(var C=!1,R=y.child;R;){if(R===a){C=!0,a=y,c=v;break}if(R===c){C=!0,c=y,a=v;break}R=R.sibling}if(!C){for(R=v.child;R;){if(R===a){C=!0,a=v,c=y;break}if(R===c){C=!0,c=v,a=y;break}R=R.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function _(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=_(i),o!==null)return o;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var V=Symbol.for("react.client.reference");function Ie(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===V?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case F:return"Profiler";case M:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case Q:return i.displayName||"Context";case Z:return(i._context.displayName||"Context")+".Consumer";case re:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return o=i.displayName||null,o!==null?o:Ie(i.type)||"Memo";case D:o=i._payload,i=i._init;try{return Ie(i(o))}catch{}}return null}var Ge=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Ue=[],he=-1;function O(i){return{current:i}}function ee(i){0>he||(i.current=Ue[he],Ue[he]=null,he--)}function H(i,o){he++,Ue[he]=i.current,i.current=o}var ae=O(null),me=O(null),Se=O(null),we=O(null);function Lt(i,o){switch(H(Se,o),H(me,i),H(ae,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?qv(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=qv(o),i=Bv(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ee(ae),H(ae,i)}function dt(){ee(ae),ee(me),ee(Se)}function vo(i){i.memoizedState!==null&&H(we,i);var o=ae.current,a=Bv(o,i.type);o!==a&&(H(me,i),H(ae,a))}function ar(i){me.current===i&&(ee(ae),ee(me)),we.current===i&&(ee(we),Al._currentValue=Ee)}var lr,ur;function gi(i){if(lr===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);lr=o&&o[1]||"",ur=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lr+i+ur}var Aa=!1;function _o(i,o){if(!i||Aa)return"";Aa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(j){var $=j}Reflect.construct(i,[],ie)}else{try{ie.call()}catch(j){$=j}i.call(ie.prototype)}}else{try{throw Error()}catch(j){$=j}(ie=i())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(j){if(j&&$&&typeof j.stack=="string")return[j.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),C=v[0],R=v[1];if(C&&R){var L=C.split(`
`),K=R.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===K.length)for(c=L.length-1,y=K.length-1;1<=c&&0<=y&&L[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==K[y]){var te=`
`+L[c].replace(" at new "," at ");return i.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",i.displayName)),te}while(1<=c&&0<=y);break}}}finally{Aa=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?gi(a):""}function Ca(i,o){switch(i.tag){case 26:case 27:case 5:return gi(i.type);case 16:return gi("Lazy");case 13:return i.child!==o&&o!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return _o(i.type,!1);case 11:return _o(i.type.render,!1);case 1:return _o(i.type,!0);case 31:return gi("Activity");default:return""}}function wa(i){try{var o="",a=null;do o+=Ca(i,a),a=i,i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,Ot=n.unstable_scheduleCallback,Es=n.unstable_cancelCallback,Qf=n.unstable_shouldYield,ou=n.unstable_requestPaint,an=n.unstable_now,To=n.unstable_getCurrentPriorityLevel,xa=n.unstable_ImmediatePriority,Ra=n.unstable_UserBlockingPriority,Ss=n.unstable_NormalPriority,Xf=n.unstable_LowPriority,ru=n.unstable_IdlePriority,au=n.log,lu=n.unstable_setDisableYieldValue,jn=null,Jt=null;function Pn(i){if(typeof au=="function"&&lu(i),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(jn,i)}catch{}}var vt=Math.clz32?Math.clz32:cu,uu=Math.log,cr=Math.LN2;function cu(i){return i>>>=0,i===0?32:31-(uu(i)/cr|0)|0}var yi=256,Eo=262144,wt=4194304;function vi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _i(i,o,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=vi(c):(C&=R,C!==0?y=vi(C):a||(a=R&~i,a!==0&&(y=vi(a))))):(R=c&~v,R!==0?y=vi(R):C!==0?y=vi(C):a||(a=c&~i,a!==0&&(y=vi(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function Wn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function jf(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fu(){var i=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),i}function Ti(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function So(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Wf(i,o,a,c,y,v){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,L=i.expirationTimes,K=i.hiddenUpdates;for(a=C&~a;0<a;){var te=31-vt(a),ie=1<<te;R[te]=0,L[te]=-1;var $=K[te];if($!==null)for(K[te]=null,te=0;te<$.length;te++){var j=$[te];j!==null&&(j.lane&=-536870913)}a&=~ie}c!==0&&Ao(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(C&~o))}function Ao(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var c=31-vt(o);i.entangledLanes|=o,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function Ia(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var c=31-vt(a),y=1<<c;y&o|i[c]&o&&(i[c]|=o),a&=~y}}function ba(i,o){var a=o&-o;return a=(a&42)!==0?1:Co(a),(a&(i.suspendedLanes|o))!==0?0:a}function Co(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ki(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function du(){var i=le.p;return i!==0?i:(i=window.event,i===void 0?32:u0(i.type))}function Zn(i,o){var a=le.p;try{return le.p=i,o()}finally{le.p=a}}var ei=Math.random().toString(36).slice(2),xt="__reactFiber$"+ei,zt="__reactProps$"+ei,Ei="__reactContainer$"+ei,fr="__reactEvents$"+ei,Zf="__reactListeners$"+ei,hu="__reactHandles$"+ei,mu="__reactResources$"+ei,Si="__reactMarker$"+ei;function dr(i){delete i[xt],delete i[zt],delete i[fr],delete i[Zf],delete i[hu]}function Ai(i){var o=i[xt];if(o)return o;for(var a=i.parentNode;a;){if(o=a[Ei]||a[xt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Kv(i);i!==null;){if(a=i[xt])return a;i=Kv(i)}return o}i=a,a=i.parentNode}return null}function kn(i){if(i=i[xt]||i[Ei]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function An(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ci(i){var o=i[mu];return o||(o=i[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Rt(i){i[Si]=!0}var Na=new Set,Ma={};function wi(i,o){xi(i,o),xi(i+"Capture",o)}function xi(i,o){for(Ma[i]=o,i=0;i<o.length;i++)Na.add(o[i])}var Da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Va={},Pa={};function pu(i){return Ct.call(Pa,i)?!0:Ct.call(Va,i)?!1:Da.test(i)?Pa[i]=!0:(Va[i]=!0,!1)}function hr(i,o,a){if(pu(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function Cn(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function It(i,o,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+c)}}function Ft(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function As(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ka(i,o,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(C){a=""+C,v.call(this,C)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ze(i){if(!i._valueTracker){var o=As(i)?"checked":"value";i._valueTracker=ka(i,o,""+i[o])}}function wo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return i&&(c=As(i)?i.checked?"true":"false":i.value),i=c,i!==a?(o.setValue(i),!0):!1}function Ri(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var xo=/[\n"\\]/g;function hn(i){return i.replace(xo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function mr(i,o,a,c,y,v,C,R){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ft(o)):i.value!==""+Ft(o)&&(i.value=""+Ft(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?Ua(i,C,Ft(o)):a!=null?Ua(i,C,Ft(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+Ft(R):i.removeAttribute("name")}function gu(i,o,a,c,y,v,C,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){Ze(i);return}a=a!=null?""+Ft(a):"",o=o!=null?""+Ft(o):a,R||o===i.value||(i.value=o),i.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=R?i.checked:!!c,i.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Ze(i)}function Ua(i,o,a){o==="number"&&Ri(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Cs(i,o,a,c){if(i=i.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=o.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ft(a),o=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function yu(i,o,a){if(o!=null&&(o=""+Ft(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ft(a):""}function ws(i,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(s(92));if(Ge(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=Ft(o),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),Ze(i)}function mn(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function La(i,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":c?i.setProperty(o,a):typeof a!="number"||a===0||vu.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Oa(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&a[y]!==c&&La(i,y,c)}else for(var v in o)o.hasOwnProperty(v)&&La(i,v,o[v])}function pr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(i){return xs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ti(){}var qa=null;function Un(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Rs=null,Ii=null;function Ro(i){var o=kn(i);if(o&&(i=o.stateNode)){var a=i[zt]||null;e:switch(i=o.stateNode,o.type){case"input":if(mr(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==i&&c.form===i.form){var y=c[zt]||null;if(!y)throw Error(s(90));mr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===i.form&&wo(c)}break e;case"textarea":yu(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Cs(i,!!a.multiple,o,!1)}}}var yr=!1;function Is(i,o,a){if(yr)return i(o,a);yr=!0;try{var c=i(o);return c}finally{if(yr=!1,(Rs!==null||Ii!==null)&&(dc(),Rs&&(o=Rs,i=Ii,Ii=Rs=null,Ro(o),i)))for(o=0;o<i.length;o++)Ro(i[o])}}function ni(i,o){var a=i.stateNode;if(a===null)return null;var c=a[zt]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Io=!1;if(Ln)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Io=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Io=!1}var bi=null,Ba=null,bo=null;function za(){if(bo)return bo;var i,o=Ba,a=o.length,c,y="value"in bi?bi.value:bi.textContent,v=y.length;for(i=0;i<a&&o[i]===y[i];i++);var C=a-i;for(c=1;c<=C&&o[a-c]===y[v-c];c++);return bo=y.slice(i,1<c?1-c:void 0)}function No(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function ii(){return!1}function Kt(i){function o(a,c,y,v,C){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$i:ii,this.isPropagationStopped=ii,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),o}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=Kt(Qi),bs=T({},Qi,{view:0,detail:0}),Fa=Kt(bs),Ns,vr,Mi,_r=T({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Mi&&(Mi&&i.type==="mousemove"?(Ns=i.screenX-Mi.screenX,vr=i.screenY-Mi.screenY):vr=Ns=0,Mi=i),Ns)},movementY:function(i){return"movementY"in i?i.movementY:vr}}),Ga=Kt(_r),Mo=T({},_r,{dataTransfer:0}),Tu=Kt(Mo),Eu=T({},bs,{relatedTarget:0}),Do=Kt(Eu),Ha=T({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=Kt(Ha),Tr=T({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Au=Kt(Tr),Cu=T({},Qi,{data:0}),Di=Kt(Cu),wu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Ru[i])?!!o[i]:!1}function Ms(){return Iu}var ln=T({},bs,{key:function(i){if(i.key){var o=wu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=No(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(i){return i.type==="keypress"?No(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?No(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bu=Kt(ln),Nu=T({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Kt(Nu),m=T({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),E=Kt(m),w=T({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Kt(w),Y=T({},_r,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Kt(Y),fe=T({},Qi,{newState:0,oldState:0}),Ve=Kt(fe),_t=[9,13,27,32],Xe=Ln&&"CompositionEvent"in window,ht=null;Ln&&"documentMode"in document&&(ht=document.documentMode);var On=Ln&&"TextEvent"in window&&!ht,Vi=Ln&&(!Xe||ht&&8<ht&&11>=ht),si=" ",oi=!1;function Vo(i,o){switch(i){case"keyup":return _t.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Er(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sr=!1;function hC(i,o){switch(i){case"compositionend":return Er(o);case"keypress":return o.which!==32?null:(oi=!0,si);case"textInput":return i=o.data,i===si&&oi?null:i;default:return null}}function mC(i,o){if(Sr)return i==="compositionend"||!Xe&&Vo(i,o)?(i=za(),bo=Ba=bi=null,Sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vi&&o.locale!=="ko"?null:o.data;default:return null}}var pC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!pC[i.type]:o==="textarea"}function jp(i,o,a,c){Rs?Ii?Ii.push(c):Ii=[c]:Rs=c,o=_c(o,"onChange"),0<o.length&&(a=new Ni("onChange","change",null,a,c),i.push({event:a,listeners:o}))}var Ya=null,Ja=null;function gC(i){Vv(i,0)}function Mu(i){var o=An(i);if(wo(o))return i}function Wp(i,o){if(i==="change")return o}var Zp=!1;if(Ln){var ed;if(Ln){var td="oninput"in document;if(!td){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),td=typeof eg.oninput=="function"}ed=td}else ed=!1;Zp=ed&&(!document.documentMode||9<document.documentMode)}function tg(){Ya&&(Ya.detachEvent("onpropertychange",ng),Ja=Ya=null)}function ng(i){if(i.propertyName==="value"&&Mu(Ja)){var o=[];jp(o,Ja,i,Un(i)),Is(gC,o)}}function yC(i,o,a){i==="focusin"?(tg(),Ya=o,Ja=a,Ya.attachEvent("onpropertychange",ng)):i==="focusout"&&tg()}function vC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Mu(Ja)}function _C(i,o){if(i==="click")return Mu(o)}function TC(i,o){if(i==="input"||i==="change")return Mu(o)}function EC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var wn=typeof Object.is=="function"?Object.is:EC;function Ka(i,o){if(wn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!Ct.call(o,y)||!wn(i[y],o[y]))return!1}return!0}function ig(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sg(i,o){var a=ig(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=o&&c>=o)return{node:a,offset:o-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ig(a)}}function og(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?og(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function rg(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ri(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Ri(i.document)}return o}function nd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var SC=Ln&&"documentMode"in document&&11>=document.documentMode,Ar=null,id=null,$a=null,sd=!1;function ag(i,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;sd||Ar==null||Ar!==Ri(c)||(c=Ar,"selectionStart"in c&&nd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),$a&&Ka($a,c)||($a=c,c=_c(id,"onSelect"),0<c.length&&(o=new Ni("onSelect","select",null,o,a),i.push({event:o,listeners:c}),o.target=Ar)))}function Po(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Cr={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},od={},lg={};Ln&&(lg=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function ko(i){if(od[i])return od[i];if(!Cr[i])return i;var o=Cr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in lg)return od[i]=o[a];return i}var ug=ko("animationend"),cg=ko("animationiteration"),fg=ko("animationstart"),AC=ko("transitionrun"),CC=ko("transitionstart"),wC=ko("transitioncancel"),dg=ko("transitionend"),hg=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function ri(i,o){hg.set(i,o),wi(o,[i])}var Du=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},qn=[],wr=0,ad=0;function Vu(){for(var i=wr,o=ad=wr=0;o<i;){var a=qn[o];qn[o++]=null;var c=qn[o];qn[o++]=null;var y=qn[o];qn[o++]=null;var v=qn[o];if(qn[o++]=null,c!==null&&y!==null){var C=c.pending;C===null?y.next=y:(y.next=C.next,C.next=y),c.pending=y}v!==0&&mg(a,y,v)}}function Pu(i,o,a,c){qn[wr++]=i,qn[wr++]=o,qn[wr++]=a,qn[wr++]=c,ad|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function ld(i,o,a,c){return Pu(i,o,a,c),ku(i)}function Uo(i,o){return Pu(i,null,null,o),ku(i)}function mg(i,o,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&o!==null&&(y=31-vt(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[o]:c.push(o),o.lane=a|536870912),v):null}function ku(i){if(50<gl)throw gl=0,yh=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var xr={};function xC(i,o,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(i,o,a,c){return new xC(i,o,a,c)}function ud(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ji(i,o){var a=i.alternate;return a===null?(a=xn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function pg(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Uu(i,o,a,c,y,v){var C=0;if(c=i,typeof i=="function")ud(i)&&(C=1);else if(typeof i=="string")C=Mw(i,a,ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=xn(31,a,o,y),i.elementType=I,i.lanes=v,i;case z:return Lo(a.children,y,v,o);case M:C=8,y|=24;break;case F:return i=xn(12,a,o,y|2),i.elementType=F,i.lanes=v,i;case de:return i=xn(13,a,o,y),i.elementType=de,i.lanes=v,i;case ue:return i=xn(19,a,o,y),i.elementType=ue,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Q:C=10;break e;case Z:C=9;break e;case re:C=11;break e;case N:C=14;break e;case D:C=16,c=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return o=xn(C,a,o,y),o.elementType=i,o.type=c,o.lanes=v,o}function Lo(i,o,a,c){return i=xn(7,i,c,o),i.lanes=a,i}function cd(i,o,a){return i=xn(6,i,null,o),i.lanes=a,i}function gg(i){var o=xn(18,null,null,0);return o.stateNode=i,o}function fd(i,o,a){return o=xn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var yg=new WeakMap;function Bn(i,o){if(typeof i=="object"&&i!==null){var a=yg.get(i);return a!==void 0?a:(o={value:i,source:o,stack:wa(o)},yg.set(i,o),o)}return{value:i,source:o,stack:wa(o)}}var Rr=[],Ir=0,Lu=null,Qa=0,zn=[],Fn=0,Ds=null,Pi=1,ki="";function Wi(i,o){Rr[Ir++]=Qa,Rr[Ir++]=Lu,Lu=i,Qa=o}function vg(i,o,a){zn[Fn++]=Pi,zn[Fn++]=ki,zn[Fn++]=Ds,Ds=i;var c=Pi;i=ki;var y=32-vt(c)-1;c&=~(1<<y),a+=1;var v=32-vt(o)+y;if(30<v){var C=y-y%5;v=(c&(1<<C)-1).toString(32),c>>=C,y-=C,Pi=1<<32-vt(o)+y|a<<y|c,ki=v+i}else Pi=1<<v|a<<y|c,ki=i}function dd(i){i.return!==null&&(Wi(i,1),vg(i,1,0))}function hd(i){for(;i===Lu;)Lu=Rr[--Ir],Rr[Ir]=null,Qa=Rr[--Ir],Rr[Ir]=null;for(;i===Ds;)Ds=zn[--Fn],zn[Fn]=null,ki=zn[--Fn],zn[Fn]=null,Pi=zn[--Fn],zn[Fn]=null}function _g(i,o){zn[Fn++]=Pi,zn[Fn++]=ki,zn[Fn++]=Ds,Pi=o.id,ki=o.overflow,Ds=i}var $t=null,ut=null,He=!1,Vs=null,Gn=!1,md=Error(s(519));function Ps(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(Bn(o,i)),md}function Tg(i){var o=i.stateNode,a=i.type,c=i.memoizedProps;switch(o[xt]=i,o[zt]=c,a){case"dialog":Oe("cancel",o),Oe("close",o);break;case"iframe":case"object":case"embed":Oe("load",o);break;case"video":case"audio":for(a=0;a<vl.length;a++)Oe(vl[a],o);break;case"source":Oe("error",o);break;case"img":case"image":case"link":Oe("error",o),Oe("load",o);break;case"details":Oe("toggle",o);break;case"input":Oe("invalid",o),gu(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",o);break;case"textarea":Oe("invalid",o),ws(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||Lv(o.textContent,a)?(c.popover!=null&&(Oe("beforetoggle",o),Oe("toggle",o)),c.onScroll!=null&&Oe("scroll",o),c.onScrollEnd!=null&&Oe("scrollend",o),c.onClick!=null&&(o.onclick=ti),o=!0):o=!1,o||Ps(i,!0)}function Eg(i){for($t=i.return;$t;)switch($t.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:$t=$t.return}}function br(i){if(i!==$t)return!1;if(!He)return Eg(i),He=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Dh(i.type,i.memoizedProps)),a=!a),a&&ut&&Ps(i),Eg(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=Jv(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=Jv(i)}else o===27?(o=ut,$s(i.type)?(i=Lh,Lh=null,ut=i):ut=o):ut=$t?Yn(i.stateNode.nextSibling):null;return!0}function Oo(){ut=$t=null,He=!1}function pd(){var i=Vs;return i!==null&&(vn===null?vn=i:vn.push.apply(vn,i),Vs=null),i}function Xa(i){Vs===null?Vs=[i]:Vs.push(i)}var gd=O(null),qo=null,Zi=null;function ks(i,o,a){H(gd,o._currentValue),o._currentValue=a}function es(i){i._currentValue=gd.current,ee(gd)}function yd(i,o,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),i===a)break;i=i.return}}function vd(i,o,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var C=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var L=0;L<o.length;L++)if(R.context===o[L]){v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),yd(v.return,a,i),c||(C=null);break e}v=R.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(s(341));C.lanes|=a,v=C.alternate,v!==null&&(v.lanes|=a),yd(C,a,i),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===i){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Nr(i,o,a,c){i=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var R=y.type;wn(y.pendingProps.value,C.value)||(i!==null?i.push(R):i=[R])}}else if(y===we.current){if(C=y.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Al):i=[Al])}y=y.return}i!==null&&vd(o,i,a,c),o.flags|=262144}function Ou(i){for(i=i.firstContext;i!==null;){if(!wn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Bo(i){qo=i,Zi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qt(i){return Sg(qo,i)}function qu(i,o){return qo===null&&Bo(i),Sg(i,o)}function Sg(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Zi===null){if(i===null)throw Error(s(308));Zi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Zi=Zi.next=o;return a}var RC=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},IC=n.unstable_scheduleCallback,bC=n.unstable_NormalPriority,bt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new RC,data:new Map,refCount:0}}function ja(i){i.refCount--,i.refCount===0&&IC(bC,function(){i.controller.abort()})}var Wa=null,Td=0,Mr=0,Dr=null;function NC(i,o){if(Wa===null){var a=Wa=[];Td=0,Mr=Ah(),Dr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Td++,o.then(Ag,Ag),o}function Ag(){if(--Td===0&&Wa!==null){Dr!==null&&(Dr.status="fulfilled");var i=Wa;Wa=null,Mr=0,Dr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function MC(i,o){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var Cg=W.S;W.S=function(i,o){av=an(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&NC(i,o),Cg!==null&&Cg(i,o)};var zo=O(null);function Ed(){var i=zo.current;return i!==null?i:rt.pooledCache}function Bu(i,o){o===null?H(zo,zo.current):H(zo,o.pool)}function wg(){var i=Ed();return i===null?null:{parent:bt._currentValue,pool:i}}var Vr=Error(s(460)),Sd=Error(s(474)),zu=Error(s(542)),Fu={then:function(){}};function xg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Rg(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(ti,ti),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,bg(i),i;default:if(typeof o.status=="string")o.then(ti,ti);else{if(i=rt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,bg(i),i}throw Go=o,Vr}}function Fo(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Go=a,Vr):a}}var Go=null;function Ig(){if(Go===null)throw Error(s(459));var i=Go;return Go=null,i}function bg(i){if(i===Vr||i===zu)throw Error(s(483))}var Pr=null,Za=0;function Gu(i){var o=Za;return Za+=1,Pr===null&&(Pr=[]),Rg(Pr,i,o)}function el(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Hu(i,o){throw o.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Ng(i){function o(G,B){if(i){var J=G.deletions;J===null?(G.deletions=[B],G.flags|=16):J.push(B)}}function a(G,B){if(!i)return null;for(;B!==null;)o(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=ji(G,B),G.index=0,G.sibling=null,G}function v(G,B,J){return G.index=J,i?(J=G.alternate,J!==null?(J=J.index,J<B?(G.flags|=67108866,B):J):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function C(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function R(G,B,J,ne){return B===null||B.tag!==6?(B=cd(J,G.mode,ne),B.return=G,B):(B=y(B,J),B.return=G,B)}function L(G,B,J,ne){var Ae=J.type;return Ae===z?te(G,B,J.props.children,ne,J.key):B!==null&&(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===D&&Fo(Ae)===B.type)?(B=y(B,J.props),el(B,J),B.return=G,B):(B=Uu(J.type,J.key,J.props,null,G.mode,ne),el(B,J),B.return=G,B)}function K(G,B,J,ne){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=fd(J,G.mode,ne),B.return=G,B):(B=y(B,J.children||[]),B.return=G,B)}function te(G,B,J,ne,Ae){return B===null||B.tag!==7?(B=Lo(J,G.mode,ne,Ae),B.return=G,B):(B=y(B,J),B.return=G,B)}function ie(G,B,J){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=cd(""+B,G.mode,J),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case x:return J=Uu(B.type,B.key,B.props,null,G.mode,J),el(J,B),J.return=G,J;case U:return B=fd(B,G.mode,J),B.return=G,B;case D:return B=Fo(B),ie(G,B,J)}if(Ge(B)||q(B))return B=Lo(B,G.mode,J,null),B.return=G,B;if(typeof B.then=="function")return ie(G,Gu(B),J);if(B.$$typeof===Q)return ie(G,qu(G,B),J);Hu(G,B)}return null}function $(G,B,J,ne){var Ae=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ae!==null?null:R(G,B,""+J,ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case x:return J.key===Ae?L(G,B,J,ne):null;case U:return J.key===Ae?K(G,B,J,ne):null;case D:return J=Fo(J),$(G,B,J,ne)}if(Ge(J)||q(J))return Ae!==null?null:te(G,B,J,ne,null);if(typeof J.then=="function")return $(G,B,Gu(J),ne);if(J.$$typeof===Q)return $(G,B,qu(G,J),ne);Hu(G,J)}return null}function j(G,B,J,ne,Ae){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return G=G.get(J)||null,R(B,G,""+ne,Ae);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case x:return G=G.get(ne.key===null?J:ne.key)||null,L(B,G,ne,Ae);case U:return G=G.get(ne.key===null?J:ne.key)||null,K(B,G,ne,Ae);case D:return ne=Fo(ne),j(G,B,J,ne,Ae)}if(Ge(ne)||q(ne))return G=G.get(J)||null,te(B,G,ne,Ae,null);if(typeof ne.then=="function")return j(G,B,J,Gu(ne),Ae);if(ne.$$typeof===Q)return j(G,B,J,qu(B,ne),Ae);Hu(B,ne)}return null}function ve(G,B,J,ne){for(var Ae=null,Ke=null,_e=B,ke=B=0,Be=null;_e!==null&&ke<J.length;ke++){_e.index>ke?(Be=_e,_e=null):Be=_e.sibling;var $e=$(G,_e,J[ke],ne);if($e===null){_e===null&&(_e=Be);break}i&&_e&&$e.alternate===null&&o(G,_e),B=v($e,B,ke),Ke===null?Ae=$e:Ke.sibling=$e,Ke=$e,_e=Be}if(ke===J.length)return a(G,_e),He&&Wi(G,ke),Ae;if(_e===null){for(;ke<J.length;ke++)_e=ie(G,J[ke],ne),_e!==null&&(B=v(_e,B,ke),Ke===null?Ae=_e:Ke.sibling=_e,Ke=_e);return He&&Wi(G,ke),Ae}for(_e=c(_e);ke<J.length;ke++)Be=j(_e,G,ke,J[ke],ne),Be!==null&&(i&&Be.alternate!==null&&_e.delete(Be.key===null?ke:Be.key),B=v(Be,B,ke),Ke===null?Ae=Be:Ke.sibling=Be,Ke=Be);return i&&_e.forEach(function(Zs){return o(G,Zs)}),He&&Wi(G,ke),Ae}function xe(G,B,J,ne){if(J==null)throw Error(s(151));for(var Ae=null,Ke=null,_e=B,ke=B=0,Be=null,$e=J.next();_e!==null&&!$e.done;ke++,$e=J.next()){_e.index>ke?(Be=_e,_e=null):Be=_e.sibling;var Zs=$(G,_e,$e.value,ne);if(Zs===null){_e===null&&(_e=Be);break}i&&_e&&Zs.alternate===null&&o(G,_e),B=v(Zs,B,ke),Ke===null?Ae=Zs:Ke.sibling=Zs,Ke=Zs,_e=Be}if($e.done)return a(G,_e),He&&Wi(G,ke),Ae;if(_e===null){for(;!$e.done;ke++,$e=J.next())$e=ie(G,$e.value,ne),$e!==null&&(B=v($e,B,ke),Ke===null?Ae=$e:Ke.sibling=$e,Ke=$e);return He&&Wi(G,ke),Ae}for(_e=c(_e);!$e.done;ke++,$e=J.next())$e=j(_e,G,ke,$e.value,ne),$e!==null&&(i&&$e.alternate!==null&&_e.delete($e.key===null?ke:$e.key),B=v($e,B,ke),Ke===null?Ae=$e:Ke.sibling=$e,Ke=$e);return i&&_e.forEach(function(Fw){return o(G,Fw)}),He&&Wi(G,ke),Ae}function ot(G,B,J,ne){if(typeof J=="object"&&J!==null&&J.type===z&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case x:e:{for(var Ae=J.key;B!==null;){if(B.key===Ae){if(Ae=J.type,Ae===z){if(B.tag===7){a(G,B.sibling),ne=y(B,J.props.children),ne.return=G,G=ne;break e}}else if(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===D&&Fo(Ae)===B.type){a(G,B.sibling),ne=y(B,J.props),el(ne,J),ne.return=G,G=ne;break e}a(G,B);break}else o(G,B);B=B.sibling}J.type===z?(ne=Lo(J.props.children,G.mode,ne,J.key),ne.return=G,G=ne):(ne=Uu(J.type,J.key,J.props,null,G.mode,ne),el(ne,J),ne.return=G,G=ne)}return C(G);case U:e:{for(Ae=J.key;B!==null;){if(B.key===Ae)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){a(G,B.sibling),ne=y(B,J.children||[]),ne.return=G,G=ne;break e}else{a(G,B);break}else o(G,B);B=B.sibling}ne=fd(J,G.mode,ne),ne.return=G,G=ne}return C(G);case D:return J=Fo(J),ot(G,B,J,ne)}if(Ge(J))return ve(G,B,J,ne);if(q(J)){if(Ae=q(J),typeof Ae!="function")throw Error(s(150));return J=Ae.call(J),xe(G,B,J,ne)}if(typeof J.then=="function")return ot(G,B,Gu(J),ne);if(J.$$typeof===Q)return ot(G,B,qu(G,J),ne);Hu(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,B!==null&&B.tag===6?(a(G,B.sibling),ne=y(B,J),ne.return=G,G=ne):(a(G,B),ne=cd(J,G.mode,ne),ne.return=G,G=ne),C(G)):a(G,B)}return function(G,B,J,ne){try{Za=0;var Ae=ot(G,B,J,ne);return Pr=null,Ae}catch(_e){if(_e===Vr||_e===zu)throw _e;var Ke=xn(29,_e,null,G.mode);return Ke.lanes=ne,Ke.return=G,Ke}finally{}}}var Ho=Ng(!0),Mg=Ng(!1),Us=!1;function Ad(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ls(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Os(i,o,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=ku(i),mg(i,null,a),o}return Pu(i,c,o,a),ku(i)}function tl(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,Ia(i,a)}}function wd(i,o){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=C:v=v.next=C,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var xd=!1;function nl(){if(xd){var i=Dr;if(i!==null)throw i}}function il(i,o,a,c){xd=!1;var y=i.updateQueue;Us=!1;var v=y.firstBaseUpdate,C=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var L=R,K=L.next;L.next=null,C===null?v=K:C.next=K,C=L;var te=i.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==C&&(R===null?te.firstBaseUpdate=K:R.next=K,te.lastBaseUpdate=L))}if(v!==null){var ie=y.baseState;C=0,te=K=L=null,R=v;do{var $=R.lane&-536870913,j=$!==R.lane;if(j?(qe&$)===$:(c&$)===$){$!==0&&$===Mr&&(xd=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ve=i,xe=R;$=o;var ot=a;switch(xe.tag){case 1:if(ve=xe.payload,typeof ve=="function"){ie=ve.call(ot,ie,$);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=xe.payload,$=typeof ve=="function"?ve.call(ot,ie,$):ve,$==null)break e;ie=T({},ie,$);break e;case 2:Us=!0}}$=R.callback,$!==null&&(i.flags|=64,j&&(i.flags|=8192),j=y.callbacks,j===null?y.callbacks=[$]:j.push($))}else j={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(K=te=j,L=ie):te=te.next=j,C|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;j=R,R=j.next,j.next=null,y.lastBaseUpdate=j,y.shared.pending=null}}while(!0);te===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=K,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),Gs|=C,i.lanes=C,i.memoizedState=ie}}function Dg(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Vg(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Dg(a[i],o)}var kr=O(null),Yu=O(0);function Pg(i,o){i=us,H(Yu,i),H(kr,o),us=i|o.baseLanes}function Rd(){H(Yu,us),H(kr,kr.current)}function Id(){us=Yu.current,ee(kr),ee(Yu)}var Rn=O(null),Hn=null;function qs(i){var o=i.alternate;H(Tt,Tt.current&1),H(Rn,i),Hn===null&&(o===null||kr.current!==null||o.memoizedState!==null)&&(Hn=i)}function bd(i){H(Tt,Tt.current),H(Rn,i),Hn===null&&(Hn=i)}function kg(i){i.tag===22?(H(Tt,Tt.current),H(Rn,i),Hn===null&&(Hn=i)):Bs()}function Bs(){H(Tt,Tt.current),H(Rn,Rn.current)}function In(i){ee(Rn),Hn===i&&(Hn=null),ee(Tt)}var Tt=O(0);function Ju(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||kh(a)||Uh(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ts=0,Pe=null,it=null,Nt=null,Ku=!1,Ur=!1,Yo=!1,$u=0,sl=0,Lr=null,DC=0;function gt(){throw Error(s(321))}function Nd(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!wn(i[a],o[a]))return!1;return!0}function Md(i,o,a,c,y,v){return ts=v,Pe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,W.H=i===null||i.memoizedState===null?vy:Jd,Yo=!1,v=a(c,y),Yo=!1,Ur&&(v=Lg(o,a,c,y)),Ug(i),v}function Ug(i){W.H=al;var o=it!==null&&it.next!==null;if(ts=0,Nt=it=Pe=null,Ku=!1,sl=0,Lr=null,o)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&Ou(i)&&(Mt=!0))}function Lg(i,o,a,c){Pe=i;var y=0;do{if(Ur&&(Lr=null),sl=0,Ur=!1,25<=y)throw Error(s(301));if(y+=1,Nt=it=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}W.H=_y,v=o(a,c)}while(Ur);return v}function VC(){var i=W.H,o=i.useState()[0];return o=typeof o.then=="function"?ol(o):o,i=i.useState()[0],(it!==null?it.memoizedState:null)!==i&&(Pe.flags|=1024),o}function Dd(){var i=$u!==0;return $u=0,i}function Vd(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function Pd(i){if(Ku){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ku=!1}ts=0,Nt=it=Pe=null,Ur=!1,sl=$u=0,Lr=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Pe.memoizedState=Nt=i:Nt=Nt.next=i,Nt}function Et(){if(it===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=it.next;var o=Nt===null?Pe.memoizedState:Nt.next;if(o!==null)Nt=o,it=i;else{if(i===null)throw Pe.alternate===null?Error(s(467)):Error(s(310));it=i,i={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Nt===null?Pe.memoizedState=Nt=i:Nt=Nt.next=i}return Nt}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(i){var o=sl;return sl+=1,Lr===null&&(Lr=[]),i=Rg(Lr,i,o),o=Pe,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,W.H=o===null||o.memoizedState===null?vy:Jd),i}function Xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ol(i);if(i.$$typeof===Q)return Qt(i)}throw Error(s(438,String(i)))}function kd(i){var o=null,a=Pe.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Qu(),Pe.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),c=0;c<i;c++)a[c]=P;return o.index++,a}function ns(i,o){return typeof o=="function"?o(i):o}function ju(i){var o=Et();return Ud(o,it,i)}function Ud(i,o,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var C=y.next;y.next=v.next,v.next=C}o.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{o=y.next;var R=C=null,L=null,K=o,te=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(qe&ie)===ie:(ts&ie)===ie){var $=K.revertLane;if($===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Mr&&(te=!0);else if((ts&$)===$){K=K.next,$===Mr&&(te=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(R=L=ie,C=v):L=L.next=ie,Pe.lanes|=$,Gs|=$;ie=K.action,Yo&&a(v,ie),v=K.hasEagerState?K.eagerState:a(v,ie)}else $={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(R=L=$,C=v):L=L.next=$,Pe.lanes|=ie,Gs|=ie;K=K.next}while(K!==null&&K!==o);if(L===null?C=v:L.next=R,!wn(v,i.memoizedState)&&(Mt=!0,te&&(a=Dr,a!==null)))throw a;i.memoizedState=v,i.baseState=C,i.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Ld(i){var o=Et(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var C=y=y.next;do v=i(v,C.action),C=C.next;while(C!==y);wn(v,o.memoizedState)||(Mt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function Og(i,o,a){var c=Pe,y=Et(),v=He;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var C=!wn((it||y).memoizedState,a);if(C&&(y.memoizedState=a,Mt=!0),y=y.queue,Bd(zg.bind(null,c,y,i),[i]),y.getSnapshot!==o||C||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,Or(9,{destroy:void 0},Bg.bind(null,c,y,a,o),null),rt===null)throw Error(s(349));v||(ts&127)!==0||qg(c,o,a)}return a}function qg(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Pe.updateQueue,o===null?(o=Qu(),Pe.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function Bg(i,o,a,c){o.value=a,o.getSnapshot=c,Fg(o)&&Gg(i)}function zg(i,o,a){return a(function(){Fg(o)&&Gg(i)})}function Fg(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!wn(i,a)}catch{return!0}}function Gg(i){var o=Uo(i,2);o!==null&&_n(o,i,2)}function Od(i){var o=un();if(typeof i=="function"){var a=i;if(i=a(),Yo){Pn(!0);try{a()}finally{Pn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:i},o}function Hg(i,o,a,c){return i.baseState=a,Ud(i,it,typeof c=="function"?c:ns)}function PC(i,o,a,c,y){if(ec(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};W.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,Yg(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Yg(i,o){var a=o.action,c=o.payload,y=i.state;if(o.isTransition){var v=W.T,C={};W.T=C;try{var R=a(y,c),L=W.S;L!==null&&L(C,R),Jg(i,o,R)}catch(K){qd(i,o,K)}finally{v!==null&&C.types!==null&&(v.types=C.types),W.T=v}}else try{v=a(y,c),Jg(i,o,v)}catch(K){qd(i,o,K)}}function Jg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Kg(i,o,c)},function(c){return qd(i,o,c)}):Kg(i,o,a)}function Kg(i,o,a){o.status="fulfilled",o.value=a,$g(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Yg(i,a)))}function qd(i,o,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,$g(o),o=o.next;while(o!==c)}i.action=null}function $g(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Qg(i,o){return o}function Xg(i,o){if(He){var a=rt.formState;if(a!==null){e:{var c=Pe;if(He){if(ut){t:{for(var y=ut,v=Gn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Yn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ut=Yn(y.nextSibling),c=y.data==="F!";break e}}Ps(c)}c=!1}c&&(o=a[0])}}return a=un(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qg,lastRenderedState:o},a.queue=c,a=py.bind(null,Pe,c),c.dispatch=a,c=Od(!1),v=Yd.bind(null,Pe,!1,c.queue),c=un(),y={state:o,dispatch:null,action:i,pending:null},c.queue=y,a=PC.bind(null,Pe,y,v,a),y.dispatch=a,c.memoizedState=i,[o,a,!1]}function jg(i){var o=Et();return Wg(o,it,i)}function Wg(i,o,a){if(o=Ud(i,o,Qg)[0],i=ju(ns)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=ol(o)}catch(C){throw C===Vr?zu:C}else c=o;o=Et();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(Pe.flags|=2048,Or(9,{destroy:void 0},kC.bind(null,y,a),null)),[c,v,i]}function kC(i,o){i.action=o}function Zg(i){var o=Et(),a=it;if(a!==null)return Wg(o,a,i);Et(),o=o.memoizedState,a=Et();var c=a.queue.dispatch;return a.memoizedState=i,[o,c,!1]}function Or(i,o,a,c){return i={tag:i,create:a,deps:c,inst:o,next:null},o=Pe.updateQueue,o===null&&(o=Qu(),Pe.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,o.lastEffect=i),i}function ey(){return Et().memoizedState}function Wu(i,o,a,c){var y=un();Pe.flags|=i,y.memoizedState=Or(1|o,{destroy:void 0},a,c===void 0?null:c)}function Zu(i,o,a,c){var y=Et();c=c===void 0?null:c;var v=y.memoizedState.inst;it!==null&&c!==null&&Nd(c,it.memoizedState.deps)?y.memoizedState=Or(o,v,a,c):(Pe.flags|=i,y.memoizedState=Or(1|o,v,a,c))}function ty(i,o){Wu(8390656,8,i,o)}function Bd(i,o){Zu(2048,8,i,o)}function UC(i){Pe.flags|=4;var o=Pe.updateQueue;if(o===null)o=Qu(),Pe.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function ny(i){var o=Et().memoizedState;return UC({ref:o,nextImpl:i}),function(){if((je&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function iy(i,o){return Zu(4,2,i,o)}function sy(i,o){return Zu(4,4,i,o)}function oy(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ry(i,o,a){a=a!=null?a.concat([i]):null,Zu(4,4,oy.bind(null,o,i),a)}function zd(){}function ay(i,o){var a=Et();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&Nd(o,c[1])?c[0]:(a.memoizedState=[i,o],i)}function ly(i,o){var a=Et();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&Nd(o,c[1]))return c[0];if(c=i(),Yo){Pn(!0);try{i()}finally{Pn(!1)}}return a.memoizedState=[c,o],c}function Fd(i,o,a){return a===void 0||(ts&1073741824)!==0&&(qe&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=uv(),Pe.lanes|=i,Gs|=i,a)}function uy(i,o,a,c){return wn(a,o)?a:kr.current!==null?(i=Fd(i,a,c),wn(i,o)||(Mt=!0),i):(ts&42)===0||(ts&1073741824)!==0&&(qe&261930)===0?(Mt=!0,i.memoizedState=a):(i=uv(),Pe.lanes|=i,Gs|=i,o)}function cy(i,o,a,c,y){var v=le.p;le.p=v!==0&&8>v?v:8;var C=W.T,R={};W.T=R,Yd(i,!1,o,a);try{var L=y(),K=W.S;if(K!==null&&K(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=MC(L,c);rl(i,o,te,Mn(i))}else rl(i,o,c,Mn(i))}catch(ie){rl(i,o,{then:function(){},status:"rejected",reason:ie},Mn())}finally{le.p=v,C!==null&&R.types!==null&&(C.types=R.types),W.T=C}}function LC(){}function Gd(i,o,a,c){if(i.tag!==5)throw Error(s(476));var y=fy(i).queue;cy(i,y,o,Ee,a===null?LC:function(){return dy(i),a(c)})}function fy(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:Ee},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function dy(i){var o=fy(i);o.next===null&&(o=i.alternate.memoizedState),rl(i,o.next.queue,{},Mn())}function Hd(){return Qt(Al)}function hy(){return Et().memoizedState}function my(){return Et().memoizedState}function OC(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=Mn();i=Ls(a);var c=Os(o,i,a);c!==null&&(_n(c,o,a),tl(c,o,a)),o={cache:_d()},i.payload=o;return}o=o.return}}function qC(i,o,a){var c=Mn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ec(i)?gy(o,a):(a=ld(i,o,a,c),a!==null&&(_n(a,i,c),yy(a,o,c)))}function py(i,o,a){var c=Mn();rl(i,o,a,c)}function rl(i,o,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ec(i))gy(o,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var C=o.lastRenderedState,R=v(C,a);if(y.hasEagerState=!0,y.eagerState=R,wn(R,C))return Pu(i,o,y,0),rt===null&&Vu(),!1}catch{}finally{}if(a=ld(i,o,y,c),a!==null)return _n(a,i,c),yy(a,o,c),!0}return!1}function Yd(i,o,a,c){if(c={lane:2,revertLane:Ah(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ec(i)){if(o)throw Error(s(479))}else o=ld(i,a,c,2),o!==null&&_n(o,i,2)}function ec(i){var o=i.alternate;return i===Pe||o!==null&&o===Pe}function gy(i,o){Ur=Ku=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function yy(i,o,a){if((a&4194048)!==0){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,Ia(i,a)}}var al={readContext:Qt,use:Xu,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};al.useEffectEvent=gt;var vy={readContext:Qt,use:Xu,useCallback:function(i,o){return un().memoizedState=[i,o===void 0?null:o],i},useContext:Qt,useEffect:ty,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Wu(4194308,4,oy.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Wu(4194308,4,i,o)},useInsertionEffect:function(i,o){Wu(4,2,i,o)},useMemo:function(i,o){var a=un();o=o===void 0?null:o;var c=i();if(Yo){Pn(!0);try{i()}finally{Pn(!1)}}return a.memoizedState=[c,o],c},useReducer:function(i,o,a){var c=un();if(a!==void 0){var y=a(o);if(Yo){Pn(!0);try{a(o)}finally{Pn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=qC.bind(null,Pe,i),[c.memoizedState,i]},useRef:function(i){var o=un();return i={current:i},o.memoizedState=i},useState:function(i){i=Od(i);var o=i.queue,a=py.bind(null,Pe,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:zd,useDeferredValue:function(i,o){var a=un();return Fd(a,i,o)},useTransition:function(){var i=Od(!1);return i=cy.bind(null,Pe,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var c=Pe,y=un();if(He){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),rt===null)throw Error(s(349));(qe&127)!==0||qg(c,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,ty(zg.bind(null,c,v,i),[i]),c.flags|=2048,Or(9,{destroy:void 0},Bg.bind(null,c,v,a,o),null),a},useId:function(){var i=un(),o=rt.identifierPrefix;if(He){var a=ki,c=Pi;a=(c&~(1<<32-vt(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=$u++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=DC++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Hd,useFormState:Xg,useActionState:Xg,useOptimistic:function(i){var o=un();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Yd.bind(null,Pe,!0,a),a.dispatch=o,[i,o]},useMemoCache:kd,useCacheRefresh:function(){return un().memoizedState=OC.bind(null,Pe)},useEffectEvent:function(i){var o=un(),a={impl:i};return o.memoizedState=a,function(){if((je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Jd={readContext:Qt,use:Xu,useCallback:ay,useContext:Qt,useEffect:Bd,useImperativeHandle:ry,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:ly,useReducer:ju,useRef:ey,useState:function(){return ju(ns)},useDebugValue:zd,useDeferredValue:function(i,o){var a=Et();return uy(a,it.memoizedState,i,o)},useTransition:function(){var i=ju(ns)[0],o=Et().memoizedState;return[typeof i=="boolean"?i:ol(i),o]},useSyncExternalStore:Og,useId:hy,useHostTransitionStatus:Hd,useFormState:jg,useActionState:jg,useOptimistic:function(i,o){var a=Et();return Hg(a,it,i,o)},useMemoCache:kd,useCacheRefresh:my};Jd.useEffectEvent=ny;var _y={readContext:Qt,use:Xu,useCallback:ay,useContext:Qt,useEffect:Bd,useImperativeHandle:ry,useInsertionEffect:iy,useLayoutEffect:sy,useMemo:ly,useReducer:Ld,useRef:ey,useState:function(){return Ld(ns)},useDebugValue:zd,useDeferredValue:function(i,o){var a=Et();return it===null?Fd(a,i,o):uy(a,it.memoizedState,i,o)},useTransition:function(){var i=Ld(ns)[0],o=Et().memoizedState;return[typeof i=="boolean"?i:ol(i),o]},useSyncExternalStore:Og,useId:hy,useHostTransitionStatus:Hd,useFormState:Zg,useActionState:Zg,useOptimistic:function(i,o){var a=Et();return it!==null?Hg(a,it,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:kd,useCacheRefresh:my};_y.useEffectEvent=ny;function Kd(i,o,a,c){o=i.memoizedState,a=a(c,o),a=a==null?o:T({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var $d={enqueueSetState:function(i,o,a){i=i._reactInternals;var c=Mn(),y=Ls(c);y.payload=o,a!=null&&(y.callback=a),o=Os(i,y,c),o!==null&&(_n(o,i,c),tl(o,i,c))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var c=Mn(),y=Ls(c);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=Os(i,y,c),o!==null&&(_n(o,i,c),tl(o,i,c))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=Mn(),c=Ls(a);c.tag=2,o!=null&&(c.callback=o),o=Os(i,c,a),o!==null&&(_n(o,i,a),tl(o,i,a))}};function Ty(i,o,a,c,y,v,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,C):o.prototype&&o.prototype.isPureReactComponent?!Ka(a,c)||!Ka(y,v):!0}function Ey(i,o,a,c){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==i&&$d.enqueueReplaceState(o,o.state,null)}function Jo(i,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(i=i.defaultProps){a===o&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function Sy(i){Du(i)}function Ay(i){console.error(i)}function Cy(i){Du(i)}function tc(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function wy(i,o,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Qd(i,o,a){return a=Ls(a),a.tag=3,a.payload={element:null},a.callback=function(){tc(i,o)},a}function xy(i){return i=Ls(i),i.tag=3,i}function Ry(i,o,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){wy(o,a,c)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){wy(o,a,c),typeof y!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function BC(i,o,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&Nr(o,a,y,!0),a=Rn.current,a!==null){switch(a.tag){case 31:case 13:return Hn===null?hc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Fu?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),Th(i,c,y)),!1;case 22:return a.flags|=65536,c===Fu?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),Th(i,c,y)),!1}throw Error(s(435,a.tag))}return Th(i,c,y),hc(),!1}if(He)return o=Rn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==md&&(i=Error(s(422),{cause:c}),Xa(Bn(i,a)))):(c!==md&&(o=Error(s(423),{cause:c}),Xa(Bn(o,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=Bn(c,a),y=Qd(i.stateNode,c,y),wd(i,y),yt!==4&&(yt=2)),!1;var v=Error(s(520),{cause:c});if(v=Bn(v,a),pl===null?pl=[v]:pl.push(v),yt!==4&&(yt=2),o===null)return!0;c=Bn(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=Qd(a.stateNode,c,i),wd(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Hs===null||!Hs.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=xy(y),Ry(y,i,a,c),wd(a,y),!1}a=a.return}while(a!==null);return!1}var Xd=Error(s(461)),Mt=!1;function Xt(i,o,a,c){o.child=i===null?Mg(o,null,a,c):Ho(o,i.child,a,c)}function Iy(i,o,a,c,y){a=a.render;var v=o.ref;if("ref"in c){var C={};for(var R in c)R!=="ref"&&(C[R]=c[R])}else C=c;return Bo(o),c=Md(i,o,a,C,v,y),R=Dd(),i!==null&&!Mt?(Vd(i,o,y),is(i,o,y)):(He&&R&&dd(o),o.flags|=1,Xt(i,o,c,y),o.child)}function by(i,o,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!ud(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,Ny(i,o,v,c,y)):(i=Uu(a.type,null,c,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!sh(i,y)){var C=v.memoizedProps;if(a=a.compare,a=a!==null?a:Ka,a(C,c)&&i.ref===o.ref)return is(i,o,y)}return o.flags|=1,i=ji(v,c),i.ref=o.ref,i.return=o,o.child=i}function Ny(i,o,a,c,y){if(i!==null){var v=i.memoizedProps;if(Ka(v,c)&&i.ref===o.ref)if(Mt=!1,o.pendingProps=c=v,sh(i,y))(i.flags&131072)!==0&&(Mt=!0);else return o.lanes=i.lanes,is(i,o,y)}return jd(i,o,a,c,y)}function My(i,o,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=o.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return Dy(i,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(o,v!==null?v.cachePool:null),v!==null?Pg(o,v):Rd(),kg(o);else return c=o.lanes=536870912,Dy(i,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Bu(o,v.cachePool),Pg(o,v),Bs(),o.memoizedState=null):(i!==null&&Bu(o,null),Rd(),Bs());return Xt(i,o,y,a),o.child}function ll(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Dy(i,o,a,c,y){var v=Ed();return v=v===null?null:{parent:bt._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},i!==null&&Bu(o,null),Rd(),kg(o),i!==null&&Nr(i,o,c,!0),o.childLanes=y,null}function nc(i,o){return o=sc({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Vy(i,o,a){return Ho(o,i.child,null,a),i=nc(o,o.pendingProps),i.flags|=2,In(o),o.memoizedState=null,i}function zC(i,o,a){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(He){if(c.mode==="hidden")return i=nc(o,c),o.lanes=536870912,ll(null,i);if(bd(o),(i=ut)?(i=Yv(i,Gn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=gg(i),a.return=o,o.child=a,$t=o,ut=null)):i=null,i===null)throw Ps(o);return o.lanes=536870912,null}return nc(o,c)}var v=i.memoizedState;if(v!==null){var C=v.dehydrated;if(bd(o),y)if(o.flags&256)o.flags&=-257,o=Vy(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Mt||Nr(i,o,a,!1),y=(a&i.childLanes)!==0,Mt||y){if(c=rt,c!==null&&(C=ba(c,a),C!==0&&C!==v.retryLane))throw v.retryLane=C,Uo(i,C),_n(c,i,C),Xd;hc(),o=Vy(i,o,a)}else i=v.treeContext,ut=Yn(C.nextSibling),$t=o,He=!0,Vs=null,Gn=!1,i!==null&&_g(o,i),o=nc(o,c),o.flags|=4096;return o}return i=ji(i.child,{mode:c.mode,children:c.children}),i.ref=o.ref,o.child=i,i.return=o,i}function ic(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function jd(i,o,a,c,y){return Bo(o),a=Md(i,o,a,c,void 0,y),c=Dd(),i!==null&&!Mt?(Vd(i,o,y),is(i,o,y)):(He&&c&&dd(o),o.flags|=1,Xt(i,o,a,y),o.child)}function Py(i,o,a,c,y,v){return Bo(o),o.updateQueue=null,a=Lg(o,c,a,y),Ug(i),c=Dd(),i!==null&&!Mt?(Vd(i,o,v),is(i,o,v)):(He&&c&&dd(o),o.flags|=1,Xt(i,o,a,v),o.child)}function ky(i,o,a,c,y){if(Bo(o),o.stateNode===null){var v=xr,C=a.contextType;typeof C=="object"&&C!==null&&(v=Qt(C)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$d,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Ad(o),C=a.contextType,v.context=typeof C=="object"&&C!==null?Qt(C):xr,v.state=o.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(Kd(o,a,C,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&$d.enqueueReplaceState(v,v.state,null),il(o,c,v,y),nl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(i===null){v=o.stateNode;var R=o.memoizedProps,L=Jo(a,R);v.props=L;var K=v.context,te=a.contextType;C=xr,typeof te=="object"&&te!==null&&(C=Qt(te));var ie=a.getDerivedStateFromProps;te=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||K!==C)&&Ey(o,v,c,C),Us=!1;var $=o.memoizedState;v.state=$,il(o,c,v,y),nl(),K=o.memoizedState,R||$!==K||Us?(typeof ie=="function"&&(Kd(o,a,ie,c),K=o.memoizedState),(L=Us||Ty(o,a,L,c,$,K,C))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=K),v.props=c,v.state=K,v.context=C,c=L):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,Cd(i,o),C=o.memoizedProps,te=Jo(a,C),v.props=te,ie=o.pendingProps,$=v.context,K=a.contextType,L=xr,typeof K=="object"&&K!==null&&(L=Qt(K)),R=a.getDerivedStateFromProps,(K=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==ie||$!==L)&&Ey(o,v,c,L),Us=!1,$=o.memoizedState,v.state=$,il(o,c,v,y),nl();var j=o.memoizedState;C!==ie||$!==j||Us||i!==null&&i.dependencies!==null&&Ou(i.dependencies)?(typeof R=="function"&&(Kd(o,a,R,c),j=o.memoizedState),(te=Us||Ty(o,a,te,c,$,j,L)||i!==null&&i.dependencies!==null&&Ou(i.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,j,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,j,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=j),v.props=c,v.state=j,v.context=L,c=te):(typeof v.componentDidUpdate!="function"||C===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),c=!1)}return v=c,ic(i,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&c?(o.child=Ho(o,i.child,null,y),o.child=Ho(o,null,a,y)):Xt(i,o,a,y),o.memoizedState=v.state,i=o.child):i=is(i,o,y),i}function Uy(i,o,a,c){return Oo(),o.flags|=256,Xt(i,o,a,c),o.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(i){return{baseLanes:i,cachePool:wg()}}function eh(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=Nn),i}function Ly(i,o,a){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,C;if((C=v)||(C=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),C&&(y=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(He){if(y?qs(o):Bs(),(i=ut)?(i=Yv(i,Gn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ds!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},a=gg(i),a.return=o,o.child=a,$t=o,ut=null)):i=null,i===null)throw Ps(o);return Uh(i)?o.lanes=32:o.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Bs(),y=o.mode,R=sc({mode:"hidden",children:R},y),c=Lo(c,y,a,null),R.return=o,c.return=o,R.sibling=c,o.child=R,c=o.child,c.memoizedState=Zd(a),c.childLanes=eh(i,C,a),o.memoizedState=Wd,ll(null,c)):(qs(o),th(o,R))}var L=i.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(v)o.flags&256?(qs(o),o.flags&=-257,o=nh(i,o,a)):o.memoizedState!==null?(Bs(),o.child=i.child,o.flags|=128,o=null):(Bs(),R=c.fallback,y=o.mode,c=sc({mode:"visible",children:c.children},y),R=Lo(R,y,a,null),R.flags|=2,c.return=o,R.return=o,c.sibling=R,o.child=c,Ho(o,i.child,null,a),c=o.child,c.memoizedState=Zd(a),c.childLanes=eh(i,C,a),o.memoizedState=Wd,o=ll(null,c));else if(qs(o),Uh(R)){if(C=R.nextSibling&&R.nextSibling.dataset,C)var K=C.dgst;C=K,c=Error(s(419)),c.stack="",c.digest=C,Xa({value:c,source:null,stack:null}),o=nh(i,o,a)}else if(Mt||Nr(i,o,a,!1),C=(a&i.childLanes)!==0,Mt||C){if(C=rt,C!==null&&(c=ba(C,a),c!==0&&c!==L.retryLane))throw L.retryLane=c,Uo(i,c),_n(C,i,c),Xd;kh(R)||hc(),o=nh(i,o,a)}else kh(R)?(o.flags|=192,o.child=i.child,o=null):(i=L.treeContext,ut=Yn(R.nextSibling),$t=o,He=!0,Vs=null,Gn=!1,i!==null&&_g(o,i),o=th(o,c.children),o.flags|=4096);return o}return y?(Bs(),R=c.fallback,y=o.mode,L=i.child,K=L.sibling,c=ji(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,K!==null?R=ji(K,R):(R=Lo(R,y,a,null),R.flags|=2),R.return=o,c.return=o,c.sibling=R,o.child=c,ll(null,c),c=o.child,R=i.child.memoizedState,R===null?R=Zd(a):(y=R.cachePool,y!==null?(L=bt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=wg(),R={baseLanes:R.baseLanes|a,cachePool:y}),c.memoizedState=R,c.childLanes=eh(i,C,a),o.memoizedState=Wd,ll(i.child,c)):(qs(o),a=i.child,i=a.sibling,a=ji(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=a,o.memoizedState=null,a)}function th(i,o){return o=sc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function sc(i,o){return i=xn(22,i,null,o),i.lanes=0,i}function nh(i,o,a){return Ho(o,i.child,null,a),i=th(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Oy(i,o,a){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o),yd(i.return,o,a)}function ih(i,o,a,c,y,v){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=a,C.tailMode=y,C.treeForkCount=v)}function qy(i,o,a){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var C=Tt.current,R=(C&2)!==0;if(R?(C=C&1|2,o.flags|=128):C&=1,H(Tt,C),Xt(i,o,c,a),c=He?Qa:0,!R&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Oy(i,a,o);else if(i.tag===19)Oy(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)i=a.alternate,i!==null&&Ju(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),ih(o,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Ju(i)===null){o.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}ih(o,!0,a,null,v,c);break;case"together":ih(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function is(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Gs|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(Nr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=ji(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=ji(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function sh(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Ou(i)))}function FC(i,o,a){switch(o.tag){case 3:Lt(o,o.stateNode.containerInfo),ks(o,bt,i.memoizedState.cache),Oo();break;case 27:case 5:vo(o);break;case 4:Lt(o,o.stateNode.containerInfo);break;case 10:ks(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,bd(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(qs(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Ly(i,o,a):(qs(o),i=is(i,o,a),i!==null?i.sibling:null);qs(o);break;case 19:var y=(i.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(Nr(i,o,a,!1),c=(a&o.childLanes)!==0),y){if(c)return qy(i,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),H(Tt,Tt.current),c)break;return null;case 22:return o.lanes=0,My(i,o,a,o.pendingProps);case 24:ks(o,bt,i.memoizedState.cache)}return is(i,o,a)}function By(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Mt=!0;else{if(!sh(i,a)&&(o.flags&128)===0)return Mt=!1,FC(i,o,a);Mt=(i.flags&131072)!==0}else Mt=!1,He&&(o.flags&1048576)!==0&&vg(o,Qa,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(i=Fo(o.elementType),o.type=i,typeof i=="function")ud(i)?(c=Jo(i,c),o.tag=1,o=ky(null,o,i,c,a)):(o.tag=0,o=jd(null,o,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===re){o.tag=11,o=Iy(null,o,i,c,a);break e}else if(y===N){o.tag=14,o=by(null,o,i,c,a);break e}}throw o=Ie(i)||i,Error(s(306,o,""))}}return o;case 0:return jd(i,o,o.type,o.pendingProps,a);case 1:return c=o.type,y=Jo(c,o.pendingProps),ky(i,o,c,y,a);case 3:e:{if(Lt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,Cd(i,o),il(o,c,null,a);var C=o.memoizedState;if(c=C.cache,ks(o,bt,c),c!==v.cache&&vd(o,[bt],a,!0),nl(),c=C.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Uy(i,o,c,a);break e}else if(c!==y){y=Bn(Error(s(424)),o),Xa(y),o=Uy(i,o,c,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=Yn(i.firstChild),$t=o,He=!0,Vs=null,Gn=!0,a=Mg(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Oo(),c===y){o=is(i,o,a);break e}Xt(i,o,c,a)}o=o.child}return o;case 26:return ic(i,o),i===null?(a=jv(o.type,null,o.pendingProps,null))?o.memoizedState=a:He||(a=o.type,i=o.pendingProps,c=Tc(Se.current).createElement(a),c[xt]=o,c[zt]=i,jt(c,a,i),Rt(c),o.stateNode=c):o.memoizedState=jv(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return vo(o),i===null&&He&&(c=o.stateNode=$v(o.type,o.pendingProps,Se.current),$t=o,Gn=!0,y=ut,$s(o.type)?(Lh=y,ut=Yn(c.firstChild)):ut=y),Xt(i,o,o.pendingProps.children,a),ic(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&He&&((y=c=ut)&&(c=vw(c,o.type,o.pendingProps,Gn),c!==null?(o.stateNode=c,$t=o,ut=Yn(c.firstChild),Gn=!1,y=!0):y=!1),y||Ps(o)),vo(o),y=o.type,v=o.pendingProps,C=i!==null?i.memoizedProps:null,c=v.children,Dh(y,v)?c=null:C!==null&&Dh(y,C)&&(o.flags|=32),o.memoizedState!==null&&(y=Md(i,o,VC,null,null,a),Al._currentValue=y),ic(i,o),Xt(i,o,c,a),o.child;case 6:return i===null&&He&&((i=a=ut)&&(a=_w(a,o.pendingProps,Gn),a!==null?(o.stateNode=a,$t=o,ut=null,i=!0):i=!1),i||Ps(o)),null;case 13:return Ly(i,o,a);case 4:return Lt(o,o.stateNode.containerInfo),c=o.pendingProps,i===null?o.child=Ho(o,null,c,a):Xt(i,o,c,a),o.child;case 11:return Iy(i,o,o.type,o.pendingProps,a);case 7:return Xt(i,o,o.pendingProps,a),o.child;case 8:return Xt(i,o,o.pendingProps.children,a),o.child;case 12:return Xt(i,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,ks(o,o.type,c.value),Xt(i,o,c.children,a),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,Bo(o),y=Qt(y),c=c(y),o.flags|=1,Xt(i,o,c,a),o.child;case 14:return by(i,o,o.type,o.pendingProps,a);case 15:return Ny(i,o,o.type,o.pendingProps,a);case 19:return qy(i,o,a);case 31:return zC(i,o,a);case 22:return My(i,o,a,o.pendingProps);case 24:return Bo(o),c=Qt(bt),i===null?(y=Ed(),y===null&&(y=rt,v=_d(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:c,cache:y},Ad(o),ks(o,bt,y)):((i.lanes&a)!==0&&(Cd(i,o),il(o,null,null,a),nl()),y=i.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),ks(o,bt,c)):(c=v.cache,ks(o,bt,c),c!==y.cache&&vd(o,[bt],a,!0))),Xt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ss(i){i.flags|=4}function oh(i,o,a,c,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(hv())i.flags|=8192;else throw Go=Fu,Sd}else i.flags&=-16777217}function zy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!n0(o))if(hv())i.flags|=8192;else throw Go=Fu,Sd}function oc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?fu():536870912,i.lanes|=o,Fr|=o)}function ul(i,o){if(!He)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ct(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(o)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,o}function GC(i,o,a){var c=o.pendingProps;switch(hd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(o),null;case 1:return ct(o),null;case 3:return a=o.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),es(bt),dt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(br(o)?ss(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,pd())),ct(o),null;case 26:var y=o.type,v=o.memoizedState;return i===null?(ss(o),v!==null?(ct(o),zy(o,v)):(ct(o),oh(o,y,null,c,a))):v?v!==i.memoizedState?(ss(o),ct(o),zy(o,v)):(ct(o),o.flags&=-16777217):(i=i.memoizedProps,i!==c&&ss(o),ct(o),oh(o,y,i,c,a)),null;case 27:if(ar(o),a=Se.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&ss(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return ct(o),null}i=ae.current,br(o)?Tg(o):(i=$v(y,c,a),o.stateNode=i,ss(o))}return ct(o),null;case 5:if(ar(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&ss(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return ct(o),null}if(v=ae.current,br(o))Tg(o);else{var C=Tc(Se.current);switch(v){case 1:v=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=C.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?C.createElement(y,{is:c.is}):C.createElement(y)}}v[xt]=o,v[zt]=c;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)v.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=v;e:switch(jt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ss(o)}}return ct(o),oh(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==c&&ss(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(i=Se.current,br(o)){if(i=o.stateNode,a=o.memoizedProps,c=null,y=$t,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[xt]=o,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Lv(i.nodeValue,a)),i||Ps(o,!0)}else i=Tc(i).createTextNode(c),i[xt]=o,o.stateNode=i}return ct(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(c=br(o),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[xt]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),i=!1}else a=pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(In(o),o):(In(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ct(o),null;case 13:if(c=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=br(o),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[xt]=o}else Oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),y=!1}else y=pd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(In(o),o):(In(o),null)}return In(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),oc(o,o.updateQueue),ct(o),null);case 4:return dt(),i===null&&Rh(o.stateNode.containerInfo),ct(o),null;case 10:return es(o.type),ct(o),null;case 19:if(ee(Tt),c=o.memoizedState,c===null)return ct(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)ul(c,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Ju(i),v!==null){for(o.flags|=128,ul(c,!1),i=v.updateQueue,o.updateQueue=i,oc(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)pg(a,i),a=a.sibling;return H(Tt,Tt.current&1|2),He&&Wi(o,c.treeForkCount),o.child}i=i.sibling}c.tail!==null&&an()>cc&&(o.flags|=128,y=!0,ul(c,!1),o.lanes=4194304)}else{if(!y)if(i=Ju(v),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,oc(o,i),ul(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!He)return ct(o),null}else 2*an()-c.renderingStartTime>cc&&a!==536870912&&(o.flags|=128,y=!0,ul(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(i=c.last,i!==null?i.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=an(),i.sibling=null,a=Tt.current,H(Tt,y?a&1|2:a&1),He&&Wi(o,c.treeForkCount),i):(ct(o),null);case 22:case 23:return In(o),Id(),c=o.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(ct(o),o.subtreeFlags&6&&(o.flags|=8192)):ct(o),a=o.updateQueue,a!==null&&oc(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),i!==null&&ee(zo),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),es(bt),ct(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function HC(i,o){switch(hd(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return es(bt),dt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return ar(o),null;case 31:if(o.memoizedState!==null){if(In(o),o.alternate===null)throw Error(s(340));Oo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(In(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Oo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ee(Tt),null;case 4:return dt(),null;case 10:return es(o.type),null;case 22:case 23:return In(o),Id(),i!==null&&ee(zo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return es(bt),null;case 25:return null;default:return null}}function Fy(i,o){switch(hd(o),o.tag){case 3:es(bt),dt();break;case 26:case 27:case 5:ar(o);break;case 4:dt();break;case 31:o.memoizedState!==null&&In(o);break;case 13:In(o);break;case 19:ee(Tt);break;case 10:es(o.type);break;case 22:case 23:In(o),Id(),i!==null&&ee(zo);break;case 24:es(bt)}}function cl(i,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,C=a.inst;c=v(),C.destroy=c}a=a.next}while(a!==y)}}catch(R){tt(o,o.return,R)}}function zs(i,o,a){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var C=c.inst,R=C.destroy;if(R!==void 0){C.destroy=void 0,y=o;var L=a,K=R;try{K()}catch(te){tt(y,L,te)}}}c=c.next}while(c!==v)}}catch(te){tt(o,o.return,te)}}function Gy(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{Vg(o,a)}catch(c){tt(i,i.return,c)}}}function Hy(i,o,a){a.props=Jo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){tt(i,o,c)}}function fl(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){tt(i,o,y)}}function Ui(i,o){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){tt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){tt(i,o,y)}else a.current=null}function Yy(i){var o=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){tt(i,i.return,y)}}function rh(i,o,a){try{var c=i.stateNode;dw(c,i.type,a,o),c[zt]=o}catch(y){tt(i,i.return,y)}}function Jy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$s(i.type)||i.tag===4}function ah(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Jy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$s(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lh(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=ti));else if(c!==4&&(c===27&&$s(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(lh(i,o,a),i=i.sibling;i!==null;)lh(i,o,a),i=i.sibling}function rc(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(c!==4&&(c===27&&$s(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(rc(i,o,a),i=i.sibling;i!==null;)rc(i,o,a),i=i.sibling}function Ky(i){var o=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);jt(o,c,a),o[xt]=i,o[zt]=a}catch(v){tt(i,i.return,v)}}var os=!1,Dt=!1,uh=!1,$y=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function YC(i,o){if(i=i.containerInfo,Nh=Rc,i=rg(i),nd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var C=0,R=-1,L=-1,K=0,te=0,ie=i,$=null;t:for(;;){for(var j;ie!==a||y!==0&&ie.nodeType!==3||(R=C+y),ie!==v||c!==0&&ie.nodeType!==3||(L=C+c),ie.nodeType===3&&(C+=ie.nodeValue.length),(j=ie.firstChild)!==null;)$=ie,ie=j;for(;;){if(ie===i)break t;if($===a&&++K===y&&(R=C),$===v&&++te===c&&(L=C),(j=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=j}a=R===-1||L===-1?null:{start:R,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mh={focusedElem:i,selectionRange:a},Rc=!1,Gt=o;Gt!==null;)if(o=Gt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Gt=i;else for(;Gt!==null;){switch(o=Gt,v=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var ve=Jo(a.type,y);i=c.getSnapshotBeforeUpdate(ve,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(xe){tt(a,a.return,xe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)Ph(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ph(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Gt=i;break}Gt=o.return}}function Qy(i,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:as(i,a),c&4&&cl(5,a);break;case 1:if(as(i,a),c&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(C){tt(a,a.return,C)}else{var y=Jo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){tt(a,a.return,C)}}c&64&&Gy(a),c&512&&fl(a,a.return);break;case 3:if(as(i,a),c&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{Vg(i,o)}catch(C){tt(a,a.return,C)}}break;case 27:o===null&&c&4&&Ky(a);case 26:case 5:as(i,a),o===null&&c&4&&Yy(a),c&512&&fl(a,a.return);break;case 12:as(i,a);break;case 31:as(i,a),c&4&&Wy(i,a);break;case 13:as(i,a),c&4&&Zy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=ew.bind(null,a),Tw(i,a))));break;case 22:if(c=a.memoizedState!==null||os,!c){o=o!==null&&o.memoizedState!==null||Dt,y=os;var v=Dt;os=c,(Dt=o)&&!v?ls(i,a,(a.subtreeFlags&8772)!==0):as(i,a),os=y,Dt=v}break;case 30:break;default:as(i,a)}}function Xy(i){var o=i.alternate;o!==null&&(i.alternate=null,Xy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&dr(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var mt=null,pn=!1;function rs(i,o,a){for(a=a.child;a!==null;)jy(i,o,a),a=a.sibling}function jy(i,o,a){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(jn,a)}catch{}switch(a.tag){case 26:Dt||Ui(a,o),rs(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ui(a,o);var c=mt,y=pn;$s(a.type)&&(mt=a.stateNode,pn=!1),rs(i,o,a),Tl(a.stateNode),mt=c,pn=y;break;case 5:Dt||Ui(a,o);case 6:if(c=mt,y=pn,mt=null,rs(i,o,a),mt=c,pn=y,mt!==null)if(pn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(v){tt(a,o,v)}else try{mt.removeChild(a.stateNode)}catch(v){tt(a,o,v)}break;case 18:mt!==null&&(pn?(i=mt,Gv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Xr(i)):Gv(mt,a.stateNode));break;case 4:c=mt,y=pn,mt=a.stateNode.containerInfo,pn=!0,rs(i,o,a),mt=c,pn=y;break;case 0:case 11:case 14:case 15:zs(2,a,o),Dt||zs(4,a,o),rs(i,o,a);break;case 1:Dt||(Ui(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Hy(a,o,c)),rs(i,o,a);break;case 21:rs(i,o,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,rs(i,o,a),Dt=c;break;default:rs(i,o,a)}}function Wy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xr(i)}catch(a){tt(o,o.return,a)}}}function Zy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xr(i)}catch(a){tt(o,o.return,a)}}function JC(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new $y),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new $y),o;default:throw Error(s(435,i.tag))}}function ac(i,o){var a=JC(i);o.forEach(function(c){if(!a.has(c)){a.add(c);var y=tw.bind(null,i,c);c.then(y,y)}})}function gn(i,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,C=o,R=C;e:for(;R!==null;){switch(R.tag){case 27:if($s(R.type)){mt=R.stateNode,pn=!1;break e}break;case 5:mt=R.stateNode,pn=!1;break e;case 3:case 4:mt=R.stateNode.containerInfo,pn=!0;break e}R=R.return}if(mt===null)throw Error(s(160));jy(v,C,y),mt=null,pn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ev(o,i),o=o.sibling}var ai=null;function ev(i,o){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:gn(o,i),yn(i),c&4&&(zs(3,i,i.return),cl(3,i),zs(5,i,i.return));break;case 1:gn(o,i),yn(i),c&512&&(Dt||a===null||Ui(a,a.return)),c&64&&os&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=ai;if(gn(o,i),yn(i),c&512&&(Dt||a===null||Ui(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Si]||v[xt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),jt(v,c,a),v[xt]=i,Rt(v),c=v;break e;case"link":var C=e0("link","href",y).get(c+(a.href||""));if(C){for(var R=0;R<C.length;R++)if(v=C[R],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(R,1);break t}}v=y.createElement(c),jt(v,c,a),y.head.appendChild(v);break;case"meta":if(C=e0("meta","content",y).get(c+(a.content||""))){for(R=0;R<C.length;R++)if(v=C[R],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(R,1);break t}}v=y.createElement(c),jt(v,c,a),y.head.appendChild(v);break;default:throw Error(s(468,c))}v[xt]=i,Rt(v),c=v}i.stateNode=c}else t0(y,i.type,i.stateNode);else i.stateNode=Zv(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?t0(y,i.type,i.stateNode):Zv(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&rh(i,i.memoizedProps,a.memoizedProps)}break;case 27:gn(o,i),yn(i),c&512&&(Dt||a===null||Ui(a,a.return)),a!==null&&c&4&&rh(i,i.memoizedProps,a.memoizedProps);break;case 5:if(gn(o,i),yn(i),c&512&&(Dt||a===null||Ui(a,a.return)),i.flags&32){y=i.stateNode;try{mn(y,"")}catch(ve){tt(i,i.return,ve)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,rh(i,y,a!==null?a.memoizedProps:y)),c&1024&&(uh=!0);break;case 6:if(gn(o,i),yn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(ve){tt(i,i.return,ve)}}break;case 3:if(Ac=null,y=ai,ai=Ec(o.containerInfo),gn(o,i),ai=y,yn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Xr(o.containerInfo)}catch(ve){tt(i,i.return,ve)}uh&&(uh=!1,tv(i));break;case 4:c=ai,ai=Ec(i.stateNode.containerInfo),gn(o,i),yn(i),ai=c;break;case 12:gn(o,i),yn(i);break;case 31:gn(o,i),yn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 13:gn(o,i),yn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uc=an()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 22:y=i.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,K=os,te=Dt;if(os=K||y,Dt=te||L,gn(o,i),Dt=te,os=K,yn(i),c&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||L||os||Dt||Ko(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){L=a=o;try{if(v=L.stateNode,y)C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{R=L.stateNode;var ie=L.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ve){tt(L,L.return,ve)}}}else if(o.tag===6){if(a===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ve){tt(L,L.return,ve)}}}else if(o.tag===18){if(a===null){L=o;try{var j=L.stateNode;y?Hv(j,!0):Hv(L.stateNode,!1)}catch(ve){tt(L,L.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ac(i,a))));break;case 19:gn(o,i),yn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ac(i,c)));break;case 30:break;case 21:break;default:gn(o,i),yn(i)}}function yn(i){var o=i.flags;if(o&2){try{for(var a,c=i.return;c!==null;){if(Jy(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,v=ah(i);rc(i,v,y);break;case 5:var C=a.stateNode;a.flags&32&&(mn(C,""),a.flags&=-33);var R=ah(i);rc(i,R,C);break;case 3:case 4:var L=a.stateNode.containerInfo,K=ah(i);lh(i,K,L);break;default:throw Error(s(161))}}catch(te){tt(i,i.return,te)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function tv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;tv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function as(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Qy(i,o.alternate,o),o=o.sibling}function Ko(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:zs(4,o,o.return),Ko(o);break;case 1:Ui(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Hy(o,o.return,a),Ko(o);break;case 27:Tl(o.stateNode);case 26:case 5:Ui(o,o.return),Ko(o);break;case 22:o.memoizedState===null&&Ko(o);break;case 30:Ko(o);break;default:Ko(o)}i=i.sibling}}function ls(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=i,v=o,C=v.flags;switch(v.tag){case 0:case 11:case 15:ls(y,v,a),cl(4,v);break;case 1:if(ls(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){tt(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)Dg(L[y],R)}catch(K){tt(c,c.return,K)}}a&&C&64&&Gy(v),fl(v,v.return);break;case 27:Ky(v);case 26:case 5:ls(y,v,a),a&&c===null&&C&4&&Yy(v),fl(v,v.return);break;case 12:ls(y,v,a);break;case 31:ls(y,v,a),a&&C&4&&Wy(y,v);break;case 13:ls(y,v,a),a&&C&4&&Zy(y,v);break;case 22:v.memoizedState===null&&ls(y,v,a),fl(v,v.return);break;case 30:break;default:ls(y,v,a)}o=o.sibling}}function ch(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ja(a))}function fh(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ja(i))}function li(i,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)nv(i,o,a,c),o=o.sibling}function nv(i,o,a,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:li(i,o,a,c),y&2048&&cl(9,o);break;case 1:li(i,o,a,c);break;case 3:li(i,o,a,c),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ja(i)));break;case 12:if(y&2048){li(i,o,a,c),i=o.stateNode;try{var v=o.memoizedProps,C=v.id,R=v.onPostCommit;typeof R=="function"&&R(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){tt(o,o.return,L)}}else li(i,o,a,c);break;case 31:li(i,o,a,c);break;case 13:li(i,o,a,c);break;case 23:break;case 22:v=o.stateNode,C=o.alternate,o.memoizedState!==null?v._visibility&2?li(i,o,a,c):dl(i,o):v._visibility&2?li(i,o,a,c):(v._visibility|=2,qr(i,o,a,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&ch(C,o);break;case 24:li(i,o,a,c),y&2048&&fh(o.alternate,o);break;default:li(i,o,a,c)}}function qr(i,o,a,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=i,C=o,R=a,L=c,K=C.flags;switch(C.tag){case 0:case 11:case 15:qr(v,C,R,L,y),cl(8,C);break;case 23:break;case 22:var te=C.stateNode;C.memoizedState!==null?te._visibility&2?qr(v,C,R,L,y):dl(v,C):(te._visibility|=2,qr(v,C,R,L,y)),y&&K&2048&&ch(C.alternate,C);break;case 24:qr(v,C,R,L,y),y&&K&2048&&fh(C.alternate,C);break;default:qr(v,C,R,L,y)}o=o.sibling}}function dl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,c=o,y=c.flags;switch(c.tag){case 22:dl(a,c),y&2048&&ch(c.alternate,c);break;case 24:dl(a,c),y&2048&&fh(c.alternate,c);break;default:dl(a,c)}o=o.sibling}}var hl=8192;function Br(i,o,a){if(i.subtreeFlags&hl)for(i=i.child;i!==null;)iv(i,o,a),i=i.sibling}function iv(i,o,a){switch(i.tag){case 26:Br(i,o,a),i.flags&hl&&i.memoizedState!==null&&Dw(a,ai,i.memoizedState,i.memoizedProps);break;case 5:Br(i,o,a);break;case 3:case 4:var c=ai;ai=Ec(i.stateNode.containerInfo),Br(i,o,a),ai=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=hl,hl=16777216,Br(i,o,a),hl=c):Br(i,o,a));break;default:Br(i,o,a)}}function sv(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ml(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Gt=c,rv(c,i)}sv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ov(i),i=i.sibling}function ov(i){switch(i.tag){case 0:case 11:case 15:ml(i),i.flags&2048&&zs(9,i,i.return);break;case 3:ml(i);break;case 12:ml(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,lc(i)):ml(i);break;default:ml(i)}}function lc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Gt=c,rv(c,i)}sv(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:zs(8,o,o.return),lc(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,lc(o));break;default:lc(o)}i=i.sibling}}function rv(i,o){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:zs(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ja(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Gt=c;else e:for(a=i;Gt!==null;){c=Gt;var y=c.sibling,v=c.return;if(Xy(c),c===a){Gt=null;break e}if(y!==null){y.return=v,Gt=y;break e}Gt=v}}}var KC={getCacheForType:function(i){var o=Qt(bt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Qt(bt).controller.signal}},$C=typeof WeakMap=="function"?WeakMap:Map,je=0,rt=null,Le=null,qe=0,et=0,bn=null,Fs=!1,zr=!1,dh=!1,us=0,yt=0,Gs=0,$o=0,hh=0,Nn=0,Fr=0,pl=null,vn=null,mh=!1,uc=0,av=0,cc=1/0,fc=null,Hs=null,qt=0,Ys=null,Gr=null,cs=0,ph=0,gh=null,lv=null,gl=0,yh=null;function Mn(){return(je&2)!==0&&qe!==0?qe&-qe:W.T!==null?Ah():du()}function uv(){if(Nn===0)if((qe&536870912)===0||He){var i=Eo;Eo<<=1,(Eo&3932160)===0&&(Eo=262144),Nn=i}else Nn=536870912;return i=Rn.current,i!==null&&(i.flags|=32),Nn}function _n(i,o,a){(i===rt&&(et===2||et===9)||i.cancelPendingCommit!==null)&&(Hr(i,0),Js(i,qe,Nn,!1)),So(i,a),((je&2)===0||i!==rt)&&(i===rt&&((je&2)===0&&($o|=a),yt===4&&Js(i,qe,Nn,!1)),Li(i))}function cv(i,o,a){if((je&6)!==0)throw Error(s(327));var c=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Wn(i,o),y=c?jC(i,o):_h(i,o,!0),v=c;do{if(y===0){zr&&!c&&Js(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!QC(a)){y=_h(i,o,!1),v=!1;continue}if(y===2){if(v=o,i.errorRecoveryDisabledLanes&v)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var R=i;y=pl;var L=R.current.memoizedState.isDehydrated;if(L&&(Hr(R,C).flags|=256),C=_h(R,C,!1),C!==2){if(dh&&!L){R.errorRecoveryDisabledLanes|=v,$o|=v,y=4;break e}v=vn,vn=y,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}y=C}if(v=!1,y!==2)continue}}if(y===1){Hr(i,0),Js(i,o,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Js(c,o,Nn,!Fs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(y=uc+300-an(),10<y)){if(Js(c,o,Nn,!Fs),_i(c,0,!0)!==0)break e;cs=o,c.timeoutHandle=zv(fv.bind(null,c,a,vn,fc,mh,o,Nn,$o,Fr,Fs,v,"Throttled",-0,0),y);break e}fv(c,a,vn,fc,mh,o,Nn,$o,Fr,Fs,v,null,-0,0)}}break}while(!0);Li(i)}function fv(i,o,a,c,y,v,C,R,L,K,te,ie,$,j){if(i.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},iv(o,v,ie);var ve=(v&62914560)===v?uc-an():(v&4194048)===v?av-an():0;if(ve=Vw(ie,ve),ve!==null){cs=v,i.cancelPendingCommit=ve(_v.bind(null,i,o,v,a,c,y,C,R,L,te,ie,null,$,j)),Js(i,v,C,!K);return}}_v(i,o,v,a,c,y,C,R,L)}function QC(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!wn(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Js(i,o,a,c){o&=~hh,o&=~$o,i.suspendedLanes|=o,i.pingedLanes&=~o,c&&(i.warmLanes|=o),c=i.expirationTimes;for(var y=o;0<y;){var v=31-vt(y),C=1<<v;c[v]=-1,y&=~C}a!==0&&Ao(i,a,o)}function dc(){return(je&6)===0?(yl(0),!1):!0}function vh(){if(Le!==null){if(et===0)var i=Le.return;else i=Le,Zi=qo=null,Pd(i),Pr=null,Za=0,i=Le;for(;i!==null;)Fy(i.alternate,i),i=i.return;Le=null}}function Hr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,pw(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),cs=0,vh(),rt=i,Le=a=ji(i.current,null),qe=o,et=0,bn=null,Fs=!1,zr=Wn(i,o),dh=!1,Fr=Nn=hh=$o=Gs=yt=0,vn=pl=null,mh=!1,(o&8)!==0&&(o|=o&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=o;0<c;){var y=31-vt(c),v=1<<y;o|=i[y],c&=~v}return us=o,Vu(),a}function dv(i,o){Pe=null,W.H=al,o===Vr||o===zu?(o=Ig(),et=3):o===Sd?(o=Ig(),et=4):et=o===Xd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bn=o,Le===null&&(yt=1,tc(i,Bn(o,i.current)))}function hv(){var i=Rn.current;return i===null?!0:(qe&4194048)===qe?Hn===null:(qe&62914560)===qe||(qe&536870912)!==0?i===Hn:!1}function mv(){var i=W.H;return W.H=al,i===null?al:i}function pv(){var i=W.A;return W.A=KC,i}function hc(){yt=4,Fs||(qe&4194048)!==qe&&Rn.current!==null||(zr=!0),(Gs&134217727)===0&&($o&134217727)===0||rt===null||Js(rt,qe,Nn,!1)}function _h(i,o,a){var c=je;je|=2;var y=mv(),v=pv();(rt!==i||qe!==o)&&(fc=null,Hr(i,o)),o=!1;var C=yt;e:do try{if(et!==0&&Le!==null){var R=Le,L=bn;switch(et){case 8:vh(),C=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(o=!0);var K=et;if(et=0,bn=null,Yr(i,R,L,K),a&&zr){C=0;break e}break;default:K=et,et=0,bn=null,Yr(i,R,L,K)}}XC(),C=yt;break}catch(te){dv(i,te)}while(!0);return o&&i.shellSuspendCounter++,Zi=qo=null,je=c,W.H=y,W.A=v,Le===null&&(rt=null,qe=0,Vu()),C}function XC(){for(;Le!==null;)gv(Le)}function jC(i,o){var a=je;je|=2;var c=mv(),y=pv();rt!==i||qe!==o?(fc=null,cc=an()+500,Hr(i,o)):zr=Wn(i,o);e:do try{if(et!==0&&Le!==null){o=Le;var v=bn;t:switch(et){case 1:et=0,bn=null,Yr(i,o,v,1);break;case 2:case 9:if(xg(v)){et=0,bn=null,yv(o);break}o=function(){et!==2&&et!==9||rt!==i||(et=7),Li(i)},v.then(o,o);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:xg(v)?(et=0,bn=null,yv(o)):(et=0,bn=null,Yr(i,o,v,7));break;case 5:var C=null;switch(Le.tag){case 26:C=Le.memoizedState;case 5:case 27:var R=Le;if(C?n0(C):R.stateNode.complete){et=0,bn=null;var L=R.sibling;if(L!==null)Le=L;else{var K=R.return;K!==null?(Le=K,mc(K)):Le=null}break t}}et=0,bn=null,Yr(i,o,v,5);break;case 6:et=0,bn=null,Yr(i,o,v,6);break;case 8:vh(),yt=6;break e;default:throw Error(s(462))}}WC();break}catch(te){dv(i,te)}while(!0);return Zi=qo=null,W.H=c,W.A=y,je=a,Le!==null?0:(rt=null,qe=0,Vu(),yt)}function WC(){for(;Le!==null&&!Qf();)gv(Le)}function gv(i){var o=By(i.alternate,i,us);i.memoizedProps=i.pendingProps,o===null?mc(i):Le=o}function yv(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=Py(a,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=Py(a,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:Pd(o);default:Fy(a,o),o=Le=pg(o,us),o=By(a,o,us)}i.memoizedProps=i.pendingProps,o===null?mc(i):Le=o}function Yr(i,o,a,c){Zi=qo=null,Pd(o),Pr=null,Za=0;var y=o.return;try{if(BC(i,y,o,a,qe)){yt=1,tc(i,Bn(a,i.current)),Le=null;return}}catch(v){if(y!==null)throw Le=y,v;yt=1,tc(i,Bn(a,i.current)),Le=null;return}o.flags&32768?(He||c===1?i=!0:zr||(qe&536870912)!==0?i=!1:(Fs=i=!0,(c===2||c===9||c===3||c===6)&&(c=Rn.current,c!==null&&c.tag===13&&(c.flags|=16384))),vv(o,i)):mc(o)}function mc(i){var o=i;do{if((o.flags&32768)!==0){vv(o,Fs);return}i=o.return;var a=GC(o.alternate,o,us);if(a!==null){Le=a;return}if(o=o.sibling,o!==null){Le=o;return}Le=o=i}while(o!==null);yt===0&&(yt=5)}function vv(i,o){do{var a=HC(i.alternate,i);if(a!==null){a.flags&=32767,Le=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Le=i;return}Le=i=a}while(i!==null);yt=6,Le=null}function _v(i,o,a,c,y,v,C,R,L){i.cancelPendingCommit=null;do pc();while(qt!==0);if((je&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=ad,Wf(i,a,v,C,R,L),i===rt&&(Le=rt=null,qe=0),Gr=o,Ys=i,cs=a,ph=v,gh=y,lv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,nw(Ss,function(){return Cv(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=le.p,le.p=2,C=je,je|=4;try{YC(i,o,a)}finally{je=C,le.p=y,W.T=c}}qt=1,Tv(),Ev(),Sv()}}function Tv(){if(qt===1){qt=0;var i=Ys,o=Gr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var c=le.p;le.p=2;var y=je;je|=4;try{ev(o,i);var v=Mh,C=rg(i.containerInfo),R=v.focusedElem,L=v.selectionRange;if(C!==R&&R&&R.ownerDocument&&og(R.ownerDocument.documentElement,R)){if(L!==null&&nd(R)){var K=L.start,te=L.end;if(te===void 0&&(te=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(te,R.value.length);else{var ie=R.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var j=$.getSelection(),ve=R.textContent.length,xe=Math.min(L.start,ve),ot=L.end===void 0?xe:Math.min(L.end,ve);!j.extend&&xe>ot&&(C=ot,ot=xe,xe=C);var G=sg(R,xe),B=sg(R,ot);if(G&&B&&(j.rangeCount!==1||j.anchorNode!==G.node||j.anchorOffset!==G.offset||j.focusNode!==B.node||j.focusOffset!==B.offset)){var J=ie.createRange();J.setStart(G.node,G.offset),j.removeAllRanges(),xe>ot?(j.addRange(J),j.extend(B.node,B.offset)):(J.setEnd(B.node,B.offset),j.addRange(J))}}}}for(ie=[],j=R;j=j.parentNode;)j.nodeType===1&&ie.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var ne=ie[R];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Rc=!!Nh,Mh=Nh=null}finally{je=y,le.p=c,W.T=a}}i.current=o,qt=2}}function Ev(){if(qt===2){qt=0;var i=Ys,o=Gr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var c=le.p;le.p=2;var y=je;je|=4;try{Qy(i,o.alternate,o)}finally{je=y,le.p=c,W.T=a}}qt=3}}function Sv(){if(qt===4||qt===3){qt=0,ou();var i=Ys,o=Gr,a=cs,c=lv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?qt=5:(qt=0,Gr=Ys=null,Av(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Hs=null),Ki(a),o=o.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(jn,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=W.T,y=le.p,le.p=2,W.T=null;try{for(var v=i.onRecoverableError,C=0;C<c.length;C++){var R=c[C];v(R.value,{componentStack:R.stack})}}finally{W.T=o,le.p=y}}(cs&3)!==0&&pc(),Li(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===yh?gl++:(gl=0,yh=i):gl=0,yl(0)}}function Av(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ja(o)))}function pc(){return Tv(),Ev(),Sv(),Cv()}function Cv(){if(qt!==5)return!1;var i=Ys,o=ph;ph=0;var a=Ki(cs),c=W.T,y=le.p;try{le.p=32>a?32:a,W.T=null,a=gh,gh=null;var v=Ys,C=cs;if(qt=0,Gr=Ys=null,cs=0,(je&6)!==0)throw Error(s(331));var R=je;if(je|=4,ov(v.current),nv(v,v.current,C,a),je=R,yl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(jn,v)}catch{}return!0}finally{le.p=y,W.T=c,Av(i,o)}}function wv(i,o,a){o=Bn(a,o),o=Qd(i.stateNode,o,2),i=Os(i,o,2),i!==null&&(So(i,2),Li(i))}function tt(i,o,a){if(i.tag===3)wv(i,i,a);else for(;o!==null;){if(o.tag===3){wv(o,i,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hs===null||!Hs.has(c))){i=Bn(a,i),a=xy(2),c=Os(o,a,2),c!==null&&(Ry(a,c,o,i),So(c,2),Li(c));break}}o=o.return}}function Th(i,o,a){var c=i.pingCache;if(c===null){c=i.pingCache=new $C;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(a)||(dh=!0,y.add(a),i=ZC.bind(null,i,o,a),o.then(i,i))}function ZC(i,o,a){var c=i.pingCache;c!==null&&c.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,rt===i&&(qe&a)===a&&(yt===4||yt===3&&(qe&62914560)===qe&&300>an()-uc?(je&2)===0&&Hr(i,0):hh|=a,Fr===qe&&(Fr=0)),Li(i)}function xv(i,o){o===0&&(o=fu()),i=Uo(i,o),i!==null&&(So(i,o),Li(i))}function ew(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),xv(i,a)}function tw(i,o){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),xv(i,a)}function nw(i,o){return Ot(i,o)}var gc=null,Jr=null,Eh=!1,yc=!1,Sh=!1,Ks=0;function Li(i){i!==Jr&&i.next===null&&(Jr===null?gc=Jr=i:Jr=Jr.next=i),yc=!0,Eh||(Eh=!0,sw())}function yl(i,o){if(!Sh&&yc){Sh=!0;do for(var a=!1,c=gc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var C=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-vt(42|i)+1)-1,v&=y&~(C&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,Nv(c,v))}else v=qe,v=_i(c,c===rt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Wn(c,v)||(a=!0,Nv(c,v));c=c.next}while(a);Sh=!1}}function iw(){Rv()}function Rv(){yc=Eh=!1;var i=0;Ks!==0&&mw()&&(i=Ks);for(var o=an(),a=null,c=gc;c!==null;){var y=c.next,v=Iv(c,o);v===0?(c.next=null,a===null?gc=y:a.next=y,y===null&&(Jr=a)):(a=c,(i!==0||(v&3)!==0)&&(yc=!0)),c=y}qt!==0&&qt!==5||yl(i),Ks!==0&&(Ks=0)}function Iv(i,o){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var C=31-vt(v),R=1<<C,L=y[C];L===-1?((R&a)===0||(R&c)!==0)&&(y[C]=jf(R,o)):L<=o&&(i.expiredLanes|=R),v&=~R}if(o=rt,a=qe,a=_i(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===o&&(et===2||et===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Es(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Wn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(c!==null&&Es(c),Ki(a)){case 2:case 8:a=Ra;break;case 32:a=Ss;break;case 268435456:a=ru;break;default:a=Ss}return c=bv.bind(null,i),a=Ot(a,c),i.callbackPriority=o,i.callbackNode=a,o}return c!==null&&c!==null&&Es(c),i.callbackPriority=2,i.callbackNode=null,2}function bv(i,o){if(qt!==0&&qt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(pc()&&i.callbackNode!==a)return null;var c=qe;return c=_i(i,i===rt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(cv(i,c,o),Iv(i,an()),i.callbackNode!=null&&i.callbackNode===a?bv.bind(null,i):null)}function Nv(i,o){if(pc())return null;cv(i,o,!0)}function sw(){gw(function(){(je&6)!==0?Ot(xa,iw):Rv()})}function Ah(){if(Ks===0){var i=Mr;i===0&&(i=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Ks=i}return Ks}function Mv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:gr(""+i)}function Dv(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function ow(i,o,a,c,y){if(o==="submit"&&a&&a.stateNode===y){var v=Mv((y[zt]||null).action),C=c.submitter;C&&(o=(o=C[zt]||null)?Mv(o.formAction):C.getAttribute("formAction"),o!==null&&(v=o,C=null));var R=new Ni("action","action",null,c,y);i.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ks!==0){var L=C?Dv(y,C):new FormData(y);Gd(a,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(R.preventDefault(),L=C?Dv(y,C):new FormData(y),Gd(a,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var Ch=0;Ch<rd.length;Ch++){var wh=rd[Ch],rw=wh.toLowerCase(),aw=wh[0].toUpperCase()+wh.slice(1);ri(rw,"on"+aw)}ri(ug,"onAnimationEnd"),ri(cg,"onAnimationIteration"),ri(fg,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(AC,"onTransitionRun"),ri(CC,"onTransitionStart"),ri(wC,"onTransitionCancel"),ri(dg,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vl));function Vv(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var C=c.length-1;0<=C;C--){var R=c[C],L=R.instance,K=R.currentTarget;if(R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(te){Du(te)}y.currentTarget=null,v=L}else for(C=0;C<c.length;C++){if(R=c[C],L=R.instance,K=R.currentTarget,R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(te){Du(te)}y.currentTarget=null,v=L}}}}function Oe(i,o){var a=o[fr];a===void 0&&(a=o[fr]=new Set);var c=i+"__bubble";a.has(c)||(Pv(o,i,2,!1),a.add(c))}function xh(i,o,a){var c=0;o&&(c|=4),Pv(a,i,c,o)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Rh(i){if(!i[vc]){i[vc]=!0,Na.forEach(function(a){a!=="selectionchange"&&(lw.has(a)||xh(a,!1,i),xh(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[vc]||(o[vc]=!0,xh("selectionchange",!1,o))}}function Pv(i,o,a,c){switch(u0(o)){case 2:var y=Uw;break;case 8:y=Lw;break;default:y=Fh}a=y.bind(null,o,a,i),y=void 0,!Io||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(o,a,{capture:!0,passive:y}):i.addEventListener(o,a,!0):y!==void 0?i.addEventListener(o,a,{passive:y}):i.addEventListener(o,a,!1)}function Ih(i,o,a,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var R=c.stateNode.containerInfo;if(R===y)break;if(C===4)for(C=c.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;R!==null;){if(C=Ai(R),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){c=v=C;continue e}R=R.parentNode}}c=c.return}Is(function(){var K=v,te=Un(a),ie=[];e:{var $=hg.get(i);if($!==void 0){var j=Ni,ve=i;switch(i){case"keypress":if(No(a)===0)break e;case"keydown":case"keyup":j=bu;break;case"focusin":ve="focus",j=Do;break;case"focusout":ve="blur",j=Do;break;case"beforeblur":case"afterblur":j=Do;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=E;break;case ug:case cg:case fg:j=Su;break;case dg:j=b;break;case"scroll":case"scrollend":j=Fa;break;case"wheel":j=X;break;case"copy":case"cut":case"paste":j=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Xi;break;case"toggle":case"beforetoggle":j=Ve}var xe=(o&4)!==0,ot=!xe&&(i==="scroll"||i==="scrollend"),G=xe?$!==null?$+"Capture":null:$;xe=[];for(var B=K,J;B!==null;){var ne=B;if(J=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||J===null||G===null||(ne=ni(B,G),ne!=null&&xe.push(_l(B,ne,J))),ot)break;B=B.return}0<xe.length&&($=new j($,ve,null,a,te),ie.push({event:$,listeners:xe}))}}if((o&7)===0){e:{if($=i==="mouseover"||i==="pointerover",j=i==="mouseout"||i==="pointerout",$&&a!==qa&&(ve=a.relatedTarget||a.fromElement)&&(Ai(ve)||ve[Ei]))break e;if((j||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,j?(ve=a.relatedTarget||a.toElement,j=K,ve=ve?Ai(ve):null,ve!==null&&(ot=l(ve),xe=ve.tag,ve!==ot||xe!==5&&xe!==27&&xe!==6)&&(ve=null)):(j=null,ve=K),j!==ve)){if(xe=Ga,ne="onMouseLeave",G="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(xe=Xi,ne="onPointerLeave",G="onPointerEnter",B="pointer"),ot=j==null?$:An(j),J=ve==null?$:An(ve),$=new xe(ne,B+"leave",j,a,te),$.target=ot,$.relatedTarget=J,ne=null,Ai(te)===K&&(xe=new xe(G,B+"enter",ve,a,te),xe.target=J,xe.relatedTarget=ot,ne=xe),ot=ne,j&&ve)t:{for(xe=uw,G=j,B=ve,J=0,ne=G;ne;ne=xe(ne))J++;ne=0;for(var Ae=B;Ae;Ae=xe(Ae))ne++;for(;0<J-ne;)G=xe(G),J--;for(;0<ne-J;)B=xe(B),ne--;for(;J--;){if(G===B||B!==null&&G===B.alternate){xe=G;break t}G=xe(G),B=xe(B)}xe=null}else xe=null;j!==null&&kv(ie,$,j,xe,!1),ve!==null&&ot!==null&&kv(ie,ot,ve,xe,!0)}}e:{if($=K?An(K):window,j=$.nodeName&&$.nodeName.toLowerCase(),j==="select"||j==="input"&&$.type==="file")var Ke=Wp;else if(Xp($))if(Zp)Ke=TC;else{Ke=vC;var _e=yC}else j=$.nodeName,!j||j.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&pr(K.elementType)&&(Ke=Wp):Ke=_C;if(Ke&&(Ke=Ke(i,K))){jp(ie,Ke,a,te);break e}_e&&_e(i,$,K),i==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Ua($,"number",$.value)}switch(_e=K?An(K):window,i){case"focusin":(Xp(_e)||_e.contentEditable==="true")&&(Ar=_e,id=K,$a=null);break;case"focusout":$a=id=Ar=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,ag(ie,a,te);break;case"selectionchange":if(SC)break;case"keydown":case"keyup":ag(ie,a,te)}var ke;if(Xe)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Sr?Vo(i,a)&&(Be="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Vi&&a.locale!=="ko"&&(Sr||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Sr&&(ke=za()):(bi=te,Ba="value"in bi?bi.value:bi.textContent,Sr=!0)),_e=_c(K,Be),0<_e.length&&(Be=new Di(Be,i,null,a,te),ie.push({event:Be,listeners:_e}),ke?Be.data=ke:(ke=Er(a),ke!==null&&(Be.data=ke)))),(ke=On?hC(i,a):mC(i,a))&&(Be=_c(K,"onBeforeInput"),0<Be.length&&(_e=new Di("onBeforeInput","beforeinput",null,a,te),ie.push({event:_e,listeners:Be}),_e.data=ke)),ow(ie,i,K,a,te)}Vv(ie,o)})}function _l(i,o,a){return{instance:i,listener:o,currentTarget:a}}function _c(i,o){for(var a=o+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ni(i,a),y!=null&&c.unshift(_l(i,y,v)),y=ni(i,o),y!=null&&c.push(_l(i,y,v))),i.tag===3)return c;i=i.return}return[]}function uw(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function kv(i,o,a,c,y){for(var v=o._reactName,C=[];a!==null&&a!==c;){var R=a,L=R.alternate,K=R.stateNode;if(R=R.tag,L!==null&&L===c)break;R!==5&&R!==26&&R!==27||K===null||(L=K,y?(K=ni(a,v),K!=null&&C.unshift(_l(a,K,L))):y||(K=ni(a,v),K!=null&&C.push(_l(a,K,L)))),a=a.return}C.length!==0&&i.push({event:o,listeners:C})}var cw=/\r\n?/g,fw=/\u0000|\uFFFD/g;function Uv(i){return(typeof i=="string"?i:""+i).replace(cw,`
`).replace(fw,"")}function Lv(i,o){return o=Uv(o),Uv(i)===o}function st(i,o,a,c,y,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||mn(i,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&mn(i,""+c);break;case"className":Cn(i,"class",c);break;case"tabIndex":Cn(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(i,a,c);break;case"style":Oa(i,c,v);break;case"data":if(o!=="object"){Cn(i,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=gr(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&st(i,o,"name",y.name,y,null),st(i,o,"formEncType",y.formEncType,y,null),st(i,o,"formMethod",y.formMethod,y,null),st(i,o,"formTarget",y.formTarget,y,null)):(st(i,o,"encType",y.encType,y,null),st(i,o,"method",y.method,y,null),st(i,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=gr(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=ti);break;case"onScroll":c!=null&&Oe("scroll",i);break;case"onScrollEnd":c!=null&&Oe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=gr(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Oe("beforetoggle",i),Oe("toggle",i),hr(i,"popover",c);break;case"xlinkActuate":It(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":It(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":It(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":It(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":It(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":It(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":It(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":It(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":It(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":hr(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=_u.get(a)||a,hr(i,a,c))}}function bh(i,o,a,c,y,v){switch(a){case"style":Oa(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?mn(i,c):(typeof c=="number"||typeof c=="bigint")&&mn(i,""+c);break;case"onScroll":c!=null&&Oe("scroll",i);break;case"onScrollEnd":c!=null&&Oe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=i[zt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):hr(i,a,c)}}}function jt(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",i),Oe("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var C=a[v];if(C!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:st(i,o,v,C,a,null)}}y&&st(i,o,"srcSet",a.srcSet,a,null),c&&st(i,o,"src",a.src,a,null);return;case"input":Oe("invalid",i);var R=v=C=y=null,L=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var te=a[c];if(te!=null)switch(c){case"name":y=te;break;case"type":C=te;break;case"checked":L=te;break;case"defaultChecked":K=te;break;case"value":v=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,o));break;default:st(i,o,c,te,a,null)}}gu(i,v,R,L,K,C,y,!1);return;case"select":Oe("invalid",i),c=C=v=null;for(y in a)if(a.hasOwnProperty(y)&&(R=a[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":C=R;break;case"multiple":c=R;default:st(i,o,y,R,a,null)}o=v,a=C,i.multiple=!!c,o!=null?Cs(i,!!c,o,!1):a!=null&&Cs(i,!!c,a,!0);return;case"textarea":Oe("invalid",i),v=y=c=null;for(C in a)if(a.hasOwnProperty(C)&&(R=a[C],R!=null))switch(C){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:st(i,o,C,R,a,null)}ws(i,c,y,v);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(c=a[L],c!=null))switch(L){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(i,o,L,c,a,null)}return;case"dialog":Oe("beforetoggle",i),Oe("toggle",i),Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":Oe("load",i);break;case"video":case"audio":for(c=0;c<vl.length;c++)Oe(vl[c],i);break;case"image":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"embed":case"source":case"link":Oe("error",i),Oe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:st(i,o,K,c,a,null)}return;default:if(pr(o)){for(te in a)a.hasOwnProperty(te)&&(c=a[te],c!==void 0&&bh(i,o,te,c,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(c=a[R],c!=null&&st(i,o,R,c,a,null))}function dw(i,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,C=null,R=null,L=null,K=null,te=null;for(j in a){var ie=a[j];if(a.hasOwnProperty(j)&&ie!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":L=ie;default:c.hasOwnProperty(j)||st(i,o,j,null,c,ie)}}for(var $ in c){var j=c[$];if(ie=a[$],c.hasOwnProperty($)&&(j!=null||ie!=null))switch($){case"type":v=j;break;case"name":y=j;break;case"checked":K=j;break;case"defaultChecked":te=j;break;case"value":C=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,o));break;default:j!==ie&&st(i,o,$,j,c,ie)}}mr(i,C,R,L,K,te,v,y);return;case"select":j=C=R=$=null;for(v in a)if(L=a[v],a.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":j=L;default:c.hasOwnProperty(v)||st(i,o,v,null,c,L)}for(y in c)if(v=c[y],L=a[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":$=v;break;case"defaultValue":R=v;break;case"multiple":C=v;default:v!==L&&st(i,o,y,v,c,L)}o=R,a=C,c=j,$!=null?Cs(i,!!a,$,!1):!!c!=!!a&&(o!=null?Cs(i,!!a,o,!0):Cs(i,!!a,a?[]:"",!1));return;case"textarea":j=$=null;for(R in a)if(y=a[R],a.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:st(i,o,R,null,c,y)}for(C in c)if(y=c[C],v=a[C],c.hasOwnProperty(C)&&(y!=null||v!=null))switch(C){case"value":$=y;break;case"defaultValue":j=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&st(i,o,C,y,c,v)}yu(i,$,j);return;case"option":for(var ve in a)if($=a[ve],a.hasOwnProperty(ve)&&$!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":i.selected=!1;break;default:st(i,o,ve,null,c,$)}for(L in c)if($=c[L],j=a[L],c.hasOwnProperty(L)&&$!==j&&($!=null||j!=null))switch(L){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:st(i,o,L,$,c,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)$=a[xe],a.hasOwnProperty(xe)&&$!=null&&!c.hasOwnProperty(xe)&&st(i,o,xe,null,c,$);for(K in c)if($=c[K],j=a[K],c.hasOwnProperty(K)&&$!==j&&($!=null||j!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:st(i,o,K,$,c,j)}return;default:if(pr(o)){for(var ot in a)$=a[ot],a.hasOwnProperty(ot)&&$!==void 0&&!c.hasOwnProperty(ot)&&bh(i,o,ot,void 0,c,$);for(te in c)$=c[te],j=a[te],!c.hasOwnProperty(te)||$===j||$===void 0&&j===void 0||bh(i,o,te,$,c,j);return}}for(var G in a)$=a[G],a.hasOwnProperty(G)&&$!=null&&!c.hasOwnProperty(G)&&st(i,o,G,null,c,$);for(ie in c)$=c[ie],j=a[ie],!c.hasOwnProperty(ie)||$===j||$==null&&j==null||st(i,o,ie,$,c,j)}function Ov(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hw(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,C=y.initiatorType,R=y.duration;if(v&&R&&Ov(C)){for(C=0,R=y.responseEnd,c+=1;c<a.length;c++){var L=a[c],K=L.startTime;if(K>R)break;var te=L.transferSize,ie=L.initiatorType;te&&Ov(ie)&&(L=L.responseEnd,C+=te*(L<R?1:(R-K)/(L-K)))}if(--c,o+=8*(v+C)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Nh=null,Mh=null;function Tc(i){return i.nodeType===9?i:i.ownerDocument}function qv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bv(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Dh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Vh=null;function mw(){var i=window.event;return i&&i.type==="popstate"?i===Vh?!1:(Vh=i,!0):(Vh=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,pw=typeof clearTimeout=="function"?clearTimeout:void 0,Fv=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fv<"u"?function(i){return Fv.resolve(null).then(i).catch(yw)}:zv;function yw(i){setTimeout(function(){throw i})}function $s(i){return i==="head"}function Gv(i,o){var a=o,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),Xr(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Tl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Tl(a);for(var v=a.firstChild;v;){var C=v.nextSibling,R=v.nodeName;v[Si]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=C}}else a==="body"&&Tl(i.ownerDocument.body);a=y}while(a);Xr(o)}function Hv(i,o){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Ph(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ph(a),dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function vw(i,o,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Si])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Yn(i.nextSibling),i===null)break}return null}function _w(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Yn(i.nextSibling),i===null))return null;return i}function Yv(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Yn(i.nextSibling),i===null))return null;return i}function kh(i){return i.data==="$?"||i.data==="$~"}function Uh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Tw(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Yn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Lh=null;function Jv(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Yn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function Kv(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function $v(i,o,a){switch(o=Tc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Tl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);dr(i)}var Jn=new Map,Qv=new Set;function Ec(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var fs=le.d;le.d={f:Ew,r:Sw,D:Aw,C:Cw,L:ww,m:xw,X:Iw,S:Rw,M:bw};function Ew(){var i=fs.f(),o=dc();return i||o}function Sw(i){var o=kn(i);o!==null&&o.tag===5&&o.type==="form"?dy(o):fs.r(i)}var Kr=typeof document>"u"?null:document;function Xv(i,o,a){var c=Kr;if(c&&typeof o=="string"&&o){var y=hn(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),Qv.has(y)||(Qv.add(y),i={rel:i,crossOrigin:a,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),jt(o,"link",i),Rt(o),c.head.appendChild(o)))}}function Aw(i){fs.D(i),Xv("dns-prefetch",i,null)}function Cw(i,o){fs.C(i,o),Xv("preconnect",i,o)}function ww(i,o,a){fs.L(i,o,a);var c=Kr;if(c&&i&&o){var y='link[rel="preload"][as="'+hn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+hn(a.imageSizes)+'"]')):y+='[href="'+hn(i)+'"]';var v=y;switch(o){case"style":v=$r(i);break;case"script":v=Qr(i)}Jn.has(v)||(i=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Jn.set(v,i),c.querySelector(y)!==null||o==="style"&&c.querySelector(El(v))||o==="script"&&c.querySelector(Sl(v))||(o=c.createElement("link"),jt(o,"link",i),Rt(o),c.head.appendChild(o)))}}function xw(i,o){fs.m(i,o);var a=Kr;if(a&&i){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Qr(i)}if(!Jn.has(v)&&(i=T({rel:"modulepreload",href:i},o),Jn.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sl(v)))return}c=a.createElement("link"),jt(c,"link",i),Rt(c),a.head.appendChild(c)}}}function Rw(i,o,a){fs.S(i,o,a);var c=Kr;if(c&&i){var y=Ci(c).hoistableStyles,v=$r(i);o=o||"default";var C=y.get(v);if(!C){var R={loading:0,preload:null};if(C=c.querySelector(El(v)))R.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Jn.get(v))&&Oh(i,a);var L=C=c.createElement("link");Rt(L),jt(L,"link",i),L._p=new Promise(function(K,te){L.onload=K,L.onerror=te}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Sc(C,o,c)}C={type:"stylesheet",instance:C,count:1,state:R},y.set(v,C)}}}function Iw(i,o){fs.X(i,o);var a=Kr;if(a&&i){var c=Ci(a).hoistableScripts,y=Qr(i),v=c.get(y);v||(v=a.querySelector(Sl(y)),v||(i=T({src:i,async:!0},o),(o=Jn.get(y))&&qh(i,o),v=a.createElement("script"),Rt(v),jt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function bw(i,o){fs.M(i,o);var a=Kr;if(a&&i){var c=Ci(a).hoistableScripts,y=Qr(i),v=c.get(y);v||(v=a.querySelector(Sl(y)),v||(i=T({src:i,async:!0,type:"module"},o),(o=Jn.get(y))&&qh(i,o),v=a.createElement("script"),Rt(v),jt(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function jv(i,o,a,c){var y=(y=Se.current)?Ec(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=$r(a.href),a=Ci(y).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=$r(a.href);var v=Ci(y).hoistableStyles,C=v.get(i);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,C),(v=y.querySelector(El(i)))&&!v._p&&(C.instance=v,C.state.loading=5),Jn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(i,a),v||Nw(y,i,a,C.state))),o&&c===null)throw Error(s(528,""));return C}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Qr(a),a=Ci(y).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function $r(i){return'href="'+hn(i)+'"'}function El(i){return'link[rel="stylesheet"]['+i+"]"}function Wv(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function Nw(i,o,a,c){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),jt(o,"link",a),Rt(o),i.head.appendChild(o))}function Qr(i){return'[src="'+hn(i)+'"]'}function Sl(i){return"script[async]"+i}function Zv(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=i.querySelector('style[data-href~="'+hn(a.href)+'"]');if(c)return o.instance=c,Rt(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Rt(c),jt(c,"style",y),Sc(c,a.precedence,i),o.instance=c;case"stylesheet":y=$r(a.href);var v=i.querySelector(El(y));if(v)return o.state.loading|=4,o.instance=v,Rt(v),v;c=Wv(a),(y=Jn.get(y))&&Oh(c,y),v=(i.ownerDocument||i).createElement("link"),Rt(v);var C=v;return C._p=new Promise(function(R,L){C.onload=R,C.onerror=L}),jt(v,"link",c),o.state.loading|=4,Sc(v,a.precedence,i),o.instance=v;case"script":return v=Qr(a.src),(y=i.querySelector(Sl(v)))?(o.instance=y,Rt(y),y):(c=a,(y=Jn.get(v))&&(c=T({},a),qh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Rt(y),jt(y,"link",c),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Sc(c,a.precedence,i));return o.instance}function Sc(i,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,C=0;C<c.length;C++){var R=c[C];if(R.dataset.precedence===o)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Oh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function qh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Ac=null;function e0(i,o,a){if(Ac===null){var c=new Map,y=Ac=new Map;y.set(a,c)}else y=Ac,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[Si]||v[xt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(o)||"";C=i+C;var R=c.get(C);R?R.push(v):c.set(C,[v])}}return c}function t0(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function Mw(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function n0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Dw(i,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=$r(c.href),v=o.querySelector(El(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Cc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=v,Rt(v);return}v=o.ownerDocument||o,c=Wv(c),(y=Jn.get(y))&&Oh(c,y),v=v.createElement("link"),Rt(v);var C=v;C._p=new Promise(function(R,L){C.onload=R,C.onerror=L}),jt(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Cc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var Bh=0;function Vw(i,o){return i.stylesheets&&i.count===0&&xc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&xc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+o);0<i.imgBytes&&Bh===0&&(Bh=62500*hw());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&xc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Bh?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wc=null;function xc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wc=new Map,o.forEach(Pw,i),wc=null,Cc.call(i))}function Pw(i,o){if(!(o.state.loading&4)){var a=wc.get(i);if(a)var c=a.get(null);else{a=new Map,wc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var C=y[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),c=C)}c&&a.set(null,c)}y=o.instance,C=y.getAttribute("data-precedence"),v=a.get(C)||c,v===c&&a.set(null,y),a.set(C,y),this.count++,c=Cc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var Al={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function kw(i,o,a,c,y,v,C,R,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function i0(i,o,a,c,y,v,C,R,L,K,te,ie){return i=new kw(i,o,a,C,L,K,te,ie,R),o=1,v===!0&&(o|=24),v=xn(3,null,null,o),i.current=v,v.stateNode=i,o=_d(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},Ad(v),i}function s0(i){return i?(i=xr,i):xr}function o0(i,o,a,c,y,v){y=s0(y),c.context===null?c.context=y:c.pendingContext=y,c=Ls(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Os(i,c,o),a!==null&&(_n(a,i,o),tl(a,i,o))}function r0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function zh(i,o){r0(i,o),(i=i.alternate)&&r0(i,o)}function a0(i){if(i.tag===13||i.tag===31){var o=Uo(i,67108864);o!==null&&_n(o,i,67108864),zh(i,67108864)}}function l0(i){if(i.tag===13||i.tag===31){var o=Mn();o=Co(o);var a=Uo(i,o);a!==null&&_n(a,i,o),zh(i,o)}}var Rc=!0;function Uw(i,o,a,c){var y=W.T;W.T=null;var v=le.p;try{le.p=2,Fh(i,o,a,c)}finally{le.p=v,W.T=y}}function Lw(i,o,a,c){var y=W.T;W.T=null;var v=le.p;try{le.p=8,Fh(i,o,a,c)}finally{le.p=v,W.T=y}}function Fh(i,o,a,c){if(Rc){var y=Gh(c);if(y===null)Ih(i,o,c,Ic,a),c0(i,c);else if(qw(y,i,o,a,c))c.stopPropagation();else if(c0(i,c),o&4&&-1<Ow.indexOf(i)){for(;y!==null;){var v=kn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=vi(v.pendingLanes);if(C!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;C;){var L=1<<31-vt(C);R.entanglements[1]|=L,C&=~L}Li(v),(je&6)===0&&(cc=an()+500,yl(0))}}break;case 31:case 13:R=Uo(v,2),R!==null&&_n(R,v,2),dc(),zh(v,2)}if(v=Gh(c),v===null&&Ih(i,o,c,Ic,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else Ih(i,o,c,null,a)}}function Gh(i){return i=Un(i),Hh(i)}var Ic=null;function Hh(i){if(Ic=null,i=Ai(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=u(o),i!==null)return i;i=null}else if(a===31){if(i=d(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ic=i,null}function u0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(To()){case xa:return 2;case Ra:return 8;case Ss:case Xf:return 32;case ru:return 268435456;default:return 32}default:return 32}}var Yh=!1,Qs=null,Xs=null,js=null,Cl=new Map,wl=new Map,Ws=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c0(i,o){switch(i){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Cl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(o.pointerId)}}function xl(i,o,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=kn(o),o!==null&&a0(o)),i):(i.eventSystemFlags|=c,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function qw(i,o,a,c,y){switch(o){case"focusin":return Qs=xl(Qs,i,o,a,c,y),!0;case"dragenter":return Xs=xl(Xs,i,o,a,c,y),!0;case"mouseover":return js=xl(js,i,o,a,c,y),!0;case"pointerover":var v=y.pointerId;return Cl.set(v,xl(Cl.get(v)||null,i,o,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,wl.set(v,xl(wl.get(v)||null,i,o,a,c,y)),!0}return!1}function f0(i){var o=Ai(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){i.blockedOn=o,Zn(i.priority,function(){l0(a)});return}}else if(o===31){if(o=d(a),o!==null){i.blockedOn=o,Zn(i.priority,function(){l0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function bc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Gh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);qa=c,a.target.dispatchEvent(c),qa=null}else return o=kn(a),o!==null&&a0(o),i.blockedOn=a,!1;o.shift()}return!0}function d0(i,o,a){bc(i)&&a.delete(o)}function Bw(){Yh=!1,Qs!==null&&bc(Qs)&&(Qs=null),Xs!==null&&bc(Xs)&&(Xs=null),js!==null&&bc(js)&&(js=null),Cl.forEach(d0),wl.forEach(d0)}function Nc(i,o){i.blockedOn===o&&(i.blockedOn=null,Yh||(Yh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bw)))}var Mc=null;function h0(i){Mc!==i&&(Mc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Mc===i&&(Mc=null);for(var o=0;o<i.length;o+=3){var a=i[o],c=i[o+1],y=i[o+2];if(typeof c!="function"){if(Hh(c||a)===null)continue;break}var v=kn(a);v!==null&&(i.splice(o,3),o-=3,Gd(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Xr(i){function o(L){return Nc(L,i)}Qs!==null&&Nc(Qs,i),Xs!==null&&Nc(Xs,i),js!==null&&Nc(js,i),Cl.forEach(o),wl.forEach(o);for(var a=0;a<Ws.length;a++){var c=Ws[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Ws.length&&(a=Ws[0],a.blockedOn===null);)f0(a),a.blockedOn===null&&Ws.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],C=y[zt]||null;if(typeof v=="function")C||h0(a);else if(C){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,C=v[zt]||null)R=C.formAction;else if(Hh(y)!==null)continue}else R=C.action;typeof R=="function"?a[c+1]=R:(a.splice(c,3),c-=3),h0(a)}}}function m0(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Jh(i){this._internalRoot=i}Dc.prototype.render=Jh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,c=Mn();o0(a,c,i,o,null,null)},Dc.prototype.unmount=Jh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;o0(i.current,2,null,i,null,null),dc(),o[Ei]=null}};function Dc(i){this._internalRoot=i}Dc.prototype.unstable_scheduleHydration=function(i){if(i){var o=du();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Ws.length&&o!==0&&o<Ws[a].priority;a++);Ws.splice(a,0,i),a===0&&f0(i)}};var p0=e.version;if(p0!=="19.2.3")throw Error(s(527,p0,"19.2.3"));le.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var zw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{jn=Vc.inject(zw),Jt=Vc}catch{}}return Il.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,c="",y=Sy,v=Ay,C=Cy;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=i0(i,1,!1,null,null,a,c,null,y,v,C,m0),i[Ei]=o.current,Rh(i),new Jh(o)},Il.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var c=!1,y="",v=Sy,C=Ay,R=Cy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),o=i0(i,1,!0,o,a??null,c,y,L,v,C,R,m0),o.context=s0(null),a=o.current,c=Mn(),c=Co(c),y=Ls(c),y.callback=null,Os(a,y,c),a=c,o.current.lanes=a,So(o,a),Li(o),i[Ei]=o.current,Rh(i),new Dc(o)},Il.version="19.2.3",Il}var w0;function Ww(){if(w0)return Qh.exports;w0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qh.exports=jw(),Qh.exports}var Zw=Ww();const ex=TE(Zw);var at=(n=>(n.ADMIN="ADMIN",n.STAFF="STAFF",n.CUSTOMER="CUSTOMER",n))(at||{});const qi=()=>new Date().toISOString().split("T")[0],x0="TYRANDEVU";at.ADMIN,at.STAFF,at.STAFF,at.CUSTOMER;const jr=[{id:"s1",name:"Premium Sa Kesimi",price:500,durationMin:45,image:"https://images.unsplash.com/photo-1621605815971-fbc98d665033?w=500&auto=format&fit=crop"},{id:"s2",name:"Sakal Tasarm & Bakm",price:300,durationMin:30,image:"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=500&auto=format&fit=crop"},{id:"s3",name:"Cilt Bakm & Maske",price:400,durationMin:40,image:"https://images.unsplash.com/photo-1616394584738-fc6e612e71b9?w=500&auto=format&fit=crop"},{id:"s4",name:"TYRANDEVU zel Paket",price:1e3,durationMin:90,image:"https://images.unsplash.com/photo-1503951914875-452162b7f300?w=500&auto=format&fit=crop"}];qi(),qi(),qi();const cm=5,tx=cm*1024*1024,nx=50,ix=500,sx=()=>{};var R0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},ox=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],d=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,d=u?n[r+1]:0,g=r+2<n.length,p=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|p>>6,x=p&63;g||(x=64,u||(S=64)),s.push(t[_],t[T],t[S],t[x])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(EE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ox(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const p=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||d==null||p==null||T==null)throw new rx;const S=l<<2|d>>4;if(s.push(S),p!==64){const x=d<<4&240|p>>2;if(s.push(x),T!==64){const U=p<<6&192|T;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ax=function(n){const e=EE(n);return SE.encodeByteArray(e,!0)},Wc=function(n){return ax(n).replace(/\./g,"")},lx=function(n){try{return SE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=()=>ux().__FIREBASE_DEFAULTS__,fx=()=>{if(typeof process>"u"||typeof R0>"u")return;const n=R0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},dx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lx(n[1]);return e&&JSON.parse(e)},Qm=()=>{try{return sx()||cx()||fx()||dx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},hx=n=>{var e,t;return(t=(e=Qm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},mx=n=>{const e=hx(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},AE=()=>{var n;return(n=Qm())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gx(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Wc(JSON.stringify(t)),Wc(JSON.stringify(u)),""].join(".")}const Ul={};function vx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ul))Ul[e]?n.emulator.push(e):n.prod.push(e);return n}function _x(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let I0=!1;function Tx(n,e){if(typeof window>"u"||typeof document>"u"||!Xm(window.location.host)||Ul[n]===e||Ul[n]||I0)return;Ul[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=vx().prod.length>0;function u(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{I0=!0,u()},S}function _(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=_x(s),x=t("text"),U=document.getElementById(x)||document.createElement("span"),z=t("learnmore"),M=document.getElementById(z)||document.createElement("a"),F=t("preprendIcon"),Z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;d(Q),_(M,z);const re=p();g(Z,F),Q.append(Z,U,M,re),document.body.appendChild(Q)}l?(U.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sx(){var e;const n=(e=Qm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ax(){return!Sx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cx(){try{return typeof indexedDB=="object"}catch{return!1}}function wx(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="FirebaseError";class pa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=xx,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,CE.prototype.create)}}class CE{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?Rx(l,s):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new pa(r,d,s)}}function Rx(n,e){return n.replace(Ix,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Ix=/\{\$([^}]+)}/g;function Zc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],u=e[r];if(b0(l)&&b0(u)){if(!Zc(l,u))return!1}else if(l!==u)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function b0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n){return n&&n._delegate?n._delegate:n}class zl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new px;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mx(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&u.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Nx(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nx(n){return n===Qo?void 0:n}function Mx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const Vx={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},Px=Je.INFO,kx={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},Ux=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=kx[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wE{constructor(e){this.name=e,this._logLevel=Px,this._logHandler=Ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const Lx=(n,e)=>e.some(t=>n instanceof t);let N0,M0;function Ox(){return N0||(N0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qx(){return M0||(M0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xE=new WeakMap,fm=new WeakMap,RE=new WeakMap,Zh=new WeakMap,jm=new WeakMap;function Bx(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(to(n.result)),r()},u=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&xE.set(t,n)}).catch(()=>{}),jm.set(e,n),e}function zx(n){if(fm.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});fm.set(n,e)}let dm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||RE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return to(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Fx(n){dm=n(dm)}function Gx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(em(this),e,...t);return RE.set(s,e.sort?e.sort():[e]),to(s)}:qx().includes(n)?function(...e){return n.apply(em(this),e),to(xE.get(this))}:function(...e){return to(n.apply(em(this),e))}}function Hx(n){return typeof n=="function"?Gx(n):(n instanceof IDBTransaction&&zx(n),Lx(n,Ox())?new Proxy(n,dm):n)}function to(n){if(n instanceof IDBRequest)return Bx(n);if(Zh.has(n))return Zh.get(n);const e=Hx(n);return e!==n&&(Zh.set(n,e),jm.set(e,n)),e}const em=n=>jm.get(n);function Yx(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),d=to(u);return s&&u.addEventListener("upgradeneeded",g=>{s(to(u.result),g.oldVersion,g.newVersion,to(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Jx=["get","getKey","getAll","getAllKeys","count"],Kx=["put","add","delete","clear"],tm=new Map;function D0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=Kx.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||Jx.includes(t)))return;const l=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&g.done]))[0]};return tm.set(e,l),l}Fx(n=>({...n,get:(e,t,s)=>D0(e,t)||n.get(e,t,s),has:(e,t)=>!!D0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qx(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Qx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hm="@firebase/app",V0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new wE("@firebase/app"),Xx="@firebase/app-compat",jx="@firebase/analytics-compat",Wx="@firebase/analytics",Zx="@firebase/app-check-compat",eR="@firebase/app-check",tR="@firebase/auth",nR="@firebase/auth-compat",iR="@firebase/database",sR="@firebase/data-connect",oR="@firebase/database-compat",rR="@firebase/functions",aR="@firebase/functions-compat",lR="@firebase/installations",uR="@firebase/installations-compat",cR="@firebase/messaging",fR="@firebase/messaging-compat",dR="@firebase/performance",hR="@firebase/performance-compat",mR="@firebase/remote-config",pR="@firebase/remote-config-compat",gR="@firebase/storage",yR="@firebase/storage-compat",vR="@firebase/firestore",_R="@firebase/ai",TR="@firebase/firestore-compat",ER="firebase",SR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="[DEFAULT]",AR={[hm]:"fire-core",[Xx]:"fire-core-compat",[Wx]:"fire-analytics",[jx]:"fire-analytics-compat",[eR]:"fire-app-check",[Zx]:"fire-app-check-compat",[tR]:"fire-auth",[nR]:"fire-auth-compat",[iR]:"fire-rtdb",[sR]:"fire-data-connect",[oR]:"fire-rtdb-compat",[rR]:"fire-fn",[aR]:"fire-fn-compat",[lR]:"fire-iid",[uR]:"fire-iid-compat",[cR]:"fire-fcm",[fR]:"fire-fcm-compat",[dR]:"fire-perf",[hR]:"fire-perf-compat",[mR]:"fire-rc",[pR]:"fire-rc-compat",[gR]:"fire-gcs",[yR]:"fire-gcs-compat",[vR]:"fire-fst",[TR]:"fire-fst-compat",[_R]:"fire-vertex","fire-js":"fire-js",[ER]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,CR=new Map,pm=new Map;function P0(n,e){try{n.container.addComponent(e)}catch(t){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ef(n){const e=n.name;if(pm.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,n);for(const t of Fl.values())P0(t,n);for(const t of CR.values())P0(t,n);return!0}function wR(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xR(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new CE("app","Firebase",RR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=SR;function IE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:mm,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw no.create("bad-app-name",{appName:String(r)});if(t||(t=AE()),!t)throw no.create("no-options");const l=Fl.get(r);if(l){if(Zc(t,l.options)&&Zc(s,l.config))return l;throw no.create("duplicate-app",{appName:r})}const u=new Dx(r);for(const g of pm.values())u.addComponent(g);const d=new IR(t,s,u);return Fl.set(r,d),d}function bE(n=mm){const e=Fl.get(n);if(!e&&n===mm&&AE())return IE();if(!e)throw no.create("no-app",{appName:n});return e}function NR(){return Array.from(Fl.values())}function oa(n,e,t){let s=AR[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${s}" with version "${e}":`];r&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(u.join(" "));return}ef(new zl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebase-heartbeat-database",DR=1,Gl="firebase-heartbeat-store";let nm=null;function NE(){return nm||(nm=Yx(MR,DR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gl)}catch(t){console.warn(t)}}}}).catch(n=>{throw no.create("idb-open",{originalErrorMessage:n.message})})),nm}async function VR(n){try{const t=(await NE()).transaction(Gl),s=await t.objectStore(Gl).get(ME(n));return await t.done,s}catch(e){if(e instanceof pa)ds.warn(e.message);else{const t=no.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(t.message)}}}async function k0(n,e){try{const s=(await NE()).transaction(Gl,"readwrite");await s.objectStore(Gl).put(e,ME(n)),await s.done}catch(t){if(t instanceof pa)ds.warn(t.message);else{const s=no.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ds.warn(s.message)}}}function ME(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=1024,kR=30;class UR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new OR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=U0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>kR){const u=qR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ds.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=U0(),{heartbeatsToSend:s,unsentEntries:r}=LR(this._heartbeatsCache.heartbeats),l=Wc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ds.warn(t),""}}}function U0(){return new Date().toISOString().substring(0,10)}function LR(n,e=PR){const t=[];let s=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),L0(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),L0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class OR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cx()?wx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return k0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function L0(n){return Wc(JSON.stringify({version:2,heartbeats:n})).length}function qR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(n){ef(new zl("platform-logger",e=>new $x(e),"PRIVATE")),ef(new zl("heartbeat",e=>new UR(e),"PRIVATE")),oa(hm,V0,n),oa(hm,V0,"esm2020"),oa("fire-js","")}BR("");var zR="firebase",FR="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oa(zR,FR,"app");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,DE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,D){function I(){}I.prototype=D.prototype,N.F=D.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(P,k,q){for(var V=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)V[Ie-2]=arguments[Ie];return D.prototype[k].apply(P,V)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,D,I){I||(I=0);const P=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)P[k]=D.charCodeAt(I++)|D.charCodeAt(I++)<<8|D.charCodeAt(I++)<<16|D.charCodeAt(I++)<<24;else for(k=0;k<16;++k)P[k]=D[I++]|D[I++]<<8|D[I++]<<16|D[I++]<<24;D=N.g[0],I=N.g[1],k=N.g[2];let q=N.g[3],V;V=D+(q^I&(k^q))+P[0]+3614090360&4294967295,D=I+(V<<7&4294967295|V>>>25),V=q+(k^D&(I^k))+P[1]+3905402710&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(I^q&(D^I))+P[2]+606105819&4294967295,k=q+(V<<17&4294967295|V>>>15),V=I+(D^k&(q^D))+P[3]+3250441966&4294967295,I=k+(V<<22&4294967295|V>>>10),V=D+(q^I&(k^q))+P[4]+4118548399&4294967295,D=I+(V<<7&4294967295|V>>>25),V=q+(k^D&(I^k))+P[5]+1200080426&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(I^q&(D^I))+P[6]+2821735955&4294967295,k=q+(V<<17&4294967295|V>>>15),V=I+(D^k&(q^D))+P[7]+4249261313&4294967295,I=k+(V<<22&4294967295|V>>>10),V=D+(q^I&(k^q))+P[8]+1770035416&4294967295,D=I+(V<<7&4294967295|V>>>25),V=q+(k^D&(I^k))+P[9]+2336552879&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(I^q&(D^I))+P[10]+4294925233&4294967295,k=q+(V<<17&4294967295|V>>>15),V=I+(D^k&(q^D))+P[11]+2304563134&4294967295,I=k+(V<<22&4294967295|V>>>10),V=D+(q^I&(k^q))+P[12]+1804603682&4294967295,D=I+(V<<7&4294967295|V>>>25),V=q+(k^D&(I^k))+P[13]+4254626195&4294967295,q=D+(V<<12&4294967295|V>>>20),V=k+(I^q&(D^I))+P[14]+2792965006&4294967295,k=q+(V<<17&4294967295|V>>>15),V=I+(D^k&(q^D))+P[15]+1236535329&4294967295,I=k+(V<<22&4294967295|V>>>10),V=D+(k^q&(I^k))+P[1]+4129170786&4294967295,D=I+(V<<5&4294967295|V>>>27),V=q+(I^k&(D^I))+P[6]+3225465664&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^I&(q^D))+P[11]+643717713&4294967295,k=q+(V<<14&4294967295|V>>>18),V=I+(q^D&(k^q))+P[0]+3921069994&4294967295,I=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(I^k))+P[5]+3593408605&4294967295,D=I+(V<<5&4294967295|V>>>27),V=q+(I^k&(D^I))+P[10]+38016083&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^I&(q^D))+P[15]+3634488961&4294967295,k=q+(V<<14&4294967295|V>>>18),V=I+(q^D&(k^q))+P[4]+3889429448&4294967295,I=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(I^k))+P[9]+568446438&4294967295,D=I+(V<<5&4294967295|V>>>27),V=q+(I^k&(D^I))+P[14]+3275163606&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^I&(q^D))+P[3]+4107603335&4294967295,k=q+(V<<14&4294967295|V>>>18),V=I+(q^D&(k^q))+P[8]+1163531501&4294967295,I=k+(V<<20&4294967295|V>>>12),V=D+(k^q&(I^k))+P[13]+2850285829&4294967295,D=I+(V<<5&4294967295|V>>>27),V=q+(I^k&(D^I))+P[2]+4243563512&4294967295,q=D+(V<<9&4294967295|V>>>23),V=k+(D^I&(q^D))+P[7]+1735328473&4294967295,k=q+(V<<14&4294967295|V>>>18),V=I+(q^D&(k^q))+P[12]+2368359562&4294967295,I=k+(V<<20&4294967295|V>>>12),V=D+(I^k^q)+P[5]+4294588738&4294967295,D=I+(V<<4&4294967295|V>>>28),V=q+(D^I^k)+P[8]+2272392833&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^I)+P[11]+1839030562&4294967295,k=q+(V<<16&4294967295|V>>>16),V=I+(k^q^D)+P[14]+4259657740&4294967295,I=k+(V<<23&4294967295|V>>>9),V=D+(I^k^q)+P[1]+2763975236&4294967295,D=I+(V<<4&4294967295|V>>>28),V=q+(D^I^k)+P[4]+1272893353&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^I)+P[7]+4139469664&4294967295,k=q+(V<<16&4294967295|V>>>16),V=I+(k^q^D)+P[10]+3200236656&4294967295,I=k+(V<<23&4294967295|V>>>9),V=D+(I^k^q)+P[13]+681279174&4294967295,D=I+(V<<4&4294967295|V>>>28),V=q+(D^I^k)+P[0]+3936430074&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^I)+P[3]+3572445317&4294967295,k=q+(V<<16&4294967295|V>>>16),V=I+(k^q^D)+P[6]+76029189&4294967295,I=k+(V<<23&4294967295|V>>>9),V=D+(I^k^q)+P[9]+3654602809&4294967295,D=I+(V<<4&4294967295|V>>>28),V=q+(D^I^k)+P[12]+3873151461&4294967295,q=D+(V<<11&4294967295|V>>>21),V=k+(q^D^I)+P[15]+530742520&4294967295,k=q+(V<<16&4294967295|V>>>16),V=I+(k^q^D)+P[2]+3299628645&4294967295,I=k+(V<<23&4294967295|V>>>9),V=D+(k^(I|~q))+P[0]+4096336452&4294967295,D=I+(V<<6&4294967295|V>>>26),V=q+(I^(D|~k))+P[7]+1126891415&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~I))+P[14]+2878612391&4294967295,k=q+(V<<15&4294967295|V>>>17),V=I+(q^(k|~D))+P[5]+4237533241&4294967295,I=k+(V<<21&4294967295|V>>>11),V=D+(k^(I|~q))+P[12]+1700485571&4294967295,D=I+(V<<6&4294967295|V>>>26),V=q+(I^(D|~k))+P[3]+2399980690&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~I))+P[10]+4293915773&4294967295,k=q+(V<<15&4294967295|V>>>17),V=I+(q^(k|~D))+P[1]+2240044497&4294967295,I=k+(V<<21&4294967295|V>>>11),V=D+(k^(I|~q))+P[8]+1873313359&4294967295,D=I+(V<<6&4294967295|V>>>26),V=q+(I^(D|~k))+P[15]+4264355552&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~I))+P[6]+2734768916&4294967295,k=q+(V<<15&4294967295|V>>>17),V=I+(q^(k|~D))+P[13]+1309151649&4294967295,I=k+(V<<21&4294967295|V>>>11),V=D+(k^(I|~q))+P[4]+4149444226&4294967295,D=I+(V<<6&4294967295|V>>>26),V=q+(I^(D|~k))+P[11]+3174756917&4294967295,q=D+(V<<10&4294967295|V>>>22),V=k+(D^(q|~I))+P[2]+718787259&4294967295,k=q+(V<<15&4294967295|V>>>17),V=I+(q^(k|~D))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+D&4294967295,N.g[1]=N.g[1]+(k+(V<<21&4294967295|V>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+q&4294967295}s.prototype.v=function(N,D){D===void 0&&(D=N.length);const I=D-this.blockSize,P=this.C;let k=this.h,q=0;for(;q<D;){if(k==0)for(;q<=I;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<D;)if(P[k++]=N.charCodeAt(q++),k==this.blockSize){r(this,P),k=0;break}}else for(;q<D;)if(P[k++]=N[q++],k==this.blockSize){r(this,P),k=0;break}}this.h=k,this.o+=D},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var D=1;D<N.length-8;++D)N[D]=0;D=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=D&255,D/=256;for(this.v(N),N=Array(16),D=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)N[D++]=this.g[I]>>>P&255;return N};function l(N,D){var I=d;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=D(N)}function u(N,D){this.h=D;const I=[];let P=!0;for(let k=N.length-1;k>=0;k--){const q=N[k]|0;P&&q==D||(I[k]=q,P=!1)}this.g=I}var d={};function g(N){return-128<=N&&N<128?l(N,function(D){return new u([D|0],D<0?-1:0)}):new u([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return M(p(-N));const D=[];let I=1;for(let P=0;N>=I;P++)D[P]=N/I|0,I*=4294967296;return new u(D,0)}function _(N,D){if(N.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(N.charAt(0)=="-")return M(_(N.substring(1),D));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(D,8));let P=T;for(let q=0;q<N.length;q+=8){var k=Math.min(8,N.length-q);const V=parseInt(N.substring(q,q+k),D);k<8?(k=p(Math.pow(D,k)),P=P.j(k).add(p(V))):(P=P.j(I),P=P.add(p(V)))}return P}var T=g(0),S=g(1),x=g(16777216);n=u.prototype,n.m=function(){if(z(this))return-M(this).m();let N=0,D=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);N+=(P>=0?P:4294967296+P)*D,D*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if(z(this))return"-"+M(this).toString(N);const D=p(Math.pow(N,6));var I=this;let P="";for(;;){const k=re(I,D).g;I=F(I,k.j(D));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=k,U(I))return q+P;for(;q.length<6;)q="0"+q;P=q+P}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(let D=0;D<N.g.length;D++)if(N.g[D]!=0)return!1;return!0}function z(N){return N.h==-1}n.l=function(N){return N=F(this,N),z(N)?-1:U(N)?0:1};function M(N){const D=N.g.length,I=[];for(let P=0;P<D;P++)I[P]=~N.g[P];return new u(I,~N.h).add(S)}n.abs=function(){return z(this)?M(this):this},n.add=function(N){const D=Math.max(this.g.length,N.g.length),I=[];let P=0;for(let k=0;k<=D;k++){let q=P+(this.i(k)&65535)+(N.i(k)&65535),V=(q>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);P=V>>>16,q&=65535,V&=65535,I[k]=V<<16|q}return new u(I,I[I.length-1]&-2147483648?-1:0)};function F(N,D){return N.add(M(D))}n.j=function(N){if(U(this)||U(N))return T;if(z(this))return z(N)?M(this).j(M(N)):M(M(this).j(N));if(z(N))return M(this.j(M(N)));if(this.l(x)<0&&N.l(x)<0)return p(this.m()*N.m());const D=this.g.length+N.g.length,I=[];for(var P=0;P<2*D;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<N.g.length;k++){const q=this.i(P)>>>16,V=this.i(P)&65535,Ie=N.i(k)>>>16,Ge=N.i(k)&65535;I[2*P+2*k]+=V*Ge,Z(I,2*P+2*k),I[2*P+2*k+1]+=q*Ge,Z(I,2*P+2*k+1),I[2*P+2*k+1]+=V*Ie,Z(I,2*P+2*k+1),I[2*P+2*k+2]+=q*Ie,Z(I,2*P+2*k+2)}for(N=0;N<D;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=D;N<2*D;N++)I[N]=0;return new u(I,0)};function Z(N,D){for(;(N[D]&65535)!=N[D];)N[D+1]+=N[D]>>>16,N[D]&=65535,D++}function Q(N,D){this.g=N,this.h=D}function re(N,D){if(U(D))throw Error("division by zero");if(U(N))return new Q(T,T);if(z(N))return D=re(M(N),D),new Q(M(D.g),M(D.h));if(z(D))return D=re(N,M(D)),new Q(M(D.g),D.h);if(N.g.length>30){if(z(N)||z(D))throw Error("slowDivide_ only works with positive integers.");for(var I=S,P=D;P.l(N)<=0;)I=de(I),P=de(P);var k=ue(I,1),q=ue(P,1);for(P=ue(P,2),I=ue(I,2);!U(P);){var V=q.add(P);V.l(N)<=0&&(k=k.add(I),q=V),P=ue(P,1),I=ue(I,1)}return D=F(N,k.j(D)),new Q(k,D)}for(k=T;N.l(D)>=0;){for(I=Math.max(1,Math.floor(N.m()/D.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),q=p(I),V=q.j(D);z(V)||V.l(N)>0;)I-=P,q=p(I),V=q.j(D);U(q)&&(q=S),k=k.add(q),N=F(N,V)}return new Q(k,N)}n.B=function(N){return re(this,N).h},n.and=function(N){const D=Math.max(this.g.length,N.g.length),I=[];for(let P=0;P<D;P++)I[P]=this.i(P)&N.i(P);return new u(I,this.h&N.h)},n.or=function(N){const D=Math.max(this.g.length,N.g.length),I=[];for(let P=0;P<D;P++)I[P]=this.i(P)|N.i(P);return new u(I,this.h|N.h)},n.xor=function(N){const D=Math.max(this.g.length,N.g.length),I=[];for(let P=0;P<D;P++)I[P]=this.i(P)^N.i(P);return new u(I,this.h^N.h)};function de(N){const D=N.g.length+1,I=[];for(let P=0;P<D;P++)I[P]=N.i(P)<<1|N.i(P-1)>>>31;return new u(I,N.h)}function ue(N,D){const I=D>>5;D%=32;const P=N.g.length-I,k=[];for(let q=0;q<P;q++)k[q]=D>0?N.i(q+I)>>>D|N.i(q+I+1)<<32-D:N.i(q+I);return new u(k,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,DE=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,io=u}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VE,Ml,PE,Hc,gm,kE,UE,LE;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pc=="object"&&Pc];for(var E=0;E<m.length;++E){var w=m[E];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function r(m,E){if(E)e:{var w=s;m=m.split(".");for(var b=0;b<m.length-1;b++){var Y=m[b];if(!(Y in w))break e;w=w[Y]}m=m[m.length-1],b=w[m],E=E(b),E!=b&&E!=null&&e(w,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var w=[],b;for(b in E)Object.prototype.hasOwnProperty.call(E,b)&&w.push([b,E[b]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,w){return m.call.apply(m.bind,arguments)}function p(m,E,w){return p=g,p.apply(null,arguments)}function _(m,E){var w=Array.prototype.slice.call(arguments,1);return function(){var b=w.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function T(m,E){function w(){}w.prototype=E.prototype,m.Z=E.prototype,m.prototype=new w,m.prototype.constructor=m,m.Ob=function(b,Y,X){for(var fe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)fe[Ve-2]=arguments[Ve];return E.prototype[Y].apply(b,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function x(m){const E=m.length;if(E>0){const w=Array(E);for(let b=0;b<E;b++)w[b]=m[b];return w}return[]}function U(m,E){for(let b=1;b<arguments.length;b++){const Y=arguments[b];var w=typeof Y;if(w=w!="object"?w:Y?Array.isArray(Y)?"array":w:"null",w=="array"||w=="object"&&typeof Y.length=="number"){w=m.length||0;const X=Y.length||0;m.length=w+X;for(let fe=0;fe<X;fe++)m[w+fe]=Y[fe]}else m.push(Y)}}class z{constructor(E,w){this.i=E,this.j=w,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function M(m){u.setTimeout(()=>{throw m},0)}function F(){var m=N;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class Z{constructor(){this.h=this.g=null}add(E,w){const b=Q.get();b.set(E,w),this.h?this.h.next=b:this.g=b,this.h=b}}var Q=new z(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,w){this.h=E,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ue=!1,N=new Z,D=()=>{const m=Promise.resolve(void 0);de=()=>{m.then(I)}};function I(){for(var m;m=F();){try{m.h.call(m.g)}catch(w){M(w)}var E=Q;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ue=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const w=()=>{};u.addEventListener("test",w,E),u.removeEventListener("test",w,E)}catch{}return m})();function V(m){return/^[\s\xa0]*$/.test(m)}function Ie(m,E){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(Ie,k),Ie.prototype.init=function(m,E){const w=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(w=="mouseover"?E=m.fromElement:w=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),W=0;function le(m,E,w,b,Y){this.listener=m,this.proxy=null,this.src=E,this.type=w,this.capture=!!b,this.ha=Y,this.key=++W,this.da=this.fa=!1}function Ee(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ue(m,E,w){for(const b in m)E.call(w,m[b],b,m)}function he(m,E){for(const w in m)E.call(void 0,m[w],w,m)}function O(m){const E={};for(const w in m)E[w]=m[w];return E}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(m,E){let w,b;for(let Y=1;Y<arguments.length;Y++){b=arguments[Y];for(w in b)m[w]=b[w];for(let X=0;X<ee.length;X++)w=ee[X],Object.prototype.hasOwnProperty.call(b,w)&&(m[w]=b[w])}}function ae(m){this.src=m,this.g={},this.h=0}ae.prototype.add=function(m,E,w,b,Y){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const fe=Se(m,E,b,Y);return fe>-1?(E=m[fe],w||(E.fa=!1)):(E=new le(E,this.src,X,!!b,Y),E.fa=w,m.push(E)),E};function me(m,E){const w=E.type;if(w in m.g){var b=m.g[w],Y=Array.prototype.indexOf.call(b,E,void 0),X;(X=Y>=0)&&Array.prototype.splice.call(b,Y,1),X&&(Ee(E),m.g[w].length==0&&(delete m.g[w],m.h--))}}function Se(m,E,w,b){for(let Y=0;Y<m.length;++Y){const X=m[Y];if(!X.da&&X.listener==E&&X.capture==!!w&&X.ha==b)return Y}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Lt={};function dt(m,E,w,b,Y){if(Array.isArray(E)){for(let X=0;X<E.length;X++)dt(m,E[X],w,b,Y);return null}return w=wa(w),m&&m[Ge]?m.J(E,w,d(b)?!!b.capture:!1,Y):vo(m,E,w,!1,b,Y)}function vo(m,E,w,b,Y,X){if(!E)throw Error("Invalid event type");const fe=d(Y)?!!Y.capture:!!Y;let Ve=_o(m);if(Ve||(m[we]=Ve=new ae(m)),w=Ve.add(E,w,b,fe,X),w.proxy)return w;if(b=ar(),w.proxy=b,b.src=m,b.listener=w,m.addEventListener)q||(Y=fe),Y===void 0&&(Y=!1),m.addEventListener(E.toString(),b,Y);else if(m.attachEvent)m.attachEvent(gi(E.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ar(){function m(w){return E.call(m.src,m.listener,w)}const E=Aa;return m}function lr(m,E,w,b,Y){if(Array.isArray(E))for(var X=0;X<E.length;X++)lr(m,E[X],w,b,Y);else b=d(b)?!!b.capture:!!b,w=wa(w),m&&m[Ge]?(m=m.i,X=String(E).toString(),X in m.g&&(E=m.g[X],w=Se(E,w,b,Y),w>-1&&(Ee(E[w]),Array.prototype.splice.call(E,w,1),E.length==0&&(delete m.g[X],m.h--)))):m&&(m=_o(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Se(E,w,b,Y)),(w=m>-1?E[m]:null)&&ur(w))}function ur(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ge])me(E.i,m);else{var w=m.type,b=m.proxy;E.removeEventListener?E.removeEventListener(w,b,m.capture):E.detachEvent?E.detachEvent(gi(w),b):E.addListener&&E.removeListener&&E.removeListener(b),(w=_o(E))?(me(w,m),w.h==0&&(w.src=null,E[we]=null)):Ee(m)}}}function gi(m){return m in Lt?Lt[m]:Lt[m]="on"+m}function Aa(m,E){if(m.da)m=!0;else{E=new Ie(E,this);const w=m.listener,b=m.ha||m.src;m.fa&&ur(m),m=w.call(b,E)}return m}function _o(m){return m=m[we],m instanceof ae?m:null}var Ca="__closure_events_fn_"+(Math.random()*1e9>>>0);function wa(m){return typeof m=="function"?m:(m[Ca]||(m[Ca]=function(E){return m.handleEvent(E)}),m[Ca])}function Ct(){P.call(this),this.i=new ae(this),this.M=this,this.G=null}T(Ct,P),Ct.prototype[Ge]=!0,Ct.prototype.removeEventListener=function(m,E,w,b){lr(this,m,E,w,b)};function Ot(m,E){var w,b=m.G;if(b)for(w=[];b;b=b.G)w.push(b);if(m=m.M,b=E.type||E,typeof E=="string")E=new k(E,m);else if(E instanceof k)E.target=E.target||m;else{var Y=E;E=new k(b,m),H(E,Y)}Y=!0;let X,fe;if(w)for(fe=w.length-1;fe>=0;fe--)X=E.g=w[fe],Y=Es(X,b,!0,E)&&Y;if(X=E.g=m,Y=Es(X,b,!0,E)&&Y,Y=Es(X,b,!1,E)&&Y,w)for(fe=0;fe<w.length;fe++)X=E.g=w[fe],Y=Es(X,b,!1,E)&&Y}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const w=m.g[E];for(let b=0;b<w.length;b++)Ee(w[b]);delete m.g[E],m.h--}}this.G=null},Ct.prototype.J=function(m,E,w,b){return this.i.add(String(m),E,!1,w,b)},Ct.prototype.K=function(m,E,w,b){return this.i.add(String(m),E,!0,w,b)};function Es(m,E,w,b){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let X=0;X<E.length;++X){const fe=E[X];if(fe&&!fe.da&&fe.capture==w){const Ve=fe.listener,_t=fe.ha||fe.src;fe.fa&&me(m.i,fe),Y=Ve.call(_t,b)!==!1&&Y}}return Y&&!b.defaultPrevented}function Qf(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function ou(m){m.g=Qf(()=>{m.g=null,m.i&&(m.i=!1,ou(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class an extends P{constructor(E,w){super(),this.m=E,this.l=w,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ou(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function To(m){P.call(this),this.h=m,this.g={}}T(To,P);var xa=[];function Ra(m){Ue(m.g,function(E,w){this.g.hasOwnProperty(w)&&ur(E)},m),m.g={}}To.prototype.N=function(){To.Z.N.call(this),Ra(this)},To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=u.JSON.stringify,Xf=u.JSON.parse,ru=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function au(){}function lu(){}var jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){k.call(this,"d")}T(Jt,k);function Pn(){k.call(this,"c")}T(Pn,k);var vt={},uu=null;function cr(){return uu=uu||new Ct}vt.Ia="serverreachability";function cu(m){k.call(this,vt.Ia,m)}T(cu,k);function yi(m){const E=cr();Ot(E,new cu(E))}vt.STAT_EVENT="statevent";function Eo(m,E){k.call(this,vt.STAT_EVENT,m),this.stat=E}T(Eo,k);function wt(m){const E=cr();Ot(E,new Eo(E,m))}vt.Ja="timingevent";function vi(m,E){k.call(this,vt.Ja,m),this.size=E}T(vi,k);function _i(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function jf(m,E,w,b,Y,X){m.info(function(){if(m.g)if(X){var fe="",Ve=X.split("&");for(let Xe=0;Xe<Ve.length;Xe++){var _t=Ve[Xe].split("=");if(_t.length>1){const ht=_t[0];_t=_t[1];const On=ht.split("_");fe=On.length>=2&&On[1]=="type"?fe+(ht+"="+_t+"&"):fe+(ht+"=redacted&")}}}else fe=null;else fe=X;return"XMLHTTP REQ ("+b+") [attempt "+Y+"]: "+E+`
`+w+`
`+fe})}function fu(m,E,w,b,Y,X,fe){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+Y+"]: "+E+`
`+w+`
`+X+" "+fe})}function Ti(m,E,w,b){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Wf(m,w)+(b?" "+b:"")})}function So(m,E){m.info(function(){return"TIMEOUT: "+E})}Wn.prototype.info=function(){};function Wf(m,E){if(!m.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var w=X[m];if(!(w.length<2)){var b=w[1];if(Array.isArray(b)&&!(b.length<1)){var Y=b[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<b.length;fe++)b[fe]=""}}}}return Ss(X)}catch{return E}}var Ao={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ia={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ba;function Co(){}T(Co,au),Co.prototype.g=function(){return new XMLHttpRequest},ba=new Co;function Ki(m){return encodeURIComponent(String(m))}function du(m){var E=1;m=m.split(":");const w=[];for(;E>0&&m.length;)w.push(m.shift()),E--;return m.length&&w.push(m.join(":")),w}function Zn(m,E,w,b){this.j=m,this.i=E,this.l=w,this.S=b||1,this.V=new To(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var xt={},zt={};function Ei(m,E,w){m.M=1,m.A=wo(It(E)),m.u=w,m.R=!0,fr(m,null)}function fr(m,E){m.F=Date.now(),Si(m),m.B=It(m.A);var w=m.B,b=m.S;Array.isArray(b)||(b=[String(b)]),pr(w.i,"t",b),m.C=0,w=m.j.L,m.h=new ei,m.g=Ru(m.j,w?E:null,!m.u),m.P>0&&(m.O=new an(p(m.Y,m,m.g),m.P)),E=m.V,w=m.g,b=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(xa[0]=Y.toString()),Y=xa);for(let X=0;X<Y.length;X++){const fe=dt(w,Y[X],b||E.handleEvent,!1,E.h||E);if(!fe)break;E.g[fe.key]=fe}E=m.J?O(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),yi(),jf(m.i,m.v,m.B,m.l,m.S,m.u)}Zn.prototype.ba=function(m){m=m.target;const E=this.O;E&&ii(m)==3?E.j():this.Y(m)},Zn.prototype.Y=function(m){try{if(m==this.g)e:{const Ve=ii(this.g),_t=this.g.ya(),Xe=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||Ve!=4||_t==7||(_t==8||Xe<=0?yi(3):yi(2)),Ai(this);var E=this.g.ca();this.X=E;var w=Zf(this);if(this.o=E==200,fu(this.i,this.v,this.B,this.l,this.S,Ve,E),this.o){if(this.U&&!this.L){t:{if(this.g){var b,Y=this.g;if((b=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(b)){var X=b;break t}}X=null}if(m=X)Ti(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,m);else{this.o=!1,this.m=3,wt(12),An(this),kn(this);break e}}if(this.R){m=!0;let ht;for(;!this.K&&this.C<w.length;)if(ht=mu(this,w),ht==zt){Ve==4&&(this.m=4,wt(14),m=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==xt){this.m=4,wt(15),Ti(this.i,this.l,w,"[Invalid Chunk]"),m=!1;break}else Ti(this.i,this.l,ht,null),Ci(this,ht);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||w.length!=0||this.h.h||(this.m=1,wt(16),m=!1),this.o=this.o&&m,!m)Ti(this.i,this.l,w,"[Invalid Chunked Response]"),An(this),kn(this);else if(w.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ha(fe),fe.P=!0,wt(11))}}else Ti(this.i,this.l,w,null),Ci(this,w);Ve==4&&An(this),this.o&&!this.K&&(Ve==4?Au(this.j,this):(this.o=!1,Si(this)))}else Qi(this.g),E==400&&w.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),An(this),kn(this)}}}catch{}finally{}};function Zf(m){if(!hu(m))return m.g.la();const E=Kt(m.g);if(E==="")return"";let w="";const b=E.length,Y=ii(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return An(m),kn(m),"";m.h.i=new u.TextDecoder}for(let X=0;X<b;X++)m.h.h=!0,w+=m.h.i.decode(E[X],{stream:!(Y&&X==b-1)});return E.length=0,m.h.g+=w,m.C=0,m.h.g}function hu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mu(m,E){var w=m.C,b=E.indexOf(`
`,w);return b==-1?zt:(w=Number(E.substring(w,b)),isNaN(w)?xt:(b+=1,b+w>E.length?zt:(E=E.slice(b,b+w),m.C=b+w,E)))}Zn.prototype.cancel=function(){this.K=!0,An(this)};function Si(m){m.T=Date.now()+m.H,dr(m,m.H)}function dr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=_i(p(m.aa,m),E)}function Ai(m){m.D&&(u.clearTimeout(m.D),m.D=null)}Zn.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(So(this.i,this.B),this.M!=2&&(yi(),wt(17)),An(this),this.m=2,kn(this)):dr(this,this.T-m)};function kn(m){m.j.I==0||m.K||Au(m.j,m)}function An(m){Ai(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ra(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Ci(m,E){try{var w=m.j;if(w.I!=0&&(w.g==m||xi(w.h,m))){if(!m.L&&xi(w.h,m)&&w.I==3){try{var b=w.Ba.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var Y=b;if(Y[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<m.F)Tr(w),Ns(w);else break e;Do(w),wt(18)}}else w.xa=Y[1],0<w.xa-w.K&&Y[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=_i(p(w.Va,w),6e3));wi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Di(w,11)}else if((m.L||w.g==m)&&Tr(w),!V(E))for(Y=w.Ba.g.parse(E),E=0;E<Y.length;E++){let Xe=Y[E];const ht=Xe[0];if(!(ht<=w.K))if(w.K=ht,Xe=Xe[1],w.I==2)if(Xe[0]=="c"){w.M=Xe[1],w.ba=Xe[2];const On=Xe[3];On!=null&&(w.ka=On,w.j.info("VER="+w.ka));const Vi=Xe[4];Vi!=null&&(w.za=Vi,w.j.info("SVER="+w.za));const si=Xe[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,w.O=b,w.j.info("backChannelRequestTimeoutMs_="+b)),b=w;const oi=m.g;if(oi){const Vo=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var X=b.h;X.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Da(X,X.h),X.h=null))}if(b.G){const Er=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Er&&(b.wa=Er,Ze(b.J,b.G,Er))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-m.F,w.j.info("Handshake RTT: "+w.T+"ms")),b=w;var fe=m;if(b.na=xu(b,b.L?b.ba:null,b.W),fe.L){Va(b.h,fe);var Ve=fe,_t=b.O;_t&&(Ve.H=_t),Ve.D&&(Ai(Ve),Si(Ve)),b.g=fe}else Eu(b);w.i.length>0&&Mi(w)}else Xe[0]!="stop"&&Xe[0]!="close"||Di(w,7);else w.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Di(w,7):Fa(w):Xe[0]!="noop"&&w.l&&w.l.qa(Xe),w.A=0)}}yi(4)}catch{}}var Rt=class{constructor(m,E){this.g=m,this.map=E}};function Na(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ma(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function wi(m){return m.h?1:m.g?m.g.size:0}function xi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Da(m,E){m.g?m.g.add(E):m.h=E}function Va(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Na.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Pa(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const w of m.g.values())E=E.concat(w.G);return E}return x(m.i)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hr(m,E){if(m){m=m.split("&");for(let w=0;w<m.length;w++){const b=m[w].indexOf("=");let Y,X=null;b>=0?(Y=m[w].substring(0,b),X=m[w].substring(b+1)):Y=m[w],E(Y,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Cn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Cn?(this.l=m.l,Ft(this,m.j),this.o=m.o,this.g=m.g,As(this,m.u),this.h=m.h,ka(this,_u(m.i)),this.m=m.m):m&&(E=String(m).match(pu))?(this.l=!1,Ft(this,E[1]||"",!0),this.o=Ri(E[2]||""),this.g=Ri(E[3]||"",!0),As(this,E[4]),this.h=Ri(E[5]||"",!0),ka(this,E[6]||"",!0),this.m=Ri(E[7]||"")):(this.l=!1,this.i=new ws(null,this.l))}Cn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(xo(E,mr,!0),":");var w=this.g;return(w||E=="file")&&(m.push("//"),(E=this.o)&&m.push(xo(E,mr,!0),"@"),m.push(Ki(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&m.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&m.push("/"),m.push(xo(w,w.charAt(0)=="/"?Ua:gu,!0))),(w=this.i.toString())&&m.push("?",w),(w=this.m)&&m.push("#",xo(w,yu)),m.join("")},Cn.prototype.resolve=function(m){const E=It(this);let w=!!m.j;w?Ft(E,m.j):w=!!m.o,w?E.o=m.o:w=!!m.g,w?E.g=m.g:w=m.u!=null;var b=m.h;if(w)As(E,m.u);else if(w=!!m.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(b=E.h.slice(0,Y+1)+b)}if(Y=b,Y==".."||Y==".")b="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){b=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const X=[];for(let fe=0;fe<Y.length;){const Ve=Y[fe++];Ve=="."?b&&fe==Y.length&&X.push(""):Ve==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&fe==Y.length&&X.push("")):(X.push(Ve),b=!0)}b=X.join("/")}else b=Y}return w?E.h=b:w=m.i.toString()!=="",w?ka(E,_u(m.i)):w=!!m.m,w&&(E.m=m.m),E};function It(m){return new Cn(m)}function Ft(m,E,w){m.j=w?Ri(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function As(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function ka(m,E,w){E instanceof ws?(m.i=E,gr(m.i,m.l)):(w||(E=xo(E,Cs)),m.i=new ws(E,m.l))}function Ze(m,E,w){m.i.set(E,w)}function wo(m){return Ze(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ri(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function xo(m,E,w){return typeof m=="string"?(m=encodeURI(m).replace(E,hn),w&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function hn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var mr=/[#\/\?@]/g,gu=/[#\?:]/g,Ua=/[#\?]/g,Cs=/[#\?@]/g,yu=/#/g;function ws(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function mn(m){m.g||(m.g=new Map,m.h=0,m.i&&hr(m.i,function(E,w){m.add(decodeURIComponent(E.replace(/\+/g," ")),w)}))}n=ws.prototype,n.add=function(m,E){mn(this),this.i=null,m=xs(this,m);let w=this.g.get(m);return w||this.g.set(m,w=[]),w.push(E),this.h+=1,this};function vu(m,E){mn(m),E=xs(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function La(m,E){return mn(m),E=xs(m,E),m.g.has(E)}n.forEach=function(m,E){mn(this),this.g.forEach(function(w,b){w.forEach(function(Y){m.call(E,Y,b,this)},this)},this)};function Oa(m,E){mn(m);let w=[];if(typeof E=="string")La(m,E)&&(w=w.concat(m.g.get(xs(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)w=w.concat(m[E]);return w}n.set=function(m,E){return mn(this),this.i=null,m=xs(this,m),La(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=Oa(this,m),m.length>0?String(m[0]):E):E};function pr(m,E,w){vu(m,E),w.length>0&&(m.i=null,m.g.set(xs(m,E),x(w)),m.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let b=0;b<E.length;b++){var w=E[b];const Y=Ki(w);w=Oa(this,w);for(let X=0;X<w.length;X++){let fe=Y;w[X]!==""&&(fe+="="+Ki(w[X])),m.push(fe)}}return this.i=m.join("&")};function _u(m){const E=new ws;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function xs(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function gr(m,E){E&&!m.j&&(mn(m),m.i=null,m.g.forEach(function(w,b){const Y=b.toLowerCase();b!=Y&&(vu(this,b),pr(this,Y,w))},m)),m.j=E}function ti(m,E){const w=new Wn;if(u.Image){const b=new Image;b.onload=_(Un,w,"TestLoadImage: loaded",!0,E,b),b.onerror=_(Un,w,"TestLoadImage: error",!1,E,b),b.onabort=_(Un,w,"TestLoadImage: abort",!1,E,b),b.ontimeout=_(Un,w,"TestLoadImage: timeout",!1,E,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else E(!1)}function qa(m,E){const w=new Wn,b=new AbortController,Y=setTimeout(()=>{b.abort(),Un(w,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:b.signal}).then(X=>{clearTimeout(Y),X.ok?Un(w,"TestPingServer: ok",!0,E):Un(w,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Un(w,"TestPingServer: error",!1,E)})}function Un(m,E,w,b,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),b(w)}catch{}}function Rs(){this.g=new ru}function Ii(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Ii,au),Ii.prototype.g=function(){return new Ro(this.i,this.h)};function Ro(m,E){Ct.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ro,Ct),n=Ro.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,ni(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function yr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Is(this):ni(this),this.readyState==3&&yr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Is(this))},n.Na=function(m){this.g&&(this.response=m,Is(this))},n.ga=function(){this.g&&Is(this)};function Is(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ni(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var w=E.next();!w.done;)w=w.value,m.push(w[0]+": "+w[1]),w=E.next();return m.join(`\r
`)};function ni(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ln(m){let E="";return Ue(m,function(w,b){E+=b,E+=":",E+=w,E+=`\r
`}),E}function Io(m,E,w){e:{for(b in w){var b=!1;break e}b=!0}b||(w=Ln(w),typeof m=="string"?w!=null&&Ki(w):Ze(m,E,w))}function nt(m){Ct.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,Ct);var bi=/^https?$/i,Ba=["POST","PUT"];n=nt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,w,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ba.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(X){bo(this,X);return}if(m=w||"",w=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var Y in b)w.set(Y,b[Y]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())w.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),Y=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(Ba,E,void 0)>=0)||b||Y||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,fe]of w)this.g.setRequestHeader(X,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){bo(this,X)}};function bo(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,za(m),$i(m)}function za(m){m.A||(m.A=!0,Ot(m,"complete"),Ot(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ot(this,"complete"),Ot(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?No(this):this.Xa())},n.Xa=function(){No(this)};function No(m){if(m.h&&typeof l<"u"){if(m.v&&ii(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ot(m,"readystatechange"),ii(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var w;if(!(w=E)){var b;if(b=X===0){let fe=String(m.D).match(pu)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),b=!bi.test(fe?fe.toLowerCase():"")}w=b}if(w)Ot(m,"complete"),Ot(m,"success");else{m.o=6;try{var Y=ii(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",za(m)}}finally{$i(m)}}}}function $i(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const w=m.g;m.g=null,E||Ot(m,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ii(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Xf(E)}};function Kt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(m){const E={};m=(m.g&&ii(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(V(m[b]))continue;var w=du(m[b]);const Y=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=E[Y]||[];E[Y]=X,X.push(w)}he(E,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(m,E,w){return w&&w.internalChannelParams&&w.internalChannelParams[m]||E}function bs(m){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,m),this.Za=Ni("retryDelaySeedMs",1e4,m),this.Ta=Ni("forwardChannelMaxRetries",2,m),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Na(m&&m.concurrentRequestLimit),this.Ba=new Rs,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=bs.prototype,n.ka=8,n.I=1,n.connect=function(m,E,w,b){wt(0),this.W=m,this.H=E||{},w&&b!==void 0&&(this.H.OSID=w,this.H.OAID=b),this.F=this.X,this.J=xu(this,null,this.W),Mi(this)};function Fa(m){if(vr(m),m.I==3){var E=m.V++,w=It(m.J);if(Ze(w,"SID",m.M),Ze(w,"RID",E),Ze(w,"TYPE","terminate"),Mo(m,w),E=new Zn(m,m.j,E),E.M=2,E.A=wo(It(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=E.A,w=!0),w||(E.g=Ru(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Si(E)}wu(m)}function Ns(m){m.g&&(Ha(m),m.g.cancel(),m.g=null)}function vr(m){Ns(m),m.v&&(u.clearTimeout(m.v),m.v=null),Tr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Mi(m){if(!Ma(m.h)&&!m.m){m.m=!0;var E=m.Ea;de||D(),ue||(de(),ue=!0),N.add(E,m),m.D=0}}function _r(m,E){return wi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=_i(p(m.Ea,m,E),Cu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new Zn(this,this.j,m);let X=this.o;if(this.U&&(X?(X=O(X),H(X,this.U)):X=this.U),this.u!==null||this.R||(Y.J=X,X=null),this.S)e:{for(var E=0,w=0;w<this.i.length;w++){t:{var b=this.i[w];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,E>4096){E=w;break e}if(E===4096||w===this.i.length-1){E=w+1;break e}}E=1e3}else E=1e3;E=Tu(this,Y,E),w=It(this.J),Ze(w,"RID",m),Ze(w,"CVER",22),this.G&&Ze(w,"X-HTTP-Session-Id",this.G),Mo(this,w),X&&(this.R?E="headers="+Ki(Ln(X))+"&"+E:this.u&&Io(w,this.u,X)),Da(this.h,Y),this.Ra&&Ze(w,"TYPE","init"),this.S?(Ze(w,"$req",E),Ze(w,"SID","null"),Y.U=!0,Ei(Y,w,null)):Ei(Y,w,E),this.I=2}}else this.I==3&&(m?Ga(this,m):this.i.length==0||Ma(this.h)||Ga(this))};function Ga(m,E){var w;E?w=E.l:w=m.V++;const b=It(m.J);Ze(b,"SID",m.M),Ze(b,"RID",w),Ze(b,"AID",m.K),Mo(m,b),m.u&&m.o&&Io(b,m.u,m.o),w=new Zn(m,m.j,w,m.D+1),m.u===null&&(w.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Tu(m,w,1e3),w.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Da(m.h,w),Ei(w,b,E)}function Mo(m,E){m.H&&Ue(m.H,function(w,b){Ze(E,b,w)}),m.l&&Ue({},function(w,b){Ze(E,b,w)})}function Tu(m,E,w){w=Math.min(m.i.length,w);const b=m.l?p(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Ve=-1;for(;;){const _t=["count="+w];Ve==-1?w>0?(Ve=Y[0].g,_t.push("ofs="+Ve)):Ve=0:_t.push("ofs="+Ve);let Xe=!0;for(let ht=0;ht<w;ht++){var X=Y[ht].g;const On=Y[ht].map;if(X-=Ve,X<0)Ve=Math.max(0,Y[ht].g-100),Xe=!1;else try{X="req"+X+"_"||"";try{var fe=On instanceof Map?On:Object.entries(On);for(const[Vi,si]of fe){let oi=si;d(si)&&(oi=Ss(si)),_t.push(X+Vi+"="+encodeURIComponent(oi))}}catch(Vi){throw _t.push(X+"type="+encodeURIComponent("_badmap")),Vi}}catch{b&&b(On)}}if(Xe){fe=_t.join("&");break e}}fe=void 0}return m=m.i.splice(0,w),E.G=m,fe}function Eu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;de||D(),ue||(de(),ue=!0),N.add(E,m),m.A=0}}function Do(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=_i(p(m.Da,m),Cu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=_i(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Ns(this),Su(this))};function Ha(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Su(m){m.g=new Zn(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=It(m.na);Ze(E,"RID","rpc"),Ze(E,"SID",m.M),Ze(E,"AID",m.K),Ze(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ze(E,"TO",m.ia),Ze(E,"TYPE","xmlhttp"),Mo(m,E),m.u&&m.o&&Io(E,m.u,m.o),m.O&&(m.g.H=m.O);var w=m.g;m=m.ba,w.M=1,w.A=wo(It(E)),w.u=null,w.R=!0,fr(w,m)}n.Va=function(){this.C!=null&&(this.C=null,Ns(this),Do(this),wt(19))};function Tr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Au(m,E){var w=null;if(m.g==E){Tr(m),Ha(m),m.g=null;var b=2}else if(xi(m.h,E))w=E.G,Va(m.h,E),b=1;else return;if(m.I!=0){if(E.o)if(b==1){w=E.u?E.u.length:0,E=Date.now()-E.F;var Y=m.D;b=cr(),Ot(b,new vi(b,w)),Mi(m)}else Eu(m);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(b==1&&_r(m,E)||b==2&&Do(m)))switch(w&&w.length>0&&(E=m.h,E.i=E.i.concat(w)),Y){case 1:Di(m,5);break;case 4:Di(m,10);break;case 3:Di(m,6);break;default:Di(m,2)}}}function Cu(m,E){let w=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(w*=2),w*E}function Di(m,E){if(m.j.info("Error code "+E),E==2){var w=p(m.bb,m),b=m.Ua;const Y=!b;b=new Cn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ft(b,"https"),wo(b),Y?ti(b.toString(),w):qa(b.toString(),w)}else wt(2);m.I=0,m.l&&m.l.pa(E),wu(m),vr(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function wu(m){if(m.I=0,m.ja=[],m.l){const E=Pa(m.h);(E.length!=0||m.i.length!=0)&&(U(m.ja,E),U(m.ja,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.oa()}}function xu(m,E,w){var b=w instanceof Cn?It(w):new Cn(w);if(b.g!="")E&&(b.g=E+"."+b.g),As(b,b.u);else{var Y=u.location;b=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const X=new Cn(null);b&&Ft(X,b),E&&(X.g=E),Y&&As(X,Y),w&&(X.h=w),b=X}return w=m.G,E=m.wa,w&&E&&Ze(b,w,E),Ze(b,"VER",m.ka),Mo(m,b),b}function Ru(m,E,w){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new nt(new Ii({ab:w})):new nt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iu(){}n=Iu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ms(){}Ms.prototype.g=function(m,E){return new ln(m,E)};function ln(m,E){Ct.call(this),this.g=new bs(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!V(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!V(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Xi(this)}T(ln,Ct),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Fa(this.g)},ln.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var w={};w.__data__=m,m=w}else this.v&&(w={},w.__data__=Ss(m),m=w);E.i.push(new Rt(E.Ya++,m)),E.I==3&&Mi(E)},ln.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,ln.Z.N.call(this)};function bu(m){Jt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const w in E){m=w;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(bu,Jt);function Nu(){Pn.call(this),this.status=1}T(Nu,Pn);function Xi(m){this.g=m}T(Xi,Iu),Xi.prototype.ra=function(){Ot(this.g,"a")},Xi.prototype.qa=function(m){Ot(this.g,new bu(m))},Xi.prototype.pa=function(m){Ot(this.g,new Nu)},Xi.prototype.oa=function(){Ot(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,LE=function(){return new Ms},UE=function(){return cr()},kE=vt,gm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ao.NO_ERROR=0,Ao.TIMEOUT=8,Ao.HTTP_ERROR=6,Hc=Ao,Ia.COMPLETE="complete",PE=Ia,lu.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Ml=lu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,VE=nt}).apply(typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore",B0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new wE("@firebase/firestore");function Wr(){return er.logLevel}function ye(n,...e){if(er.logLevel<=Je.DEBUG){const t=e.map(Wm);er.debug(`Firestore (${ga}): ${n}`,...t)}}function hs(n,...e){if(er.logLevel<=Je.ERROR){const t=e.map(Wm);er.error(`Firestore (${ga}): ${n}`,...t)}}function ua(n,...e){if(er.logLevel<=Je.WARN){const t=e.map(Wm);er.warn(`Firestore (${ga}): ${n}`,...t)}}function Wm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,OE(n,s,t)}function OE(n,e,t){let s=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw hs(s),new Error(s)}function We(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||OE(e,r,s)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class HR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class YR{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let s=this.i;const r=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new so;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new so,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new so)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(We(typeof s.accessToken=="string",31837,{l:s}),new qE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class JR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new JR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $R{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xR(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const s=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=QR(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function ze(n,e){return n<e?-1:n>e?1:0}function ym(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return im(r)===im(l)?ze(r,l):im(r)?1:-1}return ze(n.length,e.length)}const XR=55296,jR=57343;function im(n){const e=n.charCodeAt(0);return e>=XR&&e<=jR}function ca(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="__name__";class Oi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Re(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Oi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const s=Oi.isNumericId(e),r=Oi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class lt extends Oi{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const WR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Oi{construct(e,t,s){return new Zt(e,t,s)}static isValidIdentifier(e){return WR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F0}static keyField(){return new Zt([F0])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ge(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(s+=d,r++):(l(),r++)}if(l(),u)throw new ge(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(lt.fromString(e))}static fromName(e){return new Ce(lt.fromString(e).popFirst(5))}static empty(){return new Ce(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(n,e,t){if(!t)throw new ge(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZR(n,e,t,s){if(e===!0&&s===!0)throw new ge(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function G0(n){if(!Ce.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H0(n){if(Ce.isDocumentKey(n))throw new ge(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function Bi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(n);throw new ge(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Xl(n,e){if(!zE(n))throw new ge(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(r&&typeof u!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=-62135596800,J0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*J0);return new ft(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Y0)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J0}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xl(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:kt("string",ft._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ft(0,0))}static max(){return new Ne(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function eI(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(s===1e9?new ft(t+1,0):new ft(t,s));return new ro(r,Ce.empty(),e)}function tI(n){return new ro(n.readTime,n.key,Hl)}class ro{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ro(Ne.min(),Ce.empty(),Hl)}static max(){return new ro(Ne.max(),Ce.empty(),Hl)}}function nI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==iI)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,s)=>{t(e)}))}static reject(e){return new oe(((t,s)=>{s(e)}))}static waitFor(e){return new oe(((t,s)=>{let r=0,l=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++l,u&&l===r&&t()}),(g=>s(g)))})),u=!0,l===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const s of e)t=t.next((r=>r?oe.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new oe(((s,r)=>{const l=e.length,u=new Array(l);let d=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((_=>{u[p]=_,++d,d===l&&s(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new oe(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function oI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function va(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=-1;function xf(n){return n==null}function tf(n){return n===0&&1/n==-1/0}function rI(n){return typeof n=="number"&&Number.isInteger(n)&&!tf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="";function aI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=K0(e)),e=lI(n.get(t),e);return K0(e)}function lI(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case FE:t+="";break;default:t+=l}}return t}function K0(n){return n+FE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ho(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kc(this.root,e,this.comparator,!0)}}class kc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Wt.RED,this.left=r??Wt.EMPTY,this.right=l??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Wt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Bt(Zt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ca(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new HE("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const uI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=uI.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function lo(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="server_timestamp",JE="__type__",KE="__previous_value__",$E="__local_write_time__";function tp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[JE])==null?void 0:s.stringValue)===YE}function Rf(n){const e=n.mapValue.fields[KE];return tp(e)?Rf(e):e}function Yl(n){const e=ao(n.mapValue.fields[$E].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t,s,r,l,u,d,g,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=_}}const nf="(default)";class Jl{constructor(e,t){this.projectId=e,this.database=t||nf}static empty(){return new Jl("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof Jl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="__type__",fI="__max__",Uc={mapValue:{}},XE="__vector__",sf="value";function uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tp(n)?4:hI(n)?9007199254740991:dI(n)?10:11:Re(28295,{value:n})}function Ji(n,e){if(n===e)return!0;const t=uo(n);if(t!==uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yl(n).isEqual(Yl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=ao(r.timestampValue),d=ao(l.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return lo(r.bytesValue).isEqual(lo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return St(r.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return St(r.integerValue)===St(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=St(r.doubleValue),d=St(l.doubleValue);return u===d?tf(u)===tf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ca(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},d=l.mapValue.fields||{};if($0(u)!==$0(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Ji(u[g],d[g])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function Kl(n,e){return(n.values||[]).find((t=>Ji(t,e)))!==void 0}function fa(n,e){if(n===e)return 0;const t=uo(n),s=uo(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const d=St(l.integerValue||l.doubleValue),g=St(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(n,e);case 3:return X0(n.timestampValue,e.timestampValue);case 4:return X0(Yl(n),Yl(e));case 5:return ym(n.stringValue,e.stringValue);case 6:return(function(l,u){const d=lo(l),g=lo(u);return d.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const d=l.split("/"),g=u.split("/");for(let p=0;p<d.length&&p<g.length;p++){const _=ze(d[p],g[p]);if(_!==0)return _}return ze(d.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const d=ze(St(l.latitude),St(u.latitude));return d!==0?d:ze(St(l.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return j0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var S,x,U,z;const d=l.fields||{},g=u.fields||{},p=(S=d[sf])==null?void 0:S.arrayValue,_=(x=g[sf])==null?void 0:x.arrayValue,T=ze(((U=p==null?void 0:p.values)==null?void 0:U.length)||0,((z=_==null?void 0:_.values)==null?void 0:z.length)||0);return T!==0?T:j0(p,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Uc.mapValue&&u===Uc.mapValue)return 0;if(l===Uc.mapValue)return 1;if(u===Uc.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),p=u.fields||{},_=Object.keys(p);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const S=ym(g[T],_[T]);if(S!==0)return S;const x=fa(d[g[T]],p[_[T]]);if(x!==0)return x}return ze(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function X0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=ao(n),s=ao(e),r=ze(t.seconds,s.seconds);return r!==0?r:ze(t.nanos,s.nanos)}function j0(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=fa(t[r],s[r]);if(l)return l}return ze(t.length,s.length)}function da(n){return vm(n)}function vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ao(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return lo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=vm(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of s)l?l=!1:r+=",",r+=`${u}:${vm(t.fields[u])}`;return r+"}"})(n.mapValue):Re(61005,{value:n})}function Yc(n){switch(uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(n);return e?16+Yc(e):16;case 5:return 2*n.stringValue.length;case 6:return lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Yc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return ho(s.fields,((l,u)=>{r+=l.length+Yc(u)})),r})(n.mapValue);default:throw Re(13486,{value:n})}}function W0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _m(n){return!!n&&"integerValue"in n}function np(n){return!!n&&"arrayValue"in n}function Z0(n){return!!n&&"nullValue"in n}function e_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jc(n){return!!n&&"mapValue"in n}function dI(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[QE])==null?void 0:s.stringValue)===XE}function Ll(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ho(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ll(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ll(n.arrayValue.values[t]);return e}return{...n}}function hI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ll(t)}setAll(e){let t=Zt.emptyPath(),s={},r=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,r),s={},r=[],t=d.popLast()}u?s[d.lastSegment()]=Ll(u):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());Jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Jc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){ho(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new Sn(Ll(this.value))}}function jE(n){const e=[];return ho(n.fields,((t,s)=>{const r=new Zt([t]);if(Jc(s)){const l=jE(s.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,r,l,u,d){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=u,this.documentState=d}static newInvalidDocument(e){return new on(e,0,Ne.min(),Ne.min(),Ne.min(),Sn.empty(),0)}static newFoundDocument(e,t,s,r){return new on(e,1,t,Ne.min(),s,r,0)}static newNoDocument(e,t){return new on(e,2,t,Ne.min(),Ne.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Ne.min(),Ne.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.position=e,this.inclusive=t}}function t_(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?s=Ce.comparator(Ce.fromName(u.referenceValue),t.key):s=fa(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function n_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t="asc"){this.field=e,this.dir=t}}function mI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{}class Pt extends WE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new gI(e,t,s):t==="array-contains"?new _I(e,s):t==="in"?new TI(e,s):t==="not-in"?new EI(e,s):t==="array-contains-any"?new SI(e,s):new Pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new yI(e,s):new vI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fa(t,this.value)):t!==null&&uo(this.value)===uo(t)&&this.matchesComparison(fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends WE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return ZE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZE(n){return n.op==="and"}function eS(n){return pI(n)&&ZE(n)}function pI(n){for(const e of n.filters)if(e instanceof hi)return!1;return!0}function Tm(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+da(n.value);if(eS(n))return n.filters.map((e=>Tm(e))).join(",");{const e=n.filters.map((t=>Tm(t))).join(",");return`${n.op}(${e})`}}function tS(n,e){return n instanceof Pt?(function(s,r){return r instanceof Pt&&s.op===r.op&&s.field.isEqual(r.field)&&Ji(s.value,r.value)})(n,e):n instanceof hi?(function(s,r){return r instanceof hi&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,u,d)=>l&&tS(u,r.filters[d])),!0):!1})(n,e):void Re(19439)}function nS(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${da(t.value)}`})(n):n instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(nS).join(" ,")+"}"})(n):"Filter"}class gI extends Pt{constructor(e,t,s){super(e,t,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class yI extends Pt{constructor(e,t){super(e,"in",t),this.keys=iS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vI extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=iS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ce.fromName(s.referenceValue)))}class _I extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return np(t)&&Kl(t.arrayValue,this.value)}}class TI extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kl(this.value.arrayValue,t)}}class EI extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kl(this.value.arrayValue,t)}}class SI extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!np(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Kl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t=null,s=[],r=[],l=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=u,this.endAt=d,this.Te=null}}function i_(n,e=null,t=[],s=[],r=null,l=null,u=null){return new AI(n,e,t,s,r,l,u)}function ip(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Tm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),xf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>da(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>da(s))).join(",")),e.Te=t}return e.Te}function sp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!n_(n.startAt,e.startAt)&&n_(n.endAt,e.endAt)}function Em(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,s=[],r=[],l=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CI(n,e,t,s,r,l,u,d){return new jl(n,e,t,s,r,l,u,d)}function op(n){return new jl(n)}function s_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sS(n){return n.collectionGroup!==null}function Ol(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Bt(Zt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rf(l,s))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new rf(Zt.keyField(),s))}return e.Ie}function zi(n){const e=De(n);return e.Ee||(e.Ee=wI(e,Ol(n))),e.Ee}function wI(n,e){if(n.limitType==="F")return i_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new rf(r.field,l)}));const t=n.endAt?new of(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new of(n.startAt.position,n.startAt.inclusive):null;return i_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Sm(n,e){const t=n.filters.concat([e]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function af(n,e,t){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function If(n,e){return sp(zi(n),zi(e))&&n.limitType===e.limitType}function oS(n){return`${ip(zi(n))}|lt:${n.limitType}`}function Zr(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>nS(r))).join(", ")}]`),xf(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>da(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>da(r))).join(",")),`Target(${s})`})(zi(n))}; limitType=${n.limitType})`}function bf(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ce.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of Ol(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(u,d,g){const p=t_(u,d,g);return u.inclusive?p<=0:p<0})(s.startAt,Ol(s),r)||s.endAt&&!(function(u,d,g){const p=t_(u,d,g);return u.inclusive?p>=0:p>0})(s.endAt,Ol(s),r))})(n,e)}function xI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rS(n){return(e,t)=>{let s=!1;for(const r of Ol(n)){const l=RI(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function RI(n,e,t){const s=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,u,d){const g=u.data.field(l),p=d.data.field(l);return g!==null&&p!==null?fa(g,p):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return GE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=new pt(Ce.comparator);function ms(){return II}const aS=new pt(Ce.comparator);function Dl(...n){let e=aS;for(const t of n)e=e.insert(t.key,t);return e}function lS(n){let e=aS;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function jo(){return ql()}function uS(){return ql()}function ql(){return new ir((n=>n.toString()),((n,e)=>n.isEqual(e)))}const bI=new pt(Ce.comparator),NI=new Bt(Ce.comparator);function Fe(...n){let e=NI;for(const t of n)e=e.add(t);return e}const MI=new Bt(ze);function DI(){return MI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(e)?"-0":e}}function cS(n){return{integerValue:""+n}}function VI(n,e){return rI(e)?cS(e):rp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function PI(n,e,t){return n instanceof lf?(function(r,l){const u={fields:{[JE]:{stringValue:YE},[$E]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&tp(l)&&(l=Rf(l)),l&&(u.fields[KE]=l),{mapValue:u}})(t,e):n instanceof $l?dS(n,e):n instanceof Ql?hS(n,e):(function(r,l){const u=fS(r,l),d=o_(u)+o_(r.Ae);return _m(u)&&_m(r.Ae)?cS(d):rp(r.serializer,d)})(n,e)}function kI(n,e,t){return n instanceof $l?dS(n,e):n instanceof Ql?hS(n,e):t}function fS(n,e){return n instanceof uf?(function(s){return _m(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class lf extends Nf{}class $l extends Nf{constructor(e){super(),this.elements=e}}function dS(n,e){const t=mS(e);for(const s of n.elements)t.some((r=>Ji(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Ql extends Nf{constructor(e){super(),this.elements=e}}function hS(n,e){let t=mS(e);for(const s of n.elements)t=t.filter((r=>!Ji(r,s)));return{arrayValue:{values:t}}}class uf extends Nf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o_(n){return St(n.integerValue||n.doubleValue)}function mS(n){return np(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function UI(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof $l&&r instanceof $l||s instanceof Ql&&r instanceof Ql?ca(s.elements,r.elements,Ji):s instanceof uf&&r instanceof uf?Ji(s.Ae,r.Ae):s instanceof lf&&r instanceof lf})(n.transform,e.transform)}class LI{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mf{}function pS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ap(n.key,ui.none()):new Wl(n.key,n.data,ui.none());{const t=n.data,s=Sn.empty();let r=new Bt(Zt.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),r=r.add(l)}return new mo(n.key,s,new Dn(r.toArray()),ui.none())}}function OI(n,e,t){n instanceof Wl?(function(r,l,u){const d=r.value.clone(),g=a_(r.fieldTransforms,l,u.transformResults);d.setAll(g),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof mo?(function(r,l,u){if(!Kc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const d=a_(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(gS(r)),g.setAll(d),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Bl(n,e,t,s){return n instanceof Wl?(function(l,u,d,g){if(!Kc(l.precondition,u))return d;const p=l.value.clone(),_=l_(l.fieldTransforms,g,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof mo?(function(l,u,d,g){if(!Kc(l.precondition,u))return d;const p=l_(l.fieldTransforms,g,u),_=u.data;return _.setAll(gS(l)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,u,d){return Kc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function qI(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=fS(s.transform,r||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(s.field,l))}return t||null}function r_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ca(s,r,((l,u)=>UI(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wl extends Mf{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mo extends Mf{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function gS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function a_(n,e,t){const s=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,d=e.data.field(l.field);s.set(l.field,kI(u,d,t[r]))}return s}function l_(n,e,t){const s=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);s.set(r.field,PI(l,u,e))}return s}class ap extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BI extends Mf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&OI(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Bl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Bl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=uS();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let d=this.applyToLocalView(u,l.mutatedFields);d=t.has(r.key)?null:d;const g=pS(u,d);g!==null&&s.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ne.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&ca(this.mutations,e.mutations,((t,s)=>r_(t,s)))&&ca(this.baseMutations,e.baseMutations,((t,s)=>r_(t,s)))}}class lp{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){We(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return bI})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,s[u].version);return new lp(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ye;function HI(n){switch(n){case se.OK:return Re(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function yS(n){if(n===void 0)return hs("GRPC error has no .code"),se.UNKNOWN;switch(n){case Vt.OK:return se.OK;case Vt.CANCELLED:return se.CANCELLED;case Vt.UNKNOWN:return se.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return se.INTERNAL;case Vt.UNAVAILABLE:return se.UNAVAILABLE;case Vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Vt.NOT_FOUND:return se.NOT_FOUND;case Vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Vt.ABORTED:return se.ABORTED;case Vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Vt.DATA_LOSS:return se.DATA_LOSS;default:return Re(39323,{code:n})}}(Ye=Vt||(Vt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new io([4294967295,4294967295],0);function u_(n){const e=YI().encode(n),t=new DE;return t.update(e),new Uint8Array(t.digest())}function c_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new io([t,s],0),new io([r,l],0)]}class up{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Vl(`Invalid padding: ${t}`);if(s<0)throw new Vl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=io.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(io.fromNumber(s)));return r.compare(JI)===1&&(r=new io([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=u_(e),[s,r]=c_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,r,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new up(l,r,t);return s.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=u_(e),[s,r]=c_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,r,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Df(Ne.min(),r,new pt(ze),ms(),Fe())}}class Zl{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Zl(s,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class vS{constructor(e,t){this.targetId=e,this.Ce=t}}class _S{constructor(e,t,s=en.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class f_{constructor(){this.ve=0,this.Fe=d_(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),s=Fe();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Re(38017,{changeType:l})}})),new Zl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=d_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ms(),this.Je=Lc(),this.He=Lc(),this.Ye=new pt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Em(l))if(s===0){const u=new Ce(l.path);this.et(t,u,on.newNoDocument(u,Ne.min()))}else We(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let u,d;try{u=lo(s).toUint8Array()}catch(g){if(g instanceof HE)return ua("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new up(u,r,l)}catch(g){return ua(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const d=this.ot(u);if(d){if(l.current&&Em(d.target)){const g=new Ce(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,on.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=Fe();this.He.forEach(((l,u)=>{let d=!0;u.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new Df(e,t,this.Ye,this.je,s);return this.je=ms(),this.Je=Lc(),this.He=Lc(),this.Ye=new pt(ze),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new f_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new f_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lc(){return new pt(Ce.comparator)}function d_(){return new pt(Ce.comparator)}const $I={asc:"ASCENDING",desc:"DESCENDING"},QI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XI={and:"AND",or:"OR"};class jI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Am(n,e){return n.useProto3Json||xf(e)?e:{value:e}}function cf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WI(n,e){return cf(n,e.toTimestamp())}function Fi(n){return We(!!n,49232),Ne.fromTimestamp((function(t){const s=ao(t);return new ft(s.seconds,s.nanos)})(n))}function cp(n,e){return Cm(n,e).canonicalString()}function Cm(n,e){const t=(function(r){return new lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ES(n){const e=lt.fromString(n);return We(xS(e),10190,{key:e.toString()}),e}function wm(n,e){return cp(n.databaseId,e.path)}function sm(n,e){const t=ES(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(AS(t))}function SS(n,e){return cp(n.databaseId,e)}function ZI(n){const e=ES(n);return e.length===4?lt.emptyPath():AS(e)}function xm(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AS(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function h_(n,e,t){return{name:wm(n,e),fields:t.value.mapValue.fields}}function eb(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(We(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const _=p.code===void 0?se.UNKNOWN:yS(p.code);return new ge(_,p.message||"")})(u);t=new _S(s,r,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=sm(n,s.document.name),l=Fi(s.document.updateTime),u=s.document.createTime?Fi(s.document.createTime):Ne.min(),d=new Sn({mapValue:{fields:s.document.fields}}),g=on.newFoundDocument(r,l,u,d),p=s.targetIds||[],_=s.removedTargetIds||[];t=new $c(p,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=sm(n,s.document),l=s.readTime?Fi(s.readTime):Ne.min(),u=on.newNoDocument(r,l),d=s.removedTargetIds||[];t=new $c([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=sm(n,s.document),l=s.removedTargetIds||[];t=new $c([],l,r,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,u=new GI(r,l),d=s.targetId;t=new vS(d,u)}}return t}function tb(n,e){let t;if(e instanceof Wl)t={update:h_(n,e.key,e.value)};else if(e instanceof ap)t={delete:wm(n,e.key)};else if(e instanceof mo)t={update:h_(n,e.key,e.data),updateMask:cb(e.fieldMask)};else{if(!(e instanceof BI))return Re(16599,{Vt:e.type});t={verify:wm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const d=u.transform;if(d instanceof lf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $l)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ql)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof uf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:WI(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)})(n,e.precondition)),t}function nb(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?Fi(r.updateTime):Fi(l);return u.isEqual(Ne.min())&&(u=Fi(l)),new LI(u,r.transformResults||[])})(t,e)))):[]}function ib(n,e){return{documents:[SS(n,e.path)]}}function sb(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=SS(n,r);const l=(function(p){if(p.length!==0)return wS(hi.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((_=>(function(S){return{field:ea(S.field),direction:ab(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Am(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function ob(n){let e=ZI(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){We(s===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const S=CS(T);return S instanceof hi&&eS(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(U){return new rf(ta(U.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,xf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(T){const S=!!T.before,x=T.values||[];return new of(x,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const S=!T.before,x=T.values||[];return new of(x,S)})(t.endAt)),CI(e,r,u,l,d,"F",g,p)}function rb(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ta(t.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ta(t.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ta(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ta(t.unaryFilter.field);return Pt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(ta(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((s=>CS(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function ab(n){return $I[n]}function lb(n){return QI[n]}function ub(n){return XI[n]}function ea(n){return{fieldPath:n.canonicalString()}}function ta(n){return Zt.fromServerFormat(n.fieldPath)}function wS(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(e_(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NAN"}};if(Z0(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(e_(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NAN"}};if(Z0(t.value))return{unaryFilter:{field:ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(t.field),op:lb(t.op),value:t.value}}})(n):n instanceof hi?(function(t){const s=t.getFilters().map((r=>wS(r)));return s.length===1?s[0]:{compositeFilter:{op:ub(t.op),filters:s}}})(n):Re(54877,{filter:n})}function cb(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,s,r,l=Ne.min(),u=Ne.min(),d=en.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.yt=e}}function db(n){const e=ob({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(){this.Cn=new mb}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ro.min())}updateCollectionGroup(e,t,s){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class mb{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Bt(lt.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Bt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RS=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(RS,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ha(0)}static cr(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="LruGarbageCollector",pb=1048576;function g_([n,e],[t,s]){const r=ze(n,t);return r===0?ze(e,s):r}class gb{constructor(e){this.Ir=e,this.buffer=new Bt(g_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();g_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yb{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(p_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){va(t)?ye(p_,"Ignoring IndexedDB error during garbage collection: ",t):await ya(t)}await this.Vr(3e5)}))}}class vb{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(wf.ce);const s=new gb(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(m_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,u,d,g,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(s=T,d=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(p=Date.now(),Wr()<=Je.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function _b(n,e){return new vb(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.changes=new ir((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?oe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Bl(s.mutation,r,Dn.empty(),ft.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Fe()){const r=jo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let u=Dl();return l.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=jo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Fe())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,s,r){let l=ms();const u=ql(),d=(function(){return ql()})();return t.forEach(((g,p)=>{const _=s.get(p.key);r.has(p.key)&&(_===void 0||_.mutation instanceof mo)?l=l.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Bl(_.mutation,p,_.mutation.getFieldMask(),ft.now())):u.set(p.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,_)=>u.set(p,_))),t.forEach(((p,_)=>d.set(p,new Eb(_,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=ql();let r=new pt(((u,d)=>u-d)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let _=s.get(g)||Dn.empty();_=d.applyToLocalView(p,_),s.set(g,_);const T=(r.get(d.batchId)||Fe()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,_=g.value,T=uS();_.forEach((S=>{if(!l.has(S)){const x=pS(t.get(S),s.get(S));x!==null&&T.set(S,x),l=l.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,T))}return oe.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):oe.resolve(jo());let d=Hl,g=l;return u.next((p=>oe.forEach(p,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{g=g.insert(_,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Fe()))).next((_=>({batchId:d,changes:lS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((s=>{let r=Dl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let u=Dl();return this.indexManager.getCollectionParents(e,l).next((d=>oe.forEach(d,(g=>{const p=(function(T,S){return new jl(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,r).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((u=>{l.forEach(((g,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,on.newInvalidDocument(_)))}));let d=Dl();return u.forEach(((g,p)=>{const _=l.get(g);_!==void 0&&Bl(_.mutation,p,Dn.empty(),ft.now()),bf(t,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Fi(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:db(r.bundledQuery),readTime:Fi(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(){this.overlays=new pt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=jo();return oe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,t,s){const r=jo(),l=t.length+1,u=new Ce(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&r.set(g.getKey(),g)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new pt(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let _=l.get(p.largestBatchId);_===null&&(_=jo(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=jo(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,_)=>d.set(p,_))),!(d.size()>=r)););return oe.resolve(d)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new FI(t,s));let l=this.qr.get(t);l===void 0&&(l=Fe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new Bt(Ht.$r),this.Ur=new Bt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ce(new lt([])),s=new Ht(t,e),r=new Ht(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new lt([])),s=new Ht(t,e),r=new Ht(t,e+1);let l=Fe();return this.Ur.forEachInRange([s,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Ht(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Ht.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new zI(l,t,s,r);this.mutationQueue.push(u);for(const d of r)this.Zr=this.Zr.add(new Ht(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?ep:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),r=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(u=>{const d=this.Xr(u.Yr);l.push(d)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Bt(ze);return t.forEach((r=>{const l=new Ht(r,0),u=new Ht(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(d=>{s=s.add(d.Yr)}))})),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;Ce.isDocumentKey(l)||(l=l.child(""));const u=new Ht(new Ce(l),0);let d=new Bt(ze);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===r&&(d=d.add(g.Yr)),!0)}),u),oe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(t.mutations,(r=>{const l=new Ht(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ht(t,0),r=this.Zr.firstAfterOrEqual(s);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return oe.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=ms();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():on.newInvalidDocument(r))})),oe.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=ms();const u=t.path,d=new Ce(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:_}}=g.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||nI(tI(_),s)<=0||(r.has(_.key)||bf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,s,r){Re(9500)}ii(e,t){return oe.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Ib(this)}getSize(e){return oe.resolve(this.size)}}class Ib extends Tb{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.persistence=e,this.si=new ir((t=>ip(t)),sp),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=ha.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ha(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return oe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),oe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return oe.resolve(s)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.ui={},this.overlays={},this.ci=new wf(0),this.li=!1,this.li=!0,this.hi=new wb,this.referenceDelegate=e(this),this.Pi=new bb(this),this.indexManager=new hb,this.remoteDocumentCache=(function(r){return new Rb(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new fb(t),this.Ii=new Ab(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Cb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new xb(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ye("MemoryPersistence","Starting transaction:",e);const r=new Nb(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Nb extends sI{constructor(e){super(),this.currentSequenceNumber=e}}class dp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new dp(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(s=>{const r=Ce.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ff{constructor(e,t){this.persistence=e,this.pi=new ir((s=>aI(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=_b(this,t)}static mi(e,t){return new ff(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?oe.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((d=>{d||(s++,l.removeEntry(u,Ne.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Yc(e.data.value)),t}br(e,t,s){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return oe.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=Fe(),r=Fe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new hp(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ax()?8:oI(Ex())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new Mb;return this.Ss(e,t,u).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Wr()<=Je.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Wr()<=Je.DEBUG&&ye("QueryEngine","Query:",Zr(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Wr()<=Je.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):oe.resolve())}ys(e,t){if(s_(t))return oe.resolve(null);let s=zi(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=af(t,null,"F"),s=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Fe(...l);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,d);return this.Cs(t,p,u,g.readTime)?this.ys(e,af(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,r){return s_(t)||r.isEqual(Ne.min())?oe.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,r)?oe.resolve(null):(Wr()<=Je.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zr(t)),this.vs(e,u,t,eI(r,Hl)).next((d=>d)))}))}Ds(e,t){let s=new Bt(rS(e));return t.forEach(((r,l)=>{bf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Wr()<=Je.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.ps.getDocumentsMatchingQuery(e,t,ro.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="LocalStore",Vb=3e8;class Pb{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new pt(ze),this.xs=new ir((l=>ip(l)),sp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function kb(n,e,t,s){return new Pb(n,e,t,s)}async function bS(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],d=[];let g=Fe();for(const p of r){u.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function Ub(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,_){const T=p.batch,S=T.keys();let x=oe.resolve();return S.forEach((U=>{x=x.next((()=>_.getEntry(g,U))).next((z=>{const M=p.docVersions.get(U);We(M!==null,48541),z.version.compareTo(M)<0&&(T.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),_.addEntry(z)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Fe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function NS(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Lb(n,e){const t=De(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const S=r.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let x=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?x=x.withResumeToken(en.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,s)),r=r.insert(T,x),(function(z,M,F){return z.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=Vb?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(S,x,_)&&d.push(t.Pi.updateTargetData(l,x))}));let g=ms(),p=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(Ob(l,u,e.documentUpdates).next((_=>{g=_.ks,p=_.qs}))),!s.isEqual(Ne.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(_)}return oe.waitFor(d).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function Ob(n,e,t){let s=Fe(),r=Fe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=ms();return t.forEach(((d,g)=>{const p=l.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):ye(mp,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function qb(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=ep),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Bb(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,oe.resolve(r)):t.Pi.allocateTargetId(s).next((u=>(r=new eo(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Rm(n,e,t){const s=De(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!va(u))throw u;ye(mp,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function y_(n,e,t){const s=De(n);let r=Ne.min(),l=Fe();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,p,_){const T=De(g),S=T.xs.get(_);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(p,_)})(s,u,zi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?r:Ne.min(),t?l:Fe()))).next((d=>(zb(s,xI(e),d),{documents:d,Qs:l})))))}function zb(n,e,t){let s=n.Os.get(e)||Ne.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class v_{constructor(){this.activeTargetIds=DI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fb{constructor(){this.Mo=new v_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new v_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="ConnectivityMonitor";class T_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(__,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(__,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function Im(){return Oc===null?Oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="RestConnection",Hb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===nf?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const u=Im(),d=this.zo(e,t.toUriEncodedString());ye(om,`Sending RPC '${e}' ${u}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:p}=new URL(d),_=Xm(p);return this.Jo(e,d,g,s,_).then((T=>(ye(om,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw ua(om,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",s),T}))}Ho(e,t,s,r,l,u){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ga})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=Hb[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class Kb extends Yb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const u=Im();return new Promise(((d,g)=>{const p=new VE;p.setWithCredentials(!0),p.listenOnce(PE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Hc.NO_ERROR:const T=p.getResponseJson();ye(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Hc.TIMEOUT:ye(nn,`RPC '${e}' ${u} timed out`),g(new ge(se.DEADLINE_EXCEEDED,"Request time out"));break;case Hc.HTTP_ERROR:const S=p.getStatus();if(ye(nn,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const U=x==null?void 0:x.error;if(U&&U.status&&U.message){const z=(function(F){const Z=F.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(Z)>=0?Z:se.UNKNOWN})(U.status);g(new ge(z,U.message))}else g(new ge(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ge(se.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ye(nn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(nn,`RPC '${e}' ${u} sending request:`,r),p.send(t,"POST",_,s,15)}))}T_(e,t,s){const r=Im(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LE(),d=UE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=l.join("");ye(nn,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let S=!1,x=!1;const U=new Jb({Yo:M=>{x?ye(nn,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(S||(ye(nn,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),ye(nn,`RPC '${e}' stream ${r} sending:`,M),T.send(M))},Zo:()=>T.close()}),z=(M,F,Z)=>{M.listen(F,(Q=>{try{Z(Q)}catch(re){setTimeout((()=>{throw re}),0)}}))};return z(T,Ml.EventType.OPEN,(()=>{x||(ye(nn,`RPC '${e}' stream ${r} transport opened.`),U.o_())})),z(T,Ml.EventType.CLOSE,(()=>{x||(x=!0,ye(nn,`RPC '${e}' stream ${r} transport closed`),U.a_(),this.E_(T))})),z(T,Ml.EventType.ERROR,(M=>{x||(x=!0,ua(nn,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),U.a_(new ge(se.UNAVAILABLE,"The operation could not be completed")))})),z(T,Ml.EventType.MESSAGE,(M=>{var F;if(!x){const Z=M.data[0];We(!!Z,16349);const Q=Z,re=(Q==null?void 0:Q.error)||((F=Q[0])==null?void 0:F.error);if(re){ye(nn,`RPC '${e}' stream ${r} received error:`,re);const de=re.status;let ue=(function(I){const P=Vt[I];if(P!==void 0)return yS(P)})(de),N=re.message;ue===void 0&&(ue=se.INTERNAL,N="Unknown error status: "+de+" with message "+re.message),x=!0,U.a_(new ge(ue,N)),T.close()}else ye(nn,`RPC '${e}' stream ${r} received:`,Z),U.u_(Z)}})),z(d,kE.STAT_EVENT,(M=>{M.stat===gm.PROXY?ye(nn,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===gm.NOPROXY&&ye(nn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){return new jI(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="PersistentStream";class DS{constructor(e,t,s,r,l,u,d,g){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(hs(t.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new ge(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(E_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(E_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $b extends DS{constructor(e,t,s,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eb(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ne.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?Fi(u.readTime):Ne.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=xm(this.serializer),t.addTarget=(function(l,u){let d;const g=u.target;if(d=Em(g)?{documents:ib(l,g)}:{query:sb(l,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=TS(l,u.resumeToken);const p=Am(l,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ne.min())>0){d.readTime=cf(l,u.snapshotVersion.toTimestamp());const p=Am(l,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const s=rb(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=xm(this.serializer),t.removeTarget=e,this.q_(t)}}class Qb extends DS{constructor(e,t,s,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nb(e.writeResults,e.commitTime),s=Fi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=xm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>tb(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{}class jb extends Xb{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,Cm(t,s),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(se.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Cm(t,s),r,u,d,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(se.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Wb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hs(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="RemoteStore";class Zb{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{sr(this)&&(ye(tr,"Restarting streams for network reachability change."),await(async function(g){const p=De(g);p.Ea.add(4),await eu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Pf(p)})(this))}))})),this.Ra=new Wb(s,r)}}async function Pf(n){if(sr(n))for(const e of n.da)await e(!0)}async function eu(n){for(const e of n.da)await e(!1)}function VS(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),vp(t)?yp(t):_a(t).O_()&&gp(t,e))}function pp(n,e){const t=De(n),s=_a(t);t.Ia.delete(e),s.O_()&&PS(t,e),t.Ia.size===0&&(s.O_()?s.L_():sr(t)&&t.Ra.set("Unknown"))}function gp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_a(n).Y_(e)}function PS(n,e){n.Va.Ue(e),_a(n).Z_(e)}function yp(n){n.Va=new KI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_a(n).start(),n.Ra.ua()}function vp(n){return sr(n)&&!_a(n).x_()&&n.Ia.size>0}function sr(n){return De(n).Ea.size===0}function kS(n){n.Va=void 0}async function e1(n){n.Ra.set("Online")}async function t1(n){n.Ia.forEach(((e,t)=>{gp(n,e)}))}async function n1(n,e){kS(n),vp(n)?(n.Ra.ha(e),yp(n)):n.Ra.set("Unknown")}async function i1(n,e,t){if(n.Ra.set("Online"),e instanceof _S&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.Va.removeTarget(d))})(n,e)}catch(s){ye(tr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await df(n,s)}else if(e instanceof $c?n.Va.Ze(e):e instanceof vS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const s=await NS(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const d=l.Va.Tt(u);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,p)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),PS(l,g);const T=new eo(_.target,g,p,_.sequenceNumber);gp(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ye(tr,"Failed to raise snapshot:",s),await df(n,s)}}async function df(n,e,t){if(!va(e))throw e;n.Ea.add(1),await eu(n),n.Ra.set("Offline"),t||(t=()=>NS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(tr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Pf(n)}))}function US(n,e){return e().catch((t=>df(n,t,e)))}async function kf(n){const e=De(n),t=co(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ep;for(;s1(e);)try{const r=await qb(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,o1(e,r)}catch(r){await df(e,r)}LS(e)&&OS(e)}function s1(n){return sr(n)&&n.Ta.length<10}function o1(n,e){n.Ta.push(e);const t=co(n);t.O_()&&t.X_&&t.ea(e.mutations)}function LS(n){return sr(n)&&!co(n).x_()&&n.Ta.length>0}function OS(n){co(n).start()}async function r1(n){co(n).ra()}async function a1(n){const e=co(n);for(const t of n.Ta)e.ea(t.mutations)}async function l1(n,e,t){const s=n.Ta.shift(),r=lp.from(s,e,t);await US(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await kf(n)}async function u1(n,e){e&&co(n).X_&&await(async function(s,r){if((function(u){return HI(u)&&u!==se.ABORTED})(r.code)){const l=s.Ta.shift();co(s).B_(),await US(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await kf(s)}})(n,e),LS(n)&&OS(n)}async function S_(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),ye(tr,"RemoteStore received new credentials");const s=sr(t);t.Ea.add(3),await eu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pf(t)}async function c1(n,e){const t=De(n);e?(t.Ea.delete(2),await Pf(t)):e||(t.Ea.add(2),await eu(t),t.Ra.set("Unknown"))}function _a(n){return n.ma||(n.ma=(function(t,s,r){const l=De(t);return l.sa(),new $b(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:e1.bind(null,n),t_:t1.bind(null,n),r_:n1.bind(null,n),H_:i1.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),vp(n)?yp(n):n.Ra.set("Unknown")):(await n.ma.stop(),kS(n))}))),n.ma}function co(n){return n.fa||(n.fa=(function(t,s,r){const l=De(t);return l.sa(),new Qb(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:r1.bind(null,n),r_:u1.bind(null,n),ta:a1.bind(null,n),na:l1.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await kf(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(tr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new so,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const u=Date.now()+s,d=new _p(e,t,u,r,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tp(n,e){if(hs("AsyncQueue",`${e}: ${n}`),va(n))return new ge(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{static emptySet(e){return new ra(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ce.comparator(t.key,s.key):(t,s)=>Ce.comparator(t.key,s.key),this.keyedMap=Dl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new ra;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.ga=new pt(Ce.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ma{constructor(e,t,s,r,l,u,d,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,r,l){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ma(e,t,ra.emptySet(t),u,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class d1{constructor(){this.queries=C_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=De(t),l=r.queries;r.queries=C_(),l.forEach(((u,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new ge(se.ABORTED,"Firestore shutting down"))}}function C_(){return new ir((n=>oS(n)),If)}async function qS(n,e){const t=De(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new f1,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const d=Tp(u,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ep(t)}async function BS(n,e){const t=De(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function h1(n,e){const t=De(n);let s=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const d of u.Sa)d.Fa(r)&&(s=!0);u.wa=r}}s&&Ep(t)}function m1(n,e,t){const s=De(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function Ep(n){n.Ca.forEach((e=>{e.next()}))}var bm,w_;(w_=bm||(bm={})).Ma="default",w_.Cache="cache";class zS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new ma(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.key=e}}class GS{constructor(e){this.key=e}}class p1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=rS(e),this.tu=new ra(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new A_,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const S=r.get(_),x=bf(this.query,T)?T:null,U=!!S&&this.mutatedKeys.has(S.key),z=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let M=!1;S&&x?S.data.isEqual(x.data)?U!==z&&(s.track({type:3,doc:x}),M=!0):this.su(S,x)||(s.track({type:2,doc:x}),M=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(d=!0)):!S&&x?(s.track({type:0,doc:x}),M=!0):S&&!x&&(s.track({type:1,doc:S}),M=!0,(g||p)&&(d=!0)),M&&(x?(u=u.add(x),l=z?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:u,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(x,U){const z=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:M})}};return z(x)-z(U)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),r=r??!1;const d=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,p=g!==this.Za;return this.Za=g,u.length!==0||p?{snapshot:new ma(this.query,e.tu,l,u,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new GS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new FS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sp="SyncEngine";class g1{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class y1{constructor(e){this.key=e,this.hu=!1}}class v1{constructor(e,t,s,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ir((d=>oS(d)),If),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ce.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _1(n,e,t=!0){const s=QS(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await HS(s,e,t,!0),r}async function T1(n,e){const t=QS(n);await HS(t,e,!0,!1)}async function HS(n,e,t,s){const r=await Bb(n.localStore,zi(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await E1(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&VS(n.remoteStore,r),d}async function E1(n,e,t,s,r){n.pu=(T,S,x)=>(async function(z,M,F,Z){let Q=M.view.ru(F);Q.Cs&&(Q=await y_(z.localStore,M.query,!1).then((({documents:N})=>M.view.ru(N,Q))));const re=Z&&Z.targetChanges.get(M.targetId),de=Z&&Z.targetMismatches.get(M.targetId)!=null,ue=M.view.applyChanges(Q,z.isPrimaryClient,re,de);return R_(z,M.targetId,ue.au),ue.snapshot})(n,T,S,x);const l=await y_(n.localStore,e,!0),u=new p1(e,l.Qs),d=u.ru(l.documents),g=Zl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),p=u.applyChanges(d,n.isPrimaryClient,g);R_(n,t,p.au);const _=new g1(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function S1(n,e,t){const s=De(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((u=>!If(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Rm(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&pp(s.remoteStore,r.targetId),Nm(s,r.targetId)})).catch(ya)):(Nm(s,r.targetId),await Rm(s.localStore,r.targetId,!0))}async function A1(n,e){const t=De(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),pp(t.remoteStore,s.targetId))}async function C1(n,e,t){const s=M1(n);try{const r=await(function(u,d){const g=De(u),p=ft.now(),_=d.reduce(((x,U)=>x.add(U.key)),Fe());let T,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let U=ms(),z=Fe();return g.Ns.getEntries(x,_).next((M=>{U=M,U.forEach(((F,Z)=>{Z.isValidDocument()||(z=z.add(F))}))})).next((()=>g.localDocuments.getOverlayedDocuments(x,U))).next((M=>{T=M;const F=[];for(const Z of d){const Q=qI(Z,T.get(Z.key).overlayedDocument);Q!=null&&F.push(new mo(Z.key,Q,jE(Q.value.mapValue),ui.exists(!0)))}return g.mutationQueue.addMutationBatch(x,p,F,d)})).next((M=>{S=M;const F=M.applyToLocalDocumentSet(T,z);return g.documentOverlayCache.saveOverlays(x,M.batchId,F)}))})).then((()=>({batchId:S.batchId,changes:lS(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let p=u.Vu[u.currentUser.toKey()];p||(p=new pt(ze)),p=p.insert(d,g),u.Vu[u.currentUser.toKey()]=p})(s,r.batchId,t),await tu(s,r.changes),await kf(s.remoteStore)}catch(r){const l=Tp(r,"Failed to persist write");t.reject(l)}}async function YS(n,e){const t=De(n);try{const s=await Lb(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(We(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?We(u.hu,14607):r.removedDocuments.size>0&&(We(u.hu,42227),u.hu=!1))})),await tu(t,s,e)}catch(s){await ya(s)}}function x_(n,e,t){const s=De(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=De(u);g.onlineState=d;let p=!1;g.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(d)&&(p=!0)})),p&&Ep(g)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function w1(n,e,t){const s=De(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let u=new pt(Ce.comparator);u=u.insert(l,on.newNoDocument(l,Ne.min()));const d=Fe().add(l),g=new Df(Ne.min(),new Map,new pt(ze),u,d);await YS(s,g),s.du=s.du.remove(l),s.Au.delete(e),Ap(s)}else await Rm(s.localStore,e,!1).then((()=>Nm(s,e,t))).catch(ya)}async function x1(n,e){const t=De(n),s=e.batch.batchId;try{const r=await Ub(t.localStore,e);KS(t,s,null),JS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await tu(t,r)}catch(r){await ya(r)}}async function R1(n,e,t){const s=De(n);try{const r=await(function(u,d){const g=De(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return g.mutationQueue.lookupMutationBatch(p,d).next((T=>(We(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>g.localDocuments.getDocuments(p,_)))}))})(s.localStore,e);KS(s,e,t),JS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await tu(s,r)}catch(r){await ya(r)}}function JS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function KS(n,e,t){const s=De(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Nm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||$S(n,s)}))}function $S(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(pp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Ap(n))}function R_(n,e,t){for(const s of t)s instanceof FS?(n.Ru.addReference(s.key,e),I1(n,s)):s instanceof GS?(ye(Sp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||$S(n,s.key)):Re(19791,{wu:s})}function I1(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ye(Sp,"New document in limbo: "+t),n.Eu.add(s),Ap(n))}function Ap(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(lt.fromString(e)),s=n.fu.next();n.Au.set(s,new y1(t)),n.du=n.du.insert(t,s),VS(n.remoteStore,new eo(zi(op(t.path)),s,"TargetPurposeLimboResolution",wf.ce))}}async function tu(n,e,t){const s=De(n),r=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{u.push(s.pu(g,e,t).then((p=>{var _;if((p||t)&&s.isPrimaryClient){const T=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(p){r.push(p);const T=hp.As(g.targetId,p);l.push(T)}})))})),await Promise.all(u),s.Pu.H_(r),await(async function(g,p){const _=De(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(p,(S=>oe.forEach(S.Es,(x=>_.persistence.referenceDelegate.addReference(T,S.targetId,x))).next((()=>oe.forEach(S.ds,(x=>_.persistence.referenceDelegate.removeReference(T,S.targetId,x)))))))))}catch(T){if(!va(T))throw T;ye(mp,"Failed to update sequence numbers: "+T)}for(const T of p){const S=T.targetId;if(!T.fromCache){const x=_.Ms.get(S),U=x.snapshotVersion,z=x.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(S,z)}}})(s.localStore,l))}async function b1(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){ye(Sp,"User change. New user:",e.toKey());const s=await bS(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new ge(se.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await tu(t,s.Ls)}}function N1(n,e){const t=De(n),s=t.Au.get(e);if(s&&s.hu)return Fe().add(s.key);{let r=Fe();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const d=t.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function QS(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w1.bind(null,e),e.Pu.H_=h1.bind(null,e.eventManager),e.Pu.yu=m1.bind(null,e.eventManager),e}function M1(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R1.bind(null,e),e}class hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kb(this.persistence,new Db,e.initialUser,this.serializer)}Cu(e){return new IS(dp.mi,this.serializer)}Du(e){return new Fb}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hf.provider={build:()=>new hf};class D1 extends hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof ff,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yb(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new IS((s=>ff.mi(s,t)),this.serializer)}}class Mm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>x_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=b1.bind(null,this.syncEngine),await c1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new d1})()}createDatastore(e){const t=Vf(e.databaseInfo.databaseId),s=(function(l){return new Kb(l)})(e.databaseInfo);return(function(l,u,d,g){return new jb(l,u,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,u,d){return new Zb(s,r,l,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>x_(this.syncEngine,t,0)),(function(){return T_.v()?new T_:new Gb})())}createSyncEngine(e,t){return(function(r,l,u,d,g,p,_){const T=new v1(r,l,u,d,g,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=De(r);ye(tr,"RemoteStore shutting down."),l.Ea.add(5),await eu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Mm.provider={build:()=>new Mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="FirestoreClient";class V1{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=sn.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{ye(fo,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ye(fo,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new so;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Tp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function am(n,e){n.asyncQueue.verifyOperationInProgress(),ye(fo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await bS(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function I_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await P1(n);ye(fo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>S_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>S_(e.remoteStore,r))),n._onlineComponents=e}async function P1(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(fo,"Using user provided OfflineComponentProvider");try{await am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===se.FAILED_PRECONDITION||r.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;ua("Error using user provided cache. Falling back to memory cache: "+t),await am(n,new hf)}}else ye(fo,"Using default OfflineComponentProvider"),await am(n,new D1(void 0));return n._offlineComponents}async function jS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(fo,"Using user provided OnlineComponentProvider"),await I_(n,n._uninitializedComponentsProvider._online)):(ye(fo,"Using default OnlineComponentProvider"),await I_(n,new Mm))),n._onlineComponents}function k1(n){return jS(n).then((e=>e.syncEngine))}async function Dm(n){const e=await jS(n),t=e.eventManager;return t.onListen=_1.bind(null,e.syncEngine),t.onUnlisten=S1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=T1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=A1.bind(null,e.syncEngine),t}function U1(n,e,t={}){const s=new so;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,d,g,p){const _=new XS({next:S=>{_.Nu(),u.enqueueAndForget((()=>BS(l,T))),S.fromCache&&g.source==="server"?p.reject(new ge(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new zS(d,_,{includeMetadataChanges:!0,qa:!0});return qS(l,T)})(await Dm(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firestore.googleapis.com",N_=!0;class M_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZS,this.ssl=N_}else this.host=e.host,this.ssl=e.ssl??N_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pb)throw new ge(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uf{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new GR;switch(s.type){case"firstParty":return new KR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=b_.get(t);s&&(ye("ComponentProvider","Removing Datastore"),b_.delete(t),s.terminate())})(this),Promise.resolve()}}function L1(n,e,t,s={}){var p;n=Bi(n,Uf);const r=Xm(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(gx(`https://${d}`),Tx("Firestore",!0)),l.host!==ZS&&l.host!==d&&ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:r,emulatorOptions:s};if(!Zc(g,u)&&(n._setSettings(g),s.mockUserToken)){let _,T;if(typeof s.mockUserToken=="string")_=s.mockUserToken,T=sn.MOCK_USER;else{_=yx(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ge(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(S)}n._authCredentials=new HR(new qE(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new po(this.firestore,e,this._query)}}class Ut{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Xl(t,Ut._jsonSchema))return new Ut(e,s||null,new Ce(lt.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:kt("string",Ut._jsonSchemaVersion),referencePath:kt("string")};class oo extends po{constructor(e,t,s){super(e,t,op(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Ce(e))}withConverter(e){return new oo(this.firestore,e,this._path)}}function gs(n,e,...t){if(n=Yi(n),BE("collection","path",e),n instanceof Uf){const s=lt.fromString(e,...t);return H0(s),new oo(n,null,s)}{if(!(n instanceof Ut||n instanceof oo))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return H0(s),new oo(n.firestore,null,s)}}function mi(n,e,...t){if(n=Yi(n),arguments.length===1&&(e=Zm.newId()),BE("doc","path",e),n instanceof Uf){const s=lt.fromString(e,...t);return G0(s),new Ut(n,null,new Ce(s))}{if(!(n instanceof Ut||n instanceof oo))throw new ge(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return G0(s),new Ut(n.firestore,n instanceof oo?n.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="AsyncQueue";class V_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MS(this,"async_queue_retry"),this._c=()=>{const s=rm();s&&ye(D_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new so;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;ye(D_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,hs("INTERNAL UNHANDLED ERROR: ",P_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=_p.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:P_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function P_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of s)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}class nr extends Uf{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new V_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V_(e),this._firestoreClient=void 0,await e}}}function O1(n,e){const t=typeof n=="object"?n:bE(),s=typeof n=="string"?n:nf,r=wR(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=mx("firestore");l&&L1(r,...l)}return r}function Cp(n){if(n._terminated)throw new ge(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||q1(n),n._firestoreClient}function q1(n){var s,r,l;const e=n._freezeSettings(),t=(function(d,g,p,_){return new cI(d,g,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,WS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new V1(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(en.fromBase64String(e))}catch(t){throw new ge(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xl(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:kt("string",Kn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Xl(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:kt("string",Gi._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xl(e,Hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Hi(e.vectorValues);throw new ge(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hi._jsonSchemaVersion="firestore/vectorValue/1.0",Hi._jsonSchema={type:kt("string",Hi._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=/^__.*__$/;class z1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class eA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:n})}}class xp{constructor(e,t,s,r,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tA(this.Ac)&&B1.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class F1{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Vf(e)}Cc(e,t,s,r=!1){return new xp({Ac:e,methodName:t,Dc:s,path:Zt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rp(n){const e=n._freezeSettings(),t=Vf(n._databaseId);return new F1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function G1(n,e,t,s,r,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);Ip("Data must be an object, but it was:",u,s);const d=nA(s,u);let g,p;if(l.merge)g=new Dn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const S=Vm(e,T,t);if(!u.contains(S))throw new ge(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sA(_,S)||_.push(S)}g=new Dn(_),p=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=u.fieldTransforms;return new z1(new Sn(d),g,p)}class nu extends wp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nu}}function H1(n,e,t,s){const r=n.Cc(1,e,t);Ip("Data must be an object, but it was:",r,s);const l=[],u=Sn.empty();ho(s,((g,p)=>{const _=bp(e,g,t);p=Yi(p);const T=r.yc(_);if(p instanceof nu)l.push(_);else{const S=iu(p,T);S!=null&&(l.push(_),u.set(_,S))}}));const d=new Dn(l);return new eA(u,d,r.fieldTransforms)}function Y1(n,e,t,s,r,l){const u=n.Cc(1,e,t),d=[Vm(e,s,t)],g=[r];if(l.length%2!=0)throw new ge(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Vm(e,l[S])),g.push(l[S+1]);const p=[],_=Sn.empty();for(let S=d.length-1;S>=0;--S)if(!sA(p,d[S])){const x=d[S];let U=g[S];U=Yi(U);const z=u.yc(x);if(U instanceof nu)p.push(x);else{const M=iu(U,z);M!=null&&(p.push(x),_.set(x,M))}}const T=new Dn(p);return new eA(_,T,u.fieldTransforms)}function J1(n,e,t,s=!1){return iu(t,n.Cc(s?4:3,e))}function iu(n,e){if(iA(n=Yi(n)))return Ip("Unsupported field value:",e,n),nA(n,e);if(n instanceof wp)return(function(s,r){if(!tA(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let u=0;for(const d of s){let g=iu(d,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=Yi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return VI(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ft.fromDate(s);return{timestampValue:cf(r.serializer,l)}}if(s instanceof ft){const l=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cf(r.serializer,l)}}if(s instanceof Gi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kn)return{bytesValue:TS(r.serializer,s._byteString)};if(s instanceof Ut){const l=r.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:cp(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Hi)return(function(u,d){return{mapValue:{fields:{[QE]:{stringValue:XE},[sf]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return rp(d.serializer,p)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Cf(s)}`)})(n,e)}function nA(n,e){const t={};return GE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(n,((s,r)=>{const l=iu(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function iA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Gi||n instanceof Kn||n instanceof Ut||n instanceof wp||n instanceof Hi)}function Ip(n,e,t){if(!iA(t)||!zE(t)){const s=Cf(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Vm(n,e,t){if((e=Yi(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return bp(n,e);throw mf("Field path arguments must be of type string or ",n,!1,void 0,t)}const K1=new RegExp("[~\\*/\\[\\]]");function bp(n,e,t){if(e.search(K1)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mf(n,e,t,s,r){const l=s&&!s.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${r}`),g+=")"),new ge(se.INVALID_ARGUMENT,d+n+g)}function sA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Np("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $1 extends oA{data(){return super.data()}}function Np(n,e){return typeof e=="string"?bp(n,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mp{}class aA extends Mp{}function Of(n,e,...t){let s=[];e instanceof Mp&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((g=>g instanceof Dp)).length,d=l.filter((g=>g instanceof qf)).length;if(u>1||u>0&&d>0)throw new ge(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class qf extends aA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new qf(e,t,s)}_apply(e){const t=this._parse(e);return uA(e._query,t),new po(e.firestore,e.converter,Sm(e._query,t))}_parse(e){const t=Rp(e.firestore);return(function(l,u,d,g,p,_,T){let S;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){L_(T,_);const U=[];for(const z of T)U.push(U_(g,l,z));S={arrayValue:{values:U}}}else S=U_(g,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||L_(T,_),S=J1(d,u,T,_==="in"||_==="not-in");return Pt.create(p,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pf(n,e,t){const s=e,r=Np("where",n);return qf._create(r,s,t)}class Dp extends Mp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let u=r;const d=l.getFlattenedFilters();for(const g of d)uA(u,g),u=Sm(u,g)})(e._query,t),new po(e.firestore,e.converter,Sm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vp extends aA{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Vp(e,t,s)}_apply(e){return new po(e.firestore,e.converter,af(e._query,this._limit,this._limitType))}}function lA(n){return Vp._create("limit",n,"F")}function U_(n,e,t){if(typeof(t=Yi(t))=="string"){if(t==="")throw new ge(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sS(e)&&t.indexOf("/")!==-1)throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!Ce.isDocumentKey(s))throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return W0(n,new Ce(s))}if(t instanceof Ut)return W0(n,t._key);throw new ge(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(t)}.`)}function L_(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uA(n,e){const t=(function(r,l){for(const u of r)for(const d of u.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Q1{convertValue(e,t="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ho(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[sf].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>St(u.doubleValue)));return new Hi(t)}convertGeoPoint(e){return new Gi(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const t=ao(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);We(xS(s),9688,{name:e});const r=new Jl(s.get(1),s.get(3)),l=new Ce(s.popFirst(5));return r.isEqual(t)||hs(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends oA{constructor(e,t,s,r,l,u){super(e,t,s,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Np("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wo._jsonSchema={type:kt("string",Wo._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class Qc extends Wo{data(e={}){return super.data(e)}}class Zo{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Qc(this._firestore,this._userDataWriter,s.key,s,new Pl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new Qc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Pl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Qc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Pl(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:j1(d.type),doc:g,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}Zo._jsonSchemaVersion="firestore/querySnapshot/1.0",Zo._jsonSchema={type:kt("string",Zo._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class Pp extends Q1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function Bf(n){n=Bi(n,po);const e=Bi(n.firestore,nr),t=Cp(e),s=new Pp(e);return rA(n._query),U1(t,n._query).then((r=>new Zo(e,s,n,r)))}function ys(n,e,t,...s){n=Bi(n,Ut);const r=Bi(n.firestore,nr),l=Rp(r);let u;return u=typeof(e=Yi(e))=="string"||e instanceof Lf?Y1(l,"updateDoc",n._key,e,t,s):H1(l,"updateDoc",n._key,e),kp(r,[u.toMutation(n._key,ui.exists(!0))])}function W1(n){return kp(Bi(n.firestore,nr),[new ap(n._key,ui.none())])}function zf(n,e){const t=Bi(n.firestore,nr),s=mi(n),r=X1(n.converter,e);return kp(t,[G1(Rp(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,ui.exists(!1))]).then((()=>s))}function Z1(n,...e){var g,p,_;n=Yi(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||k_(e[s])||(t=e[s++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(k_(e[s])){const T=e[s];e[s]=(g=T.next)==null?void 0:g.bind(T),e[s+1]=(p=T.error)==null?void 0:p.bind(T),e[s+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,d;if(n instanceof Ut)u=Bi(n.firestore,nr),d=op(n._key.path),l={next:T=>{e[s]&&e[s](eN(u,n,T))},error:e[s+1],complete:e[s+2]};else{const T=Bi(n,po);u=Bi(T.firestore,nr),d=T._query;const S=new Pp(u);l={next:x=>{e[s]&&e[s](new Zo(u,S,T,x))},error:e[s+1],complete:e[s+2]},rA(n._query)}return(function(S,x,U,z){const M=new XS(z),F=new zS(x,M,U);return S.asyncQueue.enqueueAndForget((async()=>qS(await Dm(S),F))),()=>{M.Nu(),S.asyncQueue.enqueueAndForget((async()=>BS(await Dm(S),F)))}})(Cp(u),d,r,l)}function kp(n,e){return(function(s,r){const l=new so;return s.asyncQueue.enqueueAndForget((async()=>C1(await k1(s),r,l))),l.promise})(Cp(n),e)}function eN(n,e,t){const s=t.docs.get(e._key),r=new Pp(n);return new Wo(n,r,e._key,s,new Pl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){return new nu("deleteField")}(function(e,t=!0){(function(r){ga=r})(bR),ef(new zl("firestore",((s,{instanceIdentifier:r,options:l})=>{const u=s.getProvider("app").getImmediate(),d=new nr(new YR(s.getProvider("auth-internal")),new $R(u,s.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(p.options.projectId,_)})(u,r),u);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),oa(q0,B0,e),oa(q0,B0,"esm2020")})();const tN={apiKey:"AIzaSyBSA5B66H-0BL0LcpFs0FVmo_02MX7twI8",authDomain:"tyapp2-1d8f9.firebaseapp.com",projectId:"tyapp2-1d8f9",storageBucket:"tyapp2-1d8f9.firebasestorage.app",messagingSenderId:"147317426980",appId:"1:147317426980:web:49bbcd69b2553cf48581b1"};let cA=null;try{const e=NR().length>0?bE():IE(tN);cA=O1(e)}catch(n){console.error("Firebase initialization failed:",n)}const At=cA,or="users",Xn="appointments",vs=()=>window.__PLAYWRIGHT__===!0,go=()=>vs()?!1:At!==null&&typeof At=="object",su=()=>{if(typeof window>"u")return[];const n=localStorage.getItem("__mockUsers__");if(n)return JSON.parse(n);const e=[{id:"admin-1",name:"Tark Yaln",phoneNumber:"5555555555",password:"admin",role:at.ADMIN,specialty:"Master Stylist",avatar:"https://images.unsplash.com/photo-1556157382-97eda2d62296?w=150&h=150&fit=crop"},{id:"staff-1",name:"Ahmet Makas",phoneNumber:"5111111111",password:"123456",role:at.STAFF,specialty:"Barber",avatar:"https://ui-avatars.com/api/?name=Ahmet+Makas&background=333&color=fff"},{id:"staff-2",name:"Mehmet Bak",phoneNumber:"5222222222",password:"123456",role:at.STAFF,specialty:"Stylist",avatar:"https://ui-avatars.com/api/?name=Mehmet+Bicak&background=333&color=fff"}];return localStorage.setItem("__mockUsers__",JSON.stringify(e)),e},nN=n=>{typeof window<"u"&&localStorage.setItem("__mockUsers__",JSON.stringify(n))},fA=()=>{if(typeof window>"u")return[];const n=localStorage.getItem("__mockAppointments__");return n?JSON.parse(n):[]},iN=n=>{typeof window<"u"&&localStorage.setItem("__mockAppointments__",JSON.stringify(n))};let ci=su(),gf=fA();const Lp=async n=>(ci=su(),ci.some(e=>e.phoneNumber===n)),sN=async(n,e)=>(ci=su(),ci.find(s=>s.phoneNumber===n&&s.password===e)||null),oN=async(n,e,t)=>{if(ci=su(),await Lp(e))throw new Error("Bu telefon numaras zaten kaytl.");const r={id:`user-${Date.now()}`,name:n,phoneNumber:e,password:t,role:at.CUSTOMER,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=D4AF37&color=000`};return ci.push(r),nN(ci),r},rN=async()=>(ci=su(),console.log("[MOCK] mockGetUsers called, returning users:",ci.map(n=>({id:n.id,name:n.name,role:n.role}))),ci.map(n=>{const{password:e,...t}=n;return t})),aN=async(n,e,t,s)=>{if(await Lp(e))throw new Error("Bu telefon numaras zaten sistemde kaytl.");const l={id:`staff-${Date.now()}`,name:n,phoneNumber:e,password:t,role:at.STAFF,specialty:s,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=333&color=fff`};ci.push(l)},Op=async n=>{if(vs()||!go())return Lp(n);const e=Of(gs(At,or),pf("phoneNumber","==",n));return!(await Bf(e)).empty},dA=async(n,e)=>{if(vs()||!go())return sN(n,e);try{const t=Of(gs(At,or),pf("phoneNumber","==",n),pf("password","==",e),lA(1)),s=await Bf(t);if(s.empty)return null;const r=s.docs[0],l=r.data();return{id:r.id,name:l.name,role:l.role,phoneNumber:l.phoneNumber,avatar:l.avatar,specialty:l.specialty}}catch(t){throw console.error("Login error:",t),t}},hA=async(n,e,t)=>{if(vs()||!go())return oN(n,e,t);if(await Op(e))throw new Error("Bu telefon numaras zaten kaytl.");const r={name:n,phoneNumber:e,password:t,role:at.CUSTOMER,avatar:`https://ui-avatars.com/api/?name=${n}&background=D4AF37&color=000`,createdAt:new Date().toISOString()};return{id:(await zf(gs(At,or),r)).id,name:r.name,role:r.role,phoneNumber:r.phoneNumber,avatar:r.avatar}},lN=async(n,e)=>{const t=Of(gs(At,or),pf("phoneNumber","==",e),lA(1)),s=await Bf(t);if(!s.empty){const r=s.docs[0],l=r.data();return{id:r.id,name:l.name,role:l.role,phoneNumber:l.phoneNumber,avatar:l.avatar}}return console.log("User not found, creating new customer:",n),await hA(n,e,"123456")},uN=async(n,e,t,s)=>{if(vs()||!go())return aN(n,e,t,s);if(await Op(e))throw new Error("Bu telefon numaras zaten sistemde kaytl.");const l={name:n,phoneNumber:e,password:t,role:at.STAFF,specialty:s,avatar:`https://ui-avatars.com/api/?name=${n}&background=333&color=fff`,createdAt:new Date().toISOString()};await zf(gs(At,or),l)},yf=async()=>{if(vs()||!go())return rN();try{const n=await Bf(gs(At,or)),e=[];return n.forEach(t=>{const{password:s,...r}=t.data();e.push({id:t.id,...r})}),e}catch(n){return console.error("Error fetching users:",n),[]}},cN=async()=>{if(vs()||!go())return!1;const n="5555555555";return await Op(n)?!1:(console.log("Admin account missing. Creating..."),await zf(gs(At,or),{name:"Tark Yaln",phoneNumber:n,password:"admin",role:at.ADMIN,specialty:"Master Stylist",avatar:"https://images.unsplash.com/photo-1556157382-97eda2d62296?w=150&h=150&fit=crop"}),!0)},mA=async n=>{if(vs()||!go()){const e={id:`appt-${Date.now()}`,...n};return gf.push(e),iN(gf),console.log("[MOCK] Created appointment:",e),e.id}try{return(await zf(gs(At,Xn),n)).id}catch(e){throw console.error("Error creating appointment:",e),e}},fN=async(n,e)=>{const t=mi(At,Xn,n),{id:s,...r}=e;await ys(t,r)},qp=n=>{if(vs()||!go())return gf=fA(),n(gf),()=>{};const e=Of(gs(At,Xn));return Z1(e,t=>{const s=[];t.forEach(r=>{s.push({id:r.id,...r.data()})}),n(s)})},dN=async n=>{const e=mi(At,Xn,n);await ys(e,{status:"cancelled"})},hN=async n=>{const e=mi(At,Xn,n);await W1(e)},mN=async(n,e,t)=>{const s=mi(At,Xn,n);await ys(s,{changeRequest:{newDate:e,newTime:t,status:"pending",requestedAt:new Date().toISOString()}})},pN=async n=>{const e=mi(At,Xn,n);await ys(e,{changeRequest:Up()})},gN=async(n,e,t)=>{const s=mi(At,Xn,n);await ys(s,{date:e,time:t,changeRequest:Up(),status:"confirmed"})},yN=async n=>{const e=mi(At,Xn,n);await ys(e,{"changeRequest.status":"rejected"})},vN=async(n,e,t)=>{const s=mi(At,Xn,n);await ys(s,{adminProposal:{newDate:e,newTime:t,status:"pending",proposedAt:new Date().toISOString()}})},_N=async(n,e,t)=>{const s=mi(At,Xn,n);await ys(s,{date:e,time:t,adminProposal:Up(),status:"confirmed"})},TN=async n=>{const e=mi(At,Xn,n);await ys(e,{"adminProposal.status":"rejected"})},fn=({children:n,className:e="",onClick:t})=>A.jsx("div",{onClick:t,className:`glass-panel rounded-2xl p-6 shadow-2xl border-t border-l border-white/20 transition-all duration-300 ${t?"cursor-pointer hover:bg-white/5 hover:scale-[1.01]":""} ${e}`,children:n});/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),O_=n=>{const e=SN(n);return e.charAt(0).toUpperCase()+e.slice(1)},pA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),AN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=ce.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:u,...d},g)=>ce.createElement("svg",{ref:g,...CN,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:pA("lucide",r),...!l&&!AN(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,_])=>ce.createElement(p,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=(n,e)=>{const t=ce.forwardRef(({className:s,...r},l)=>ce.createElement(wN,{ref:l,iconNode:e,className:pA(`lucide-${EN(O_(n))}`,`lucide-${n}`,s),...r}));return t.displayName=O_(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],RN=Vn("calendar",xN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],bN=Vn("chevron-right",IN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],MN=Vn("circle-check-big",NN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],VN=Vn("crown",DN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],kN=Vn("log-out",PN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],LN=Vn("menu",UN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],qN=Vn("message-circle",ON);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],zN=Vn("scissors",BN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],GN=Vn("shield",FN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],YN=Vn("sparkles",HN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],KN=Vn("upload",JN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],QN=Vn("user",$N);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jN=Vn("x",XN),Te=({name:n,size:e=24,className:t=""})=>{const r={scissors:zN,user:QN,calendar:RN,shield:GN,sparkles:YN,logout:kN,menu:LN,close:jN,chevronRight:bN,check:MN,crown:VN,upload:KN,whatsapp:qN}[n];return r?A.jsx(r,{size:e,className:t}):null};var WN={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZN,eM;function tM(){return{geminiUrl:ZN,vertexUrl:eM}}function nM(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const u=tM();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _s{}function pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const g=n[d];if(Array.isArray(t))for(let p=0;p<g.length;p++){const _=g[p];h(_,e.slice(l+1),t[p])}else for(const p of g)h(p,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const g=n[d];h(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(d=>f(d,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function iM(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&l.length>d)for(let g=d;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Pm(n,r,l,0,u)}}function Pm(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const g of d[u])Pm(g,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(p=>!p.startsWith("_")&&!r.has(p)),g={};for(const p of d)g[p]=u[p];for(const[p,_]of Object.entries(g)){const T=[];for(const S of t.slice(s))S==="*"?T.push(p):T.push(S);h(u,T,_)}for(const p of d)delete u[p]}}else{const u=n;l in u&&Pm(u[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sM(n){const e={},t=f(n,["operationName"]);t!=null&&h(e,["operationName"],t);const s=f(n,["resourceName"]);return s!=null&&h(e,["_url","resourceName"],s),e}function oM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],aM(u)),e}function rM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],lM(u)),e}function aM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>uM(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function lM(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>cM(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function uM(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],gM(t)),e}function cM(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],yM(t)),e}function fM(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function dM(n){const e={},t=f(n,["operationName"]);return t!=null&&h(e,["_url","operationName"],t),e}function hM(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],mM(u)),e}function mM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function gA(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],pM(u)),e}function pM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function gM(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],Bp(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function yM(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],Bp(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var q_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(q_||(q_={}));var B_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(B_||(B_={}));var z_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(z_||(z_={}));var En;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(En||(En={}));var F_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(F_||(F_={}));var G_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(G_||(G_={}));var H_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(H_||(H_={}));var Y_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Y_||(Y_={}));var J_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(J_||(J_={}));var K_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(K_||(K_={}));var $_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})($_||($_={}));var Q_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Q_||(Q_={}));var X_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(X_||(X_={}));var j_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(j_||(j_={}));var W_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(W_||(W_={}));var Z_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Z_||(Z_={}));var eT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(eT||(eT={}));var tT;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(tT||(tT={}));var nT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(nT||(nT={}));var vf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(vf||(vf={}));var iT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iT||(iT={}));var sT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sT||(sT={}));var oT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oT||(oT={}));var km;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(km||(km={}));var rT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(rT||(rT={}));var aT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(aT||(aT={}));var lT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(lT||(lT={}));var uT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(uT||(uT={}));var cT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cT||(cT={}));var fT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fT||(fT={}));var dT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(dT||(dT={}));var hT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hT||(hT={}));var mT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mT||(mT={}));var pT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(pT||(pT={}));var gT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gT||(gT={}));var yT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yT||(yT={}));var vT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vT||(vT={}));var _T;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(_T||(_T={}));var TT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(TT||(TT={}));var ET;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ET||(ET={}));var ST;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ST||(ST={}));var AT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(AT||(AT={}));var CT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(CT||(CT={}));var wT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(wT||(wT={}));var xT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(xT||(xT={}));var RT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(RT||(RT={}));var IT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(IT||(IT={}));var bT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(bT||(bT={}));var NT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(NT||(NT={}));var MT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(MT||(MT={}));var DT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(DT||(DT={}));var VT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(VT||(VT={}));var PT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(PT||(PT={}));var kT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(kT||(kT={}));var UT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(UT||(UT={}));var ia;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ia||(ia={}));class Um{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class bl{get text(){var e,t,s,r,l,u,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const T=[];for(const S of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[x,U]of Object.entries(S))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(U!==null||U!==void 0)&&T.push(x);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,p+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,t,s,r,l,u,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const T of(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[S,x]of Object.entries(T))S!=="inlineData"&&(x!==null||x!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,s,r,l,u,d,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,s,r,l,u,d,g,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,s,r,l,u,d,g,p;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class LT{}class OT{}class vM{}class _M{}class TM{}class EM{}class qT{}class BT{}class zT{}class SM{}class _f{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new _f;let r;const l=e;return t?r=rM(l):r=oM(l),Object.assign(s,r),s}}class FT{}class GT{}class HT{}class YT{}class AM{}class CM{}class wM{}class zp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new zp,l=hM(e);return Object.assign(s,l),s}}class xM{}class RM{}class IM{}class JT{}class bM{get text(){var e,t,s;let r="",l=!1;const u=[];for(const d of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(d))g!=="text"&&g!=="thought"&&p!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&l.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class NM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Fp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Fp,l=gA(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yA(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function vA(n){return Array.isArray(n)?n.map(e=>Tf(e)):[Tf(n)]}function Tf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function _A(n){const e=Tf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function TA(n){const e=Tf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function EA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>KT(e)):[KT(n)]}function Lm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function $T(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function QT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function rn(n){if(n==null)throw new Error("ContentUnion is required");return Lm(n)?n:{role:"user",parts:EA(n)}}function Gp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=rn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=rn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>rn(t)):[rn(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if($T(n)||QT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[rn(n)]}const e=[],t=[],s=Lm(n[0]);for(const r of n){const l=Lm(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if($T(r)||QT(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:EA(t)}),e}function MM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(En).includes(t[0].toUpperCase())?t[0].toUpperCase():En.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(En).includes(s.toUpperCase())?s.toUpperCase():En.TYPE_UNSPECIFIED})}}function aa(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&MM(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(En).includes(d.toUpperCase())?d.toUpperCase():En.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=aa(d);else if(s.includes(u)){const g=[];for(const p of d){if(p.type=="null"){e.nullable=!0;continue}g.push(aa(p))}e[u]=g}else if(r.includes(u)){const g={};for(const[p,_]of Object.entries(d))g[p]=aa(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Hp(n){return aa(n)}function Yp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Jp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ta(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=aa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=aa(e.response));return n}function Ea(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function DM(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Ts(n,e){if(typeof e!="string")throw new Error("name must be a string");return DM(n,e,"cachedContents")}function SA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function yo(n){return Bp(n)}function VM(n){return n!=null&&typeof n=="object"&&"name"in n}function PM(n){return n!=null&&typeof n=="object"&&"video"in n}function kM(n){return n!=null&&typeof n=="object"&&"uri"in n}function AA(n){var e;let t;if(VM(n)&&(t=n.name),!(kM(n)&&(t=n.uri,t===void 0))&&!(PM(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function CA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function wA(n){for(const e of["models","tunedModels","publisherModels"])if(UM(n,e))return n[e];return[]}function UM(n,e){return n!==null&&typeof n=="object"&&e in n}function LM(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function OM(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=LM(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function xA(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function qM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function RA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Sa(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function IA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BM(n){const e={},t=f(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const s=f(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>TD(u))),h(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["inlinedEmbedContentResponses"],l)}return e}function zM(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsDestination","outputUriPrefix"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function FM(n){const e={},t=f(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsDestination","outputUriPrefix"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xc(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata","displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["metadata","state"]);r!=null&&h(e,["state"],IA(r));const l=f(n,["metadata","createTime"]);l!=null&&h(e,["createTime"],l);const u=f(n,["metadata","endTime"]);u!=null&&h(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&h(e,["updateTime"],d);const g=f(n,["metadata","model"]);g!=null&&h(e,["model"],g);const p=f(n,["metadata","output"]);return p!=null&&h(e,["dest"],BM(RA(p))),e}function Om(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["state"]);r!=null&&h(e,["state"],IA(r));const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["createTime"]);u!=null&&h(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(e,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(e,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(e,["updateTime"],p);const _=f(n,["model"]);_!=null&&h(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&h(e,["src"],GM(T));const S=f(n,["outputConfig"]);S!=null&&h(e,["dest"],zM(RA(S)));const x=f(n,["completionStats"]);return x!=null&&h(e,["completionStats"],x),e}function GM(n){const e={},t=f(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const s=f(n,["gcsSource","uris"]);s!=null&&h(e,["gcsUri"],s);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function HM(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&h(t,["fileName"],s);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>_D(n,u))),h(t,["requests","requests"],l)}return t}function YM(n){const e={},t=f(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const s=f(n,["gcsUri"]);s!=null&&h(e,["gcsSource","uris"],s);const r=f(n,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function JM(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function KM(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function $M(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function QM(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],XM(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(x=>x)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function XM(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function bA(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>RD(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function jM(n,e){const t={},s=f(n,["displayName"]);if(e!==void 0&&s!=null&&h(e,["batch","displayName"],s),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function WM(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],FM(qM(r))),t}function XT(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],HM(n,xA(n,r)));const l=f(e,["config"]);return l!=null&&jM(l,t),t}function ZM(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],Qe(n,s));const r=f(e,["src"]);r!=null&&h(t,["inputConfig"],YM(xA(n,r)));const l=f(e,["config"]);return l!=null&&WM(l,t),t}function eD(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["batch","displayName"],s),t}function tD(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["src"]);r!=null&&h(t,["batch","inputConfig"],lD(n,r));const l=f(e,["config"]);return l!=null&&eD(l,t),t}function nD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function iD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function sD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function oD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);return l!=null&&h(e,["error"],l),e}function rD(n,e){const t={},s=f(e,["contents"]);if(s!=null){let l=Gp(n,s);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(h(t,["_self"],aD(r,t)),iM(t,{"requests[].*":"requests[].request.*"})),t}function aD(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function lD(n,e){const t={},s=f(e,["fileName"]);s!=null&&h(t,["file_name"],s);const r=f(e,["inlinedRequests"]);return r!=null&&h(t,["requests"],rD(n,r)),t}function uD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function cD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fD(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dD(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],bA(rn(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(s,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const x=f(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&h(s,["frequencyPenalty"],U);const z=f(e,["seed"]);z!=null&&h(s,["seed"],z);const M=f(e,["responseMimeType"]);M!=null&&h(s,["responseMimeType"],M);const F=f(e,["responseSchema"]);F!=null&&h(s,["responseSchema"],Hp(F));const Z=f(e,["responseJsonSchema"]);if(Z!=null&&h(s,["responseJsonSchema"],Z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let V=Q;Array.isArray(V)&&(V=V.map(Ie=>ID(Ie))),h(t,["safetySettings"],V)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let V=Ea(re);Array.isArray(V)&&(V=V.map(Ie=>ND(Ta(Ie)))),h(t,["tools"],V)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&h(t,["toolConfig"],bD(de)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&h(t,["cachedContent"],Ts(n,ue));const N=f(e,["responseModalities"]);N!=null&&h(s,["responseModalities"],N);const D=f(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const I=f(e,["speechConfig"]);if(I!=null&&h(s,["speechConfig"],Yp(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(s,["thinkingConfig"],P);const k=f(e,["imageConfig"]);k!=null&&h(s,["imageConfig"],vD(k));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&h(s,["enableEnhancedCivicAnswers"],q),s}function hD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>QM(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function mD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function pD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Sa(n,s)),t}function gD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function yD(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function vD(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _D(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["request","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let d=$n(r);Array.isArray(d)&&(d=d.map(g=>bA(g))),h(t,["request","contents"],d)}const l=f(e,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(e,["config"]);return u!=null&&h(t,["request","generationConfig"],dD(n,u,f(t,["request"],{}))),t}function TD(n){const e={},t=f(n,["response"]);t!=null&&h(e,["response"],hD(t));const s=f(n,["error"]);return s!=null&&h(e,["error"],s),e}function ED(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function SD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&h(e,["_query","filter"],l),t}function AD(n){const e={},t=f(n,["config"]);return t!=null&&ED(t,e),e}function CD(n){const e={},t=f(n,["config"]);return t!=null&&SD(t,e),e}function wD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Xc(u))),h(e,["batchJobs"],l)}return e}function xD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Om(u))),h(e,["batchJobs"],l)}return e}function RD(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],uD(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],cD(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],JM(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function ID(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function bD(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],fD(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function ND(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],gD(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],yD(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ps;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(ps||(ps={}));class rr{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MD extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=XT(this.apiClient,e),s=t._url,r=pe("{model}:batchGenerateContent",s),d=t.batch.inputConfig.requests,g=d.requests,p=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const x=T.request;x.systemInstruction=S,T.request=x}p.push(T)}return d.requests=p,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=ZM(this.apiClient,e);return d=pe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Om(_))}else{const p=XT(this.apiClient,e);return d=pe("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Xc(_))}}async createEmbeddingsInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tD(this.apiClient,e);return l=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Xc(g))}}async get(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=pD(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Om(_))}else{const p=mD(this.apiClient,e);return d=pe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Xc(_))}}async cancel(e){var t,s,r,l;let u="",d={};if(this.apiClient.isVertexAI()){const g=$M(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=KM(this.apiClient,e);u=pe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=CD(e);return d=pe("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=xD(_),S=new JT;return Object.assign(S,T),S})}else{const p=AD(e);return d=pe("batches",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=wD(_),S=new JT;return Object.assign(S,T),S})}}async delete(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=iD(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>oD(_))}else{const p=nD(this.apiClient,e);return d=pe("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>sD(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DD(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function jT(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>t2(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function VD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=$n(u);Array.isArray(_)&&(_=_.map(T=>jT(T))),h(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],jT(rn(d)));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>i2(T))),h(e,["tools"],_)}const p=f(n,["toolConfig"]);if(e!==void 0&&p!=null&&h(e,["toolConfig"],n2(p)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function PD(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&h(e,["displayName"],l);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=$n(u);Array.isArray(T)&&(T=T.map(S=>S)),h(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&h(e,["systemInstruction"],rn(d));const g=f(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(S=>s2(S))),h(e,["tools"],T)}const p=f(n,["toolConfig"]);e!==void 0&&p!=null&&h(e,["toolConfig"],p);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&h(e,["encryption_spec","kmsKeyName"],_),t}function kD(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],yA(n,s));const r=f(e,["config"]);return r!=null&&VD(r,t),t}function UD(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["model"],yA(n,s));const r=f(e,["config"]);return r!=null&&PD(r,t),t}function LD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function OD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function qD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function BD(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function zD(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function FD(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function GD(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HD(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function YD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function JD(n,e){const t={},s=f(e,["name"]);return s!=null&&h(t,["_url","name"],Ts(n,s)),t}function KD(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function $D(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function QD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function XD(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function jD(n){const e={},t=f(n,["config"]);return t!=null&&QD(t,e),e}function WD(n){const e={},t=f(n,["config"]);return t!=null&&XD(t,e),e}function ZD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function e2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["cachedContents"],l)}return e}function t2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],zD(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],FD(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],DD(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function n2(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],GD(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function i2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],KD(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],$D(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function s2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>HD(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function o2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function r2(n,e){const t={},s=f(n,["ttl"]);e!==void 0&&s!=null&&h(e,["ttl"],s);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),t}function a2(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],Ts(n,s));const r=f(e,["config"]);return r!=null&&o2(r,t),t}function l2(n,e){const t={},s=f(e,["name"]);s!=null&&h(t,["_url","name"],Ts(n,s));const r=f(e,["config"]);return r!=null&&r2(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u2 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=UD(this.apiClient,e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=kD(this.apiClient,e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=JD(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=YD(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=OD(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=BD(_),S=new HT;return Object.assign(S,T),S})}else{const p=LD(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=qD(_),S=new HT;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=l2(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=a2(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=WD(e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=e2(_),S=new YT;return Object.assign(S,T),S})}else{const p=jD(e);return d=pe("cachedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=ZD(_),S=new YT;return Object.assign(S,T),S})}}}function Ef(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function WT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(n){return this instanceof be?(this.v=n,this):new be(n)}function fi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(x){return function(U){return Promise.resolve(U).then(x,T)}}function d(x,U){s[x]&&(r[x]=function(z){return new Promise(function(M,F){l.push([x,z,M,F])>1||g(x,z)})},U&&(r[x]=U(r[x])))}function g(x,U){try{p(s[x](U))}catch(z){S(l[0][3],z)}}function p(x){x.value instanceof be?Promise.resolve(x.value.v).then(_,T):S(l[0][2],x)}function _(x){g("next",x)}function T(x){g("throw",x)}function S(x,U){x(U),l.shift(),l.length&&g(l[0][0],l[0][1])}}function di(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WT=="function"?WT(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(d,g){u=n[l](u),r(d,g,u.done,u.value)})}}function r(l,u,d,g){Promise.resolve(g).then(function(p){l({value:p,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:NA(t)}function NA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function f2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!NA(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class d2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new h2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class h2{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),f2(l)}async sendMessage(e){var t;await this.sendPromise;const s=rn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,d;const g=await r,p=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(T))!==null&&d!==void 0?d:[]);const x=p?[p]:[];this.recordHistory(s,x,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=rn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?ZT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return fi(this,arguments,function*(){var r,l,u,d,g,p;const _=[];try{for(var T=!0,S=di(e),x;x=yield be(S.next()),r=x.done,!r;T=!0){d=x.value,T=!1;const U=d;if(c2(U)){const z=(p=(g=U.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;z!==void 0&&_.push(z)}yield yield be(U)}}catch(U){l={error:U}}finally{try{!T&&!r&&(u=S.return)&&(yield be(u.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...ZT(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ff extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ff.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m2(n){const e={},t=f(n,["file"]);return t!=null&&h(e,["file"],t),e}function p2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function g2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],AA(t)),e}function y2(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function v2(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","file"],AA(t)),e}function _2(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function T2(n){const e={},t=f(n,["config"]);return t!=null&&_2(t,e),e}function E2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S2 extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=T2(e);return l=pe("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=E2(g),_=new xM;return Object.assign(_,p),_})}}async createInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m2(e);return l=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=p2(g),_=new RM;return Object.assign(_,p),_})}}async get(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=v2(e);return l=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=g2(e);return l=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=y2(g),_=new IM;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jc(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function A2(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>q2(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function C2(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function w2(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function x2(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function R2(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const x=f(n,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const U=f(n,["responseModalities"]);U!=null&&h(e,["responseModalities"],U);const z=f(n,["responseSchema"]);z!=null&&h(e,["responseSchema"],z);const M=f(n,["routingConfig"]);M!=null&&h(e,["routingConfig"],M);const F=f(n,["seed"]);F!=null&&h(e,["seed"],F);const Z=f(n,["speechConfig"]);Z!=null&&h(e,["speechConfig"],Z);const Q=f(n,["stopSequences"]);Q!=null&&h(e,["stopSequences"],Q);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const de=f(n,["thinkingConfig"]);de!=null&&h(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&h(e,["topK"],ue);const N=f(n,["topP"]);if(N!=null&&h(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function I2(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function b2(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function N2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Jp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&h(e,["setup","systemInstruction"],A2(rn(U)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=Ea(z);Array.isArray(ue)&&(ue=ue.map(N=>z2(Ta(N)))),h(e,["setup","tools"],ue)}const M=f(n,["sessionResumption"]);e!==void 0&&M!=null&&h(e,["setup","sessionResumption"],B2(M));const F=f(n,["inputAudioTranscription"]);e!==void 0&&F!=null&&h(e,["setup","inputAudioTranscription"],F);const Z=f(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const de=f(n,["proactivity"]);if(e!==void 0&&de!=null&&h(e,["setup","proactivity"],de),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function M2(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],R2(s));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Jp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&h(e,["setup","systemInstruction"],rn(U));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let N=Ea(z);Array.isArray(N)&&(N=N.map(D=>F2(Ta(D)))),h(e,["setup","tools"],N)}const M=f(n,["sessionResumption"]);e!==void 0&&M!=null&&h(e,["setup","sessionResumption"],M);const F=f(n,["inputAudioTranscription"]);e!==void 0&&F!=null&&h(e,["setup","inputAudioTranscription"],F);const Z=f(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const de=f(n,["proactivity"]);e!==void 0&&de!=null&&h(e,["setup","proactivity"],de);const ue=f(n,["explicitVadSignal"]);return e!==void 0&&ue!=null&&h(e,["setup","explicitVadSignal"],ue),t}function D2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],N2(r,t)),t}function V2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],M2(r,t)),t}function P2(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],t),e}function k2(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["weightedPrompts"],s)}return e}function U2(n){const e={},t=f(n,["media"]);if(t!=null){let p=vA(t);Array.isArray(p)&&(p=p.map(_=>jc(_))),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],jc(TA(s)));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],jc(_A(l)));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function L2(n){const e={},t=f(n,["media"]);if(t!=null){let p=vA(t);Array.isArray(p)&&(p=p.map(_=>_)),h(e,["mediaChunks"],p)}const s=f(n,["audio"]);s!=null&&h(e,["audio"],TA(s));const r=f(n,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&h(e,["video"],_A(l));const u=f(n,["text"]);u!=null&&h(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&h(e,["activityStart"],d);const g=f(n,["activityEnd"]);return g!=null&&h(e,["activityEnd"],g),e}function O2(n){const e={},t=f(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],t);const s=f(n,["serverContent"]);s!=null&&h(e,["serverContent"],s);const r=f(n,["toolCall"]);r!=null&&h(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&h(e,["toolCallCancellation"],l);const u=f(n,["usageMetadata"]);u!=null&&h(e,["usageMetadata"],G2(u));const d=f(n,["goAway"]);d!=null&&h(e,["goAway"],d);const g=f(n,["sessionResumptionUpdate"]);g!=null&&h(e,["sessionResumptionUpdate"],g);const p=f(n,["voiceActivityDetectionSignal"]);return p!=null&&h(e,["voiceActivityDetectionSignal"],p),e}function q2(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],C2(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],w2(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],jc(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function B2(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],I2(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],b2(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function F2(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>x2(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function G2(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const s=f(n,["cachedContentTokenCount"]);s!=null&&h(e,["cachedContentTokenCount"],s);const r=f(n,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&h(e,["toolUsePromptTokenCount"],l);const u=f(n,["thoughtsTokenCount"]);u!=null&&h(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&h(e,["totalTokenCount"],d);const g=f(n,["promptTokensDetails"]);if(g!=null){let x=g;Array.isArray(x)&&(x=x.map(U=>U)),h(e,["promptTokensDetails"],x)}const p=f(n,["cacheTokensDetails"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(U=>U)),h(e,["cacheTokensDetails"],x)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(U=>U)),h(e,["responseTokensDetails"],x)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let x=T;Array.isArray(x)&&(x=x.map(U=>U)),h(e,["toolUsePromptTokensDetails"],x)}const S=f(n,["trafficType"]);return S!=null&&h(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H2(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Y2(n){const e={},t=f(n,["content"]);t!=null&&h(e,["content"],t);const s=f(n,["citationMetadata"]);s!=null&&h(e,["citationMetadata"],J2(s));const r=f(n,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&h(e,["finishReason"],l);const u=f(n,["avgLogprobs"]);u!=null&&h(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&h(e,["groundingMetadata"],d);const g=f(n,["index"]);g!=null&&h(e,["index"],g);const p=f(n,["logprobsResult"]);p!=null&&h(e,["logprobsResult"],p);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(x=>x)),h(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&h(e,["urlContextMetadata"],T),e}function J2(n){const e={},t=f(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),h(e,["citations"],s)}return e}function K2(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let l=$n(r);Array.isArray(l)&&(l=l.map(u=>u)),h(t,["contents"],l)}return t}function $2(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["tokensInfo"],r)}return e}function Q2(n){const e={},t=f(n,["values"]);t!=null&&h(e,["values"],t);const s=f(n,["statistics"]);return s!=null&&h(e,["statistics"],X2(s)),e}function X2(n){const e={},t=f(n,["truncated"]);t!=null&&h(e,["truncated"],t);const s=f(n,["token_count"]);return s!=null&&h(e,["tokenCount"],s),e}function Gf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>oP(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function j2(n){const e={},t=f(n,["controlType"]);t!=null&&h(e,["controlType"],t);const s=f(n,["enableControlImageComputation"]);return s!=null&&h(e,["computeControl"],s),e}function W2(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Z2(n,e){const t={},s=f(n,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],rn(s));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>PA(d))),h(e,["tools"],u)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&h(e,["generationConfig"],HV(l)),t}function eV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let u=$n(r);Array.isArray(u)&&(u=u.map(d=>Gf(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&W2(l),t}function tV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let u=$n(r);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&Z2(l,t),t}function nV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);s!=null&&h(e,["totalTokens"],s);const r=f(n,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function iV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["totalTokens"]);return s!=null&&h(e,["totalTokens"],s),e}function sV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function oV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function rV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function aV(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function lV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const x=f(n,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&h(e,["parameters","outputOptions","mimeType"],U);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&h(e,["parameters","outputOptions","compressionQuality"],z);const M=f(n,["addWatermark"]);e!==void 0&&M!=null&&h(e,["parameters","addWatermark"],M);const F=f(n,["labels"]);e!==void 0&&F!=null&&h(e,["labels"],F);const Z=f(n,["editMode"]);e!==void 0&&Z!=null&&h(e,["parameters","editMode"],Z);const Q=f(n,["baseSteps"]);return e!==void 0&&Q!=null&&h(e,["parameters","editConfig","baseSteps"],Q),t}function uV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>fP(g))),h(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&lV(u,t),t}function cV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Hf(l))),h(e,["generatedImages"],r)}return e}function fV(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["requests[]","taskType"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&h(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function dV(n,e){const t={},s=f(n,["taskType"]);e!==void 0&&s!=null&&h(e,["instances[]","task_type"],s);const r=f(n,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&h(e,["parameters","outputDimensionality"],l);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&h(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&h(e,["parameters","autoTruncate"],d),t}function hV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let d=Gp(n,r);Array.isArray(d)&&(d=d.map(g=>g)),h(t,["requests[]","content"],d)}const l=f(e,["config"]);l!=null&&fV(l,t);const u=f(e,["model"]);return u!==void 0&&h(t,["requests[]","model"],Qe(n,u)),t}function mV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let u=Gp(n,r);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["instances[]","content"],u)}const l=f(e,["config"]);return l!=null&&dV(l,t),t}function pV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function gV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Q2(u))),h(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function yV(n){const e={},t=f(n,["endpoint"]);t!=null&&h(e,["name"],t);const s=f(n,["deployedModelId"]);return s!=null&&h(e,["deployedModelId"],s),e}function vV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function _V(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TV(n){const e={},t=f(n,["mode"]);t!=null&&h(e,["mode"],t);const s=f(n,["allowedFunctionNames"]);if(s!=null&&h(e,["allowedFunctionNames"],s),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function EV(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&h(e,["description"],t);const s=f(n,["name"]);s!=null&&h(e,["name"],s);const r=f(n,["parameters"]);r!=null&&h(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&h(e,["parametersJsonSchema"],l);const u=f(n,["response"]);u!=null&&h(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&h(e,["responseJsonSchema"],d),e}function SV(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],Gf(rn(r)));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(s,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const x=f(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&h(s,["frequencyPenalty"],U);const z=f(e,["seed"]);z!=null&&h(s,["seed"],z);const M=f(e,["responseMimeType"]);M!=null&&h(s,["responseMimeType"],M);const F=f(e,["responseSchema"]);F!=null&&h(s,["responseSchema"],Hp(F));const Z=f(e,["responseJsonSchema"]);if(Z!=null&&h(s,["responseJsonSchema"],Z),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Q=f(e,["safetySettings"]);if(t!==void 0&&Q!=null){let V=Q;Array.isArray(V)&&(V=V.map(Ie=>dP(Ie))),h(t,["safetySettings"],V)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let V=Ea(re);Array.isArray(V)&&(V=V.map(Ie=>_P(Ta(Ie)))),h(t,["tools"],V)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&h(t,["toolConfig"],vP(de)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&h(t,["cachedContent"],Ts(n,ue));const N=f(e,["responseModalities"]);N!=null&&h(s,["responseModalities"],N);const D=f(e,["mediaResolution"]);D!=null&&h(s,["mediaResolution"],D);const I=f(e,["speechConfig"]);if(I!=null&&h(s,["speechConfig"],Yp(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&h(s,["thinkingConfig"],P);const k=f(e,["imageConfig"]);k!=null&&h(s,["imageConfig"],QV(k));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&h(s,["enableEnhancedCivicAnswers"],q),s}function AV(n,e,t){const s={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&h(t,["systemInstruction"],rn(r));const l=f(e,["temperature"]);l!=null&&h(s,["temperature"],l);const u=f(e,["topP"]);u!=null&&h(s,["topP"],u);const d=f(e,["topK"]);d!=null&&h(s,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&h(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&h(s,["maxOutputTokens"],p);const _=f(e,["stopSequences"]);_!=null&&h(s,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&h(s,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&h(s,["logprobs"],S);const x=f(e,["presencePenalty"]);x!=null&&h(s,["presencePenalty"],x);const U=f(e,["frequencyPenalty"]);U!=null&&h(s,["frequencyPenalty"],U);const z=f(e,["seed"]);z!=null&&h(s,["seed"],z);const M=f(e,["responseMimeType"]);M!=null&&h(s,["responseMimeType"],M);const F=f(e,["responseSchema"]);F!=null&&h(s,["responseSchema"],Hp(F));const Z=f(e,["responseJsonSchema"]);Z!=null&&h(s,["responseJsonSchema"],Z);const Q=f(e,["routingConfig"]);Q!=null&&h(s,["routingConfig"],Q);const re=f(e,["modelSelectionConfig"]);re!=null&&h(s,["modelConfig"],re);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let W=de;Array.isArray(W)&&(W=W.map(le=>le)),h(t,["safetySettings"],W)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let W=Ea(ue);Array.isArray(W)&&(W=W.map(le=>PA(Ta(le)))),h(t,["tools"],W)}const N=f(e,["toolConfig"]);t!==void 0&&N!=null&&h(t,["toolConfig"],N);const D=f(e,["labels"]);t!==void 0&&D!=null&&h(t,["labels"],D);const I=f(e,["cachedContent"]);t!==void 0&&I!=null&&h(t,["cachedContent"],Ts(n,I));const P=f(e,["responseModalities"]);P!=null&&h(s,["responseModalities"],P);const k=f(e,["mediaResolution"]);k!=null&&h(s,["mediaResolution"],k);const q=f(e,["speechConfig"]);q!=null&&h(s,["speechConfig"],Yp(q));const V=f(e,["audioTimestamp"]);V!=null&&h(s,["audioTimestamp"],V);const Ie=f(e,["thinkingConfig"]);Ie!=null&&h(s,["thinkingConfig"],Ie);const Ge=f(e,["imageConfig"]);if(Ge!=null&&h(s,["imageConfig"],XV(Ge)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function eE(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let u=$n(r);Array.isArray(u)&&(u=u.map(d=>Gf(d))),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],SV(n,l,t)),t}function tE(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["contents"]);if(r!=null){let u=$n(r);Array.isArray(u)&&(u=u.map(d=>d)),h(t,["contents"],u)}const l=f(e,["config"]);return l!=null&&h(t,["generationConfig"],AV(n,l,t)),t}function nE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>Y2(p))),h(e,["candidates"],g)}const r=f(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&h(e,["promptFeedback"],l);const u=f(n,["responseId"]);u!=null&&h(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&h(e,["usageMetadata"],d),e}function iE(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(_=>_)),h(e,["candidates"],p)}const r=f(n,["createTime"]);r!=null&&h(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&h(e,["modelVersion"],l);const u=f(n,["promptFeedback"]);u!=null&&h(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&h(e,["responseId"],d);const g=f(n,["usageMetadata"]);return g!=null&&h(e,["usageMetadata"],g),e}function CV(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&h(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const g=f(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&h(e,["parameters","includeSafetyAttributes"],g);const p=f(n,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const _=f(n,["language"]);e!==void 0&&_!=null&&h(e,["parameters","language"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&h(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=f(n,["imageSize"]);if(e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function wV(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&h(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&h(e,["parameters","guidanceScale"],d);const g=f(n,["seed"]);e!==void 0&&g!=null&&h(e,["parameters","seed"],g);const p=f(n,["safetyFilterLevel"]);e!==void 0&&p!=null&&h(e,["parameters","safetySetting"],p);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&h(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&h(e,["parameters","includeRaiReason"],S);const x=f(n,["language"]);e!==void 0&&x!=null&&h(e,["parameters","language"],x);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&h(e,["parameters","outputOptions","mimeType"],U);const z=f(n,["outputCompressionQuality"]);e!==void 0&&z!=null&&h(e,["parameters","outputOptions","compressionQuality"],z);const M=f(n,["addWatermark"]);e!==void 0&&M!=null&&h(e,["parameters","addWatermark"],M);const F=f(n,["labels"]);e!==void 0&&F!=null&&h(e,["labels"],F);const Z=f(n,["imageSize"]);e!==void 0&&Z!=null&&h(e,["parameters","sampleImageSize"],Z);const Q=f(n,["enhancePrompt"]);return e!==void 0&&Q!=null&&h(e,["parameters","enhancePrompt"],Q),t}function xV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&CV(l,t),t}function RV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&wV(l,t),t}function IV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>BV(u))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],DA(r)),e}function bV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Hf(u))),h(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],VA(r)),e}function NV(n,e){const t={},s=f(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=f(n,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(n,["negativePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","negativePrompt"],g);const p=f(n,["enhancePrompt"]);if(e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&h(e,["instances[0]","lastFrame"],Yf(_));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(x=>DP(x))),h(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function MV(n,e){const t={},s=f(n,["numberOfVideos"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&h(e,["parameters","fps"],l);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&h(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&h(e,["parameters","seed"],d);const g=f(n,["aspectRatio"]);e!==void 0&&g!=null&&h(e,["parameters","aspectRatio"],g);const p=f(n,["resolution"]);e!==void 0&&p!=null&&h(e,["parameters","resolution"],p);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&h(e,["parameters","personGeneration"],_);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&h(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","negativePrompt"],S);const x=f(n,["enhancePrompt"]);e!==void 0&&x!=null&&h(e,["parameters","enhancePrompt"],x);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&h(e,["parameters","generateAudio"],U);const z=f(n,["lastFrame"]);e!==void 0&&z!=null&&h(e,["instances[0]","lastFrame"],pi(z));const M=f(n,["referenceImages"]);if(e!==void 0&&M!=null){let Q=M;Array.isArray(Q)&&(Q=Q.map(re=>VP(re))),h(e,["instances[0]","referenceImages"],Q)}const F=f(n,["mask"]);e!==void 0&&F!=null&&h(e,["instances[0]","mask"],MP(F));const Z=f(n,["compressionQuality"]);return e!==void 0&&Z!=null&&h(e,["parameters","compressionQuality"],Z),t}function DV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response","generateVideoResponse"]);return u!=null&&h(e,["response"],UV(u)),e}function VV(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],LV(u)),e}function PV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],Yf(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],kA(u));const d=f(e,["source"]);d!=null&&OV(d,t);const g=f(e,["config"]);return g!=null&&NV(g,t),t}function kV(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["prompt"]);r!=null&&h(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&h(t,["instances[0]","image"],pi(l));const u=f(e,["video"]);u!=null&&h(t,["instances[0]","video"],UA(u));const d=f(e,["source"]);d!=null&&qV(d,t);const g=f(e,["config"]);return g!=null&&MV(g,t),t}function UV(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>FV(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function LV(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>GV(u))),h(e,["generatedVideos"],l)}const s=f(n,["raiMediaFilteredCount"]);s!=null&&h(e,["raiMediaFilteredCount"],s);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function OV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],Yf(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],kA(l)),t}function qV(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],pi(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&h(e,["instances[0]","video"],UA(l)),t}function BV(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],jV(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);return r!=null&&h(e,["safetyAttributes"],DA(r)),e}function Hf(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["image"],MA(t));const s=f(n,["raiFilteredReason"]);s!=null&&h(e,["raiFilteredReason"],s);const r=f(n,["_self"]);r!=null&&h(e,["safetyAttributes"],VA(r));const l=f(n,["prompt"]);return l!=null&&h(e,["enhancedPrompt"],l),e}function zV(n){const e={},t=f(n,["_self"]);t!=null&&h(e,["mask"],MA(t));const s=f(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(e,["labels"],r)}return e}function FV(n){const e={},t=f(n,["video"]);return t!=null&&h(e,["video"],bP(t)),e}function GV(n){const e={},t=f(n,["_self"]);return t!=null&&h(e,["video"],NP(t)),e}function HV(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&h(e,["modelConfig"],t);const s=f(n,["responseJsonSchema"]);s!=null&&h(e,["responseJsonSchema"],s);const r=f(n,["audioTimestamp"]);r!=null&&h(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&h(e,["candidateCount"],l);const u=f(n,["enableAffectiveDialog"]);u!=null&&h(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&h(e,["frequencyPenalty"],d);const g=f(n,["logprobs"]);g!=null&&h(e,["logprobs"],g);const p=f(n,["maxOutputTokens"]);p!=null&&h(e,["maxOutputTokens"],p);const _=f(n,["mediaResolution"]);_!=null&&h(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&h(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&h(e,["responseLogprobs"],S);const x=f(n,["responseMimeType"]);x!=null&&h(e,["responseMimeType"],x);const U=f(n,["responseModalities"]);U!=null&&h(e,["responseModalities"],U);const z=f(n,["responseSchema"]);z!=null&&h(e,["responseSchema"],z);const M=f(n,["routingConfig"]);M!=null&&h(e,["routingConfig"],M);const F=f(n,["seed"]);F!=null&&h(e,["seed"],F);const Z=f(n,["speechConfig"]);Z!=null&&h(e,["speechConfig"],Z);const Q=f(n,["stopSequences"]);Q!=null&&h(e,["stopSequences"],Q);const re=f(n,["temperature"]);re!=null&&h(e,["temperature"],re);const de=f(n,["thinkingConfig"]);de!=null&&h(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&h(e,["topK"],ue);const N=f(n,["topP"]);if(N!=null&&h(e,["topP"],N),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function JV(n,e){const t={},s=f(e,["model"]);return s!=null&&h(t,["_url","name"],Qe(n,s)),t}function KV(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function $V(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function QV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);if(s!=null&&h(e,["imageSize"],s),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XV(n){const e={},t=f(n,["aspectRatio"]);t!=null&&h(e,["aspectRatio"],t);const s=f(n,["imageSize"]);s!=null&&h(e,["imageSize"],s);const r=f(n,["outputMimeType"]);r!=null&&h(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&h(e,["imageOutputOptions","compressionQuality"],l),e}function jV(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],yo(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function MA(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["imageBytes"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Yf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],yo(t));const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function pi(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["imageBytes"]);s!=null&&h(e,["bytesBase64Encoded"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function WV(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],CA(n,d)),s}function ZV(n,e,t){const s={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&h(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&h(t,["_query","pageToken"],l);const u=f(e,["filter"]);t!==void 0&&u!=null&&h(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&h(t,["_url","models_url"],CA(n,d)),s}function eP(n,e){const t={},s=f(e,["config"]);return s!=null&&WV(n,s,t),t}function tP(n,e){const t={},s=f(e,["config"]);return s!=null&&ZV(n,s,t),t}function nP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=wA(r);Array.isArray(l)&&(l=l.map(u=>qm(u))),h(e,["models"],l)}return e}function iP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["_self"]);if(r!=null){let l=wA(r);Array.isArray(l)&&(l=l.map(u=>Bm(u))),h(e,["models"],l)}return e}function sP(n){const e={},t=f(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const s=f(n,["segmentationClasses"]);s!=null&&h(e,["maskClasses"],s);const r=f(n,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function qm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["version"]);l!=null&&h(e,["version"],l);const u=f(n,["_self"]);u!=null&&h(e,["tunedModelInfo"],TP(u));const d=f(n,["inputTokenLimit"]);d!=null&&h(e,["inputTokenLimit"],d);const g=f(n,["outputTokenLimit"]);g!=null&&h(e,["outputTokenLimit"],g);const p=f(n,["supportedGenerationMethods"]);p!=null&&h(e,["supportedActions"],p);const _=f(n,["temperature"]);_!=null&&h(e,["temperature"],_);const T=f(n,["maxTemperature"]);T!=null&&h(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&h(e,["topP"],S);const x=f(n,["topK"]);x!=null&&h(e,["topK"],x);const U=f(n,["thinking"]);return U!=null&&h(e,["thinking"],U),e}function Bm(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["displayName"]);s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);r!=null&&h(e,["description"],r);const l=f(n,["versionId"]);l!=null&&h(e,["version"],l);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>yV(S))),h(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&h(e,["labels"],d);const g=f(n,["_self"]);g!=null&&h(e,["tunedModelInfo"],EP(g));const p=f(n,["defaultCheckpointId"]);p!=null&&h(e,["defaultCheckpointId"],p);const _=f(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),h(e,["checkpoints"],T)}return e}function oP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],vV(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],_V(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],H2(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function rP(n){const e={},t=f(n,["productImage"]);return t!=null&&h(e,["image"],pi(t)),e}function aP(n,e){const t={},s=f(n,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&h(e,["parameters","storageUri"],l);const u=f(n,["seed"]);e!==void 0&&u!=null&&h(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&h(e,["parameters","safetySetting"],d);const g=f(n,["personGeneration"]);e!==void 0&&g!=null&&h(e,["parameters","personGeneration"],g);const p=f(n,["addWatermark"]);e!==void 0&&p!=null&&h(e,["parameters","addWatermark"],p);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","mimeType"],_);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&h(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&h(e,["parameters","enhancePrompt"],S);const x=f(n,["labels"]);return e!==void 0&&x!=null&&h(e,["labels"],x),t}function lP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["source"]);r!=null&&cP(r,t);const l=f(e,["config"]);return l!=null&&aP(l,t),t}function uP(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Hf(r))),h(e,["generatedImages"],s)}return e}function cP(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],pi(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>rP(d))),h(e,["instances[0]","productImages"],u)}return t}function fP(n){const e={},t=f(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],pi(t));const s=f(n,["referenceId"]);s!=null&&h(e,["referenceId"],s);const r=f(n,["referenceType"]);r!=null&&h(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&h(e,["maskImageConfig"],sP(l));const u=f(n,["controlImageConfig"]);u!=null&&h(e,["controlImageConfig"],j2(u));const d=f(n,["styleImageConfig"]);d!=null&&h(e,["styleImageConfig"],d);const g=f(n,["subjectImageConfig"]);return g!=null&&h(e,["subjectImageConfig"],g),e}function DA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function VA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const s=f(n,["safetyAttributes","scores"]);s!=null&&h(e,["scores"],s);const r=f(n,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function dP(n){const e={},t=f(n,["category"]);if(t!=null&&h(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function hP(n){const e={},t=f(n,["image"]);return t!=null&&h(e,["image"],pi(t)),e}function mP(n,e){const t={},s=f(n,["mode"]);e!==void 0&&s!=null&&h(e,["parameters","mode"],s);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&h(e,["parameters","confidenceThreshold"],l);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&h(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&h(e,["parameters","binaryColorThreshold"],d);const g=f(n,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),t}function pP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["source"]);r!=null&&yP(r,t);const l=f(e,["config"]);return l!=null&&mP(l,t),t}function gP(n){const e={},t=f(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>zV(r))),h(e,["generatedMasks"],s)}return e}function yP(n,e){const t={},s=f(n,["prompt"]);e!==void 0&&s!=null&&h(e,["instances[0]","prompt"],s);const r=f(n,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],pi(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&h(e,["instances[0]","scribble"],hP(l)),t}function vP(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],TV(t));const s=f(n,["retrievalConfig"]);return s!=null&&h(e,["retrievalConfig"],s),e}function _P(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],KV(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],$V(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}function PA(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>EV(S))),h(e,["functionDeclarations"],T)}const s=f(n,["retrieval"]);s!=null&&h(e,["retrieval"],s);const r=f(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&h(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&h(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&h(e,["enterpriseWebSearch"],d);const g=f(n,["googleMaps"]);g!=null&&h(e,["googleMaps"],g);const p=f(n,["googleSearch"]);p!=null&&h(e,["googleSearch"],p);const _=f(n,["urlContext"]);return _!=null&&h(e,["urlContext"],_),e}function TP(n){const e={},t=f(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function EP(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const s=f(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=f(n,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function SP(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function AP(n,e){const t={},s=f(n,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const r=f(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&h(e,["defaultCheckpointId"],l),t}function CP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","name"],Qe(n,s));const r=f(e,["config"]);return r!=null&&SP(r,t),t}function wP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&AP(r,t),t}function xP(n,e){const t={},s=f(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const g=f(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&h(e,["parameters","outputOptions","compressionQuality"],g);const p=f(n,["enhanceInputImage"]);e!==void 0&&p!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],p);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&h(e,["parameters","sampleCount"],S);const x=f(n,["mode"]);return e!==void 0&&x!=null&&h(e,["parameters","mode"],x),t}function RP(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["_url","model"],Qe(n,s));const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],pi(r));const l=f(e,["upscaleFactor"]);l!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=f(e,["config"]);return u!=null&&xP(u,t),t}function IP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Hf(l))),h(e,["generatedImages"],r)}return e}function bP(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["encodedVideo"]);s!=null&&h(e,["videoBytes"],yo(s));const r=f(n,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function NP(n){const e={},t=f(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const s=f(n,["bytesBase64Encoded"]);s!=null&&h(e,["videoBytes"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function MP(n){const e={},t=f(n,["image"]);t!=null&&h(e,["_self"],pi(t));const s=f(n,["maskMode"]);return s!=null&&h(e,["maskMode"],s),e}function DP(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],Yf(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function VP(n){const e={},t=f(n,["image"]);t!=null&&h(e,["image"],pi(t));const s=f(n,["referenceType"]);return s!=null&&h(e,["referenceType"],s),e}function kA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["uri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["encodedVideo"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function UA(n){const e={},t=f(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const s=f(n,["videoBytes"]);s!=null&&h(e,["bytesBase64Encoded"],yo(s));const r=f(n,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PP(n,e){const t={},s=f(n,["displayName"]);return e!==void 0&&s!=null&&h(e,["displayName"],s),t}function kP(n){const e={},t=f(n,["config"]);return t!=null&&PP(t,e),e}function UP(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function LP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&UP(s,e),e}function OP(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function qP(n,e){const t={},s=f(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&h(e,["chunkingConfig"],r),t}function BP(n){const e={},t=f(n,["name"]);t!=null&&h(e,["name"],t);const s=f(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=f(n,["done"]);r!=null&&h(e,["done"],r);const l=f(n,["error"]);l!=null&&h(e,["error"],l);const u=f(n,["response"]);return u!=null&&h(e,["response"],FP(u)),e}function zP(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["fileName"]);s!=null&&h(e,["fileName"],s);const r=f(n,["config"]);return r!=null&&qP(r,e),e}function FP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["parent"]);s!=null&&h(e,["parent"],s);const r=f(n,["documentName"]);return r!=null&&h(e,["documentName"],r),e}function GP(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function HP(n){const e={},t=f(n,["config"]);return t!=null&&GP(t,e),e}function YP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["fileSearchStores"],l)}return e}function LA(n,e){const t={},s=f(n,["mimeType"]);e!==void 0&&s!=null&&h(e,["mimeType"],s);const r=f(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(g=>g)),h(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&h(e,["chunkingConfig"],u),t}function JP(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&h(e,["_url","file_search_store_name"],t);const s=f(n,["config"]);return s!=null&&LA(s,e),e}function KP(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $P="Content-Type",QP="X-Server-Timeout",XP="User-Agent",zm="x-goog-api-client",jP="1.34.0",WP=`google-genai-sdk/${jP}`,ZP="v1beta1",e4="v1beta";class t4{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:ZP,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:e4,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>l.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&n4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await sE(r),new Um(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await sE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return fi(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield be(r.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const U=JSON.parse(T);if("error"in U){const z=JSON.parse(JSON.stringify(U.error)),M=z.status,F=z.code,Z=`got status: ${M}. ${JSON.stringify(U)}`;if(F>=400&&F<600)throw new Ff({message:Z,status:F})}}catch(U){if(U.name==="ApiError")throw U}u+=T;let S=-1,x=0;for(;;){S=-1,x=0;for(const M of g){const F=u.indexOf(M);F!==-1&&(S===-1||F<S)&&(S=F,x=M.length)}if(S===-1)break;const U=u.substring(0,S);u=u.substring(S+x);const z=U.trim();if(z.startsWith(d)){const M=z.substring(d.length).trim();try{const F=new Response(M,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield be(new Um(F))}catch(F){throw new Error(`exception parsing stream chunk ${M}. ${F}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=WP+" "+this.clientOptions.userAgentExtra;return e[XP]=t,e[zm]=t,e[$P]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(QP,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const d=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},p=this.getFileName(e),_=pe("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,p,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,u=await l.stat(t),d=String(u.size),g=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};s!=null&&LA(s,T);const S=await this.fetchUploadUrl(p,d,g,_,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=p==null?void 0:p.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function sE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Ff({message:r,status:t}):new Error(r)}}function n4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const d=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const p=u[g],_=d[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=s(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),d[g]=p)}return d}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i4="mcp_used/unknown";let s4=!1;function OA(n){for(const e of n)if(o4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return s4}function qA(n){var e;const t=(e=n[zm])!==null&&e!==void 0?e:"";n[zm]=(t+` ${i4}`).trimStart()}function o4(n){return n!==null&&typeof n=="object"&&n instanceof Kp}function r4(n){return fi(this,arguments,function*(t,s=100){let r,l=0;for(;l<s;){const u=yield be(t.listTools({cursor:r}));for(const d of u.tools)yield yield be(d),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Kp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Kp(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(t=void 0,di(r4(_))),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const T=r;u.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),OM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function a4(n,e,t){const s=new NM;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class l4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=f4(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let p=()=>{};const _=new Promise(Q=>{p=Q}),T=e.callbacks,S=function(){p({})},x=this.apiClient,U={onopen:S,onmessage:Q=>{a4(x,T.onmessage,Q)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(Q){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(Q){}},z=this.webSocketFactory.create(g,c4(u),U);z.connect(),await _;const Z={setup:{model:Qe(this.apiClient,e.model)}};return z.send(JSON.stringify(Z)),new u4(z,this.apiClient)}}class u4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=k2(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=P2(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ia.PLAY)}pause(){this.sendPlaybackControl(ia.PAUSE)}stop(){this.sendPlaybackControl(ia.STOP)}resetContext(){this.sendPlaybackControl(ia.RESET_CONTEXT)}close(){this.conn.close()}}function c4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function f4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function h4(n,e,t){const s=new bM;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=O2(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class m4{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new l4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&OA(e.config.tools)&&qA(T);const S=v4(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const I=this.apiClient.getApiKey();let P="BidiGenerateContent",k="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",k="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${P}?${k}=${I}`}let x=()=>{};const U=new Promise(I=>{x=I}),z=e.callbacks,M=function(){var I;(I=z==null?void 0:z.onopen)===null||I===void 0||I.call(z),x({})},F=this.apiClient,Z={onopen:M,onmessage:I=>{h4(F,z.onmessage,I)},onerror:(t=z==null?void 0:z.onerror)!==null&&t!==void 0?t:function(I){},onclose:(s=z==null?void 0:z.onclose)!==null&&s!==void 0?s:function(I){}},Q=this.webSocketFactory.create(_,y4(S),Z);Q.connect(),await U;let re=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const I=this.apiClient.getProject(),P=this.apiClient.getLocation();re=`projects/${I}/locations/${P}/`+re}let de={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[vf.AUDIO]}:e.config.responseModalities=[vf.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const I of ue)if(this.isCallableTool(I)){const P=I;N.push(await P.tool())}else N.push(I);N.length>0&&(e.config.tools=N);const D={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=V2(this.apiClient,D):de=D2(this.apiClient,D),delete de.config,Q.send(JSON.stringify(de)),new g4(Q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const p4={turnComplete:!0};class g4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=$n(t.turns),e.isVertexAI()||(s=s.map(r=>Gf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(d4)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},p4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:L2(e)}:t={realtimeInput:U2(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function y4(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function v4(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oE=10;function rE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(la(u)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function la(n){return"callTool"in n&&typeof n.callTool=="function"}function _4(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>la(r)))!==null&&s!==void 0?s:!1}function aE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(la(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function lE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T4 extends _s{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,u,d;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!_4(t)||rE(t.config))return await this.generateContentInternal(g);const p=aE(t);if(p.length>0){const z=p.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let _,T;const S=$n(g.contents),x=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:oE;let U=0;for(;U<x&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const z=_.candidates[0].content,M=[];for(const F of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(la(F)){const Q=await F.callTool(_.functionCalls);M.push(...Q)}U++,T={role:"user",parts:M},g.contents=$n(g.contents),g.contents.push(z),g.contents.push(T),lE(g.config)&&(S.push(z),S.push(T))}return lE(g.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var s,r,l,u,d;if(this.maybeMoveToResponseJsonSchem(t),rE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=aE(t);if(g.length>0){const T=g.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const u=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let d;return l?d={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},d}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new rr(ps.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,u,d,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(d=t.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>la(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&OA(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),qA(p),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return d}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(la(u)){const d=u,g=await d.tool();for(const p of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,d)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:oE;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(p,_,T){return fi(this,arguments,function*(){for(var S,x,U,z,M,F;d<l;){u&&(d++,u=!1);const de=yield be(p.processParamsMaybeAddMcpUsage(T)),ue=yield be(p.generateContentStreamInternal(de)),N=[],D=[];try{for(var Z=!0,Q=(x=void 0,di(ue)),re;re=yield be(Q.next()),S=re.done,!S;Z=!0){z=re.value,Z=!1;const I=z;if(yield yield be(I),I.candidates&&(!((M=I.candidates[0])===null||M===void 0)&&M.content)){D.push(I.candidates[0].content);for(const P of(F=I.candidates[0].content.parts)!==null&&F!==void 0?F:[])if(d<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(P.functionCall.name)){const k=yield be(_.get(P.functionCall.name).callTool([P.functionCall]));N.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(I){x={error:I}}finally{try{!Z&&!S&&(U=Q.return)&&(yield be(U.call(Q)))}finally{if(x)throw x.error}}if(N.length>0){u=!0;const I=new bl;I.candidates=[{content:{role:"user",parts:N}}],yield yield be(I);const P=[];P.push(...D),P.push({role:"user",parts:N});const k=$n(T.contents).concat(P);T.contents=k}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=tE(this.apiClient,e);return d=pe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iE(_),S=new bl;return Object.assign(S,T),S})}else{const p=eE(this.apiClient,e);return d=pe("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=nE(_),S=new bl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=tE(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(T){return fi(this,arguments,function*(){var S,x,U,z;try{for(var M=!0,F=di(T),Z;Z=yield be(F.next()),S=Z.done,!S;M=!0){z=Z.value,M=!1;const Q=z,re=iE(yield be(Q.json()));re.sdkHttpResponse={headers:Q.headers};const de=new bl;Object.assign(de,re),yield yield be(de)}}catch(Q){x={error:Q}}finally{try{!M&&!S&&(U=F.return)&&(yield be(U.call(F)))}finally{if(x)throw x.error}}})})}else{const p=eE(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return fi(this,arguments,function*(){var S,x,U,z;try{for(var M=!0,F=di(T),Z;Z=yield be(F.next()),S=Z.done,!S;M=!0){z=Z.value,M=!1;const Q=z,re=nE(yield be(Q.json()));re.sdkHttpResponse={headers:Q.headers};const de=new bl;Object.assign(de,re),yield yield be(de)}}catch(Q){x={error:Q}}finally{try{!M&&!S&&(U=F.return)&&(yield be(U.call(F)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=mV(this.apiClient,e);return d=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gV(_),S=new LT;return Object.assign(S,T),S})}else{const p=hV(this.apiClient,e);return d=pe("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=pV(_),S=new LT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=RV(this.apiClient,e);return d=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=bV(_),S=new OT;return Object.assign(S,T),S})}else{const p=xV(this.apiClient,e);return d=pe("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=IV(_),S=new OT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=uV(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=cV(g),_=new vM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=RP(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=IP(g),_=new _M;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=lP(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=uP(g),_=new TM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=pP(this.apiClient,e);return l=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=gP(g),_=new EM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=JV(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Bm(_))}else{const p=YV(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>qm(_))}}async listInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=tP(this.apiClient,e);return d=pe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iP(_),S=new qT;return Object.assign(S,T),S})}else{const p=eP(this.apiClient,e);return d=pe("{models_url}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=nP(_),S=new qT;return Object.assign(S,T),S})}}async update(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=wP(this.apiClient,e);return d=pe("{model}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Bm(_))}else{const p=CP(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>qm(_))}}async delete(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=oV(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=aV(_),S=new BT;return Object.assign(S,T),S})}else{const p=sV(this.apiClient,e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=rV(_),S=new BT;return Object.assign(S,T),S})}}async countTokens(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=tV(this.apiClient,e);return d=pe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iV(_),S=new zT;return Object.assign(S,T),S})}else{const p=eV(this.apiClient,e);return d=pe("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=nV(_),S=new zT;return Object.assign(S,T),S})}}async computeTokens(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=K2(this.apiClient,e);return l=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const p=$2(g),_=new SM;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=kV(this.apiClient,e);return d=pe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>{const T=VV(_),S=new _f;return Object.assign(S,T),S})}else{const p=PV(this.apiClient,e);return d=pe("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=DV(_),S=new _f;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E4 extends _s{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=dM(e);return d=pe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u}else{const p=fM(e);return d=pe("{operationName}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=sM(e);return l=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S4(n){const e={},t=f(n,["data"]);if(t!=null&&h(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function A4(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>D4(l))),h(e,["parts"],r)}const s=f(n,["role"]);return s!=null&&h(e,["role"],s),e}function C4(n,e,t){const s={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&h(t,["newSessionExpireTime"],l);const u=f(e,["uses"]);t!==void 0&&u!=null&&h(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&h(t,["bidiGenerateContentSetup"],M4(n,d));const g=f(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&h(t,["fieldMask"],g),s}function w4(n,e){const t={},s=f(e,["config"]);return s!=null&&h(t,["config"],C4(n,s,t)),t}function x4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const s=f(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function R4(n){const e={},t=f(n,["id"]);t!=null&&h(e,["id"],t);const s=f(n,["args"]);s!=null&&h(e,["args"],s);const r=f(n,["name"]);if(r!=null&&h(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&h(e,["enableWidget"],t),e}function b4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&h(e,["timeRangeFilter"],t),e}function N4(n,e){const t={},s=f(n,["generationConfig"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig"],s);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","temperature"],l);const u=f(n,["topP"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","topK"],d);const g=f(n,["maxOutputTokens"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(n,["mediaResolution"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","mediaResolution"],p);const _=f(n,["seed"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&h(e,["setup","generationConfig","speechConfig"],Jp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&h(e,["setup","generationConfig","thinkingConfig"],S);const x=f(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&h(e,["setup","systemInstruction"],A4(rn(U)));const z=f(n,["tools"]);if(e!==void 0&&z!=null){let ue=Ea(z);Array.isArray(ue)&&(ue=ue.map(N=>P4(Ta(N)))),h(e,["setup","tools"],ue)}const M=f(n,["sessionResumption"]);e!==void 0&&M!=null&&h(e,["setup","sessionResumption"],V4(M));const F=f(n,["inputAudioTranscription"]);e!==void 0&&F!=null&&h(e,["setup","inputAudioTranscription"],F);const Z=f(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&h(e,["setup","outputAudioTranscription"],Z);const Q=f(n,["realtimeInputConfig"]);e!==void 0&&Q!=null&&h(e,["setup","realtimeInputConfig"],Q);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&h(e,["setup","contextWindowCompression"],re);const de=f(n,["proactivity"]);if(e!==void 0&&de!=null&&h(e,["setup","proactivity"],de),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function M4(n,e){const t={},s=f(e,["model"]);s!=null&&h(t,["setup","model"],Qe(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],N4(r,t)),t}function D4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&h(e,["mediaResolution"],t);const s=f(n,["codeExecutionResult"]);s!=null&&h(e,["codeExecutionResult"],s);const r=f(n,["executableCode"]);r!=null&&h(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&h(e,["fileData"],x4(l));const u=f(n,["functionCall"]);u!=null&&h(e,["functionCall"],R4(u));const d=f(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const g=f(n,["inlineData"]);g!=null&&h(e,["inlineData"],S4(g));const p=f(n,["text"]);p!=null&&h(e,["text"],p);const _=f(n,["thought"]);_!=null&&h(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&h(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&h(e,["videoMetadata"],S),e}function V4(n){const e={},t=f(n,["handle"]);if(t!=null&&h(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function P4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),h(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(n,["googleSearchRetrieval"]);s!=null&&h(e,["googleSearchRetrieval"],s);const r=f(n,["computerUse"]);r!=null&&h(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&h(e,["fileSearch"],l);const u=f(n,["codeExecution"]);if(u!=null&&h(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&h(e,["googleMaps"],I4(d));const g=f(n,["googleSearch"]);g!=null&&h(e,["googleSearch"],b4(g));const p=f(n,["urlContext"]);return p!=null&&h(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function U4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=k4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(p=>u.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),d.length>0&&g.push(...d),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class L4 extends _s{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=w4(this.apiClient,e);l=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=U4(d,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),r.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O4(n,e){const t={},s=f(n,["force"]);return e!==void 0&&s!=null&&h(e,["_query","force"],s),t}function q4(n){const e={},t=f(n,["name"]);t!=null&&h(e,["_url","name"],t);const s=f(n,["config"]);return s!=null&&O4(s,e),e}function B4(n){const e={},t=f(n,["name"]);return t!=null&&h(e,["_url","name"],t),e}function z4(n,e){const t={},s=f(n,["pageSize"]);e!==void 0&&s!=null&&h(e,["_query","pageSize"],s);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),t}function F4(n){const e={},t=f(n,["parent"]);t!=null&&h(e,["_url","parent"],t);const s=f(n,["config"]);return s!=null&&z4(s,e),e}function G4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const s=f(n,["nextPageToken"]);s!=null&&h(e,["nextPageToken"],s);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),h(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H4 extends _s{constructor(e){super(),this.apiClient=e,this.list=async t=>new rr(ps.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=B4(e);return l=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=q4(e);r=pe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F4(e);return l=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=G4(g),_=new AM;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y4 extends _s{constructor(e,t=new H4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new rr(ps.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kP(e);return l=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OP(e);return l=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LP(e);r=pe("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HP(e);return l=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=YP(g),_=new CM;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JP(e);return l=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=KP(g),_=new wM;return Object.assign(_,p),_})}}async importFile(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zP(e);return l=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const p=BP(g),_=new zp;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let BA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return BA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const J4=()=>BA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Gm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qn extends Error{}class dn extends Qn{constructor(e,t,s,r){super(`${dn.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Jf({message:s,cause:Gm(t)});const l=t;return e===400?new FA(e,l,s,r):e===401?new GA(e,l,s,r):e===403?new HA(e,l,s,r):e===404?new YA(e,l,s,r):e===409?new JA(e,l,s,r):e===422?new KA(e,l,s,r):e===429?new $A(e,l,s,r):e>=500?new QA(e,l,s,r):new dn(e,l,s,r)}}class Hm extends dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Jf extends dn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class zA extends Jf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class FA extends dn{}class GA extends dn{}class HA extends dn{}class YA extends dn{}class JA extends dn{}class KA extends dn{}class $A extends dn{}class QA extends dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K4=/^[a-z][a-z0-9+.-]*:/i,$4=n=>K4.test(n);let Ym=n=>(Ym=Array.isArray,Ym(n));const Q4=Ym;let X4=Q4;const uE=X4;function j4(n){if(!n)return!0;for(const e in n)return!1;return!0}function W4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const Z4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Qn(`${n} must be an integer`);if(e<0)throw new Qn(`${n} must be a positive integer`);return e},ek=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tk=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const na="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const ik=()=>{var n,e,t,s,r;const l=nk();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":fE(Deno.build.os),"X-Stainless-Arch":cE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":fE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":cE((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=sk();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":na,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function sk(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const cE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",fE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let qc;const ok=()=>qc??(qc=ik());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function XA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function ak(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return XA({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function jA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function lk(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uk=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function lm(n,e,t){return WA(),new File(n,e??"unknown_file",t)}function ck(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const fk=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",dk=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ZA(n),hk=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function mk(n,e,t){if(WA(),n=await n,dk(n))return n instanceof File?n:lm([await n.arrayBuffer()],n.name);if(hk(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),lm(await Jm(r),e,t)}const s=await Jm(n);if(e||(e=ck(n)),!(t!=null&&t.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return lm(s,e,t)}async function Jm(n){var e,t,s,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(ZA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(fk(n))try{for(var d=!0,g=di(n),p;p=await g.next(),e=p.done,!e;d=!0){r=p.value,d=!1;const _=r;u.push(...await Jm(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${pk(n)}`)}return u}function pk(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eC{constructor(e){this._client=e}}eC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tC(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const dE=Object.freeze(Object.create(null)),gk=(n=tC)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,S)=>{var x,U,z;/[?#]/.test(T)&&(r=!0);const M=s[S];let F=(r?encodeURIComponent:n)(""+M);return S!==s.length&&(M==null||typeof M=="object"&&M.toString===((z=Object.getPrototypeOf((U=Object.getPrototypeOf((x=M.hasOwnProperty)!==null&&x!==void 0?x:dE))!==null&&U!==void 0?U:dE))===null||z===void 0?void 0:z.toString))&&(F=M+"",l.push({start:_.length+T.length,length:F.length,error:`Value of type ${Object.prototype.toString.call(M).slice(8,-1)} is not a valid path parameter`})),_+T+(S===s.length?"":F)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(d))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((S,x)=>{const U=" ".repeat(x.start-_),z="^".repeat(x.length);return _=x.start+x.length,S+U+z},"");throw new Qn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),Bc=gk(tC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nC extends eC{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,l=Ef(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Qn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Qn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Bc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Bc`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Bc`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,d=Ef(l,["api_version"]);return this._client.get(Bc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}nC._key=Object.freeze(["interactions"]);class iC extends nC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yk(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let zc;function $p(n){let e;return(zc??(e=new globalThis.TextEncoder,zc=e.encode.bind(e)))(n)}let Fc;function hE(n){let e;return(Fc??(e=new globalThis.TextDecoder,Fc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?$p(e):e;this.buffer=yk([this.buffer,t]);const s=[];let r;for(;(r=vk(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(hE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=hE(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Kf.NEWLINE_CHARS=new Set([`
`,"\r"]);Kf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function vk(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function _k(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sf={off:0,error:200,warn:300,info:400,debug:500},mE=(n,e,t)=>{if(n){if(W4(Sf,n))return n;cn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Sf))}`)}};function kl(){}function Gc(n,e,t){return!e||Sf[n]>Sf[t]?kl:e[n].bind(e)}const Tk={error:kl,warn:kl,info:kl,debug:kl};let pE=new WeakMap;function cn(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return Tk;const r=pE.get(t);if(r&&r[0]===s)return r[1];const l={error:Gc("error",t,s),warn:Gc("warn",t,s),info:Gc("info",t,s),debug:Gc("debug",t,s)};return pE.set(t,[s,l]),l}const Xo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sa{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const l=s?cn(s):console;function u(){return fi(this,arguments,function*(){var g,p,_,T;if(r)throw new Qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var x=!0,U=di(Ek(e,t)),z;z=yield be(U.next()),g=z.done,!g;x=!0){T=z.value,x=!1;const M=T;if(!S)if(M.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield be(JSON.parse(M.data))}catch(F){throw l.error("Could not parse message into JSON:",M.data),l.error("From chunk:",M.raw),F}}}catch(M){p={error:M}}finally{try{!x&&!g&&(_=U.return)&&(yield be(_.call(U)))}finally{if(p)throw p.error}}S=!0}catch(M){if(Fm(M))return yield be(void 0);throw M}finally{S||t.abort()}})}return new sa(u,t,s)}static fromReadableStream(e,t,s){let r=!1;function l(){return fi(this,arguments,function*(){var g,p,_,T;const S=new Kf,x=jA(e);try{for(var U=!0,z=di(x),M;M=yield be(z.next()),g=M.done,!g;U=!0){T=M.value,U=!1;const F=T;for(const Z of S.decode(F))yield yield be(Z)}}catch(F){p={error:F}}finally{try{!U&&!g&&(_=z.return)&&(yield be(_.call(z)))}finally{if(p)throw p.error}}for(const F of S.flush())yield yield be(F)})}function u(){return fi(this,arguments,function*(){var g,p,_,T;if(r)throw new Qn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var x=!0,U=di(l()),z;z=yield be(U.next()),g=z.done,!g;x=!0){T=z.value,x=!1;const M=T;S||M&&(yield yield be(JSON.parse(M)))}}catch(M){p={error:M}}finally{try{!x&&!g&&(_=U.return)&&(yield be(_.call(U)))}finally{if(p)throw p.error}}S=!0}catch(M){if(Fm(M))return yield be(void 0);throw M}finally{S||t.abort()}})}return new sa(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),t.push(u)}return l.shift()}});return[new sa(()=>r(e),this.controller,this.client),new sa(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return XA({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await t.next();if(l)return s.close();const u=$p(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function Ek(n,e){return fi(this,arguments,function*(){var s,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Qn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Qn("Attempted to iterate over a response with no body");const d=new Ak,g=new Kf,p=jA(n.body);try{for(var _=!0,T=di(Sk(p)),S;S=yield be(T.next()),s=S.done,!s;_=!0){u=S.value,_=!1;const x=u;for(const U of g.decode(x)){const z=d.decode(U);z&&(yield yield be(z))}}}catch(x){r={error:x}}finally{try{!_&&!s&&(l=T.return)&&(yield be(l.call(T)))}finally{if(r)throw r.error}}for(const x of g.flush()){const U=d.decode(x);U&&(yield yield be(U))}})}function Sk(n){return fi(this,arguments,function*(){var t,s,r,l;let u=new Uint8Array;try{for(var d=!0,g=di(n),p;p=yield be(g.next()),t=p.done,!t;d=!0){l=p.value,d=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?$p(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let x;for(;(x=_k(u))!==-1;)yield yield be(u.slice(0,x)),u=u.slice(x)}}catch(_){s={error:_}}finally{try{!d&&!t&&(r=g.return)&&(yield be(r.call(g)))}finally{if(s)throw s.error}}u.length>0&&(yield yield be(u))})}class Ak{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=Ck(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function Ck(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function wk(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var d;if(e.options.stream)return cn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):sa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),p=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return cn(n).debug(`[${s}] response parsed`,Xo({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qp extends Promise{constructor(e,t,s=wk){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Qp(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sC=Symbol("brand.privateNullableHeaders");function*xk(n){if(!n)return;if(sC in n){const{values:s,nulls:r}=n;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():uE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=uE(s[1])?s[1]:[s[1]];let u=!1;for(const d of l)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Nl=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[l,u]of xk(s)){const d=l.toLowerCase();r.has(d)||(e.delete(l),r.add(d)),u===null?(e.delete(l),t.add(d)):(e.append(l,u),t.delete(d))}}return{[sC]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const um=n=>{var e,t,s,r,l,u;if(typeof globalThis.process<"u")return(s=(t=(e=WN)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oC;class $f{constructor(e){var t,s,r,l,u,d,g,{baseURL:p=um("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=um("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Ef(e,["baseURL","apiKey","apiVersion"]);const x=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=x.baseURL,this.timeout=(s=x.timeout)!==null&&s!==void 0?s:$f.DEFAULT_TIMEOUT,this.logger=(r=x.logger)!==null&&r!==void 0?r:console;const U="warn";this.logLevel=U,this.logLevel=(u=(l=mE(x.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:mE(um("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:U,this.fetchOptions=x.fetchOptions,this.maxRetries=(d=x.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=x.fetch)!==null&&g!==void 0?g:rk(),this.encoder=uk,this._options=x,this.apiKey=_,this.apiVersion=T,this.clientAdapter=x.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Nl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Nl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Nl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Qn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${na}`}defaultIdempotencyKey(){return`stainless-node-retry-${J4()}`}makeStatusError(e,t,s,r){return dn.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=$4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return j4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Qp(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,l,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(d);const{req:p,url:_,timeout:T}=await this.buildRequest(d,{retryCount:g-t});await this.prepareRequest(p,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),x=s===void 0?"":`, retryOf: ${s}`,U=Date.now();if(cn(this).debug(`[${S}] sending request`,Xo({retryOfRequestLogID:s,method:d.method,url:_,options:d,headers:p.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Hm;const z=new AbortController,M=await this.fetchWithTimeout(_,p,T,z).catch(Gm),F=Date.now();if(M instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Hm;const re=Fm(M)||/timed? ?out/i.test(String(M)+("cause"in M?String(M.cause):""));if(t)return cn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${Q}`),cn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${Q})`,Xo({retryOfRequestLogID:s,url:_,durationMs:F-U,message:M.message})),this.retryRequest(d,t,s??S);throw cn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,Xo({retryOfRequestLogID:s,url:_,durationMs:F-U,message:M.message})),re?new zA:new Jf({cause:M})}const Z=`[${S}${x}] ${p.method} ${_} ${M.ok?"succeeded":"failed"} with status ${M.status} in ${F-U}ms`;if(!M.ok){const Q=await this.shouldRetry(M);if(t&&Q){const I=`retrying, ${t} attempts remaining`;return await lk(M.body),cn(this).info(`${Z} - ${I}`),cn(this).debug(`[${S}] response error (${I})`,Xo({retryOfRequestLogID:s,url:M.url,status:M.status,headers:M.headers,durationMs:F-U})),this.retryRequest(d,t,s??S,M.headers)}const re=Q?"error; no more retries left":"error; not retryable";cn(this).info(`${Z} - ${re}`);const de=await M.text().catch(I=>Gm(I).message),ue=ek(de),N=ue?void 0:de;throw cn(this).debug(`[${S}] response error (${re})`,Xo({retryOfRequestLogID:s,url:M.url,status:M.status,headers:M.headers,message:N,durationMs:Date.now()-U})),this.makeStatusError(M.status,ue,N,M.headers)}return cn(this).info(Z),cn(this).debug(`[${S}] response start`,Xo({retryOfRequestLogID:s,url:M.url,status:M.status,headers:M.headers,durationMs:F-U})),{response:M,options:d,controller:z,requestLogID:S,retryOfRequestLogID:s,startTime:U}}async fetchWithTimeout(e,t,s,r){const l=t||{},{signal:u,method:d}=l,g=Ef(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const p=setTimeout(()=>r.abort(),s),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var l;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(u=p)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const p=parseFloat(g);Number.isNaN(p)?u=Date.parse(g)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,p)}return await tk(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,l;const u=Object.assign({},e),{method:d,path:g,query:p,defaultBaseURL:_}=u,T=this.buildURL(g,p,_);"timeout"in u&&Z4("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:S,body:x}=this.buildBody({options:u}),U=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:U},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&x instanceof globalThis.ReadableStream&&{duplex:"half"}),x&&{body:x}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Nl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),ok()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Nl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:ak(e)}:this.encoder({body:e,headers:s})}}$f.DEFAULT_TIMEOUT=6e4;class Yt extends $f{constructor(){super(...arguments),this.interactions=new iC(this)}}oC=Yt;Yt.GeminiNextGenAPIClient=oC;Yt.GeminiNextGenAPIClientError=Qn;Yt.APIError=dn;Yt.APIConnectionError=Jf;Yt.APIConnectionTimeoutError=zA;Yt.APIUserAbortError=Hm;Yt.NotFoundError=YA;Yt.ConflictError=JA;Yt.RateLimitError=$A;Yt.BadRequestError=FA;Yt.AuthenticationError=GA;Yt.InternalServerError=QA;Yt.PermissionDeniedError=HA;Yt.UnprocessableEntityError=KA;Yt.toFile=mk;Yt.Interactions=iC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rk(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function Ik(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function bk(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function Nk(n,e){const t={},s=f(n,["sdkHttpResponse"]);return s!=null&&h(t,["sdkHttpResponse"],s),t}function Mk(n,e,t){const s={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","epochCount"],l);const u=f(n,["learningRateMultiplier"]);if(u!=null&&h(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&h(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(n,["learningRate"]);if(e!==void 0&&g!=null&&h(e,["tuningTask","hyperparameters","learningRate"],g),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function Dk(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const x=f(n,["validationDataset"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec"],gE(x))}else if(r==="PREFERENCE_TUNING"){const x=f(n,["validationDataset"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec"],gE(x))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&h(e,["tunedModelDisplayName"],l);const u=f(n,["description"]);e!==void 0&&u!=null&&h(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const x=f(n,["epochCount"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(d==="PREFERENCE_TUNING"){const x=f(n,["epochCount"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let g=f(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const x=f(n,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(g==="PREFERENCE_TUNING"){const x=f(n,["learningRateMultiplier"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const x=f(n,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(p==="PREFERENCE_TUNING"){const x=f(n,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const x=f(n,["adapterSize"]);e!==void 0&&x!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(_==="PREFERENCE_TUNING"){const x=f(n,["adapterSize"]);e!==void 0&&x!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function Vk(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&Hk(l);const u=f(n,["config"]);return u!=null&&Mk(u,t),t}function Pk(n,e){const t={},s=f(n,["baseModel"]);s!=null&&h(t,["baseModel"],s);const r=f(n,["preTunedModel"]);r!=null&&h(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&Yk(l,t,e);const u=f(n,["config"]);return u!=null&&Dk(u,t,e),t}function kk(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function Uk(n,e){const t={},s=f(n,["name"]);return s!=null&&h(t,["_url","name"],s),t}function Lk(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function Ok(n,e,t){const s={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&h(e,["_query","pageToken"],l);const u=f(n,["filter"]);return e!==void 0&&u!=null&&h(e,["_query","filter"],u),s}function qk(n,e){const t={},s=f(n,["config"]);return s!=null&&Lk(s,t),t}function Bk(n,e){const t={},s=f(n,["config"]);return s!=null&&Ok(s,t),t}function zk(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>rC(d))),h(t,["tuningJobs"],u)}return t}function Fk(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["nextPageToken"]);r!=null&&h(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(d=>Km(d))),h(t,["tuningJobs"],u)}return t}function Gk(n,e){const t={},s=f(n,["name"]);s!=null&&h(t,["model"],s);const r=f(n,["name"]);return r!=null&&h(t,["endpoint"],r),t}function Hk(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),h(t,["examples","examples"],r)}return t}function Yk(n,e,t){const s={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function rC(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],SA(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["tuningTask","completeTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const _=f(n,["description"]);_!=null&&h(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&h(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&h(t,["tunedModel"],Gk(S)),t}function Km(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["state"]);l!=null&&h(t,["state"],SA(l));const u=f(n,["createTime"]);u!=null&&h(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&h(t,["startTime"],d);const g=f(n,["endTime"]);g!=null&&h(t,["endTime"],g);const p=f(n,["updateTime"]);p!=null&&h(t,["updateTime"],p);const _=f(n,["error"]);_!=null&&h(t,["error"],_);const T=f(n,["description"]);T!=null&&h(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&h(t,["baseModel"],S);const x=f(n,["tunedModel"]);x!=null&&h(t,["tunedModel"],x);const U=f(n,["preTunedModel"]);U!=null&&h(t,["preTunedModel"],U);const z=f(n,["supervisedTuningSpec"]);z!=null&&h(t,["supervisedTuningSpec"],z);const M=f(n,["preferenceOptimizationSpec"]);M!=null&&h(t,["preferenceOptimizationSpec"],M);const F=f(n,["tuningDataStats"]);F!=null&&h(t,["tuningDataStats"],F);const Z=f(n,["encryptionSpec"]);Z!=null&&h(t,["encryptionSpec"],Z);const Q=f(n,["partnerModelTuningSpec"]);Q!=null&&h(t,["partnerModelTuningSpec"],Q);const re=f(n,["customBaseModel"]);re!=null&&h(t,["customBaseModel"],re);const de=f(n,["experiment"]);de!=null&&h(t,["experiment"],de);const ue=f(n,["labels"]);ue!=null&&h(t,["labels"],ue);const N=f(n,["outputUri"]);N!=null&&h(t,["outputUri"],N);const D=f(n,["pipelineJob"]);D!=null&&h(t,["pipelineJob"],D);const I=f(n,["serviceAccount"]);I!=null&&h(t,["serviceAccount"],I);const P=f(n,["tunedModelDisplayName"]);P!=null&&h(t,["tunedModelDisplayName"],P);const k=f(n,["veoTuningSpec"]);return k!=null&&h(t,["veoTuningSpec"],k),t}function Jk(n,e){const t={},s=f(n,["sdkHttpResponse"]);s!=null&&h(t,["sdkHttpResponse"],s);const r=f(n,["name"]);r!=null&&h(t,["name"],r);const l=f(n,["metadata"]);l!=null&&h(t,["metadata"],l);const u=f(n,["done"]);u!=null&&h(t,["done"],u);const d=f(n,["error"]);return d!=null&&h(t,["error"],d),t}function gE(n,e){const t={},s=f(n,["gcsUri"]);s!=null&&h(t,["validationDatasetUri"],s);const r=f(n,["vertexDatasetResource"]);return r!=null&&h(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kk extends _s{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new rr(ps.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:km.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Uk(e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Km(_))}else{const p=kk(e);return d=pe("{name}",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>rC(_))}}async listInternal(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Bk(e);return d=pe("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=Fk(_),S=new FT;return Object.assign(S,T),S})}else{const p=qk(e);return d=pe("tunedModels",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=zk(_),S=new FT;return Object.assign(S,T),S})}}async cancel(e){var t,s,r,l;let u,d="",g={};if(this.apiClient.isVertexAI()){const p=Ik(e);return d=pe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=Nk(_),S=new GT;return Object.assign(S,T),S})}else{const p=Rk(e);return d=pe("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=bk(_),S=new GT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const d=Pk(e,e);return l=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>Km(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Vk(e);return l=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>Jk(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $k{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Qk=1024*1024*8,Xk=3,jk=1e3,Wk=2,Af="x-goog-upload-status";async function Zk(n,e,t){var s;const r=await aC(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function eU(n,e,t){var s;const r=await aC(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=gA(l),d=new Fp;return Object.assign(d,u),d}async function aC(n,e,t){var s,r;let l=0,u=0,d=new Um(new Response),g="upload";for(l=n.size;u<l;){const p=Math.min(Qk,l-u),_=n.slice(u,u+p);u+p>=l&&(g+=", finalize");let T=0,S=jk;for(;T<Xk&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((s=d==null?void 0:d.headers)===null||s===void 0)&&s[Af]));)T++,await nU(S),S=S*Wk;if(u+=p,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Af])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function tU(n){return{size:n.size,type:n.type}}function nU(n){return new Promise(e=>setTimeout(e,n))}class iU{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Zk(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await eU(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sU{create(e,t,s){return new oU(e,t,s)}}class oU{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yE="x-goog-api-key";class rU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(yE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aU="gl-node/";class lC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=nM(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new rU(this.apiKey);this.apiClient=new t4({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:aU+"web",uploader:new iU,downloader:new $k}),this.models=new T4(this.apiClient),this.live=new m4(this.apiClient,r,new sU),this.batches=new MD(this.apiClient),this.chats=new d2(this.models,this.apiClient),this.caches=new u2(this.apiClient),this.files=new S2(this.apiClient),this.operations=new E4(this.apiClient),this.authTokens=new L4(this.apiClient),this.tunings=new Kk(this.apiClient),this.fileSearchStores=new Y4(this.apiClient)}}const uC=()=>{try{return typeof lC>"u"?!1:!!window.GEMINI_API_KEY}catch{return!1}},cC=()=>{const n=window.GEMINI_API_KEY;if(!n)throw new Error("GEMINI_API_KEY not found. Please configure the environment variable.");return new lC({apiKey:n})},vE=()=>[{name:"Classic Textured Crop",description:"Modern ve ok ynl bir kesim. Bu stil, yz hatlarn dengeleyen katmanlar ve doal doku ile alr. Gnlk kullanma uygun, hafif products ile ekillendirilebilir.",faceShapeMatch:"Oval/Yuvarlatlm Kare - yan katmanlar yz ereveler",maintenanceLevel:"Dk",imageUrl:"https://images.unsplash.com/photo-1503951914875-452162b7f300?w=400&auto=format&fit=crop&q=60"},{name:"Modern Quiff",description:"zgvenli ve k bir grnm. stte hacim, yanda fade ile modern bir siluet oluturur. Gl ene hatt olan yzler iin mkemmel bir denge salar.",faceShapeMatch:"Kare/Diamond - yukardaki hacim yz uzatr",maintenanceLevel:"Orta",imageUrl:"https://images.unsplash.com/photo-1622286342621-4bd786c2447c?w=400&auto=format&fit=crop&q=60"},{name:"Textured Fringe",description:"Gen ve dinamik bir stil. ndeki peruk kalar hafife rtp yumuak bir gei salar. Yumuak zellikleri olan yzler iin idealdir.",faceShapeMatch:"Kalp/Oval - n perk yz dengeler",maintenanceLevel:"Dk-Orta",imageUrl:"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?w=400&auto=format&fit=crop&q=60"}],lU=async(n,e)=>{if(!uC())return console.warn("Google GenAI SDK not available or API key missing, using fallback recommendations"),vE();try{const t=cC(),s="gemini-2.5-flash-image",l=[{text:`
      You are a world-class hair stylist and image consultant at the elite "TYRANDEVU" salon.
      Your task is to provide a highly personalized consultation based on the user's photo and description.

      CRITICAL ANALYSIS STEPS:
      1. **Face Shape Analysis:** rigorous analysis of the user's face shape (e.g., Oval, Square, Round, Diamond, Heart).
      2. **Texture Analysis:** Analyze the hair texture (Straight, Wavy, Curly, Coily) and density (Fine, Thick).
      3. **Recommendation:** Suggest 3 distinct, modern hairstyles that aesthetically balance their specific features.

      OUTPUT REQUIREMENTS:
      - **description**: Must be detailed and personalized. Explain *WHY* this style works for *their* specific face shape and texture. (e.g., "This textured crop adds volume on top to elongate your round face structure," or "The fade is kept lower to balance your strong jawline.").
      - **faceShapeMatch**: Explicitly state their face shape and why this matches.
      - **maintenanceLevel**: Be realistic based on the cut complexity.

      Return STRICT JSON format (Array of objects). Do not use Markdown code blocks.
    `}];if(e){const d=e.includes(",")?e.split(",")[1]:e;l.push({inlineData:{mimeType:"image/jpeg",data:d}})}l.push({text:`User Description & Preferences: ${n}`});const u=await t.models.generateContent({model:s,contents:{parts:l},config:{responseMimeType:"application/json",responseSchema:{type:En.ARRAY,items:{type:En.OBJECT,properties:{name:{type:En.STRING,description:"Name of the hairstyle"},description:{type:En.STRING,description:"Detailed explanation of why this suits the specific user's features"},faceShapeMatch:{type:En.STRING,description:"The detected face shape and the strategy used"},maintenanceLevel:{type:En.STRING,description:"Low, Medium, or High"}},required:["name","description","faceShapeMatch","maintenanceLevel"]}}}});if(u.text){let d=u.text.trim();d.startsWith("```")&&(d=d.replace(/^```json\n?|```$/g,"").trim(),d=d.replace(/^```\n?|```$/g,"").trim());try{return JSON.parse(d).map(p=>({...p,imageUrl:"https://images.unsplash.com/photo-1585747860715-2ba37e788b70?w=400&auto=format&fit=crop&q=60"}))}catch{throw console.error("JSON Parse Error. Raw text:",d),new Error("AI yant okunamad. Ltfen tekrar deneyin.")}}return[]}catch(t){return console.error("Gemini Analysis Failed:",t),console.warn("Using fallback recommendations due to error"),vE()}},_E=async(n,e,t)=>{if(!uC())return console.warn("Cannot generate preview: GenAI SDK or API key not available"),null;try{const s=cC(),r="gemini-2.5-flash-image",l=n.includes(",")?n.split(",")[1]:n,u=await s.models.generateContent({model:r,contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:l}},{text:`Generate a high-resolution, photorealistic makeover of the person in the image.
                   Target Hairstyle: "${e}"
                   Style Details: ${t}

                   CRITICAL REQUIREMENTS FOR PHOTOREALISM:
                   1. PRESERVE IDENTITY: Keep the face, facial features, skin texture, and lighting EXACTLY as they are in the original image.
                   2. REALISTIC HAIR: The generated hair must look indistinguishable from real hair, with individual strands, natural shine, and weight.
                   3. RESOLUTION: Output in 4k/8k quality, sharp details, no blurring or artifacts.
                   4. BLENDING: Ensure the hairline blends naturally with the forehead and skin. Match the lighting on the hair to the original scene.`}]}});if(u.candidates&&u.candidates.length>0){const d=u.candidates[0];if(d.content&&d.content.parts){for(const g of d.content.parts)if(g.inlineData&&g.inlineData.data)return`data:image/jpeg;base64,${g.inlineData.data}`}}return null}catch(s){return console.error(`Gemini Image Gen Error for ${e}:`,s),null}},uU=({onClose:n})=>{const[e,t]=ce.useState(""),[s,r]=ce.useState(!1),[l,u]=ce.useState([]),[d,g]=ce.useState(null),[p,_]=ce.useState({}),[T,S]=ce.useState({}),[x,U]=ce.useState(!1),[z,M]=ce.useState(0),[F,Z]=ce.useState(null),Q=I=>{if(Z(null),!I.type.startsWith("image/")){Z("Ltfen geerli bir resim dosyas ykleyin.");return}if(I.size>tx){const q=(I.size/1048576).toFixed(1);Z(`Dosya boyutu ok byk (${q}MB). Ltfen ${cm}MB alt bir dosya ykleyin.`);return}M(10);const P=setInterval(()=>{M(q=>q>=90?(clearInterval(P),90):q+5)},nx),k=new FileReader;k.onloadend=()=>{clearInterval(P),M(100),setTimeout(()=>{g(k.result),M(0)},600)},k.readAsDataURL(I)},re=I=>{I.preventDefault(),I.stopPropagation(),I.type==="dragenter"||I.type==="dragover"?U(!0):I.type==="dragleave"&&U(!1)},de=I=>{I.preventDefault(),I.stopPropagation(),U(!1),I.dataTransfer.files&&I.dataTransfer.files[0]&&Q(I.dataTransfer.files[0])},ue=I=>{var k;const P=(k=I.target.files)==null?void 0:k[0];P&&Q(P)},N=async()=>{if(!(!e&&!d)){r(!0),u([]),_({}),S({}),Z(null);try{const I=await lU(e,d||void 0);if(u(I),r(!1),d&&I.length>0){const P={};I.forEach((k,q)=>P[q]=!0),_(P),I.forEach(async(k,q)=>{try{await new Promise(Ie=>setTimeout(Ie,q*ix));const V=await _E(d,k.name,k.description);V&&u(Ie=>{const Ge=[...Ie];return Ge[q]&&(Ge[q]={...Ge[q],imageUrl:V}),Ge})}catch(V){console.error(`Image generation failed for index ${q}`,V)}finally{_(V=>({...V,[q]:!1}))}})}}catch(I){console.error(I),alert("AI servisi u anda yant veremiyor. Ltfen bilgilerinizi kontrol edip tekrar deneyin."),r(!1)}}},D=async I=>{const P=T[I];if(!(!P||!d)){_(k=>({...k,[I]:!0}));try{const k=l[I],q=`${k.description}. Modification request: ${P}`,V=await _E(d,k.name,q);V&&(u(Ie=>{const Ge=[...Ie];return Ge[I]={...Ge[I],imageUrl:V},Ge}),S(Ie=>({...Ie,[I]:""})))}catch(k){console.error("Refinement failed",k),alert("Dzenleme srasnda bir hata olutu.")}finally{_(k=>({...k,[I]:!1}))}}};return A.jsxs("div",{className:"space-y-8 animate-fade-in w-full max-w-4xl mx-auto pb-20 relative",children:[n&&A.jsx("button",{onClick:n,className:"absolute -top-12 right-0 md:top-0 md:-right-12 p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-full transition-all",title:"Ana Sayfaya Dn",children:A.jsx(Te,{name:"close",size:28})}),A.jsxs("div",{className:"text-center space-y-2",children:[A.jsxs("h2",{className:"text-3xl font-serif text-gold-400 flex items-center justify-center gap-2",children:[A.jsx(Te,{name:"sparkles",className:"text-gold-400"}),"AI Stil Danman"]}),A.jsx("p",{className:"text-gray-300",children:"Yz ekline ve tarzna en uygun sa yapay zeka ile bul."})]}),A.jsxs(fn,{className:"space-y-6",children:[A.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"space-y-4",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Fotorafn Ykle"}),A.jsxs("div",{className:`border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 relative group overflow-hidden
                ${x?"border-gold-500 bg-gold-500/10 scale-[1.02]":"border-gray-600 hover:border-gold-500 hover:bg-white/5"} ${F?"border-red-500/50":""}`,onDragEnter:re,onDragOver:re,onDragLeave:re,onDrop:de,children:[z>0?A.jsxs("div",{className:"absolute inset-0 z-20 flex flex-col items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in transition-all",children:[A.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center mb-4 border border-gold-500/30 animate-bounce",children:A.jsx(Te,{name:"upload",className:"text-gold-400",size:24})}),A.jsx("p",{className:"text-lg font-serif text-white mb-1",children:"Ykleniyor"}),A.jsx("p",{className:"text-xs text-gold-400/80 mb-6 font-mono tracking-widest animate-pulse",children:"GRNT LENYOR..."}),A.jsx("div",{className:"w-48 sm:w-64 h-2 bg-gray-800 rounded-full overflow-hidden border border-white/10 relative shadow-inner",children:A.jsx("div",{className:"h-full bg-gradient-to-r from-gold-600 via-gold-400 to-gold-300 transition-all duration-200 ease-out shadow-[0_0_15px_rgba(212,175,55,0.6)]",style:{width:`${z}%`}})}),A.jsxs("span",{className:"mt-3 text-xs text-gray-400 font-medium",children:[z,"%"]})]}):d?A.jsxs("div",{className:"relative h-48 group-hover:opacity-50 transition-opacity",children:[A.jsx("img",{src:d,alt:"Preview",className:"w-full h-full object-cover rounded-lg shadow-lg"}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx("p",{className:"text-white font-bold bg-black/50 px-3 py-1 rounded-full text-sm backdrop-blur-md border border-white/20",children:"Deitirmek iin srkleyin"})})]}):A.jsxs("div",{className:"flex flex-col items-center justify-center h-48 transition-transform duration-300 group-hover:scale-105",children:[A.jsx("div",{className:`p-4 rounded-full mb-3 transition-colors ${x?"bg-gold-500 text-black":"bg-white/5 text-gray-400 group-hover:text-gold-400 group-hover:bg-gold-500/20"}`,children:A.jsx(Te,{name:"upload",size:32})}),A.jsx("span",{className:`text-sm font-medium transition-colors ${x?"text-gold-400":"text-gray-400 group-hover:text-white"}`,children:x?"Fotoraf Buraya Brakn":"Fotoraf srkleyin veya tklayn"}),A.jsxs("span",{className:"text-xs text-gray-500 mt-2",children:["JPG, PNG (Max ",cm,"MB)"]})]}),A.jsx("input",{type:"file",accept:"image/*",onChange:ue,disabled:z>0,className:"absolute inset-0 opacity-0 cursor-pointer disabled:cursor-not-allowed"})]}),F&&A.jsxs("div",{className:"animate-fade-in flex items-center gap-2 text-red-400 text-sm bg-red-500/10 border border-red-500/20 p-3 rounded-lg mt-2",children:[A.jsx(Te,{name:"close",size:16,className:"shrink-0"}),A.jsx("span",{children:F})]})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Tarzn Anlat"}),A.jsx("textarea",{value:e,onChange:I=>t(I.target.value),placeholder:"rn: Modern, ksa, bakm kolay bir sa istiyorum. Sakallarm gr...",className:"w-full h-full min-h-[200px] glass-input rounded-xl p-4 resize-none border-2 border-transparent focus:border-gold-500/50 transition-all"})]})]}),A.jsx("button",{onClick:N,disabled:s||!e&&!d,className:`w-full py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2
            ${s?"bg-gray-700 cursor-wait":"bg-gradient-to-r from-gold-600 to-gold-400 hover:from-gold-500 hover:to-gold-300 text-black shadow-lg shadow-gold-500/20 hover:shadow-gold-500/40"}`,children:s?A.jsxs(A.Fragment,{children:[A.jsxs("svg",{className:"animate-spin h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analiz Ediliyor..."]}):A.jsxs(A.Fragment,{children:[A.jsx(Te,{name:"sparkles",size:20}),"Stilimi Bul"]})})]}),l.length>0&&A.jsx("div",{className:"grid md:grid-cols-3 gap-6 animate-slide-up",children:l.map((I,P)=>A.jsxs(fn,{className:"group overflow-hidden border-gold-500/30 flex flex-col h-full",children:[A.jsxs("div",{className:"relative h-48 -mx-6 -mt-6 mb-4 overflow-hidden bg-black/40",children:[p[P]?A.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 backdrop-blur-sm bg-black/60 transition-all",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"w-12 h-12 border-2 border-gold-500/30 border-t-gold-500 rounded-full animate-spin mb-3"}),A.jsx(Te,{name:"sparkles",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-[65%] text-gold-400 animate-pulse",size:16})]}),A.jsx("span",{className:"text-xs text-gold-400 font-medium animate-pulse tracking-wide",children:T[P]?"Stil Gncelleniyor...":"Yz leniyor..."})]}):null,A.jsx("img",{src:I.imageUrl,alt:I.name,className:`w-full h-full object-cover transition-all duration-700 group-hover:scale-110 
                    ${p[P]?"opacity-30 blur-sm":"opacity-100 blur-0"}`}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex items-end p-4",children:A.jsx("h3",{className:"text-xl font-serif text-white shadow-black drop-shadow-md",children:I.name})})]}),A.jsxs("div",{className:"flex-1 space-y-3 flex flex-col",children:[A.jsx("p",{className:"text-sm text-gray-300 leading-relaxed line-clamp-3",children:I.description}),A.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[A.jsxs("div",{className:"bg-white/5 rounded-lg p-3 flex flex-col items-center justify-center text-center border border-white/5 hover:border-gold-500/30 transition-colors",children:[A.jsx(Te,{name:"user",className:"text-gold-400 mb-1",size:16}),A.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-0.5",children:"Yz ekli"}),A.jsx("span",{className:"text-sm font-medium text-white",children:I.faceShapeMatch})]}),A.jsxs("div",{className:"bg-white/5 rounded-lg p-3 flex flex-col items-center justify-center text-center border border-white/5 hover:border-gold-500/30 transition-colors",children:[A.jsx(Te,{name:"scissors",className:"text-gold-400 mb-1",size:16}),A.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest mb-0.5",children:"Bakm"}),A.jsx("span",{className:"text-sm font-medium text-white",children:I.maintenanceLevel})]})]}),A.jsx("div",{className:"mt-auto pt-4 border-t border-white/10",children:A.jsxs("div",{className:"relative group/input",children:[A.jsx("input",{type:"text",value:T[P]||"",onChange:k=>S(q=>({...q,[P]:k.target.value})),onKeyDown:k=>k.key==="Enter"&&D(P),disabled:p[P],placeholder:"rn: Daha ksa yap, sakal ekle...",className:"w-full bg-black/30 border border-white/10 rounded-lg pl-3 pr-10 py-2.5 text-xs text-white focus:border-gold-500 outline-none placeholder-gray-500 disabled:opacity-50 transition-all focus:bg-white/5"}),A.jsx("button",{onClick:()=>D(P),disabled:p[P]||!T[P],className:"absolute right-1 top-1/2 -translate-y-1/2 p-1.5 text-gold-400 hover:text-white disabled:opacity-30 transition-colors rounded-md hover:bg-gold-500/20",title:"Stili Gncelle",children:A.jsx(Te,{name:"sparkles",size:14})})]})})]})]},P))})]})},cU=({isOpen:n,onClose:e,existingAppointment:t,staffMembers:s})=>{const[r,l]=ce.useState(""),[u,d]=ce.useState(""),[g,p]=ce.useState(jr[0].id),[_,T]=ce.useState(""),[S,x]=ce.useState(""),[U,z]=ce.useState(""),[M,F]=ce.useState(""),[Z,Q]=ce.useState(!1);ce.useEffect(()=>{var N;n&&(t?(l(t.customerName),d(""),p(t.serviceId),T(t.staffId),x(t.date),z(t.time),F(t.notes||"")):(l(""),d(""),p(jr[0].id),T(((N=s[0])==null?void 0:N.id)||""),x(qi()),z("12:00"),F("")))},[n,t,s]);const re=async()=>{if(!r||!_||!S||!U){alert("Ltfen gerekli alanlar doldurun.");return}if(!t&&!u){alert("Ltfen mteri telefon numarasn giriniz.");return}const N=s.find(I=>I.id===_);if(!N){alert("Geersiz personel seimi. Ltfen geerli bir personel sein.");return}Q(!0);const D=jr.find(I=>I.id===g)||jr[0];try{if(t)await fN(t.id,{staffId:_,staffName:N.name,date:S,time:U,serviceId:g,serviceName:D.name,notes:M}),alert("Randevu baaryla gncellendi.");else{const I=await lN(r,u);await mA({customerId:I.id,customerName:I.name,staffId:_,staffName:N.name,date:S,time:U,serviceId:g,serviceName:D.name,status:"confirmed",notes:M}),alert(`Randevu oluturuldu! Mteri: ${I.name}`)}e()}catch(I){console.error(I),alert("lem baarsz.")}finally{Q(!1)}},de=async()=>{if(t&&confirm("Bu deiiklik mterinin paneline 'neri' olarak gnderilecek. Onaylyor musunuz?")){Q(!0);try{await vN(t.id,S,U),alert("Deiiklik nerisi mteriye gnderildi."),e()}catch(N){console.error(N),alert("neri gnderilemedi.")}finally{Q(!1)}}},ue=async()=>{if(t&&confirm("Randevuyu kalc olarak silmek istediinize emin misiniz?")){Q(!0);try{await hN(t.id),e()}catch{alert("Silinemedi.")}finally{Q(!1)}}};return n?A.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-fade-in",children:A.jsxs(fn,{className:"w-full max-w-lg relative overflow-y-auto max-h-[90vh]",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:A.jsx(Te,{name:"close",size:24})}),A.jsxs("h3",{className:"text-2xl font-serif text-white mb-6 flex items-center gap-2",children:[A.jsx(Te,{name:t?"scissors":"sparkles",className:"text-gold-400"}),t?"Randevuyu Dzenle":"Yeni Randevu Ekle"]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Mteri Ad"}),A.jsx("input",{value:r,onChange:N=>l(N.target.value),disabled:!!t,className:`w-full glass-input p-3 rounded-xl ${t?"opacity-50 cursor-not-allowed":""}`,placeholder:"Ad Soyad"})]}),!t&&A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Telefon Numaras"}),A.jsx("input",{type:"tel",value:u,onChange:N=>d(N.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:"05XX XXX XX XX"}),A.jsx("p",{className:"text-[10px] text-gray-500 mt-1 ml-1",children:"*Numara kaytlysa eleir, deilse yeni mteri oluturulur."})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Hizmet"}),A.jsx("select",{value:g,onChange:N=>p(N.target.value),className:"w-full glass-input p-3 rounded-xl bg-black",children:jr.map(N=>A.jsxs("option",{value:N.id,children:[N.name," (",N.durationMin," dk)"]},N.id))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Personel"}),A.jsx("select",{value:_,onChange:N=>T(N.target.value),className:"w-full glass-input p-3 rounded-xl bg-black",children:s.map(N=>A.jsx("option",{value:N.id,children:N.name},N.id))})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Tarih"}),A.jsx("input",{type:"date",value:S,onChange:N=>x(N.target.value),className:"w-full glass-input p-3 rounded-xl"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Saat"}),A.jsx("input",{type:"time",value:U,onChange:N=>z(N.target.value),className:"w-full glass-input p-3 rounded-xl"})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Notlar (Opsiyonel)"}),A.jsx("textarea",{value:M,onChange:N=>F(N.target.value),className:"w-full glass-input p-3 rounded-xl h-20 resize-none",placeholder:"rn: Cilt hassasiyeti var..."})]}),A.jsxs("div",{className:"pt-4 flex flex-col gap-3",children:[A.jsxs("button",{onClick:re,disabled:Z,className:"w-full bg-gold-500 hover:bg-gold-400 text-black font-bold py-3 rounded-xl transition-all shadow-lg shadow-gold-500/20 flex justify-center items-center gap-2",children:[A.jsx(Te,{name:"check",size:18}),Z?"leniyor...":t?"Deiiklikleri Kaydet (Direkt)":"Randevuyu Olutur"]}),t&&A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("button",{onClick:de,disabled:Z,className:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 border border-blue-500/30 py-3 rounded-xl text-sm font-bold flex justify-center items-center gap-2",title:"Deiiklii mteriye onaya gnder",children:[A.jsx(Te,{name:"sparkles",size:16}),"Mteriye ner"]}),A.jsxs("button",{onClick:ue,disabled:Z,className:"bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/30 py-3 rounded-xl text-sm font-bold flex justify-center items-center gap-2",children:[A.jsx(Te,{name:"logout",size:16,className:"rotate-180"}),"Sil"]})]})]})]})]})}):null},fU={pending:{label:"Beklemede",labelShort:"Beklemede",classes:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",icon:"clock"},confirmed:{label:"Onayl",labelShort:"Onayland",classes:"bg-green-500/10 text-green-400 border-green-500/30",icon:"check"},completed:{label:"Bitti",labelShort:"Tamamland",classes:"bg-blue-500/10 text-blue-400 border-blue-500/30",icon:"check"},cancelled:{label:"ptal",labelShort:"ptal Edildi",classes:"bg-red-500/10 text-red-400 border-red-500/30",icon:"close"}},fC=({status:n,className:e=""})=>{const t=fU[n];return A.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${t.classes} ${e}`,children:t.label})},dU=()=>{const[n,e]=ce.useState([]),[t,s]=ce.useState([]),[r,l]=ce.useState(!1),[u,d]=ce.useState(!1),[g,p]=ce.useState(!1),[_,T]=ce.useState(null),[S,x]=ce.useState("all"),[U,z]=ce.useState("all"),[M,F]=ce.useState("upcoming"),[Z,Q]=ce.useState(""),[re,de]=ce.useState(""),[ue,N]=ce.useState(""),[D,I]=ce.useState(""),[P,k]=ce.useState("");ce.useEffect(()=>{yf().then(e);const H=qp(s);return()=>H()},[]);const q=async H=>{if(H.preventDefault(),!re||!ue||!D){alert("Ltfen zorunlu alanlar doldurunuz.");return}d(!0);try{await uN(re,ue,D,P||"Stylist"),alert("Personel baaryla eklendi!"),l(!1),de(""),N(""),I(""),yf().then(e)}catch(ae){alert(ae.message||"Hata olutu. Telefon numaras akmas olabilir.")}finally{d(!1)}},V=async(H,ae,me,Se)=>{if(ae==="approve"&&(!me||!Se)){alert("Hata: Yeni tarih ve saat bilgisi eksik. Talep hatal olabilir.");return}if(confirm(ae==="approve"?"Deiiklii ONAYLIYOR musunuz?":"Deiiklii REDDEDYOR musunuz?"))try{ae==="approve"&&me&&Se?await gN(H,me,Se):await yN(H)}catch(we){console.error(we),alert("lem baarsz.")}},Ie=()=>{T(null),p(!0)},Ge=H=>{T(H),p(!0)},W=ce.useMemo(()=>{let H=[...t];const ae=qi();if(Z){const me=Z.toLowerCase();H=H.filter(Se=>Se.customerName.toLowerCase().includes(me)||Se.serviceName.toLowerCase().includes(me)||Se.staffName.toLowerCase().includes(me))}return S!=="all"&&(H=H.filter(me=>me.status===S)),U!=="all"&&(H=H.filter(me=>me.staffId===U)),M==="upcoming"?H=H.filter(me=>me.date>=ae):M==="past"&&(H=H.filter(me=>me.date<ae)),H},[t,Z,S,U,M]),le=ce.useMemo(()=>{const H={};return W.forEach(ae=>{H[ae.date]||(H[ae.date]=[]),H[ae.date].push(ae)}),Object.keys(H).forEach(ae=>{H[ae].sort((me,Se)=>me.time.localeCompare(Se.time))}),H},[W]),Ee=ce.useMemo(()=>{const H=Object.keys(le);return M==="past"?H.sort((ae,me)=>me.localeCompare(ae)):H.sort((ae,me)=>ae.localeCompare(me))},[le,M]),Ue=n.filter(H=>H.role===at.STAFF||H.role===at.ADMIN),he=t.filter(H=>H.changeRequest&&H.changeRequest.status==="pending"),O=t.filter(H=>H.date===qi()&&H.status!=="cancelled"),ee=[{title:"Toplam Randevu",value:t.length.toString(),icon:"calendar",change:"Genel"},{title:"Bekleyen Talepler",value:he.length.toString(),icon:"sparkles",change:he.length>0?"lgilenin":"Yok"},{title:"Bugnk Randevular",value:O.length.toString(),icon:"scissors",change:"Bugn"}];return A.jsxs("div",{className:"space-y-8 animate-slide-up w-full pb-20",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-serif text-white",children:"Ynetim Paneli"}),A.jsx("p",{className:"text-gold-400",children:"Hogeldiniz, Tark Bey"})]}),A.jsxs("div",{className:"flex gap-4 items-center",children:[A.jsx("div",{className:"text-sm text-gray-400 hidden md:block",children:new Date().toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),A.jsxs("button",{onClick:Ie,className:"bg-gold-500 hover:bg-gold-400 text-black font-bold py-2 px-4 rounded-lg shadow-lg shadow-gold-500/20 flex items-center gap-2 transition-all active:scale-95",children:[A.jsx(Te,{name:"sparkles",size:18}),"+ Randevu Ekle"]})]})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:ee.map((H,ae)=>A.jsxs(fn,{className:"relative overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:A.jsx(Te,{name:H.icon,size:60})}),A.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:H.title}),A.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[A.jsx("span",{className:"text-3xl font-bold text-white",children:H.value}),A.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${H.title==="Bekleyen Talepler"&&he.length>0?"bg-red-500/20 text-red-400 animate-pulse":"bg-green-400/10 text-green-400"}`,children:H.change})]})]},ae))}),he.length>0&&A.jsxs("div",{className:"animate-fade-in border-b border-white/10 pb-8 bg-gold-500/5 p-6 rounded-2xl border border-gold-500/20 relative overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gold-500/5 rounded-full blur-3xl -z-10 pointer-events-none"}),A.jsxs("h3",{className:"text-xl font-serif mb-6 flex items-center gap-3 text-gold-400",children:[A.jsxs("div",{className:"relative",children:[A.jsx(Te,{name:"sparkles",className:"animate-spin text-gold-500"}),A.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[A.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),A.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),"Talep Edilen Deiiklikler (",he.length,")"]}),A.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:he.map(H=>{var ae,me;return A.jsxs(fn,{className:"border border-gold-500/50 shadow-[0_0_20px_rgba(212,175,55,0.1)] bg-black/40 relative overflow-hidden group",children:[A.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gold-500/10 blur-xl rounded-full -mr-10 -mt-10 pointer-events-none"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-white/10 pb-4",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-10 h-10 rounded-full bg-gold-500/20 flex items-center justify-center text-gold-400 font-bold text-lg",children:H.customerName.charAt(0).toUpperCase()}),A.jsxs("div",{children:[A.jsx("div",{className:"font-bold text-white text-lg leading-tight",children:H.customerName}),A.jsx("div",{className:"text-xs text-gray-400 mt-1",children:H.serviceName})]})]}),A.jsx("div",{className:"text-[10px] bg-gold-500 text-black px-2 py-1 rounded font-bold uppercase tracking-wider animate-pulse",children:"Talep"})]}),A.jsxs("div",{className:"space-y-4 mb-6",children:[A.jsxs("div",{className:"relative p-3 bg-white/5 rounded-lg border border-white/5 group-hover:border-red-500/30 transition-colors",children:[A.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-red-500/50 rounded-l-lg"}),A.jsx("span",{className:"text-[10px] uppercase text-gray-500 font-bold tracking-widest block mb-1 pl-2",children:"Mevcut Randevu"}),A.jsxs("div",{className:"text-gray-300 font-mono pl-2 flex items-center gap-2",children:[A.jsx(Te,{name:"calendar",size:14,className:"text-gray-500"}),H.date,A.jsx("span",{className:"w-1 h-1 bg-gray-500 rounded-full"}),H.time]})]}),A.jsx("div",{className:"flex justify-center -my-2 relative z-20",children:A.jsx("div",{className:"bg-black border border-gold-500/30 rounded-full p-1 shadow-lg text-gold-500",children:A.jsx(Te,{name:"chevronRight",size:16,className:"rotate-90"})})}),A.jsxs("div",{className:"relative p-3 bg-gold-500/10 rounded-lg border border-gold-500/30 group-hover:border-gold-500 transition-colors",children:[A.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-gold-500 rounded-l-lg"}),A.jsx("span",{className:"text-[10px] uppercase text-gold-600 font-bold tracking-widest block mb-1 pl-2",children:"stenen Deiiklik"}),A.jsxs("div",{className:"text-white font-mono font-bold pl-2 flex items-center gap-2",children:[A.jsx(Te,{name:"sparkles",size:14,className:"text-gold-400"}),(ae=H.changeRequest)==null?void 0:ae.newDate,A.jsx("span",{className:"w-1 h-1 bg-gold-500 rounded-full"}),(me=H.changeRequest)==null?void 0:me.newTime]})]})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("button",{onClick:()=>{var Se,we;return V(H.id,"approve",(Se=H.changeRequest)==null?void 0:Se.newDate,(we=H.changeRequest)==null?void 0:we.newTime)},className:"bg-green-600/90 hover:bg-green-500 text-white font-bold py-3 rounded-lg transition-all text-sm shadow-lg shadow-green-900/20 flex items-center justify-center gap-2 active:scale-95",children:[A.jsx(Te,{name:"check",size:16}),"Onayla"]}),A.jsxs("button",{onClick:()=>V(H.id,"reject"),className:"bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 font-medium py-3 rounded-lg transition-all text-sm border border-red-500/30 flex items-center justify-center gap-2 active:scale-95",children:[A.jsx(Te,{name:"close",size:16}),"Reddet"]})]})]})]},H.id)})})]}),A.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[A.jsx("div",{className:"w-full lg:w-1/3 space-y-6",children:A.jsxs(fn,{children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("h3",{className:"text-xl font-serif flex items-center gap-2",children:[A.jsx(Te,{name:"user",className:"text-gold-400"}),"Personel"]}),A.jsx("button",{onClick:()=>l(!r),className:"bg-gold-500/20 hover:bg-gold-500 text-gold-400 hover:text-black p-2 rounded-lg transition-colors text-xs font-bold",children:r?"ptal":"+ Ekle"})]}),r&&A.jsxs("form",{onSubmit:q,className:"bg-white/5 p-4 rounded-xl mb-4 border border-gold-500/30 animate-fade-in space-y-3",children:[A.jsx("div",{className:"text-sm text-gold-400 font-bold mb-2",children:"Yeni Personel Bilgileri"}),A.jsx("input",{placeholder:"Ad Soyad",value:re,onChange:H=>de(H.target.value),className:"w-full glass-input p-2 rounded text-sm",required:!0}),A.jsx("input",{placeholder:"Telefon (Giri ID)",value:ue,onChange:H=>N(H.target.value),className:"w-full glass-input p-2 rounded text-sm",required:!0}),A.jsx("input",{placeholder:"ifre",value:D,onChange:H=>I(H.target.value),className:"w-full glass-input p-2 rounded text-sm",required:!0}),A.jsx("input",{placeholder:"Uzmanlk",value:P,onChange:H=>k(H.target.value),className:"w-full glass-input p-2 rounded text-sm"}),A.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gold-500 text-black font-bold py-2 rounded text-sm hover:bg-gold-400",children:u?"...":"Kaydet"})]}),A.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:Ue.map(H=>A.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[A.jsx("img",{src:H.avatar,alt:H.name,className:"w-10 h-10 rounded-full border border-gold-500/30 object-cover"}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"font-medium text-white text-sm flex items-center gap-2",children:[H.name,H.role===at.ADMIN&&A.jsx(Te,{name:"crown",size:10,className:"text-gold-400"})]}),A.jsx("div",{className:"text-xs text-gray-400",children:H.specialty||"Personel"})]})]},H.id))})]})}),A.jsxs("div",{className:"w-full lg:w-2/3 space-y-4",children:[A.jsxs("div",{className:"glass-panel p-4 rounded-xl flex flex-wrap gap-4 items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[A.jsx(Te,{name:"scissors",size:16,className:"text-gray-400"}),A.jsx("input",{type:"text",placeholder:"Mteri veya Hizmet Ara...",value:Z,onChange:H=>Q(H.target.value),className:"bg-transparent border-none outline-none text-white text-sm w-full placeholder-gray-500"})]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 md:pb-0",children:[A.jsxs("select",{value:M,onChange:H=>F(H.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-3 py-1 text-sm text-white focus:border-gold-500 outline-none",children:[A.jsx("option",{value:"upcoming",children:"Gelecek"}),A.jsx("option",{value:"past",children:"Gemi"}),A.jsx("option",{value:"all",children:"Tm"})]}),A.jsxs("select",{value:S,onChange:H=>x(H.target.value),className:"bg-black/40 border border-white/10 rounded-lg px-3 py-1 text-sm text-white focus:border-gold-500 outline-none",children:[A.jsx("option",{value:"all",children:"Durum"}),A.jsx("option",{value:"pending",children:"Bekleyen"}),A.jsx("option",{value:"confirmed",children:"Onayl"})]})]})]}),A.jsx("div",{className:"space-y-6",children:Ee.length===0?A.jsx("div",{className:"text-center py-12 text-gray-500 border border-dashed border-white/10 rounded-xl",children:"Kriterlere uygun randevu bulunamad."}):Ee.map(H=>{const ae=new Date(H),me=H===qi(),Se=ae.toLocaleDateString("tr-TR",{weekday:"long",day:"numeric",month:"long"});return A.jsxs("div",{className:"animate-slide-up",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[A.jsx("div",{className:`w-2 h-2 rounded-full ${me?"bg-gold-500 animate-pulse":"bg-gray-500"}`}),A.jsx("h4",{className:`text-sm font-bold uppercase tracking-wider ${me?"text-white":"text-gray-400"}`,children:me?"Bugn":Se}),A.jsx("div",{className:"flex-1 h-[1px] bg-white/5"})]}),A.jsx("div",{className:"space-y-3",children:le[H].map(we=>A.jsx(fn,{onClick:()=>Ge(we),className:`p-4 hover:border-white/30 group transition-all cursor-pointer ${we.status==="cancelled"?"opacity-50 border-red-900/30":""}`,children:A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[A.jsxs("div",{className:"flex items-start gap-4",children:[A.jsxs("div",{className:`p-3 rounded-lg text-center min-w-[70px] ${we.status==="cancelled"?"bg-red-900/20":"bg-white/5"}`,children:[A.jsx("div",{className:"text-lg font-bold text-white",children:we.time}),A.jsx("div",{className:"text-[10px] text-gray-400 uppercase",children:"Saat"})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"font-bold text-white text-lg flex items-center gap-2",children:[we.customerName,we.adminProposal&&we.adminProposal.status==="pending"&&A.jsx("span",{className:"text-[10px] bg-blue-500 text-white px-1.5 rounded animate-pulse",children:"Teklif Var"})]}),A.jsx("div",{className:"text-gold-400 text-sm",children:we.serviceName}),A.jsxs("div",{className:"text-gray-500 text-xs mt-1 flex items-center gap-1",children:[A.jsx(Te,{name:"user",size:10}),we.staffName]})]})]}),A.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[A.jsx(fC,{status:we.status,className:"font-bold uppercase tracking-wide"}),A.jsx(Te,{name:"chevronRight",size:16,className:"text-gray-600 group-hover:text-white transition-colors"})]})]})},we.id))})]},H)})})]})]}),A.jsx(cU,{isOpen:g,onClose:()=>p(!1),existingAppointment:_,staffMembers:Ue})]})},hU=5e3,mU=()=>window.__PLAYWRIGHT__===!0||window.Cypress!==void 0||navigator.webdriver===!0,pU=({onComplete:n})=>{const[e,t]=ce.useState(0),s=ce.useRef(!1),r=ce.useRef(!0),l=ce.useCallback(()=>{if(!s.current&&r.current){s.current=!0;try{n()}catch(u){console.error("IntroAnimation onComplete error:",u),t(3),setTimeout(()=>{r.current&&(s.current=!0)},1e3)}}},[n]);return ce.useEffect(()=>{if(mU()){console.log("Test environment detected, skipping intro animation"),l();return}if(s.current)return;const u=[setTimeout(()=>{r.current&&t(1)},500),setTimeout(()=>{r.current&&t(2)},2e3),setTimeout(()=>{r.current&&t(3)},3500),setTimeout(()=>l(),4500),setTimeout(()=>l(),hU)];return()=>{r.current=!1,u.forEach(clearTimeout)}},[l]),A.jsxs("div",{className:`fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center transition-opacity duration-1000 ${e===3?"opacity-0 pointer-events-none":"opacity-100"}`,children:[A.jsxs("button",{onClick:l,className:"absolute top-6 right-6 z-50 flex items-center gap-2 text-white/40 hover:text-white transition-colors text-sm uppercase tracking-widest group",children:["Tantm Atla",A.jsx(Te,{name:"chevronRight",size:16,className:"group-hover:translate-x-1 transition-transform"})]}),A.jsxs("div",{className:"relative z-10 text-center px-4",children:[A.jsx("h1",{className:`text-4xl md:text-6xl font-serif text-gold-400 tracking-widest mb-6 transition-all duration-1000 transform
            ${e>=1?"opacity-100 translate-y-0 blur-0":"opacity-0 translate-y-10 blur-sm"}`,children:"TARIK YALIN"}),A.jsx("h2",{className:`text-xl md:text-3xl font-light text-white tracking-[0.3em] uppercase transition-all duration-1000 delay-300 transform
            ${e>=1?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:"Hair Design"}),A.jsx("div",{className:`w-32 h-[1px] bg-gradient-to-r from-transparent via-gold-500 to-transparent mx-auto my-8 transition-all duration-1000 delay-500
          ${e>=1?"w-32 opacity-100":"w-0 opacity-0"}`}),A.jsx("div",{className:`text-2xl font-serif italic text-gray-300 transition-all duration-1000 transform
            ${e>=2?"opacity-100 scale-100":"opacity-0 scale-95"}`,children:"Hogeldiniz"})]}),A.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1633681926022-84c23e8cb2d6?q=80&w=2070')] bg-cover bg-center opacity-20 mix-blend-overlay"})]})},gU="905335494014",yU=({currentUser:n,onComplete:e,onCancel:t,onLoginRequired:s})=>{const[r,l]=ce.useState("SERVICE"),[u,d]=ce.useState(null),[g,p]=ce.useState(null),[_,T]=ce.useState(qi()),[S,x]=ce.useState(null),[U,z]=ce.useState([]),[M,F]=ce.useState([]),[Z,Q]=ce.useState(!1),re=!n;ce.useEffect(()=>{yf().then(O=>{z(O.filter(ee=>ee.role===at.STAFF||ee.role===at.ADMIN))});const he=qp(O=>{F(O)});return()=>he()},[]);const de=()=>{const he=[];let O=10;const ee=20;for(let H=O;H<ee;H++)he.push(`${H}:00`),he.push(`${H}:30`);return he},ue=he=>!g||!_?!1:M.some(O=>O.staffId===g.id&&O.date===_&&O.time===he),N=he=>{d(he),l("STAFF")},D=he=>{p(he),l("DATETIME")},I=he=>{x(he),l(re?"GUEST_CONFIRM":"CONFIRM")},P=async()=>{if(!(!u||!g||!_||!S||!n)){Q(!0);try{const he={customerId:n.id,customerName:n.name,staffId:g.id,staffName:g.name,date:_,time:S,serviceId:u.id,serviceName:u.name,status:"pending"};await mA(he),e()}catch(he){alert("Randevu oluturulurken bir hata olutu."),console.error(he)}finally{Q(!1)}}},k=()=>{if(!u||!g||!_||!S)return"";const O=new Date(_).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"});return`Merhaba, randevu almak istiyorum.

 *Randevu Detaylar:*

 *Hizmet:* ${u.name}
 *Personel:* ${g.name}
 *Tarih:* ${O}
 *Saat:* ${S}
 *Fiyat:* ${u.price}

Randevuyu onaylayabilir misiniz?`},q=()=>{const he=k(),O=encodeURIComponent(he),ee=`https://wa.me/${gU}?text=${O}`;window.open(ee,"_blank")},V=()=>A.jsxs("div",{className:"space-y-4 animate-slide-up",children:[A.jsx("h3",{className:"text-xl font-serif text-white mb-6",children:"Hizmet Seimi"}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:jr.map(he=>A.jsxs(fn,{onClick:()=>N(he),className:"group flex items-center gap-4 active:bg-gold-500/10 md:hover:bg-gold-500/10 border-white/10 cursor-pointer",children:[A.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 border border-white/20",children:A.jsx("img",{src:he.image,alt:he.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform"})}),A.jsxs("div",{className:"flex-1 text-left",children:[A.jsx("div",{className:"font-medium text-white group-hover:text-gold-400 transition-colors",children:he.name}),A.jsxs("div",{className:"text-xs text-gray-400",children:[he.durationMin," Dakika"]})]}),A.jsxs("div",{className:"text-gold-400 font-bold",children:["",he.price]})]},he.id))})]}),Ie=()=>A.jsxs("div",{className:"space-y-4 animate-slide-up",children:[A.jsx("h3",{className:"text-xl font-serif text-white mb-6",children:"Personel Seimi"}),A.jsx("div",{className:"grid grid-cols-1 gap-3",children:U.length===0?A.jsx("div",{className:"text-gray-400 text-center py-4",children:"Personel listesi ykleniyor..."}):U.map(he=>A.jsxs(fn,{onClick:()=>D(he),className:"flex items-center gap-4 active:bg-white/10 md:hover:bg-white/10 cursor-pointer",children:[A.jsx("img",{src:he.avatar||"https://via.placeholder.com/150",alt:he.name,className:"w-14 h-14 rounded-full border-2 border-gold-500/50 object-cover"}),A.jsxs("div",{className:"flex-1 text-left",children:[A.jsx("div",{className:"font-bold text-white",children:he.name}),A.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wider",children:he.specialty||he.role})]}),A.jsx(Te,{name:"chevronRight",className:"text-gray-600"})]},he.id))})]}),Ge=()=>{const he=de();return A.jsxs("div",{className:"space-y-6 animate-slide-up",children:[A.jsx("h3",{className:"text-xl font-serif text-white",children:"Tarih ve Saat"}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-sm text-gray-400",children:"Tarih"}),A.jsx("input",{type:"date",value:_,min:qi(),onChange:O=>T(O.target.value),className:"w-full glass-input p-4 rounded-xl text-lg md:text-base appearance-none"})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("label",{className:"text-sm text-gray-400",children:["Uygun Saatler (",g==null?void 0:g.name,")"]}),A.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3 max-h-80 overflow-y-auto pr-2 custom-scrollbar pb-10",children:he.map(O=>{const ee=ue(O);return A.jsx("button",{disabled:ee,onClick:()=>I(O),className:`
                    py-3 md:py-2 rounded-lg text-base font-medium transition-all shadow-sm
                    ${ee?"bg-red-500/10 text-red-400 cursor-not-allowed border border-red-500/20":"bg-white/5 text-white active:bg-gold-500 active:text-black md:hover:bg-gold-500 md:hover:text-black border border-white/10"}
                  `,children:O},O)})}),A.jsxs("div",{className:"flex gap-4 text-xs mt-2",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:"w-2 h-2 rounded-full bg-white/20"})," Bo"]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500/50"})," Dolu"]})]})]})]})},W=()=>A.jsxs("div",{className:"space-y-6 animate-slide-up text-center",children:[A.jsx("div",{className:"w-20 h-20 bg-gold-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Te,{name:"calendar",size:40,className:"text-gold-400"})}),A.jsx("h3",{className:"text-2xl font-serif text-white",children:"Randevu Detaylar"}),A.jsx("p",{className:"text-gray-400",children:"Randevunu tamamlamak iin bir seenek se"}),A.jsxs("div",{className:"bg-white/5 rounded-xl p-6 space-y-4 text-left border border-white/10",children:[A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Hizmet"}),A.jsx("span",{className:"font-medium",children:u==null?void 0:u.name})]}),A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Personel"}),A.jsx("span",{className:"font-medium",children:g==null?void 0:g.name})]}),A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Tarih"}),A.jsx("span",{className:"font-medium",children:_})]}),A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Saat"}),A.jsx("span",{className:"font-medium",children:S})]}),A.jsxs("div",{className:"flex justify-between pt-2",children:[A.jsx("span",{className:"text-gold-400",children:"Toplam"}),A.jsxs("span",{className:"text-xl font-bold text-gold-400",children:["",u==null?void 0:u.price]})]})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("button",{onClick:()=>s&&s(),className:"w-full font-bold py-4 rounded-xl transition-all shadow-lg flex justify-center items-center gap-3 bg-gold-500 text-black hover:bg-gold-400",children:[A.jsx(Te,{name:"user",size:20}),"Giri Yap ve Randevuyu Tamamla"]}),A.jsxs("button",{onClick:q,className:"w-full font-bold py-4 rounded-xl transition-all shadow-lg flex justify-center items-center gap-3 bg-green-600 text-white hover:bg-green-500",children:[A.jsx(Te,{name:"whatsapp",size:20}),"WhatsApp ile Randevu Planla"]})]}),A.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"WhatsApp ile randevu talebinizi dorudan iletebilirsiniz."})]}),le=()=>A.jsxs("div",{className:"space-y-6 animate-slide-up text-center",children:[A.jsx("div",{className:"w-20 h-20 bg-gold-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Te,{name:"check",size:40,className:"text-gold-400"})}),A.jsx("h3",{className:"text-2xl font-serif text-white",children:"Randevu zeti"}),A.jsxs("div",{className:"bg-white/5 rounded-xl p-6 space-y-4 text-left border border-white/10",children:[A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Hizmet"}),A.jsx("span",{className:"font-medium",children:u==null?void 0:u.name})]}),A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Personel"}),A.jsx("span",{className:"font-medium",children:g==null?void 0:g.name})]}),A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Tarih"}),A.jsx("span",{className:"font-medium",children:_})]}),A.jsxs("div",{className:"flex justify-between border-b border-white/10 pb-2",children:[A.jsx("span",{className:"text-gray-400",children:"Saat"}),A.jsx("span",{className:"font-medium",children:S})]}),A.jsxs("div",{className:"flex justify-between pt-2",children:[A.jsx("span",{className:"text-gold-400",children:"Toplam"}),A.jsxs("span",{className:"text-xl font-bold text-gold-400",children:["",u==null?void 0:u.price]})]})]}),A.jsx("button",{onClick:P,disabled:Z,className:`w-full font-bold py-4 rounded-xl transition-colors shadow-lg shadow-gold-500/20 flex justify-center items-center gap-2
          ${Z?"bg-gray-700 cursor-wait text-gray-300":"bg-gold-500 text-black active:bg-gold-600 md:hover:bg-gold-400"}
        `,children:Z?"leniyor...":"Randevuyu Onayla"})]}),Ee=re?["Service","Staff","Time","Details"]:["Service","Staff","Time","Confirm"],Ue=re?["SERVICE","STAFF","DATETIME","GUEST_CONFIRM"]:["SERVICE","STAFF","DATETIME","CONFIRM"];return A.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[A.jsx("div",{className:"flex items-center justify-between mb-8 px-4",children:Ee.map((he,O)=>{const ee=Ue.indexOf(r);return A.jsx("div",{className:"flex flex-col items-center",children:A.jsx("div",{className:`w-3 h-3 rounded-full transition-colors duration-300 ${O<=ee?"bg-gold-500":"bg-gray-700"}`})},he)})}),A.jsxs(fn,{className:"relative min-h-[400px]",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-red-400 hover:bg-white/5 rounded-full transition-all z-10",title:"Kapat",children:A.jsx(Te,{name:"close",size:24})}),r==="SERVICE"&&V(),r==="STAFF"&&Ie(),r==="DATETIME"&&Ge(),r==="GUEST_CONFIRM"&&W(),r==="CONFIRM"&&le(),r!=="SERVICE"&&r!=="GUEST_CONFIRM"&&r!=="CONFIRM"&&A.jsxs("button",{onClick:()=>{r==="STAFF"&&l("SERVICE"),r==="DATETIME"&&l("STAFF")},className:"mt-6 text-sm text-gray-400 hover:text-white flex items-center gap-1 p-2",children:[A.jsx("span",{className:"rotate-180 inline-block",children:A.jsx(Te,{name:"chevronRight",size:14})})," Geri"]})]})]})},vU=({onLogin:n,onClose:e,onSwitchToAdmin:t})=>{const[s,r]=ce.useState(!0),[l,u]=ce.useState(!1),[d,g]=ce.useState(null),[p,_]=ce.useState(""),[T,S]=ce.useState(""),[x,U]=ce.useState(""),z=async M=>{M.preventDefault(),g(null),u(!0);try{if(s){const F=await dA(T,x);F?F.role==="ADMIN"||F.role==="STAFF"?g("Personel girii iin ltfen Ynetici Panelini kullann."):n(F):g("Telefon numaras veya ifre hatal.")}else{if(!p||!T||!x){g("Ltfen tm alanlar doldurun."),u(!1);return}const F=await hA(p,T,x);n(F)}}catch(F){console.error(F),g(F.message||"Bir hata olutu.")}finally{u(!1)}};return A.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70 backdrop-blur-md animate-fade-in",children:A.jsxs(fn,{className:"w-full max-w-md relative overflow-hidden",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white z-10",children:A.jsx(Te,{name:"close",size:24})}),A.jsxs("div",{className:"flex border-b border-white/10 mb-6",children:[A.jsx("button",{onClick:()=>{r(!0),g(null)},className:`flex-1 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${s?"text-gold-400 border-b-2 border-gold-400":"text-gray-500 hover:text-gray-300"}`,children:"Giri Yap"}),A.jsx("button",{onClick:()=>{r(!1),g(null)},className:`flex-1 py-3 text-sm font-bold uppercase tracking-wider transition-colors ${s?"text-gray-500 hover:text-gray-300":"text-gold-400 border-b-2 border-gold-400"}`,children:"Kayt Ol"})]}),A.jsxs("div",{className:"text-center mb-6",children:[A.jsx(Te,{name:s?"user":"sparkles",size:40,className:"text-gold-400 mx-auto mb-2"}),A.jsx("h3",{className:"text-xl font-serif text-white",children:s?"Tekrar Hogeldiniz":"TYRANDEVU Ailesine Katln"})]}),A.jsxs("form",{onSubmit:z,className:"space-y-4",children:[!s&&A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Ad Soyad"}),A.jsx("input",{type:"text",value:p,onChange:M=>_(M.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:"rn: Ahmet Ylmaz"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"Telefon Numaras"}),A.jsx("input",{type:"tel",value:T,onChange:M=>S(M.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:"0555 555 55 55"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("label",{className:"text-xs text-gray-400 ml-1",children:"ifre"}),A.jsx("input",{type:"password",value:x,onChange:M=>U(M.target.value),className:"w-full glass-input p-3 rounded-xl",placeholder:""})]}),d&&A.jsx("div",{className:"text-red-400 text-sm text-center bg-red-400/10 p-2 rounded-lg",children:d}),A.jsx("button",{type:"submit",disabled:l,className:`w-full py-4 rounded-xl font-bold text-black transition-all mt-4
              ${l?"bg-gray-600 cursor-wait":"bg-gold-500 hover:bg-gold-400 shadow-lg shadow-gold-500/20"}
            `,children:l?"leniyor...":s?"Giri Yap":"Hesap Olutur"})]}),A.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:A.jsxs("button",{onClick:t,className:"text-xs text-gray-500 hover:text-gold-400 transition-colors uppercase tracking-widest font-semibold flex items-center justify-center gap-1 mx-auto",children:[A.jsx(Te,{name:"shield",size:12}),"Personel / Ynetici Girii"]})})]})})},_U=({onLogin:n,onClose:e,onSwitchToCustomer:t})=>{const[s,r]=ce.useState(""),[l,u]=ce.useState(""),[d,g]=ce.useState(null),[p,_]=ce.useState(!1),T=async S=>{S.preventDefault(),_(!0),g(null);try{const x=await dA(s,l);x?x.role==="CUSTOMER"?g("Bu panelden sadece yetkili personel giri yapabilir."):n(x):g("Giri bilgileri hatal.")}catch(x){console.error(x),g("Balant hatas.")}finally{_(!1)}};return A.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-fade-in",children:A.jsxs(fn,{className:"w-full max-w-sm relative border-red-500/20 shadow-red-900/20",children:[A.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:A.jsx(Te,{name:"close",size:24})}),A.jsxs("div",{className:"text-center space-y-6 py-4",children:[A.jsx("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-500/30",children:A.jsx(Te,{name:"shield",size:32,className:"text-red-400"})}),A.jsx("h3",{className:"text-xl font-serif text-white",children:"Ynetici & Personel Girii"}),A.jsxs("form",{onSubmit:T,className:"space-y-4",children:[A.jsx("input",{type:"text",value:s,onChange:S=>r(S.target.value),placeholder:"Kullanc No / Telefon",className:"w-full glass-input p-3 rounded-lg border-red-500/30 focus:border-red-500"}),A.jsx("input",{type:"password",value:l,onChange:S=>u(S.target.value),placeholder:"ifre",className:"w-full glass-input p-3 rounded-lg border-red-500/30 focus:border-red-500"}),d&&A.jsx("div",{className:"text-red-400 text-sm",children:d}),A.jsx("button",{type:"submit",disabled:p,className:"w-full bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded-lg transition-colors shadow-lg shadow-red-600/20",children:p?"Kontrol Ediliyor...":"Giri Yap"})]}),A.jsx("div",{className:"mt-4 pt-4 border-t border-white/10 text-center",children:A.jsx("button",{onClick:t,className:"text-xs text-gray-500 hover:text-white transition-colors",children:" Mteri Giriine Dn"})})]})]})})},TU=({currentUser:n})=>{const[e,t]=ce.useState([]),[s,r]=ce.useState(null),[l,u]=ce.useState(""),[d,g]=ce.useState(""),[p,_]=ce.useState(!1);ce.useEffect(()=>{const M=qp(F=>{const Z=F.filter(Q=>Q.customerId===n.id);Z.sort((Q,re)=>new Date(re.date).getTime()-new Date(Q.date).getTime()),t(Z)});return()=>M()},[n.id]);const T=(M,F)=>{M.stopPropagation(),r(F.id),u(F.date),g(F.time)},S=async M=>{if(M.stopPropagation(),!(!s||!l||!d)){_(!0);try{await mN(s,l,d),alert("Deiiklik talebiniz iletildi. Admin onay bekleniyor."),r(null)}catch(F){console.error(F),alert("Hata olutu.")}finally{_(!1)}}},x=async(M,F)=>{if(M.stopPropagation(),!!confirm("Deiiklik talebini iptal etmek istediinize emin misiniz?"))try{await pN(F)}catch(Z){console.error(Z),alert("lem baarsz")}},U=async(M,F)=>{if(M.stopPropagation(),!!confirm("Randevuyu tamamen PTAL etmek zeresiniz. Onaylyor musunuz?"))try{await dN(F)}catch(Z){console.error(Z),alert("ptal ilemi baarsz")}},z=async(M,F,Z,Q)=>{if(M.stopPropagation(),!!Q){_(!0);try{Z?(await _N(F,Q.newDate,Q.newTime),alert("Yeni randevu saati onayland!")):await TN(F)}catch(re){console.error(re),alert("lem baarsz.")}finally{_(!1)}}};return e.length===0?null:A.jsxs("div",{className:"animate-slide-up mt-8",children:[A.jsxs("h3",{className:"text-xl font-serif text-white mb-4 flex items-center gap-2",children:[A.jsx(Te,{name:"calendar",className:"text-gold-400"}),"Randevularm"]}),A.jsx("div",{className:"space-y-4",children:e.map(M=>A.jsxs(fn,{className:`relative border-l-4 ${M.status==="cancelled"?"border-l-red-500 opacity-60":"border-l-gold-500"}`,children:[M.adminProposal&&M.adminProposal.status==="pending"&&A.jsxs("div",{className:"mb-4 bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 animate-pulse",children:[A.jsxs("div",{className:"flex items-center gap-2 text-blue-400 font-bold text-sm mb-2",children:[A.jsx(Te,{name:"sparkles",size:16}),"Salon nerisi (Deiiklik Teklifi)"]}),A.jsx("div",{className:"text-gray-300 text-xs mb-3",children:"Salonumuz randevu saatiniz iin bir deiiklik neriyor:"}),A.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-2 rounded mb-3",children:[A.jsxs("div",{className:"text-gray-500 line-through text-xs",children:[M.date," ",M.time]}),A.jsx(Te,{name:"chevronRight",size:12,className:"text-blue-500"}),A.jsxs("div",{className:"text-white font-bold text-sm",children:[M.adminProposal.newDate," ",M.adminProposal.newTime]})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:F=>z(F,M.id,!0,M.adminProposal),disabled:p,className:"flex-1 bg-blue-500 text-white text-xs font-bold py-2 rounded hover:bg-blue-400",children:"Kabul Et"}),A.jsx("button",{onClick:F=>z(F,M.id,!1,M.adminProposal),disabled:p,className:"flex-1 bg-white/10 text-white text-xs font-bold py-2 rounded hover:bg-white/20",children:"Reddet"})]})]}),A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{className:"font-bold text-lg text-white flex items-center gap-2",children:[M.serviceName,M.status==="cancelled"&&A.jsx("span",{className:"text-xs bg-red-500 text-white px-2 py-0.5 rounded",children:"PTAL EDLD"})]}),A.jsxs("div",{className:"text-gray-300 flex items-center gap-2",children:[A.jsx(Te,{name:"user",size:14}),M.staffName]}),A.jsxs("div",{className:"text-gold-400 font-mono text-sm flex items-center gap-2",children:[A.jsx(Te,{name:"calendar",size:14}),M.date," ",A.jsx("span",{className:"text-white/50",children:"|"})," ",M.time]}),A.jsxs("div",{className:"flex gap-2 mt-2",children:[M.status!=="cancelled"&&A.jsx(fC,{status:M.status}),M.changeRequest&&M.changeRequest.status==="pending"&&A.jsxs("span",{className:"text-xs px-2 py-1 rounded-full border border-blue-500/50 bg-blue-500/10 text-blue-400 flex items-center gap-1 animate-pulse",children:[A.jsx(Te,{name:"sparkles",size:10})," Deiiklik Bekleniyor"]}),M.changeRequest&&M.changeRequest.status==="rejected"&&A.jsx("span",{className:"text-xs px-2 py-1 rounded-full border border-red-500/50 bg-red-500/10 text-red-400",children:"Deiiklik Reddedildi"})]})]}),A.jsx("div",{className:"w-full md:w-auto",children:M.status!=="cancelled"&&A.jsx(A.Fragment,{children:s===M.id?A.jsxs("div",{className:"bg-white/10 p-4 rounded-lg space-y-3 animate-fade-in",onClick:F=>F.stopPropagation(),children:[A.jsx("div",{className:"text-sm text-gold-400 font-bold mb-1",children:"Yeni Tarih & Saat Sein"}),A.jsx("input",{type:"date",value:l,min:qi(),onChange:F=>u(F.target.value),className:"w-full glass-input p-2 rounded text-sm"}),A.jsxs("select",{value:d,onChange:F=>g(F.target.value),className:"w-full glass-input p-2 rounded text-sm",children:[A.jsx("option",{value:"",className:"bg-slate-900",children:"Saat Sein"}),Array.from({length:20},(F,Z)=>{const Q=Math.floor(Z/2)+10,re=Z%2===0?"00":"30";return`${Q}:${re}`}).map(F=>A.jsx("option",{value:F,className:"bg-slate-900 text-white",children:F},F))]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:S,disabled:p,className:"flex-1 bg-gold-500 text-black text-xs font-bold py-2 rounded hover:bg-gold-400",children:p?"...":"Gnder"}),A.jsx("button",{onClick:F=>{F.stopPropagation(),r(null)},className:"flex-1 bg-white/10 text-white text-xs font-bold py-2 rounded hover:bg-white/20",children:"ptal"})]})]}):A.jsxs("div",{className:"flex flex-col gap-2",children:[M.changeRequest&&M.changeRequest.status==="pending"?A.jsxs("button",{onClick:F=>x(F,M.id),className:"w-full px-4 py-2 bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20 rounded-lg transition-all text-xs font-bold flex items-center justify-center gap-1",children:[A.jsx(Te,{name:"close",size:12})," Talebi Geri ek"]}):A.jsx("button",{onClick:F=>T(F,M),className:"w-full px-4 py-2 bg-white/5 border border-white/10 hover:border-gold-500 hover:text-gold-400 text-gray-300 rounded-lg transition-all text-xs font-bold",children:"Deiiklik Talep Et"}),A.jsx("button",{onClick:F=>U(F,M.id),className:"w-full px-4 py-2 bg-red-500/10 border border-red-500/30 text-red-400 hover:bg-red-500/20 rounded-lg transition-all text-xs font-bold",children:"Randevuyu ptal Et"})]})})})]})]},M.id))})]})},EU=({currentView:n,setCurrentView:e,currentUser:t,onLoginClick:s,onLogoutClick:r})=>{const l=u=>`
    flex flex-col items-center justify-center w-full h-full space-y-1
    transition-colors duration-200
    ${u?"text-gold-400":"text-gray-500 hover:text-gray-300"}
  `;return A.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-black/90 backdrop-blur-xl border-t border-white/10 z-50 pb-safe-bottom",children:A.jsxs("div",{className:"flex justify-around items-center h-full px-2",children:[A.jsxs("button",{onClick:()=>e("DASHBOARD"),className:l(n==="DASHBOARD"),children:[A.jsx(Te,{name:(t==null?void 0:t.role)===at.ADMIN||(t==null?void 0:t.role)===at.STAFF?"shield":"scissors",size:24}),A.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:(t==null?void 0:t.role)===at.ADMIN?"Panel":"Ana Sayfa"})]}),A.jsxs("button",{onClick:()=>e("AI_CONSULT"),className:l(n==="AI_CONSULT"),children:[A.jsx(Te,{name:"sparkles",size:24}),A.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:"AI Stil"})]}),t?A.jsxs("button",{onClick:r,className:l(!1),children:[A.jsxs("div",{className:"relative",children:[A.jsx("img",{src:t.avatar||"https://via.placeholder.com/150",alt:"Profile",className:"w-6 h-6 rounded-full border border-gold-500/50"}),A.jsx("div",{className:"absolute -bottom-1 -right-1 w-2.5 h-2.5 bg-green-500 rounded-full border border-black"})]}),A.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:"k"})]}):A.jsxs("button",{onClick:s,className:l(!1),children:[A.jsx(Te,{name:"user",size:24}),A.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:"Giri"})]})]})})};function SU(){const[n,e]=ce.useState(!0),[t,s]=ce.useState(null),[r,l]=ce.useState("DASHBOARD"),[u,d]=ce.useState(!1),[g,p]=ce.useState(!1),[_,T]=ce.useState(null),[S,x]=ce.useState(!1),[U,z]=ce.useState([]),[M,F]=ce.useState(!0),[Z,Q]=ce.useState(null);ce.useEffect(()=>{(async()=>{try{await cN();const k=await yf();z(k)}catch(k){console.error("Failed to load users",k),Q("Veritaban balants baarsz. Baz zellikler almayabilir."),setTimeout(()=>Q(null),5e3)}finally{F(!1)}})()},[]);const re=ce.useCallback(()=>{e(!1)},[]),de=P=>{s(P),d(!1),p(!1),P.role===at.ADMIN||P.role===at.STAFF?l("DASHBOARD"):S&&_&&(x(!1),l("BOOKING"))},ue=()=>{s(null),l("DASHBOARD"),T(null),x(!1)},N=()=>{l("BOOKING")},D=()=>{x(!0),d(!0)},I=()=>A.jsxs("div",{className:"flex flex-col min-h-screen",children:[A.jsx("nav",{className:"hidden md:block fixed top-0 left-0 right-0 z-50 glass-panel border-b border-white/10 backdrop-blur-xl transition-all",children:A.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:A.jsxs("div",{className:"flex items-center justify-between h-20",children:[A.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group select-none",onClick:()=>l("DASHBOARD"),children:[A.jsx("div",{className:"p-2 rounded-lg bg-gold-500/10 group-hover:bg-gold-500/20 transition-colors",children:A.jsx(Te,{name:"scissors",className:"text-gold-400",size:24})}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"text-lg font-serif tracking-wide font-bold leading-none",children:x0}),A.jsx("span",{className:"text-[0.6rem] text-gray-400 tracking-[0.2em] uppercase leading-none mt-1",children:"Hair Design"})]})]}),A.jsxs("div",{className:"flex items-center gap-8",children:[A.jsxs("button",{onClick:()=>l("DASHBOARD"),className:`text-sm uppercase tracking-widest hover:text-gold-400 transition-colors relative py-2 ${r==="DASHBOARD"?"text-gold-400":"text-gray-300"}`,children:["Ana Sayfa",r==="DASHBOARD"&&A.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gold-400 shadow-[0_0_10px_rgba(212,175,55,0.5)]"})]}),A.jsxs("button",{onClick:()=>l("AI_CONSULT"),className:`text-sm uppercase tracking-widest hover:text-gold-400 transition-colors relative py-2 ${r==="AI_CONSULT"?"text-gold-400":"text-gray-300"}`,children:["AI Stilist",r==="AI_CONSULT"&&A.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gold-400 shadow-[0_0_10px_rgba(212,175,55,0.5)]"})]}),A.jsx("div",{className:"flex items-center gap-4 pl-8 border-l border-white/10",children:t?A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"text-right",children:[A.jsx("div",{className:"text-sm font-medium text-white",children:t.name}),A.jsx("div",{className:"text-xs text-gold-500 uppercase font-bold tracking-wider",children:t.role})]}),A.jsx("img",{src:t.avatar||"https://via.placeholder.com/150",alt:"Profile",className:"w-10 h-10 rounded-full border border-gold-500/50"}),A.jsx("button",{onClick:ue,className:"text-gray-400 hover:text-red-400 transition-colors",title:"k Yap",children:A.jsx(Te,{name:"logout",size:20})})]}):A.jsx("button",{"data-testid":"login-button",onClick:()=>d(!0),className:"px-6 py-2 bg-gold-500/10 hover:bg-gold-500 text-gold-400 hover:text-black border border-gold-500 rounded-lg transition-all text-sm font-bold tracking-wide",children:"Giri Yap"})})]})]})})}),A.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-black/80 backdrop-blur-md border-b border-white/10 h-16 flex items-center justify-center",children:A.jsxs("div",{className:"flex items-center gap-2",onClick:()=>l("DASHBOARD"),children:[A.jsx(Te,{name:"scissors",className:"text-gold-400",size:20}),A.jsx("span",{className:"text-lg font-serif font-bold text-white tracking-widest",children:x0})]})}),A.jsxs("main",{className:"flex-1 pt-20 md:pt-28 pb-24 md:pb-10 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full",children:[t&&(t.role===at.ADMIN||t.role===at.STAFF)&&r==="DASHBOARD"?A.jsx(dU,{}):r==="DASHBOARD"&&A.jsxs("div",{className:"space-y-6 md:space-y-8 animate-slide-up",children:[A.jsxs("div",{className:"md:hidden text-center space-y-2 mb-4",children:[A.jsx("h2",{className:"text-2xl font-serif text-white",children:t?`Merhaba, ${t.name.split(" ")[0]}`:"Hogeldiniz"}),A.jsx("p",{className:"text-gray-400 text-sm",children:"TYRANDEVU Premium Deneyimi"})]}),A.jsxs("div",{className:"hidden md:flex flex-col md:flex-row justify-between items-end gap-4 border-b border-white/10 pb-6",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-4xl font-serif text-white",children:t?`Hogeldiniz, ${t.name}`:"Stilinizi Kefedin"}),A.jsx("p",{className:"text-gray-400 mt-2 text-lg",children:t?"Bugn kendin iin bir iyilik yap.":"Premium sa tasarm ve kiisel bakm deneyimi."})]}),(t==null?void 0:t.role)===at.CUSTOMER&&A.jsxs("div",{className:"px-4 py-2 bg-gold-500/10 border border-gold-500/20 rounded-full text-gold-400 text-sm flex items-center gap-2",children:[A.jsx(Te,{name:"check",size:16})," Premium ye"]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[A.jsxs(fn,{onClick:()=>l("AI_CONSULT"),className:"group min-h-[200px] md:min-h-[300px] flex flex-col justify-center items-center text-center p-6 md:p-8 border-gold-500/20 active:scale-95 md:active:scale-100 md:hover:border-gold-500/50 bg-gradient-to-br from-white/5 to-transparent hover:to-gold-500/5 relative overflow-hidden transition-all duration-300",children:[A.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-50",children:A.jsx(Te,{name:"sparkles",size:80,className:"text-white/5"})}),A.jsx("div",{className:"w-16 h-16 md:w-24 md:h-24 rounded-full bg-gold-500/10 flex items-center justify-center mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-500 border border-gold-500/20 z-10",children:A.jsx(Te,{name:"sparkles",size:32,className:"text-gold-400 md:w-12 md:h-12"})}),A.jsx("h3",{className:"text-xl md:text-3xl font-serif text-white mb-2 z-10",children:"AI Stil Danman"}),A.jsx("p",{className:"text-gray-400 text-sm md:text-base max-w-xs mx-auto leading-relaxed z-10",children:"Yz ekline en uygun sa modelini kefet."}),A.jsx("button",{className:"mt-4 md:mt-6 px-6 py-2 bg-white/5 md:hover:bg-gold-500 md:hover:text-black rounded-full text-sm transition-colors z-10 border border-white/10",children:"Hemen Dene"})]}),A.jsxs(fn,{onClick:N,className:"group min-h-[200px] md:min-h-[300px] flex flex-col justify-center items-center text-center p-6 md:p-8 border-white/10 active:scale-95 md:active:scale-100 md:hover:border-white/30 bg-gradient-to-bl from-white/5 to-transparent hover:to-white/10 relative overflow-hidden transition-all duration-300",children:[A.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-50",children:A.jsx(Te,{name:"calendar",size:80,className:"text-white/5"})}),A.jsx("div",{className:"w-16 h-16 md:w-24 md:h-24 rounded-full bg-white/5 flex items-center justify-center mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-500 border border-white/10 z-10",children:A.jsx(Te,{name:"calendar",size:32,className:"text-white md:w-12 md:h-12"})}),A.jsx("h3",{className:"text-xl md:text-3xl font-serif text-white mb-2 z-10",children:"Randevu Olutur"}),A.jsx("p",{className:"text-gray-400 text-sm md:text-base max-w-xs mx-auto leading-relaxed z-10",children:"Hzlca yerini ayrt."}),A.jsx("button",{className:"mt-4 md:mt-6 px-6 py-2 bg-white/5 md:hover:bg-white md:hover:text-black rounded-full text-sm transition-colors z-10 border border-white/10",children:"Randevu Al"})]})]}),t&&t.role===at.CUSTOMER&&A.jsx(TU,{currentUser:t}),A.jsxs("div",{className:"mt-8 md:mt-16",children:[A.jsxs("h3",{className:"text-lg font-serif text-white mb-4 md:mb-6 flex items-center gap-2",children:[A.jsx("span",{className:"w-8 h-[1px] bg-gold-500"})," Popler Hizmetler"]}),A.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:["Sa Kesimi","Sakal Tasarm","Cilt Bakm","Boya","Fn","Keratin","Manikr","Pedikr"].map((P,k)=>A.jsx("div",{className:"glass-panel p-3 md:p-4 rounded-xl text-center active:bg-white/10 md:hover:bg-white/10 cursor-pointer transition-colors border-transparent md:hover:border-gold-500/20",children:A.jsx("span",{className:"text-gray-300 font-medium text-xs md:text-sm",children:P})},k))})]})]}),r==="AI_CONSULT"&&A.jsx(uU,{onClose:()=>l("DASHBOARD")}),r==="BOOKING"&&A.jsx(yU,{currentUser:t,onComplete:()=>{alert("Randevunuz baaryla oluturuldu!"),l("DASHBOARD")},onCancel:()=>l("DASHBOARD"),onLoginRequired:D})]}),A.jsx(EU,{currentView:r,setCurrentView:l,currentUser:t,onLoginClick:()=>d(!0),onLogoutClick:ue}),u&&A.jsx(vU,{onLogin:de,onClose:()=>d(!1),onSwitchToAdmin:()=>{d(!1),p(!0)}}),g&&A.jsx(_U,{onLogin:de,onClose:()=>p(!1),onSwitchToCustomer:()=>{p(!1),d(!0)}})]});return A.jsxs(A.Fragment,{children:[Z&&A.jsxs("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-[200] bg-red-500/90 backdrop-blur-md text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-fade-in",children:[A.jsx(Te,{name:"close",size:20}),A.jsx("span",{className:"text-sm",children:Z})]}),n?A.jsx(pU,{onComplete:re}):I()]})}class AU extends ce.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error Boundary caught an error:",e,t)}render(){return this.state.hasError?A.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:A.jsxs("div",{className:"max-w-md w-full glass-panel rounded-2xl p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:A.jsx(Te,{name:"close",size:32,className:"text-red-400"})}),A.jsx("h1",{className:"text-2xl font-serif text-white mb-4",children:"Bir Sorun Olutu"}),A.jsx("p",{className:"text-gray-400 mb-6",children:"Uygulamay yklerken bir hata olutu. Ltfen sayfay yenileyin."}),A.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gold-500 hover:bg-gold-400 text-black rounded-lg font-bold transition-colors",children:"Sayfay Yenile"}),this.state.error&&A.jsxs("details",{className:"mt-6 text-left",children:[A.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Hata Detay"}),A.jsx("pre",{className:"mt-2 text-xs text-red-400 bg-black/30 p-3 rounded overflow-auto max-h-32",children:this.state.error.message})]})]})}):this.props.children}}const dC=document.getElementById("root");if(!dC)throw new Error("Could not find root element to mount to");const CU=ex.createRoot(dC);CU.render(A.jsx(Jw.StrictMode,{children:A.jsx(AU,{children:A.jsx(SU,{})})}));
